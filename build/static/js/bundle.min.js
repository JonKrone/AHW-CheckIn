!function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],h=0,f=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={0:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;o.push([0,1]),n()}([function(e,t,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),e.exports=n(8)},,,,function(e,t){(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(e,t,n){},function(e,t,n){}]])},function(e,t){
/*! For license information please see 2.2b4640eb.chunk.js.LICENSE.txt */
(this["webpackJsonpahw-check-in"]=this["webpackJsonpahw-check-in"]||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(12)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(4),a=n(5),s=n(8),u=n(9),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Logger("@firebase/app"),p=(Object.defineProperty(m.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),m.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},m.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},m.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},m.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){d.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},m.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},m.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},m);function m(e,t,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var y=function e(){var t,n,r,i,u=(t=p,n={},r=new Map,(i={__esModule:!0,initializeApp:function(e,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var o=r;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(n,s))throw l.create("duplicate-app",{appName:s});var u=new t(e,o,i);return n[s]=u},app:c,registerVersion:function(e,t,n){var r,i=null!==(r=f[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}h(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:"7.8.1",INTERNAL:{registerComponent:h,removeApp:function(e){delete n[e]},components:r,useAsService:function(e,t){return"serverAuth"===t?null:t}}}).default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),c.App=t,i);function c(e){if(e=e||"[DEFAULT]",!a.contains(n,e))throw l.create("no-app",{appName:e});return n[e]}function h(e){var s,u,h=e.name;if(r.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===e.type?i[h]:null;if(r.set(h,e),"PUBLIC"===e.type){var f=function(e){if(void 0===e&&(e=c()),"function"!=typeof e[h])throw l.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==e.serviceProps&&a.deepExtend(f,e.serviceProps),i[h]=f,t.prototype[h]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,h).apply(this,e.multipleInstances?t:[])}}try{for(var p=o.__values(Object.keys(n)),m=p.next();!m.done;m=p.next()){var y=m.value;n[y]._addComponent(e)}}catch(u){s={error:u}}finally{try{m&&!m.done&&(u=p.return)&&u.call(p)}finally{if(s)throw s.error}}return"PUBLIC"===e.type?i[h]:null}return u.INTERNAL=o.__assign(o.__assign({},u.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(u,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),u}(),g=(v.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if("VERSION"!==(null==(t=e.getComponent())?void 0:t.type))return null;var t,n=e.getImmediate();return n.library+"/"+n.version})).filter((function(e){return e})).join(" ")},v);function v(e){this.container=e}if(a.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&0<=b.indexOf("LITE")&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var w=y.initializeApp;y.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),w.apply(void 0,e)};var T,E=y;(T=E).INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new g(e)}),"PRIVATE")),T.registerVersion(h,"0.5.4",void 0),T.registerVersion("fire-js",""),t.default=E,t.firebase=E},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r,i=(r=n(1))&&"object"==typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.9.1","app"),e.exports=i},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return d})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return y})),n.d(t,"__await",(function(){return g})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return T})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return S}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){1<o.push([e,t,n,r])||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=d(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){var o,a,s,u;o=r,a=i,s=(t=e[n](t)).done,u=t.value,Promise.resolve(u).then((function(e){o({value:e,done:s})}),a)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";(function(e){function r(e,t){if(!e)throw u(t)}function i(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}function o(e){try{return c.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),s={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},u=function(e){return new Error("Firebase Database ("+s.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=(f.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},f);function f(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var p,m=(p=Error,a.__extends(v,p),v),y=(g.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,t){return e.replace(b,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new m(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},g);function g(e,t,n){this.service=e,this.serviceName=t,this.errors=n}function v(e,t){var n=p.call(this,t)||this;return n.code=e,n.name="FirebaseError",Object.setPrototypeOf(n,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,y.prototype.create),n}var b=/\{\$([^}]+)}/g;function w(e){return JSON.parse(e)}function T(e){var t={},n={},r={},i="";try{var a=e.split(".");t=w(o(a[0])||""),n=w(o(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}}var E=(S.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},S.prototype.compress_=function(e,t){t=t||0;var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)a=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},S.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},S.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},S);function S(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}var I=(k.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},k.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},k.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},k.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e){if("object"==typeof e&&null!==e)for(var t=0,n=["next","error","complete"];t<n.length;t++){var r=n[t];if(r in e&&"function"==typeof e[r])return 1}}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},k.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},k.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},k.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},k.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},k);function k(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}function C(){}function N(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+r+" argument "}t.CONSTANTS=s,t.Deferred=h,t.ErrorFactory=y,t.FirebaseError=m,t.Sha1=E,t.assert=r,t.assertionError=u,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=c,t.base64Decode=o,t.base64Encode=function(e){var t=i(e);return c.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new I(e,t);return n.subscribe.bind(n)},t.decode=T,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=N,t.getUA=d,t.isAdmin=function(e){var t=T(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},t.isElectron=function(){return 0<=d().indexOf("Electron/")},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){var e=d();return 0<=e.indexOf("MSIE ")||0<=e.indexOf("Trident/")},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===s.NODE_CLIENT||!0===s.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isUWP=function(){return 0<=d().indexOf("MSAppHost/")},t.isValidFormat=function(e){var t=T(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=T(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&r<=n&&n<=i},t.issuedAtTime=function(e){var t=T(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=w,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:55296<=r&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(55296<=o&&o<=56319){var a=o-55296;r(++i<e.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(e.charCodeAt(i)-56320)}o<128?t[n++]=o:(o<2048?t[n++]=o>>6|192:(o<65536?t[n++]=o>>12|224:(t[n++]=o>>18|240,t[n++]=o>>12&63|128),t[n++]=o>>6&63|128),t[n++]=63&o|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(N(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(N(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(N(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(6))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(s[c]=n[c]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(5),o=(u.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},u.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},u.prototype.setServiceProps=function(e){return this.serviceProps=e,this},u),a=(s.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},s.prototype.getImmediate=function(e){var t=r.__assign({identifier:"[DEFAULT]",optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService(o);if(a)return a;if(i)return null;throw Error("Service "+this.name+" is not available")}catch(e){if(i)return null;throw e}},s.prototype.getComponent=function(){return this.component},s.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=e).instantiationMode)try{this.getOrInitializeService("[DEFAULT]")}catch(e){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),s=a[0],u=a[1],c=this.normalizeInstanceIdentifier(s);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},s.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},s.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},s.prototype.isComponentSet=function(){return null!=this.component},s.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,"[DEFAULT]"===e?void 0:e),this.instances.set(e,t)),t||null},s.prototype.normalizeInstanceIdentifier=function(e){return!this.component||this.component.multipleInstances?e:"[DEFAULT]"},s);function s(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}function u(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var c=(l.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},l.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},l.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},l.prototype.getProviders=function(){return Array.from(this.providers.values())},l);function l(e){this.name=e,this.providers=new Map}t.Component=o,t.ComponentContainer=c,t.Provider=a},function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}n.r(t),n.d(t,"LogLevel",(function(){return i})),n.d(t,"Logger",(function(){return c})),n.d(t,"setLogLevel",(function(){return h}));var i,o,a=[];function s(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var a=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}(o=i=i||{})[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";var u=i.INFO,c=(Object.defineProperty(l.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),l.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.DEBUG],e))},l.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.VERBOSE],e))},l.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.INFO],e))},l.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.WARN],e))},l.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.ERROR],e))},l);function l(e){this.name=e,this._logLevel=u,this._logHandler=s,a.push(this)}function h(e){a.forEach((function(t){t.logLevel=e}))}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(13)},,function(e,t,n){"use strict";var r=n(7),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var y="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function T(){}function E(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=w.prototype;var S=E.prototype=new T;S.constructor=E,r(S,w.prototype),S.isPureReactComponent=!0;var I={current:null},k={current:null},C=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:k.current}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var _=/\/+/g,x=[];function O(e,t,n,r){if(x.length){var i=x.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,x.length<10&&x.push(e)}function R(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+M(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+M(s=t[c],c);u+=e(s,l,r,i)}else if("function"==typeof(l=null!==t&&"object"==typeof t&&"function"==typeof(l=y&&t[y]||t["@@iterator"])?l:null))for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=n+M(s,c++),r,i);else if("object"===s)throw r=""+t,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return u}(e,"",t,n)}function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function L(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r,i,a=e.result,s=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,a,n,(function(e){return e})):null!=e&&(D(e)&&(i=s+(!(r=e).key||t&&t.key===e.key?"":(""+e.key).replace(_,"$&/")+"/")+n,e={$$typeof:o,type:r.type,key:i,ref:r.ref,props:r.props,_owner:r._owner}),a.push(e))}function U(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(_,"$&/")+"/"),R(e,F,t=O(t,o,r,i)),P(t)}function V(){var e=I.current;if(null===e)throw Error(g(321));return e}var B={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,L,t=O(null,null,t,n)),P(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!D(e))throw Error(g(143));return e}},createRef:function(){return{current:null}},Component:w,PureComponent:E,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return V().useCallback(e,t)},useContext:function(e,t){return V().useContext(e,t)},useEffect:function(e,t){return V().useEffect(e,t)},useImperativeHandle:function(e,t,n){return V().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return V().useLayoutEffect(e,t)},useMemo:function(e,t){return V().useMemo(e,t)},useReducer:function(e,t,n){return V().useReducer(e,t,n)},useRef:function(e){return V().useRef(e)},useState:function(e){return V().useState(e)},Fragment:s,Profiler:c,StrictMode:u,Suspense:d,createElement:A,cloneElement:function(e,t,n){if(null==e)throw Error(g(267,e));var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)C.call(t,l)&&!N.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},createFactory:function(e){var t=A.bind(null,e);return t.type=e,t},isValidElement:D,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r}};e.exports=B.default||B},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(14);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=null,u={};function c(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!h[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in n=(h[n]=t).eventTypes){var i=void 0,o=n[r],c=t,d=r;if(f.hasOwnProperty(d))throw Error(a(99,d));var p=(f[d]=o).phasedRegistrationNames;if(p){for(i in p)p.hasOwnProperty(i)&&l(p[i],c,d);i=!0}else i=!!o.registrationName&&(l(o.registrationName,c,d),!0);if(!i)throw Error(a(98,r,e))}}}}function l(e,t,n){if(d[e])throw Error(a(100,e));d[e]=t,p[e]=t.eventTypes[n].dependencies}var h=[],f={},d={},p={},m=!1,y=null,g=!1,v=null,b={onError:function(e){m=!0,y=e}};function w(e,t,n,r,i,o,a,s,u){m=!1,y=null,function(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}.apply(b,arguments)}var T=null,E=null,S=null;function I(e,t,n){var r=e.type||"unknown-event";e.currentTarget=S(n),function(e,t,n,r,i,o,s,u,c){if(w.apply(this,arguments),m){if(!m)throw Error(a(198));var l=y;m=!1,y=null,g||(g=!0,v=l)}}(r,t,void 0,e),e.currentTarget=null}function k(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?(Array.isArray(t)?e.push.apply(e,t):e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function C(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var N=null;function A(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)I(e,t[r],n[r]);else t&&I(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function D(e){if(null!==e&&(N=k(N,e)),e=N,N=null,e){if(C(e,A),N)throw Error(a(95));if(g)throw e=v,g=!1,v=null,e}}var _={injectEventPluginOrder:function(e){if(s)throw Error(a(101));s=Array.prototype.slice.call(e),c()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!u.hasOwnProperty(t)||u[t]!==r){if(u[t])throw Error(a(102,t));u[t]=r,n=!0}}n&&c()}};function x(e,t){var n=e.stateNode;if(!n)return null;var r=T(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var O=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;O.hasOwnProperty("ReactCurrentDispatcher")||(O.ReactCurrentDispatcher={current:null}),O.hasOwnProperty("ReactCurrentBatchConfig")||(O.ReactCurrentBatchConfig={suspense:null});var P=/^(.*)[\\\/]/,R="function"==typeof Symbol&&Symbol.for,M=R?Symbol.for("react.element"):60103,L=R?Symbol.for("react.portal"):60106,F=R?Symbol.for("react.fragment"):60107,U=R?Symbol.for("react.strict_mode"):60108,V=R?Symbol.for("react.profiler"):60114,B=R?Symbol.for("react.provider"):60109,q=R?Symbol.for("react.context"):60110,j=R?Symbol.for("react.concurrent_mode"):60111,z=R?Symbol.for("react.forward_ref"):60112,W=R?Symbol.for("react.suspense"):60113,K=R?Symbol.for("react.suspense_list"):60120,G=R?Symbol.for("react.memo"):60115,Q=R?Symbol.for("react.lazy"):60116;R&&Symbol.for("react.fundamental"),R&&Symbol.for("react.responder"),R&&Symbol.for("react.scope");var H="function"==typeof Symbol&&Symbol.iterator;function Y(e){return null!==e&&"object"==typeof e&&"function"==typeof(e=H&&e[H]||e["@@iterator"])?e:null}function X(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case F:return"Fragment";case L:return"Portal";case V:return"Profiler";case U:return"StrictMode";case W:return"Suspense";case K:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case q:return"Context.Consumer";case B:return"Context.Provider";case z:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case G:return X(e.type);case Q:if(e=1===e._status?e._result:null)return X(e)}return null}function J(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=X(e.type);n=null,r&&(n=X(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(P,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var $=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Z=null,ee=null,te=null;function ne(e){if(e=E(e)){if("function"!=typeof Z)throw Error(a(280));var t=T(e.stateNode);Z(e.stateNode,e.type,t)}}function re(e){ee?te?te.push(e):te=[e]:ee=e}function ie(){if(ee){var e=ee,t=te;if(te=ee=null,ne(e),t)for(e=0;e<t.length;e++)ne(t[e])}}function oe(e,t){return e(t)}function ae(e,t,n,r){return e(t,n,r)}function se(){}var ue=oe,ce=!1,le=!1;function he(){null===ee&&null===te||(se(),ie())}new Map;var fe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,de=Object.prototype.hasOwnProperty,pe={},me={};function ye(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ge[e]=new ye(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ge[t]=new ye(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ge[e]=new ye(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ge[e]=new ye(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ge[e]=new ye(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ge[e]=new ye(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){ge[e]=new ye(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){ge[e]=new ye(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){ge[e]=new ye(e,5,!1,e.toLowerCase(),null,!1)}));var ve=/[\-:]([a-z])/g;function be(e){return e[1].toUpperCase()}function we(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Te(e,t,n,r){var i,o=ge.hasOwnProperty(t)?ge[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,n,r){if(null==e||function(e,t,n,r){if(null===n||0!==n.type)switch(typeof t){case"function":case"symbol":return 1;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return}}(t,e,n,r))return 1;if(!r&&null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||e<1}}(n,o,r)&&(n=null),r||null===o?(i=t,(de.call(me,i)||!de.call(pe,i)&&(fe.test(i)?me[i]=!0:(pe[i]=!0,0)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Ee(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Se(e){e._valueTracker||(e._valueTracker=function(e){var t=Ee(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ie(e){if(e){var t=e._valueTracker;if(!t)return 1;var n=t.getValue(),r="";return e&&(r=Ee(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),1)}}function ke(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ce(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=we(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ne(e,t){null!=(t=t.checked)&&Te(e,"checked",t,!1)}function Ae(e,t){Ne(e,t);var n=we(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?_e(e,t.type,n):t.hasOwnProperty("defaultValue")&&_e(e,t.type,we(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function De(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function _e(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function xe(e,t){return e=i({children:void 0},t),n=t.children,o="",r.Children.forEach(n,(function(e){null!=e&&(o+=e)})),(t=o)&&(e.children=t),e;var n,o}function Oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+we(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Re(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw Error(a(92));if(Array.isArray(t)){if(!(t.length<=1))throw Error(a(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:we(n)}}function Me(e,t){var n=we(t.value),r=we(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ve,be);ge[t]=new ye(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ve,be);ge[t]=new ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ve,be);ge[t]=new ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){ge[e]=new ye(e,1,!1,e.toLowerCase(),null,!1)})),ge.xlinkHref=new ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){ge[e]=new ye(e,1,!1,e.toLowerCase(),null,!0)}));var Fe="http://www.w3.org/1999/xhtml";function Ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Be,qe,je=(qe=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Be=Be||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Be.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return qe(e,t)}))}:qe);function ze(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function We(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ke={animationend:We("Animation","AnimationEnd"),animationiteration:We("Animation","AnimationIteration"),animationstart:We("Animation","AnimationStart"),transitionend:We("Transition","TransitionEnd")},Ge={},Qe={};function He(e){if(Ge[e])return Ge[e];if(!Ke[e])return e;var t,n=Ke[e];for(t in n)if(n.hasOwnProperty(t)&&t in Qe)return Ge[e]=n[t];return e}$&&(Qe=document.createElement("div").style,"AnimationEvent"in window||(delete Ke.animationend.animation,delete Ke.animationiteration.animation,delete Ke.animationstart.animation),"TransitionEvent"in window||delete Ke.transitionend.transition);var Ye=He("animationend"),Xe=He("animationiteration"),Je=He("animationstart"),$e=He("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else for(e=t;0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return;);return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(a(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null!==o){if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}else{if(null===(r=i.return))break;n=r}}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var it,ot,at,st=!1,ut=[],ct=null,lt=null,ht=null,ft=new Map,dt=new Map,pt=[],mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),yt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function gt(e,t,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r}}function vt(e,t){switch(e){case"focus":case"blur":ct=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ht=null;break;case"pointerover":case"pointerout":ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function bt(e,t,n,r,i){return null===e||e.nativeEvent!==i?(e=gt(t,n,r,i),null!==t&&null!==(t=ar(t))&&ot(t)):e.eventSystemFlags|=r,e}function wt(e){var t=or(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){at(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Tt(e){if(null===e.blockedOn){var t=An(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null===t)return 1;var n=ar(t);return null!==n&&ot(n),e.blockedOn=t,0}}function Et(e,t,n){Tt(e)&&n.delete(t)}function St(){for(st=!1;0<ut.length;){var e=ut[0];if(null!==e.blockedOn){null!==(e=ar(e.blockedOn))&&it(e);break}var t=An(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:ut.shift()}null!==ct&&Tt(ct)&&(ct=null),null!==lt&&Tt(lt)&&(lt=null),null!==ht&&Tt(ht)&&(ht=null),ft.forEach(Et),dt.forEach(Et)}function It(e,t){e.blockedOn===t&&(e.blockedOn=null,st||(st=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,St)))}function kt(e){function t(t){return It(t,e)}if(0<ut.length){It(ut[0],e);for(var n=1;n<ut.length;n++){var r=ut[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ct&&It(ct,e),null!==lt&&It(lt,e),null!==ht&&It(ht,e),ft.forEach(t),dt.forEach(t),n=0;n<pt.length;n++)(r=pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<pt.length&&null===(n=pt[0]).blockedOn;)wt(n),null===n.blockedOn&&pt.shift()}function Ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Nt(e){for(;(e=e.return)&&5!==e.tag;);return e||null}function At(e,t,n){(t=x(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=k(n._dispatchListeners,t),n._dispatchInstances=k(n._dispatchInstances,e))}function Dt(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Nt(t);for(t=n.length;0<t--;)At(n[t],"captured",e);for(t=0;t<n.length;t++)At(n[t],"bubbled",e)}}function _t(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=x(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=k(n._dispatchListeners,t),n._dispatchInstances=k(n._dispatchInstances,e))}function xt(e){e&&e.dispatchConfig.registrationName&&_t(e._targetInst,null,e)}function Ot(e){C(e,Dt)}function Pt(){return!0}function Rt(){return!1}function Mt(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Pt:Rt,this.isPropagationStopped=Rt,this}function Lt(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Ft(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),this.eventPool.length<10&&this.eventPool.push(e)}function Ut(e){e.eventPool=[],e.getPooled=Lt,e.release=Ft}i(Mt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Pt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Pt)},persist:function(){this.isPersistent=Pt},isPersistent:Rt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Rt,this._dispatchInstances=this._dispatchListeners=null}}),Mt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Mt.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),((n.prototype=o).constructor=n).Interface=i({},r.Interface,e),n.extend=r.extend,Ut(n),n},Ut(Mt);var Vt=Mt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Bt=Mt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qt=Mt.extend({view:null,detail:null}),jt=qt.extend({relatedTarget:null});function zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Wt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Gt[e])&&!!t[e]}function Ht(){return Qt}for(var Yt=qt.extend({key:function(e){if(e.key){var t=Wt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Kt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ht,charCode:function(e){return"keypress"===e.type?zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Xt=0,Jt=0,$t=!1,Zt=!1,en=qt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ht,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Xt;return Xt=e.screenX,$t?"mousemove"===e.type?e.screenX-t:0:($t=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Jt;return Jt=e.screenY,Zt?"mousemove"===e.type?e.screenY-t:0:(Zt=!0,0)}}),tn=en.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),nn=en.extend({dataTransfer:null}),rn=qt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ht}),on=Mt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),an=en.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),sn=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Ye,"animationEnd",2],[Xe,"animationIteration",2],[Je,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[$e,"transitionEnd",2],["waiting","waiting",2]],un={},cn={},ln=0;ln<sn.length;ln++){var hn=sn[ln],fn=hn[0],dn=hn[1],pn=hn[2],mn="on"+(dn[0].toUpperCase()+dn.slice(1)),yn={phasedRegistrationNames:{bubbled:mn,captured:mn+"Capture"},dependencies:[fn],eventPriority:pn};un[dn]=yn,cn[fn]=yn}var gn={eventTypes:un,getEventPriority:function(e){return void 0!==(e=cn[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=cn[e];if(!i)return null;switch(e){case"keypress":if(0===zt(n))return null;case"keydown":case"keyup":e=Yt;break;case"blur":case"focus":e=jt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=nn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=rn;break;case Ye:case Xe:case Je:e=Vt;break;case $e:e=on;break;case"scroll":e=qt;break;case"wheel":e=an;break;case"copy":case"cut":case"paste":e=Bt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=tn;break;default:e=Mt}return Ot(t=e.getPooled(i,t,n,r)),t}},vn=o.unstable_UserBlockingPriority,bn=o.unstable_runWithPriority,wn=gn.getEventPriority,Tn=[];function En(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=or(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Ct(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=e.eventSystemFlags,s=null,u=0;u<h.length;u++){var c=h[u];(c=c&&c.extractEvents(r,t,o,i,a))&&(s=k(s,c))}D(s)}}var Sn=!0;function In(e,t){kn(t,e,!1)}function kn(e,t,n){switch(wn(t)){case 0:var r=function(e,t,n){ce||se();var r=Nn,i=ce;ce=!0;try{ae(r,e,t,n)}finally{(ce=i)||he()}}.bind(null,t,1);break;case 1:r=function(e,t,n){bn(vn,Nn.bind(null,e,t,n))}.bind(null,t,1);break;default:r=Nn.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Cn(e,t,n,r){if(Tn.length){var i=Tn.pop();i.topLevelType=e,i.eventSystemFlags=t,i.nativeEvent=n,i.targetInst=r,e=i}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:r,ancestors:[]};try{if(t=En,n=e,le)t(n,void 0);else{le=!0;try{ue(t,n,void 0)}finally{le=!1,he()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,Tn.length<10&&Tn.push(e)}}function Nn(e,t,n){if(Sn)if(0<ut.length&&-1<mt.indexOf(e))e=gt(null,e,t,n),ut.push(e);else{var r=An(e,t,n);null===r?vt(e,n):-1<mt.indexOf(e)?(e=gt(r,e,t,n),ut.push(e)):function(e,t,n,r){switch(t){case"focus":return ct=bt(ct,e,t,n,r),1;case"dragenter":return lt=bt(lt,e,t,n,r),1;case"mouseover":return ht=bt(ht,e,t,n,r),1;case"pointerover":var i=r.pointerId;return ft.set(i,bt(ft.get(i)||null,e,t,n,r)),1;case"gotpointercapture":return i=r.pointerId,dt.set(i,bt(dt.get(i)||null,e,t,n,r)),1}}(r,e,t,n)||(vt(e,n),Cn(e,t,n,null))}}function An(e,t,n){var r=Ct(n);if(null!==(r=or(r))){var i=et(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=tt(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Cn(e,t,n,r),null}function Dn(e){if(!$)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var _n=new("function"==typeof WeakMap?WeakMap:Map);function xn(e){var t=_n.get(e);return void 0===t&&(t=new Set,_n.set(e,t)),t}function On(e,t,n){if(!n.has(e)){switch(e){case"scroll":kn(t,"scroll",!0);break;case"focus":case"blur":kn(t,"focus",!0),kn(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Dn(e)&&kn(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&In(e,t)}n.add(e)}}var Pn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rn=["Webkit","ms","Moz","O"];function Mn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Pn.hasOwnProperty(e)&&Pn[e]?(""+t).trim():t+"px"}function Ln(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Mn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Pn).forEach((function(e){Rn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pn[t]=Pn[e]}))}));var Fn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Un(e,t){if(t){if(Fn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62,""))}}function Vn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Bn(e,t){var n=xn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=p[t];for(var r=0;r<t.length;r++)On(t[r],e,n)}function qn(){}function jn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wn(e,t){var n,r=zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&t<=n)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zn(r)}}function Kn(){for(var e=window,t=jn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=jn((e=t.contentWindow).document)}return t}function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Qn=null,Hn=null;function Yn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Xn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Jn="function"==typeof setTimeout?setTimeout:void 0,$n="function"==typeof clearTimeout?clearTimeout:void 0;function Zn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function er(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var tr=Math.random().toString(36).slice(2),nr="__reactInternalInstance$"+tr,rr="__reactEventHandlers$"+tr,ir="__reactContainere$"+tr;function or(e){var t=e[nr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ir]||n[nr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=er(e);null!==e;){if(n=e[nr])return n;e=er(e)}return t}n=(e=n).parentNode}return null}function ar(e){return!(e=e[nr]||e[ir])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function sr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ur(e){return e[rr]||null}var cr=null,lr=null,hr=null;function fr(){if(hr)return hr;var e,t,n=lr,r=n.length,i="value"in cr?cr.value:cr.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return hr=i.slice(e,1<t?1-t:void 0)}var dr=Mt.extend({data:null}),pr=Mt.extend({data:null}),mr=[9,13,27,32],yr=$&&"CompositionEvent"in window,gr=null;$&&"documentMode"in document&&(gr=document.documentMode);var vr=$&&"TextEvent"in window&&!gr,br=$&&(!yr||gr&&8<gr&&gr<=11),wr=String.fromCharCode(32),Tr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Er=!1;function Sr(e,t){switch(e){case"keyup":return-1!==mr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return 1;default:return}}function Ir(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var kr=!1,Cr={eventTypes:Tr,extractEvents:function(e,t,n,r){var i;if(yr)e:{switch(e){case"compositionstart":var o=Tr.compositionStart;break e;case"compositionend":o=Tr.compositionEnd;break e;case"compositionupdate":o=Tr.compositionUpdate;break e}o=void 0}else kr?Sr(e,n)&&(o=Tr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=Tr.compositionStart);return i=o?(br&&"ko"!==n.locale&&(kr||o!==Tr.compositionStart?o===Tr.compositionEnd&&kr&&(i=fr()):(lr="value"in(cr=r)?cr.value:cr.textContent,kr=!0)),o=dr.getPooled(o,t,n,r),!i&&null===(i=Ir(n))||(o.data=i),Ot(o),o):null,(e=(vr?function(e,t){switch(e){case"compositionend":return Ir(t);case"keypress":return 32!==t.which?null:(Er=!0,wr);case"textInput":return(e=t.data)===wr&&Er?null:e;default:return null}}:function(e,t){if(kr)return"compositionend"===e||!yr&&Sr(e,t)?(e=fr(),hr=lr=cr=null,kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return br&&"ko"!==t.locale?null:t.data;default:return null}})(e,n))?((t=pr.getPooled(Tr.beforeInput,t,n,r)).data=e,Ot(t)):t=null,null===i?t:null===t?i:[i,t]}},Nr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?Nr[e.type]:"textarea"===t}var Dr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function _r(e,t,n){return(e=Mt.getPooled(Dr.change,e,t,n)).type="change",re(n),Ot(e),e}var xr=null,Or=null;function Pr(e){D(e)}function Rr(e){if(Ie(sr(e)))return e}function Mr(e,t){if("change"===e)return t}var Lr=!1;function Fr(){xr&&(xr.detachEvent("onpropertychange",Ur),Or=xr=null)}function Ur(e){if("value"===e.propertyName&&Rr(Or))if(e=_r(Or,e,Ct(e)),ce)D(e);else{ce=!0;try{oe(Pr,e)}finally{ce=!1,he()}}}function Vr(e,t,n){"focus"===e?(Fr(),Or=n,(xr=t).attachEvent("onpropertychange",Ur)):"blur"===e&&Fr()}function Br(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rr(Or)}function qr(e,t){if("click"===e)return Rr(t)}function jr(e,t){if("input"===e||"change"===e)return Rr(t)}$&&(Lr=Dn("input")&&(!document.documentMode||9<document.documentMode));var zr,Wr={eventTypes:Dr,_isInputEventSupported:Lr,extractEvents:function(e,t,n,r){var i=t?sr(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=Mr;else if(Ar(i))if(Lr)a=jr;else{a=Br;var s=Vr}else!(o=i.nodeName)||"input"!==o.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(a=qr);if(a=a&&a(e,t))return _r(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&_e(i,"number",i.value)}},Kr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Gr={eventTypes:Kr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?or(t):null)&&(t!==(o=et(t))||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=en,u=Kr.mouseLeave,c=Kr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=tn,u=Kr.pointerLeave,c=Kr.pointerEnter,l="pointer");if(e=null==a?i:sr(a),i=null==t?i:sr(t),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=e,u.relatedTarget=i,(r=s.getPooled(c,t,n,r)).type=l+"enter",r.target=i,r.relatedTarget=e,l=t,(s=a)&&l)e:{for(e=l,a=0,t=c=s;t;t=Nt(t))a++;for(t=0,i=e;i;i=Nt(i))t++;for(;0<a-t;)c=Nt(c),a--;for(;0<t-a;)e=Nt(e),t--;for(;a--;){if(c===e||c===e.alternate)break e;c=Nt(c),e=Nt(e)}c=null}else c=null;for(e=c,c=[];s&&s!==e&&(null===(a=s.alternate)||a!==e);)c.push(s),s=Nt(s);for(s=[];l&&l!==e&&(null===(a=l.alternate)||a!==e);)s.push(l),l=Nt(l);for(l=0;l<c.length;l++)_t(c[l],"bubbled",u);for(l=s.length;0<l--;)_t(s[l],"captured",r);return n===zr?(zr=null,[u]):(zr=n,[u,r])}},Qr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Hr=Object.prototype.hasOwnProperty;function Yr(e,t){if(Qr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Hr.call(t,n[r])||!Qr(e[n[r]],t[n[r]]))return!1;return!0}var Xr=$&&"documentMode"in document&&document.documentMode<=11,Jr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},$r=null,Zr=null,ei=null,ti=!1;function ni(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return ti||null==$r||$r!==jn(n)?null:(n="selectionStart"in(n=$r)&&Gn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},ei&&Yr(ei,n)?null:(ei=n,(e=Mt.getPooled(Jr.select,Zr,e,t)).type="select",e.target=$r,Ot(e),e))}var ri={eventTypes:Jr,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=xn(o),i=p.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?sr(t):window,e){case"focus":!Ar(o)&&"true"!==o.contentEditable||($r=o,Zr=t,ei=null);break;case"blur":ei=Zr=$r=null;break;case"mousedown":ti=!0;break;case"contextmenu":case"mouseup":case"dragend":return ti=!1,ni(n,r);case"selectionchange":if(Xr)break;case"keydown":case"keyup":return ni(n,r)}return null}};_.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),T=ur,E=ar,S=sr,_.injectEventPluginsByName({SimpleEventPlugin:gn,EnterLeaveEventPlugin:Gr,ChangeEventPlugin:Wr,SelectEventPlugin:ri,BeforeInputEventPlugin:Cr}),new Set;var ii=[],oi=-1;function ai(e){oi<0||(e.current=ii[oi],ii[oi]=null,oi--)}function si(e,t){ii[++oi]=e.current,e.current=t}var ui={},ci={current:ui},li={current:!1},hi=ui;function fi(e,t){var n=e.type.contextTypes;if(!n)return ui;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function pi(){ai(li),ai(ci)}function mi(){ai(li),ai(ci)}function yi(e,t,n){if(ci.current!==ui)throw Error(a(168));si(ci,t),si(li,n)}function gi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,X(t)||"Unknown",o));return i({},n,{},r)}function vi(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||ui,hi=ci.current,si(ci,t),si(li,li.current),1}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(t=gi(e,t,hi),r.__reactInternalMemoizedMergedChildContext=t,ai(li),ai(ci),si(ci,t)):ai(li),si(li,n)}var wi=o.unstable_runWithPriority,Ti=o.unstable_scheduleCallback,Ei=o.unstable_cancelCallback,Si=o.unstable_shouldYield,Ii=o.unstable_requestPaint,ki=o.unstable_now,Ci=o.unstable_getCurrentPriorityLevel,Ni=o.unstable_ImmediatePriority,Ai=o.unstable_UserBlockingPriority,Di=o.unstable_NormalPriority,_i=o.unstable_LowPriority,xi=o.unstable_IdlePriority,Oi={},Pi=void 0!==Ii?Ii:function(){},Ri=null,Mi=null,Li=!1,Fi=ki(),Ui=Fi<1e4?ki:function(){return ki()-Fi};function Vi(){switch(Ci()){case Ni:return 99;case Ai:return 98;case Di:return 97;case _i:return 96;case xi:return 95;default:throw Error(a(332))}}function Bi(e){switch(e){case 99:return Ni;case 98:return Ai;case 97:return Di;case 96:return _i;case 95:return xi;default:throw Error(a(332))}}function qi(e,t){return e=Bi(e),wi(e,t)}function ji(e,t,n){return e=Bi(e),Ti(e,t,n)}function zi(e){return null===Ri?(Ri=[e],Mi=Ti(Ni,Ki)):Ri.push(e),Oi}function Wi(){if(null!==Mi){var e=Mi;Mi=null,Ei(e)}Ki()}function Ki(){if(!Li&&null!==Ri){Li=!0;var e=0;try{var t=Ri;qi(99,(function(){for(;e<t.length;e++)for(var n=t[e];null!==(n=n(!0)););})),Ri=null}catch(t){throw null!==Ri&&(Ri=Ri.slice(e+1)),Ti(Ni,Wi),t}finally{Li=!1}}}var Gi=3;function Qi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Hi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Yi={current:null},Xi=null,Ji=null,$i=null;function Zi(){$i=Ji=Xi=null}function eo(e,t){var n=e.type._context;si(Yi,n._currentValue),n._currentValue=t}function to(e){var t=Yi.current;ai(Yi),e.type._context._currentValue=t}function no(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ro(e,t){$i=Ji=null,null!==(e=(Xi=e).dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ua=!0),e.firstContext=null)}function io(e,t){if($i!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||($i=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ji){if(null===Xi)throw Error(a(308));Ji=t,Xi.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ji=Ji.next=t;return e._currentValue}var oo=!1;function ao(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function so(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function uo(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function co(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function lo(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=ao(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=ao(e.memoizedState),i=n.updateQueue=ao(n.memoizedState)):r=e.updateQueue=so(i):null===i&&(i=n.updateQueue=so(r));null===i||r===i?co(r,t):null===r.lastUpdate||null===i.lastUpdate?(co(r,t),co(i,t)):(co(r,t),i.lastUpdate=t)}function ho(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=ao(e.memoizedState):fo(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function fo(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=so(t)),t}function po(e,t,n,r,o,a){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(a,r,o):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null===(o="function"==typeof(e=n.payload)?e.call(a,r,o):e)||void 0===o)break;return i({},r,o);case 2:oo=!0}return r}function mo(e,t,n,r,i){oo=!1;for(var o=(t=fo(e,t)).baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(au(l,u.suspenseConfig),c=po(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,(u.nextEffect=null)===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=po(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,(u.nextEffect=null)===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,su(s),e.expirationTime=s,e.memoizedState=c}function yo(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),go(t.firstEffect,n),t.firstEffect=t.lastEffect=null,go(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function go(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;if("function"!=typeof n)throw Error(a(191,n));n.call(r)}e=e.nextEffect}}var vo=O.ReactCurrentBatchConfig,bo=(new r.Component).refs;function wo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var To={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Ys(),i=vo.suspense;(i=uo(r=Xs(r,e,i),i)).payload=t,null!=n&&(i.callback=n),lo(e,i),Js(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Ys(),i=vo.suspense;(i=uo(r=Xs(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),lo(e,i),Js(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Ys(),r=vo.suspense;(r=uo(n=Xs(n,e,r),r)).tag=2,null!=t&&(r.callback=t),lo(e,r),Js(e,n)}};function Eo(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&Yr(n,r)&&Yr(i,o))}function So(e,t,n){var r=!1,i=ui,o=t.contextType;return t=new t(n,o="object"==typeof o&&null!==o?io(o):(i=di(t)?hi:ci.current,(r=null!==(r=t.contextTypes)&&void 0!==r)?fi(e,i):ui)),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=To,(e.stateNode=t)._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Io(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&To.enqueueReplaceState(t,t.state,null)}function ko(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=bo;var o=t.contextType;"object"==typeof o&&null!==o?i.context=io(o):(o=di(t)?hi:ci.current,i.context=fi(e,o)),null!==(o=e.updateQueue)&&(mo(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(wo(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&To.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(mo(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Co=Array.isArray;function No(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===bo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ao(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Do(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ku(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null===(r=t.alternate)||(r=r.index)<n?(t.effectTag=2,n):r:n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=Au(n,e.mode,r)).return=e:(t=i(t,n)).return=e,t}function c(e,t,n,r){return null!==t&&t.elementType===n.type?(r=i(t,n.props)).ref=No(e,t,n):(r=Cu(n.type,n.key,n.props,null,e.mode,r)).ref=No(e,t,n),r.return=e,r}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Du(n,e.mode,r)).return=e:(t=i(t,n.children||[])).return=e,t}function h(e,t,n,r,o){return null===t||7!==t.tag?(t=Nu(n,e.mode,r,o)).return=e:(t=i(t,n)).return=e,t}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Au(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case M:return(n=Cu(t.type,t.key,t.props,null,e.mode,n)).ref=No(e,null,t),n.return=e,n;case L:return(t=Du(t,e.mode,n)).return=e,t}if(Co(t)||Y(t))return(t=Nu(t,e.mode,n,null)).return=e,t;Ao(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case M:return n.key===i?n.type===F?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case L:return n.key===i?l(e,t,n,r):null}if(Co(n)||Y(n))return null!==i?null:h(e,t,n,r,null);Ao(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case M:return e=e.get(null===r.key?n:r.key)||null,r.type===F?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case L:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Co(r)||Y(r))return h(t,e=e.get(n)||null,r,i,null);Ao(t,r)}return null}return function(u,c,l,h){var m="object"==typeof l&&null!==l&&l.type===F&&null===l.key;m&&(l=l.props.children);var y="object"==typeof l&&null!==l;if(y)switch(l.$$typeof){case M:e:{for(y=l.key,m=c;null!==m;){if(m.key===y){if(7===m.tag?l.type===F:m.elementType===l.type){n(u,m.sibling),(c=i(m,l.type===F?l.props.children:l.props)).ref=No(u,m,l),c.return=u,u=c;break e}n(u,m);break}t(u,m),m=m.sibling}u=l.type===F?((c=Nu(l.props.children,u.mode,h,l.key)).return=u,c):((h=Cu(l.type,l.key,l.props,null,u.mode,h)).ref=No(u,c,l),h.return=u,h)}return s(u);case L:e:{for(m=l.key;null!==c;){if(c.key===m){if(4===c.tag&&c.stateNode.containerInfo===l.containerInfo&&c.stateNode.implementation===l.implementation){n(u,c.sibling),(c=i(c,l.children||[])).return=u,u=c;break e}n(u,c);break}t(u,c),c=c.sibling}(c=Du(l,u.mode,h)).return=u,u=c}return s(u)}if("string"==typeof l||"number"==typeof l)return l=""+l,s((null!==c&&6===c.tag?(n(u,c.sibling),(c=i(c,l)).return=u):(n(u,c),(c=Au(l,u.mode,h)).return=u),u=c));if(Co(l))return function(i,a,s,u){for(var c=null,l=null,h=a,m=a=0,y=null;null!==h&&m<s.length;m++){h.index>m?(y=h,h=null):y=h.sibling;var g=d(i,h,s[m],u);if(null===g){null===h&&(h=y);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g,h=y}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],u))&&(a=o(h,a,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);m<s.length;m++)null!==(y=p(h,i,m,s[m],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),a=o(y,a,m),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),c}(u,c,l,h);if(Y(l))return function(i,s,u,c){var l=Y(u);if("function"!=typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,m=s,y=s=0,g=null,v=u.next();null!==m&&!v.done;y++,v=u.next()){m.index>y?(g=m,m=null):g=m.sibling;var b=d(i,m,v.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,m=g}if(v.done)return n(i,m),l;if(null===m){for(;!v.done;y++,v=u.next())null!==(v=f(i,v.value,c))&&(s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return l}for(m=r(i,m);!v.done;y++,v=u.next())null!==(v=p(m,i,y,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),l}(u,c,l,h);if(y&&Ao(u,l),void 0===l&&!m)switch(u.tag){case 1:case 0:throw u=u.type,Error(a(152,u.displayName||u.name||"Component"))}return n(u,c)}}var _o=Do(!0),xo=Do(!1),Oo={},Po={current:Oo},Ro={current:Oo},Mo={current:Oo};function Lo(e){if(e===Oo)throw Error(a(174));return e}function Fo(e,t){si(Mo,t),si(Ro,e),si(Po,Oo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ve(null,"");break;default:t=Ve(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}ai(Po),si(Po,t)}function Uo(){ai(Po),ai(Ro),ai(Mo)}function Vo(e){Lo(Mo.current);var t=Lo(Po.current),n=Ve(t,e.type);t!==n&&(si(Ro,e),si(Po,n))}function Bo(e){Ro.current===e&&(ai(Po),ai(Ro))}var qo={current:0};function jo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function zo(e,t){return{responder:e,props:t}}var Wo=O.ReactCurrentDispatcher,Ko=O.ReactCurrentBatchConfig,Go=0,Qo=null,Ho=null,Yo=null,Xo=null,Jo=null,$o=null,Zo=0,ea=null,ta=0,na=!1,ra=null,ia=0;function oa(){throw Error(a(321))}function aa(e,t){if(null!==t){for(var n=0;n<t.length&&n<e.length;n++)if(!Qr(e[n],t[n]))return;return 1}}function sa(e,t,n,r,i,o){if(Go=o,Qo=t,Yo=null!==e?e.memoizedState:null,Wo.current=null===Yo?Ca:Na,t=n(r,i),na){for(;na=!1,ia+=1,Yo=null!==e?e.memoizedState:null,$o=Xo,ea=Jo=Ho=null,Wo.current=Na,t=n(r,i),na;);ra=null,ia=0}if(Wo.current=ka,(e=Qo).memoizedState=Xo,e.expirationTime=Zo,e.updateQueue=ea,e.effectTag|=ta,e=null!==Ho&&null!==Ho.next,$o=Jo=Xo=Yo=Ho=Qo=null,ea=null,ta=Zo=Go=0,e)throw Error(a(300));return t}function ua(){Wo.current=ka,$o=Jo=Xo=Yo=Ho=Qo=null,na=!1,ra=ea=null,ia=ta=Zo=Go=0}function ca(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Jo?Xo=Jo=e:Jo=Jo.next=e,Jo}function la(){if(null!==$o)$o=(Jo=$o).next,Yo=null!==(Ho=Yo)?Ho.next:null;else{if(null===Yo)throw Error(a(310));var e={memoizedState:(Ho=Yo).memoizedState,baseState:Ho.baseState,queue:Ho.queue,baseUpdate:Ho.baseUpdate,next:null};Jo=null===Jo?Xo=e:Jo.next=e,Yo=Ho.next}return Jo}function ha(e,t){return"function"==typeof t?t(e):t}function fa(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));if(n.lastRenderedReducer=e,0<ia){var r=n.dispatch;if(null!==ra){var i=ra.get(n);if(void 0!==i){ra.delete(n);for(var o=t.memoizedState;o=e(o,i.action),null!==(i=i.next););return Qr(o,t.memoizedState)||(Ua=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),[n.lastRenderedState=o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==(r=null!==s?(null!==r&&(r.next=null),s.next):null!==r?r.next:null)){var u=i=null,c=r,l=!1;do{var h=c.expirationTime;h<Go?(l||(l=!0,u=s,i=o),Zo<h&&su(Zo=h)):(au(h,c.suspenseConfig),o=c.eagerReducer===e?c.eagerState:e(o,c.action)),c=(s=c).next}while(null!==c&&c!==r);l||(u=s,i=o),Qr(o,t.memoizedState)||(Ua=!0),t.memoizedState=o,t.baseUpdate=u,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function da(e){var t=ca();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:ha,lastRenderedState:e}).dispatch=Ia.bind(null,Qo,e),[t.memoizedState,e]}function pa(e){return fa(ha)}function ma(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===ea?(ea={lastEffect:null}).lastEffect=e.next=e:null===(t=ea.lastEffect)?ea.lastEffect=e.next=e:(n=t.next,(t.next=e).next=n,ea.lastEffect=e),e}function ya(e,t,n,r){var i=ca();ta|=e,i.memoizedState=ma(t,n,void 0,void 0===r?null:r)}function ga(e,t,n,r){var i=la();r=void 0===r?null:r;var o=void 0;if(null!==Ho){var a=Ho.memoizedState;if(o=a.destroy,null!==r&&aa(r,a.deps))return void ma(0,n,o,r)}ta|=e,i.memoizedState=ma(t,n,o,r)}function va(e,t){return ya(516,192,e,t)}function ba(e,t){return ga(516,192,e,t)}function wa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ta(){}function Ea(e,t){return ca().memoizedState=[e,void 0===t?null:t],e}function Sa(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ia(e,t,n){if(!(ia<25))throw Error(a(301));var r=e.alternate;if(e===Qo||null!==r&&r===Qo)if(na=!0,e={expirationTime:Go,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===ra&&(ra=new Map),void 0===(n=ra.get(t)))ra.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=Ys(),o=vo.suspense;o={expirationTime:i=Xs(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.last;if(null===s)o.next=o;else{var u=s.next;null!==u&&(o.next=u),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(o.eagerReducer=r,o.eagerState=l,Qr(l,c))return}catch(e){}Js(e,i)}}var ka={readContext:io,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useResponder:oa,useDeferredValue:oa,useTransition:oa},Ca={readContext:io,useCallback:Ea,useContext:io,useEffect:va,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ya(4,36,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ya(4,36,e,t)},useMemo:function(e,t){var n=ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ia.bind(null,Qo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ca().memoizedState=e},useState:da,useDebugValue:Ta,useResponder:zo,useDeferredValue:function(e,t){var n=da(e),r=n[0],i=n[1];return va((function(){o.unstable_next((function(){var n=Ko.suspense;Ko.suspense=void 0===t?null:t;try{i(e)}finally{Ko.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=da(!1),n=t[0],r=t[1];return[Ea((function(t){r(!0),o.unstable_next((function(){var n=Ko.suspense;Ko.suspense=void 0===e?null:e;try{r(!1),t()}finally{Ko.suspense=n}}))}),[e,n]),n]}},Na={readContext:io,useCallback:Sa,useContext:io,useEffect:ba,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ga(4,36,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4,36,e,t)},useMemo:function(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:fa,useRef:function(){return la().memoizedState},useState:pa,useDebugValue:Ta,useResponder:zo,useDeferredValue:function(e,t){var n=pa(),r=n[0],i=n[1];return ba((function(){o.unstable_next((function(){var n=Ko.suspense;Ko.suspense=void 0===t?null:t;try{i(e)}finally{Ko.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=pa(),n=t[0],r=t[1];return[Sa((function(t){r(!0),o.unstable_next((function(){var n=Ko.suspense;Ko.suspense=void 0===e?null:e;try{r(!1),t()}finally{Ko.suspense=n}}))}),[e,n]),n]}},Aa=null,Da=null,_a=!1;function xa(e,t){var n=Su(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,1);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,1);case 13:default:return}}function Pa(e){if(_a){var t=Da;if(t){var n=t;if(!Oa(e,t)){if(!(t=Zn(n.nextSibling))||!Oa(e,t))return e.effectTag=-1025&e.effectTag|2,_a=!1,void(Aa=e);xa(Aa,n)}Aa=e,Da=Zn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,_a=!1,Aa=e}}function Ra(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function Ma(e){if(e===Aa){if(!_a)return Ra(e),_a=!0,0;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Xn(t,e.memoizedProps))for(t=Da;t;)xa(e,t),t=Zn(t.nextSibling);if(Ra(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Da=Zn(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Da=null}}else Da=Aa?Zn(e.stateNode.nextSibling):null;return 1}}function La(){Da=Aa=null,_a=!1}var Fa=O.ReactCurrentOwner,Ua=!1;function Va(e,t,n,r){t.child=null===e?xo(t,null,n,r):_o(t,e.child,n,r)}function Ba(e,t,n,r,i){n=n.render;var o=t.ref;return ro(t,i),r=sa(e,t,n,r,o,i),null===e||Ua?(t.effectTag|=1,Va(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ns(e,t,i))}function qa(e,t,n,r,i,o){if(null!==e)return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Yr)(i,r)&&e.ref===t.ref)?ns(e,t,o):(t.effectTag|=1,(e=ku(a,r)).ref=t.ref,(e.return=t).child=e);var a=n.type;return"function"!=typeof a||Iu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Cu(n.type,null,r,null,t.mode,o)).ref=t.ref,(e.return=t).child=e):(t.tag=15,t.type=a,ja(e,t,a,r,i,o))}function ja(e,t,n,r,i,o){return null!==e&&Yr(e.memoizedProps,r)&&e.ref===t.ref&&(Ua=!1,i<o)?ns(e,t,o):Wa(e,t,n,r,o)}function za(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Wa(e,t,n,r,i){var o=di(n)?hi:ci.current;return o=fi(t,o),ro(t,i),n=sa(e,t,n,r,o,i),null===e||Ua?(t.effectTag|=1,Va(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ns(e,t,i))}function Ka(e,t,n,r,i){if(di(n)){var o=!0;vi(t)}else o=!1;if(ro(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),So(t,n,r),ko(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;c="object"==typeof c&&null!==c?io(c):fi(t,c=di(n)?hi:ci.current);var l=n.getDerivedStateFromProps,h="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||s===r&&u===c||Io(t,a,r,c),oo=!1;var f=t.memoizedState;u=a.state=f;var d=t.updateQueue;null!==d&&(mo(t,d,r,a,i),u=t.memoizedState),r=s!==r||f!==u||li.current||oo?("function"==typeof l&&(wo(t,n,l,r),u=t.memoizedState),(s=oo||Eo(t,n,s,r,f,u,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:Hi(t.type,s),u=a.context,c="object"==typeof(c=n.contextType)&&null!==c?io(c):fi(t,c=di(n)?hi:ci.current),(h="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||s===r&&u===c||Io(t,a,r,c),oo=!1,u=t.memoizedState,f=a.state=u,null!==(d=t.updateQueue)&&(mo(t,d,r,a,i),f=t.memoizedState),r=s!==r||u!==f||li.current||oo?("function"==typeof l&&(wo(t,n,l,r),f=t.memoizedState),(l=oo||Eo(t,n,s,r,u,f,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),!1);return Ga(e,t,n,r,o,i)}function Ga(e,t,n,r,i,o){za(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&bi(t,n,!1),ns(e,t,o);r=t.stateNode,Fa.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,s,o)):Va(e,t,s,o),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function Qa(e){var t=e.stateNode;t.pendingContext?yi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yi(0,t.context,!1),Fo(e,t.containerInfo)}var Ha,Ya,Xa,Ja={dehydrated:null,retryTime:0};function $a(e,t,n){var r,i=t.mode,o=t.pendingProps,a=qo.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),si(qo,1&a),null===e){if(void 0!==o.fallback&&Pa(t),s){if(s=o.fallback,0==(2&((o=Nu(null,i,0,null)).return=t).mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Nu(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=Ja,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=xo(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,0==(2&((n=ku(e,e.pendingProps)).return=t).mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=ku(i,o,i.expirationTime)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Ja,t.child=n,i}return n=_o(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Nu(null,i,0,null)).return=t,null!==(o.child=e)&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Nu(s,i,n,null)).return=t,(o.sibling=n).effectTag|=2,o.childExpirationTime=0,t.memoizedState=Ja,t.child=o,n}return t.memoizedState=null,t.child=_o(t,e,o.children,n)}function Za(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),no(e.return,t)}function es(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function ts(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Va(e,t,r.children,n),0!=(2&(r=qo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Za(e,n);else if(19===e.tag)Za(e,n);else if(null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(si(qo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===jo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),es(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===jo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}es(t,!0,n,null,o,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ns(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&su(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=ku(e=t.child,e.pendingProps,e.expirationTime),(t.child=n).return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ku(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function rs(e){e.effectTag|=4}function is(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function os(e){switch(e.tag){case 1:di(e.type)&&pi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Uo(),mi(),0!=(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Bo(e),null;case 13:return ai(qo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return ai(qo),null;case 4:return Uo(),null;case 10:return to(e),null;default:return null}}function as(e,t){return{value:e,source:t,stack:J(t)}}Ha=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ya=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,u,c=t.stateNode;switch(Lo(Po.current),e=null,n){case"input":a=ke(c,a),r=ke(c,r),e=[];break;case"option":a=xe(c,a),r=xe(c,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Pe(c,a),r=Pe(c,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(c.onclick=qn)}for(s in Un(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&((n=n||{})[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(d.hasOwnProperty(s)?e=e||[]:(e=e||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||((n=n||{})[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&((n=n||{})[u]=l[u])}else n||(e=e||[]).push(s,n),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(s,""+l)):"children"===s?c===l||"string"!=typeof l&&"number"!=typeof l||(e=e||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(d.hasOwnProperty(s)?(null!=l&&Bn(o,s),e||c===l||(e=[])):(e=e||[]).push(s,l))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&rs(t)}},Xa=function(e,t,n,r){n!==r&&rs(t)};var ss="function"==typeof WeakSet?WeakSet:Set;function us(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=J(n)),null!==n&&X(n.type),t=t.value,null!==e&&1===e.tag&&X(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function cs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){vu(e,t)}else t.current=null}function ls(e,t){switch(t.tag){case 0:case 11:case 15:hs(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Hi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}function hs(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!=(r.tag&e)){var i=r.destroy;(r.destroy=void 0)!==i&&i()}0!=(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function fs(e,t,n){switch("function"==typeof Tu&&Tu(t),t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(e){vu(i,e)}}e=e.next}while(e!==r)}))}break;case 1:cs(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){vu(e,t)}}(t,n);break;case 5:cs(t);break;case 4:ys(e,t,n)}}function ds(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,(e.memoizedProps=null)!==t&&ds(t)}function ps(e){return 5===e.tag||3===e.tag||4===e.tag}function ms(e){e:{for(var t=e.return;null!==t;){if(ps(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(ze(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ps(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n=(n.child.return=n).child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o){var s=o?i.stateNode:i.stateNode.instance;if(n)if(r){var u=s;s=n,8===(o=t).nodeType?o.parentNode.insertBefore(u,s):o.insertBefore(u,s)}else t.insertBefore(s,n);else r?(8===(u=t).nodeType?(o=u.parentNode).insertBefore(s,u):(o=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==o.onclick||(o.onclick=qn)):t.appendChild(s)}else if(4!==i.tag&&null!==i.child){i=(i.child.return=i).child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ys(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var u=e,c=o,l=n,h=c;;)if(fs(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o=(o.child.return=o).child;continue}}else if(fs(e,o,n),null!==o.child){o=(o.child.return=o).child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function gs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:hs(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if((t.updateQueue=null)!==o){for(n[rr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ne(n,r),Vn(e,i),t=Vn(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?Ln(n,u):"dangerouslySetInnerHTML"===s?je(n,u):"children"===s?ze(n,u):Te(n,s,u,t)}switch(e){case"input":Ae(n,r);break;case"textarea":Me(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Oe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Oe(n,!!r.multiple,r.defaultValue,!0):Oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(a(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,kt(t.containerInfo));break;case 12:break;case 13:if(null===(n=t).memoizedState?r=!1:(r=!0,n=t.child,Fs=Ui()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=Mn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e=(e.child.return=e).child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}vs(t);break;case 19:vs(t);break;case 17:case 20:case 21:break;default:throw Error(a(163))}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ss),t.forEach((function(t){var r=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(t=Xs(t=Ys(),e,null)),null!==(e=$s(e,t))&&eu(e)}.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var bs="function"==typeof WeakMap?WeakMap:Map;function ws(e,t,n){(n=uo(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vs||(Vs=!0,Bs=r),us(e,t)},n}function Ts(e,t,n){(n=uo(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return us(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===qs?qs=new Set([this]):qs.add(this),us(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Es,Ss=Math.ceil,Is=O.ReactCurrentDispatcher,ks=O.ReactCurrentOwner,Cs=0,Ns=null,As=null,Ds=0,_s=0,xs=null,Os=1073741823,Ps=1073741823,Rs=null,Ms=0,Ls=!1,Fs=0,Us=null,Vs=!1,Bs=null,qs=null,js=!1,zs=null,Ws=90,Ks=null,Gs=0,Qs=null,Hs=0;function Ys(){return 0!=(48&Cs)?1073741821-(Ui()/10|0):0!==Hs?Hs:Hs=1073741821-(Ui()/10|0)}function Xs(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=Vi();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(16&Cs))return Ds;if(null!==n)e=Qi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Qi(e,150,100);break;case 97:case 96:e=Qi(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Ns&&e===Ds&&--e,e}function Js(e,t){if(50<Gs)throw Gs=0,Qs=null,Error(a(185));if(null!==(e=$s(e,t))){var n=Vi();1073741823===t?0!=(8&Cs)&&0==(48&Cs)?tu(e):(eu(e),0===Cs&&Wi()):eu(e),0==(4&Cs)||98!==n&&99!==n||(null===Ks?Ks=new Map([[e,t]]):(void 0===(n=Ks.get(e))||t<n)&&Ks.set(e,t))}}function $s(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ns===i&&(su(t),4===_s&&Ou(i,Ds)),Pu(i,t)),i}function Zs(e){var t=e.lastExpiredTime;return 0!==t||!xu(e,t=e.firstPendingTime)||(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e}function eu(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=zi(tu.bind(null,e));else{var t=Zs(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Ys();if(r=1073741823===t?99:1===t||2===t?95:(r=10*(1073741821-t)-10*(1073741821-r))<=0?99:r<=250?98:r<=5250?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&r<=i)return;n!==Oi&&Ei(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?zi(tu.bind(null,e)):ji(r,function e(t,n){if(Hs=0,n)return Ru(t,n=Ys()),eu(t),null;var r=Zs(t);if(0!==r){if(n=t.callbackNode,0!=(48&Cs))throw Error(a(327));if(mu(),t===Ns&&r===Ds||ru(t,r),null!==As){var i=Cs;Cs|=16;for(var o=ou();;)try{cu();break}catch(e){iu(t,e)}if(Zi(),Cs=i,Is.current=o,1===_s)throw n=xs,ru(t,r),Ou(t,r),eu(t),n;if(null===As)switch(o=t.finishedWork=t.current.alternate,t.finishedExpirationTime=r,i=_s,Ns=null,i){case 0:case 1:throw Error(a(345));case 2:Ru(t,2<r?2:r);break;case 3:if(Ou(t,r),r===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=fu(o)),1073741823===Os&&10<(o=Fs+500-Ui())){if(Ls){var s=t.lastPingedTime;if(0===s||r<=s){t.lastPingedTime=r,ru(t,r);break}}if(0!==(s=Zs(t))&&s!==r)break;if(0!==i&&i!==r){t.lastPingedTime=i;break}t.timeoutHandle=Jn(du.bind(null,t),o);break}du(t);break;case 4:if(Ou(t,r),r===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=fu(o)),Ls&&(0===(o=t.lastPingedTime)||r<=o)){t.lastPingedTime=r,ru(t,r);break}if(0!==(o=Zs(t))&&o!==r)break;if(0!==i&&i!==r){t.lastPingedTime=i;break}if(1073741823!==Ps?i=10*(1073741821-Ps)-Ui():1073741823===Os?i=0:(i=10*(1073741821-Os)-5e3,(i=(o=Ui())-i)<0&&(i=0),(r=10*(1073741821-r)-o)<(i=(i<120?120:i<480?480:i<1080?1080:i<1920?1920:i<3e3?3e3:i<4320?4320:1960*Ss(i/1960))-i)&&(i=r)),10<i){t.timeoutHandle=Jn(du.bind(null,t),i);break}du(t);break;case 5:if(1073741823!==Os&&null!==Rs){s=Os;var u=Rs;if(10<(i=(i=0|u.busyMinDurationMs)<=0?0:(o=0|u.busyDelayMs,(s=Ui()-(10*(1073741821-s)-(0|u.timeoutMs||5e3)))<=o?0:o+i-s))){Ou(t,r),t.timeoutHandle=Jn(du.bind(null,t),i);break}}du(t);break;default:throw Error(a(329))}if(eu(t),t.callbackNode===n)return e.bind(null,t)}}return null}.bind(null,e),{timeout:10*(1073741821-t)-Ui()}),e.callbackNode=t}}}function tu(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)du(e);else{if(0!=(48&Cs))throw Error(a(327));if(mu(),e===Ns&&t===Ds||ru(e,t),null!==As){var n=Cs;Cs|=16;for(var r=ou();;)try{uu();break}catch(t){iu(e,t)}if(Zi(),Cs=n,Is.current=r,1===_s)throw n=xs,ru(e,t),Ou(e,t),eu(e),n;if(null!==As)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ns=null,du(e),eu(e)}}return null}function nu(e,t){var n=Cs;Cs&=-2,Cs|=8;try{return e(t)}finally{0===(Cs=n)&&Wi()}}function ru(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,$n(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(r.tag){case 1:null!=r.type.childContextTypes&&pi();break;case 3:Uo(),mi();break;case 5:Bo(r);break;case 4:Uo();break;case 13:case 19:ai(qo);break;case 10:to(r)}n=n.return}As=ku((Ns=e).current,null),Ds=t,Ps=Os=1073741823,Rs=xs=null,Ms=_s=0,Ls=!1}function iu(e,t){for(;;){try{if(Zi(),ua(),null===As||null===As.return)return _s=1,xs=t,0;e:{var n=e,r=As.return,i=As,o=t;if(t=Ds,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var a=o,s=0!=(1&qo.current),u=r;do{var c;if(c=13===u.tag){var l=u.memoizedState;if(null!==l)c=null!==l.dehydrated;else{var h=u.memoizedProps;c=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!s)}}if(c){var f=u.updateQueue;if(null===f){var d=new Set;d.add(a),u.updateQueue=d}else f.add(a);if(0==(2&u.mode)){if(u.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var p=uo(1073741823,null);p.tag=2,lo(i,p)}i.expirationTime=1073741823;break e}o=void 0,i=t;var m=n.pingCache;if(null===m?(m=n.pingCache=new bs,o=new Set,m.set(a,o)):void 0===(o=m.get(a))&&(o=new Set,m.set(a,o)),!o.has(i)){o.add(i);var y=bu.bind(null,n,a,i);a.then(y,y)}u.effectTag|=4096,u.expirationTime=t;break e}u=u.return}while(null!==u);o=Error((X(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+J(i))}5!==_s&&(_s=2),o=as(o,i),u=r;do{switch(u.tag){case 3:a=o,u.effectTag|=4096,u.expirationTime=t,ho(u,ws(u,a,t));break e;case 1:a=o;var g=u.type,v=u.stateNode;if(0==(64&u.effectTag)&&("function"==typeof g.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===qs||!qs.has(v)))){u.effectTag|=4096,u.expirationTime=t,ho(u,Ts(u,a,t));break e}}u=u.return}while(null!==u)}As=hu(As)}catch(e){t=e;continue}break}}function ou(){var e=Is.current;return Is.current=ka,null===e?ka:e}function au(e,t){e<Os&&2<e&&(Os=e),null!==t&&e<Ps&&2<e&&(Ps=e,Rs=t)}function su(e){Ms<e&&(Ms=e)}function uu(){for(;null!==As;)As=lu(As)}function cu(){for(;null!==As&&!Si();)As=lu(As)}function lu(e){var t=Es(e.alternate,e,Ds);return e.memoizedProps=e.pendingProps,null===t&&(t=hu(e)),ks.current=null,t}function hu(e){As=e;do{var t=As.alternate;if(e=As.return,0==(2048&As.effectTag)){e:{var n=t,r=Ds,o=(t=As).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:di(t.type)&&pi();break;case 3:Uo(),mi(),(o=t.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==n&&null!==n.child||!Ma(t)||rs(t);break;case 5:Bo(t),r=Lo(Mo.current);var s=t.type;if(null!==n&&null!=t.stateNode)Ya(n,t,s,o,r),n.ref!==t.ref&&(t.effectTag|=128);else if(o){var u=Lo(Po.current);if(Ma(t)){var c=(o=t).stateNode;n=o.type;var l=o.memoizedProps,h=r;switch(c[nr]=o,c[rr]=l,s=void 0,r=c,n){case"iframe":case"object":case"embed":In("load",r);break;case"video":case"audio":for(c=0;c<Ze.length;c++)In(Ze[c],r);break;case"source":In("error",r);break;case"img":case"image":case"link":In("error",r),In("load",r);break;case"form":In("reset",r),In("submit",r);break;case"details":In("toggle",r);break;case"input":Ce(r,l),In("invalid",r),Bn(h,"onChange");break;case"select":r._wrapperState={wasMultiple:!!l.multiple},In("invalid",r),Bn(h,"onChange");break;case"textarea":Re(r,l),In("invalid",r),Bn(h,"onChange")}for(s in Un(n,l),c=null,l)l.hasOwnProperty(s)&&(u=l[s],"children"===s?"string"==typeof u?r.textContent!==u&&(c=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(c=["children",""+u]):d.hasOwnProperty(s)&&null!=u&&Bn(h,s));switch(n){case"input":Se(r),De(r,l,!0);break;case"textarea":Se(r),Le(r);break;case"select":case"option":break;default:"function"==typeof l.onClick&&(r.onclick=qn)}s=c,o.updateQueue=s,(o=null!==s)&&rs(t)}else{n=t,h=s,l=o,c=9===r.nodeType?r:r.ownerDocument,u===Fe&&(u=Ue(h)),u===Fe?"script"===h?((l=c.createElement("div")).innerHTML="<script><\/script>",c=l.removeChild(l.firstChild)):"string"==typeof l.is?c=c.createElement(h,{is:l.is}):(c=c.createElement(h),"select"===h&&(h=c,l.multiple?h.multiple=!0:l.size&&(h.size=l.size))):c=c.createElementNS(u,h),(l=c)[nr]=n,l[rr]=o,Ha(l,t),t.stateNode=l;var f=r,p=Vn(h=s,n=o);switch(h){case"iframe":case"object":case"embed":In("load",l),r=n;break;case"video":case"audio":for(r=0;r<Ze.length;r++)In(Ze[r],l);r=n;break;case"source":In("error",l),r=n;break;case"img":case"image":case"link":In("error",l),In("load",l),r=n;break;case"form":In("reset",l),In("submit",l),r=n;break;case"details":In("toggle",l),r=n;break;case"input":Ce(l,n),r=ke(l,n),In("invalid",l),Bn(f,"onChange");break;case"option":r=xe(l,n);break;case"select":l._wrapperState={wasMultiple:!!n.multiple},r=i({},n,{value:void 0}),In("invalid",l),Bn(f,"onChange");break;case"textarea":Re(l,n),r=Pe(l,n),In("invalid",l),Bn(f,"onChange");break;default:r=n}Un(h,r),c=void 0,u=h;var m=l,y=r;for(c in y)if(y.hasOwnProperty(c)){var g=y[c];"style"===c?Ln(m,g):"dangerouslySetInnerHTML"===c?null!=(g=g?g.__html:void 0)&&je(m,g):"children"===c?"string"==typeof g?"textarea"===u&&""===g||ze(m,g):"number"==typeof g&&ze(m,""+g):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(d.hasOwnProperty(c)?null!=g&&Bn(f,c):null!=g&&Te(m,c,g,p))}switch(h){case"input":Se(l),De(l,n,!1);break;case"textarea":Se(l),Le(l);break;case"option":null!=n.value&&l.setAttribute("value",""+we(n.value));break;case"select":(r=l).multiple=!!n.multiple,null!=(l=n.value)?Oe(r,!!n.multiple,l,!1):null!=n.defaultValue&&Oe(r,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof r.onClick&&(l.onclick=qn)}(o=Yn(s,o))&&rs(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(a(166));break;case 6:if(n&&null!=t.stateNode)Xa(0,t,n.memoizedProps,o);else{if("string"!=typeof o&&null===t.stateNode)throw Error(a(166));r=Lo(Mo.current),Lo(Po.current),Ma(t)?(s=(o=t).stateNode,r=o.memoizedProps,s[nr]=o,(o=s.nodeValue!==r)&&rs(t)):(s=t,(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o))[nr]=s,t.stateNode=o)}break;case 11:break;case 13:if(ai(qo),o=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=r;break e}o=null!==o,s=!1,null===n?void 0!==t.memoizedProps.fallback&&Ma(t):(s=null!==(r=n.memoizedState),o||null===r||null!==(r=n.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=r).nextEffect=l:(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8)),o&&!s&&0!=(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&qo.current)?0===_s&&(_s=3):(0!==_s&&3!==_s||(_s=4),0!==Ms&&null!==Ns&&(Ou(Ns,Ds),Pu(Ns,Ms)))),(o||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Uo();break;case 10:to(t);break;case 9:case 14:break;case 17:di(t.type)&&pi();break;case 19:if(ai(qo),null===(o=t.memoizedState))break;if(s=0!=(64&t.effectTag),null===(l=o.rendering)){if(s)is(o,!1);else if(0!==_s||null!==n&&0!=(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(l=jo(n))){for(t.effectTag|=64,is(o,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===o.lastEffect&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=r,s=t.child;null!==s;)n=o,(r=s).effectTag&=2,r.nextEffect=null,r.firstEffect=null,(r.lastEffect=null)===(l=r.alternate)?(r.childExpirationTime=0,r.expirationTime=n,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=l.childExpirationTime,r.expirationTime=l.expirationTime,r.child=l.child,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,n=l.dependencies,r.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),s=s.sibling;si(qo,1&qo.current|2),t=t.child;break e}n=n.sibling}}else{if(!s)if(null!==(n=jo(l))){if(t.effectTag|=64,s=!0,null!==(r=n.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),is(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate){null!==(t=t.lastEffect=o.lastEffect)&&(t.nextEffect=null);break}}else Ui()>o.tailExpiration&&1<r&&(t.effectTag|=64,is(o,!(s=!0)),t.expirationTime=t.childExpirationTime=r-1);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}if(null===o.tail)break;0===o.tailExpiration&&(o.tailExpiration=Ui()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=t.lastEffect,r.sibling=null,o=qo.current,si(qo,o=s?1&o|2:1&o),t=r;break e;case 20:case 21:break;default:throw Error(a(156,t.tag))}t=null}if(o=As,1===Ds||1!==o.childExpirationTime){for(s=0,r=o.child;null!==r;)(n=r.expirationTime)>s&&(s=n),(l=r.childExpirationTime)>s&&(s=l),r=r.sibling;o.childExpirationTime=s}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=As.firstEffect),null!==As.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=As.firstEffect),e.lastEffect=As.lastEffect),1<As.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=As:e.firstEffect=As,e.lastEffect=As))}else{if(null!==(t=os(As)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=As.sibling))return t;As=e}while(null!==As);return 0===_s&&(_s=5),null}function fu(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function du(e){var t=Vi();return qi(99,function(e,t){for(;mu(),null!==zs;);if(0!=(48&Cs))throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=fu(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ns&&(As=Ns=null,Ds=0),null!==(i=1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,n.firstEffect):n:n.firstEffect)){var o=Cs;Cs|=32,ks.current=null,Qn=Sn;var s=Kn();if(Gn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(e){u=null;break e}var f=0,d=-1,p=-1,m=0,y=0,g=s,v=null;t:for(;;){for(var b;g!==u||0!==l&&3!==g.nodeType||(d=f+l),g!==h||0!==c&&3!==g.nodeType||(p=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(b=g.firstChild);)v=g,g=b;for(;;){if(g===s)break t;if(v===u&&++m===l&&(d=f),v===h&&++y===c&&(p=f),null!==(b=g.nextSibling))break;v=(g=v).parentNode}g=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;Sn=!(Hn={focusedElem:s,selectionRange:u}),Us=i;do{try{pu()}catch(e){if(null===Us)throw Error(a(330));vu(Us,e),Us=Us.nextEffect}}while(null!==Us);Us=i;do{try{for(s=e,u=t;null!==Us;){var w=Us.effectTag;if(16&w&&ze(Us.stateNode,""),128&w){var T=Us.alternate;if(null!==T){var E=T.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(1038&w){case 2:ms(Us),Us.effectTag&=-3;break;case 6:ms(Us),Us.effectTag&=-3,gs(Us.alternate,Us);break;case 1024:Us.effectTag&=-1025;break;case 1028:Us.effectTag&=-1025,gs(Us.alternate,Us);break;case 4:gs(Us.alternate,Us);break;case 8:ys(s,l=Us,u),ds(l)}Us=Us.nextEffect}}catch(e){if(null===Us)throw Error(a(330));vu(Us,e),Us=Us.nextEffect}}while(null!==Us);if(E=Hn,T=Kn(),w=E.focusedElem,u=E.selectionRange,T!==w&&w&&w.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(w.ownerDocument.documentElement,w)){null!==u&&Gn(w)&&(T=u.start,void 0===(E=u.end)&&(E=T),"selectionStart"in w?(w.selectionStart=T,w.selectionEnd=Math.min(E,w.value.length)):(E=(T=w.ownerDocument||document)&&T.defaultView||window).getSelection&&(E=E.getSelection(),l=w.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!E.extend&&u<s&&(l=u,u=s,s=l),l=Wn(w,s),h=Wn(w,u),l&&h&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((T=T.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),u<s?(E.addRange(T),E.extend(h.node,h.offset)):(T.setEnd(h.node,h.offset),E.addRange(T))))),T=[];for(E=w;E=E.parentNode;)1===E.nodeType&&T.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<T.length;w++)(E=T[w]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Sn=!!Qn,Qn=Hn=null,e.current=n,Us=i;do{try{for(w=r;null!==Us;){var S=Us.effectTag;if(36&S){var I=Us.alternate;switch(E=w,(T=Us).tag){case 0:case 11:case 15:hs(16,32,T);break;case 1:var k=T.stateNode;if(4&T.effectTag)if(null===I)k.componentDidMount();else{var C=T.elementType===T.type?I.memoizedProps:Hi(T.type,I.memoizedProps);k.componentDidUpdate(C,I.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var N=T.updateQueue;null!==N&&yo(0,N,k);break;case 3:var A=T.updateQueue;if(null!==A){if((s=null)!==T.child)switch(T.child.tag){case 5:s=T.child.stateNode;break;case 1:s=T.child.stateNode}yo(0,A,s)}break;case 5:var D=T.stateNode;null===I&&4&T.effectTag&&Yn(T.type,T.memoizedProps)&&D.focus();break;case 6:case 4:case 12:break;case 13:if(null===T.memoizedState){var _=T.alternate;if(null!==_){var x=_.memoizedState;if(null!==x){var O=x.dehydrated;null!==O&&kt(O)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(a(163))}}if(128&S){T=void 0;var P=Us.ref;if(null!==P){var R=Us.stateNode;switch(Us.tag){case 5:T=R;break;default:T=R}"function"==typeof P?P(T):P.current=T}}Us=Us.nextEffect}}catch(e){if(null===Us)throw Error(a(330));vu(Us,e),Us=Us.nextEffect}}while(null!==Us);Us=null,Pi(),Cs=o}else e.current=n;if(js)js=!1,zs=e,Ws=t;else for(Us=i;null!==Us;)t=Us.nextEffect,Us.nextEffect=null,Us=t;if(0===(t=e.firstPendingTime)&&(qs=null),1073741823===t?e===Qs?Gs++:(Gs=0,Qs=e):Gs=0,"function"==typeof wu&&wu(n.stateNode,r),eu(e),Vs)throw Vs=!1,e=Bs,Bs=null,e;return 0!=(8&Cs)||Wi(),null}.bind(null,e,t)),null}function pu(){for(;null!==Us;){var e=Us.effectTag;0!=(256&e)&&ls(Us.alternate,Us),0==(512&e)||js||(js=!0,ji(97,(function(){return mu(),null}))),Us=Us.nextEffect}}function mu(){if(90!==Ws){var e=97<Ws?97:Ws;return Ws=90,qi(e,yu)}}function yu(){if(null===zs)return!1;var e=zs;if(zs=null,0!=(48&Cs))throw Error(a(331));var t=Cs;for(Cs|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:hs(128,0,n),hs(0,64,n)}}catch(t){if(null===e)throw Error(a(330));vu(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Cs=t,Wi(),!0}function gu(e,t,n){lo(e,t=ws(e,t=as(n,t),1073741823)),null!==(e=$s(e,1073741823))&&eu(e)}function vu(e,t){if(3===e.tag)gu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){gu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===qs||!qs.has(r))){lo(n,e=Ts(n,e=as(t,e),1073741823)),null!==(n=$s(n,1073741823))&&eu(n);break}}n=n.return}}function bu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ns===e&&Ds===n?4===_s||3===_s&&1073741823===Os&&Ui()-Fs<500?ru(e,Ds):Ls=!0:xu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),eu(e)))}Es=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||li.current)Ua=!0;else{if(r<n){switch(Ua=!1,t.tag){case 3:Qa(t),La();break;case 5:if(Vo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:di(t.type)&&vi(t);break;case 4:Fo(t,t.stateNode.containerInfo);break;case 10:eo(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&n<=r?$a(e,t,n):(si(qo,1&qo.current),null!==(t=ns(e,t,n))?t.sibling:null);si(qo,1&qo.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return ts(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),si(qo,qo.current),!r)return null}return ns(e,t,n)}Ua=!1}}else Ua=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=fi(t,ci.current),ro(t,n),i=sa(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,ua(),di(r)){var o=!0;vi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&wo(t,r,s,e),i.updater=To,ko((t.stateNode=i)._reactInternalFiber=t,r,e,n),t=Ga(null,t,r,!0,o,n)}else t.tag=0,Va(null,t,i,n),t=t.child;return t;case 16:if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),(e._result=t).then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return Iu(e)?1:0;if(null!=e){if((e=e.$$typeof)===z)return 11;if(e===G)return 14}return 2}(i),e=Hi(i,e),o){case 0:t=Wa(null,t,i,e,n);break;case 1:t=Ka(null,t,i,e,n);break;case 11:t=Ba(null,t,i,e,n);break;case 14:t=qa(null,t,i,Hi(i.type,e),r,n);break;default:throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wa(e,t,r,i=t.elementType===r?i:Hi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ka(e,t,r,i=t.elementType===r?i:Hi(r,i),n);case 3:if(Qa(t),null===(r=t.updateQueue))throw Error(a(282));if(i=null!==(i=t.memoizedState)?i.element:null,mo(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i)La(),t=ns(e,t,n);else{if((i=t.stateNode.hydrate)&&(Da=Zn(t.stateNode.containerInfo.firstChild),Aa=t,i=_a=!0),i)for(n=xo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Va(e,t,r,n),La();t=t.child}return t;case 5:return Vo(t),null===e&&Pa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Xn(r,i)?s=null:null!==o&&Xn(r,o)&&(t.effectTag|=16),za(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,null):(Va(e,t,s,n),t.child);case 6:return null===e&&Pa(t),null;case 13:return $a(e,t,n);case 4:return Fo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):Va(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ba(e,t,r,i=t.elementType===r?i:Hi(r,i),n);case 7:return Va(e,t,t.pendingProps,n),t.child;case 8:case 12:return Va(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,eo(t,o=i.value),null!==s){var u=s.value;if(0==(o=Qr(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!li.current){t=ns(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===u.tag&&((l=uo(n,null)).tag=2,lo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),no(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}Va(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,ro(t,n),r=r(i=io(i,o.unstable_observedBits)),t.effectTag|=1,Va(e,t,r,n),t.child;case 14:return o=Hi(i=t.type,t.pendingProps),qa(e,t,i,o=Hi(i.type,o),r,n);case 15:return ja(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Hi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,di(r)?(e=!0,vi(t)):e=!1,ro(t,n),So(t,r,i),ko(t,r,i,n),Ga(null,t,r,!0,e,n);case 19:return ts(e,t,n)}throw Error(a(156,t.tag))};var wu=null,Tu=null;function Eu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Su(e,t,n,r){return new Eu(e,t,n,r)}function Iu(e){return(e=e.prototype)&&e.isReactComponent}function ku(e,t){var n=e.alternate;return null===n?((n=Su(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,(n.alternate=e).alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Cu(e,t,n,r,i,o){var s=2;if("function"==typeof(r=e))Iu(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case F:return Nu(n.children,i,o,t);case j:s=8,i|=7;break;case U:s=8,i|=1;break;case V:return(e=Su(12,n,t,8|i)).elementType=V,e.type=V,e.expirationTime=o,e;case W:return(e=Su(13,n,t,i)).type=W,e.elementType=W,e.expirationTime=o,e;case K:return(e=Su(19,n,t,i)).elementType=K,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case B:s=10;break e;case q:s=9;break e;case z:s=11;break e;case G:s=14;break e;case Q:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Su(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Nu(e,t,n,r){return(e=Su(7,e,r,t)).expirationTime=n,e}function Au(e,t,n){return(e=Su(6,e,null,t)).expirationTime=n,e}function Du(e,t,n){return(t=Su(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _u(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function xu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&t<=n&&e<=t}function Ou(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(t<r||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Pu(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(n<=t?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ru(e,t){var n=e.lastExpiredTime;(0===n||t<n)&&(e.lastExpiredTime=t)}function Mu(e,t,n,r){var i=t.current,o=Ys(),s=vo.suspense;o=Xs(o,i,s);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(di(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(di(c)){n=gi(n,c,u);break e}}n=u}else n=ui;return null===t.context?t.context=n:t.pendingContext=n,(t=uo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),lo(i,t),Js(i,o),o}function Lu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Fu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Uu(e,t){Fu(e,t),(e=e.alternate)&&Fu(e,t)}function Vu(e,t,n){var r,i,o=new _u(e,t,n=null!=n&&!0===n.hydrate),a=Su(3,null,null,2===t?7:1===t?3:0);(o.current=a).stateNode=o,e[ir]=o.current,n&&0!==t&&(r=9===e.nodeType?e:e.ownerDocument,i=xn(r),mt.forEach((function(e){On(e,r,i)})),yt.forEach((function(e){On(e,r,i)}))),this._internalRoot=o}function Bu(e){return e&&(1===e.nodeType||9===e.nodeType||11===e.nodeType||8===e.nodeType&&" react-mount-point-unstable "===e.nodeValue)}function qu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Lu(a);s.call(e)}}Mu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(!(t=t||!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))))for(var n;n=e.lastChild;)e.removeChild(n);return new Vu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Lu(a);u.call(e)}}nu((function(){Mu(t,a,e,i)}))}return Lu(a)}function ju(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Bu(t))throw Error(a(200));return function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:null;return{$$typeof:L,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Vu.prototype.render=function(e,t){Mu(e,this._internalRoot,null,void 0===t?null:t)},Vu.prototype.unmount=function(e){var t=this._internalRoot,n=void 0===e?null:e,r=t.containerInfo;Mu(null,t,null,(function(){(r[ir]=null)!==n&&n()}))},it=function(e){if(13===e.tag){var t=Qi(Ys(),150,100);Js(e,t),Uu(e,t)}},ot=function(e){if(13===e.tag){Ys();var t=Gi++;Js(e,t),Uu(e,t)}},at=function(e){if(13===e.tag){var t=Ys();Js(e,t=Xs(t,e,null)),Uu(e,t)}},Z=function(e,t,n){switch(t){case"input":if(Ae(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ur(r);if(!i)throw Error(a(90));Ie(r),Ae(r,i)}}}break;case"textarea":Me(e,n);break;case"select":null!=(t=n.value)&&Oe(e,!!n.multiple,t,!1)}},ae=function(e,t,n,r){var i=Cs;Cs|=4;try{return qi(98,e.bind(null,t,n,r))}finally{0===(Cs=i)&&Wi()}},se=function(){0==(49&Cs)&&(function(){if(null!==Ks){var e=Ks;Ks=null,e.forEach((function(e,t){Ru(t,e),eu(t)})),Wi()}}(),mu())};var zu,Wu,Ku={createPortal:ju,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0!==t)return null===(e=rt(t))?null:e.stateNode;if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))},hydrate:function(e,t,n){if(!Bu(t))throw Error(a(200));return qu(null,e,t,!0,n)},render:function(e,t,n){if(!Bu(t))throw Error(a(200));return qu(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!Bu(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return qu(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(!Bu(e))throw Error(a(40));return!!e._reactRootContainer&&(nu((function(){qu(null,null,e,!1,(function(){e._reactRootContainer=null,e[ir]=null}))})),!0)},unstable_createPortal:function(){return ju.apply(void 0,arguments)},unstable_batchedUpdates:oe=function(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&Wi()}},flushSync:function(e,t){if(0!=(48&Cs))throw Error(a(187));var n=Cs;Cs|=1;try{return qi(99,e.bind(null,t))}finally{Cs=n,Wi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[ar,sr,ur,_.injectEventPluginsByName,f,Ot,function(e){C(e,xt)},re,ie,Nn,D,mu,{current:!(ue=function(e,t){var n=Cs;Cs|=2;try{return e(t)}finally{0===(Cs=n)&&Wi()}})}]}};Wu=(zu={findFiberByHostInstance:or,bundleType:0,version:"16.12.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return;try{var n=t.inject(e);wu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Tu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}}(i({},zu,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return Wu?Wu(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),e.exports=Ku.default||Ku},function(e,t,n){"use strict";e.exports=n(15)},function(e,t,n){"use strict";var r,i,o,a,s;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,l=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(n){throw setTimeout(e,0),n}},h=Date.now();t.unstable_now=function(){return Date.now()-h},r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,d=window.Date,p=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var y=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof f&&"function"==typeof f.now)t.unstable_now=function(){return f.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var v=!1,b=null,w=-1,T=5,E=0;a=function(){return t.unstable_now()>=E},s=function(){},t.unstable_forceFrameRate=function(e){e<0||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):T=0<e?Math.floor(1e3/e):5};var S=new MessageChannel,I=S.port2;S.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();E=e+T;try{b(!0,e)?I.postMessage(null):(v=!1,b=null)}catch(e){throw I.postMessage(null),e}}else v=!1},r=function(e){b=e,v||(v=!0,I.postMessage(null))},i=function(e,n){w=p((function(){e(t.unstable_now())}),n)},o=function(){m(w),w=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=Math.floor((n-1)/2),i=e[r];if(!(void 0!==i&&0<A(i,t)))break e;e[r]=t,e[n]=i,n=r}}function C(e){return void 0===(e=e[0])?null:e}function N(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=1+o,u=e[s];if(void 0!==a&&A(a,n)<0)r=void 0!==u&&A(u,a)<0?(e[r]=u,e[s]=n,s):(e[r]=a,e[o]=n,o);else{if(!(void 0!==u&&A(u,n)<0))break e;e[r]=u,e[s]=n,r=s}}}return t}}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!=n?n:e.id-t.id}var D=[],_=[],x=1,O=null,P=3,R=!1,M=!1,L=!1;function F(e){for(var t=C(_);null!==t;){if(null===t.callback)N(_);else{if(!(t.startTime<=e))break;N(_),t.sortIndex=t.expirationTime,k(D,t)}t=C(_)}}function U(e){if(L=!1,F(e),!M)if(null!==C(D))M=!0,r(V);else{var t=C(_);null!==t&&i(U,t.startTime-e)}}function V(e,n){M=!1,L&&(L=!1,o()),R=!0;var r=P;try{for(F(n),O=C(D);null!==O&&(!(O.expirationTime>n)||e&&!a());){var s=O.callback;if(null!==s){O.callback=null,P=O.priorityLevel;var u=s(O.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?O.callback=u:O===C(D)&&N(D),F(n)}else N(D);O=C(D)}if(null!==O)var c=!0;else{var l=C(_);null!==l&&i(U,l.startTime-n),c=!1}return c}finally{O=null,P=r,R=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=s;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var u=a.delay;u="number"==typeof u&&0<u?s+u:s,a="number"==typeof a.timeout?a.timeout:B(e)}else a=B(e),u=s;return e={id:x++,callback:n,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},s<u?(e.sortIndex=u,k(_,e),null===C(D)&&e===C(_)&&(L?o():L=!0,i(U,u-s))):(e.sortIndex=a,k(D,e),M||R||(M=!0,r(V))),e},t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_shouldYield=function(){var e=t.unstable_now();F(e);var n=C(D);return n!==O&&null!==O&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<O.expirationTime||a()},t.unstable_requestPaint=q,t.unstable_continueExecution=function(){M||R||(M=!0,r(V))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return C(D)},t.unstable_Profiling=null},,,function(e,t,n){},function(e,t,n){"use strict";n(20)},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t);(function(){var t,n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}(this);function o(e){var t,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return r?r.call(e):{next:(t=e,n=0,function(){return n<t.length?{done:!1,value:t[n++]}:{done:!0}})}}!function(e,t){if(t){var r=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in r||(r[a]={}),r=r[a]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&n(r,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=i.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.o=function(e){var t=this.f();e.La(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(t){o(t)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.La(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.La=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=o(e),a=i.next();!a.done;a=i.next())r(a.value).La(t,n)}))},t.all=function(e){var n=o(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}for(var a=[],s=0;a.push(void 0),s++,r(i.value).La(o(a.length-1),t),!(i=n.next()).done;);}))},t}));var a=a||{},s=this||self;function u(e){return"string"==typeof e}function c(e){return"boolean"==typeof e}var l=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(){}function d(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function p(e){return null===e}function m(e){return"array"==d(e)}function y(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function g(e){return"function"==d(e)}function v(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var b="closure_uid_"+(1e9*Math.random()>>>0),w=0;function T(e,t,n){return e.call.apply(e.bind,arguments)}function E(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function S(e,t,n){return(S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T:E).apply(null,arguments)}function I(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var k=Date.now||function(){return+new Date};function C(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function N(e){if(e)try{return e.$goog_Thenable}catch(e){return}}function A(e){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function D(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");A.call(this,n+e[r])}function _(e,t){throw new D("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function x(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function O(e,t){e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}function P(){this.b=this.a=null}C(A,Error),A.prototype.name="CustomError",C(D,A),D.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var R=new x((function(){return new M}),(function(e){e.reset()}));function M(){this.next=this.b=this.a=null}function L(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(v(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;_("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}P.prototype.add=function(e,t){var n=R.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(u(e))return u(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},U=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=u(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},V=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=u(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},B=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=u(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function q(e,t){return 0<=F(e,t)}function j(e,t){var n;return(n=0<=(t=F(e,t)))&&Array.prototype.splice.call(e,t,1),n}function z(e,t){!function(e,t){for(var n=u(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1).length}))}function W(e){return Array.prototype.concat.apply([],arguments)}function K(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function G(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function Q(e){for(var t in e)return;return 1}function H(e){var t,n={};for(t in e)n[t]=e[t];return n}var Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Y.length;o++)n=Y[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function J(e,t){this.a=e===ee&&t||"",this.b=Z}function $(e){return e instanceof J&&e.constructor===J&&e.b===Z?e.a:(_("expected object of type Const, got '"+e+"'"),"type_error:Const")}J.prototype.qa=!0,J.prototype.pa=function(){return this.a},J.prototype.toString=function(){return"Const{"+this.a+"}"};var Z={},ee={},te=new J(ee,"");function ne(){this.a="",this.b=se}function re(e){return e instanceof ne&&e.constructor===ne&&e.b===se?e.a:(_("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function ie(e,t){var n=$(e);if(!ae.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ue(e=n.replace(oe,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof J?$(e):encodeURIComponent(String(e))})))}ne.prototype.qa=!0,ne.prototype.pa=function(){return this.a.toString()},ne.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var oe=/%{(\w+)}/g,ae=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,se={};function ue(e){var t=new ne;return t.a=e,t}var ce=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},le=/&/g,he=/</g,fe=/>/g,de=/"/g,pe=/'/g,me=/\x00/g,ye=/[\x00&<>"']/;function ge(e,t){return-1!=e.indexOf(t)}function ve(e,t){return e<t?-1:t<e?1:0}function be(){this.a="",this.b=Ie}function we(e){return e instanceof be&&e.constructor===be&&e.b===Ie?e.a:(_("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}be.prototype.qa=!0,be.prototype.pa=function(){return this.a.toString()},be.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Te=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ee(e){return e instanceof be?e:(e="object"==typeof e&&e.qa?e.pa():String(e),Te.test(e)||(e="about:invalid#zClosurez"),ke(e))}var Se,Ie={};function ke(e){var t=new be;return t.a=e,t}ke("about:blank");e:{var Ce=s.navigator;if(Ce){var Ne=Ce.userAgent;if(Ne){Se=Ne;break e}}Se=""}function Ae(e){return ge(Se,e)}function De(){this.a="",this.b=xe}function _e(e){return e instanceof De&&e.constructor===De&&e.b===xe?e.a:(_("expected object of type SafeHtml, got '"+e+"' of type "+d(e)),"type_error:SafeHtml")}De.prototype.qa=!0,De.prototype.pa=function(){return this.a.toString()},De.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var xe={};function Oe(e){var t=new De;return t.a=e,t}Oe("<!DOCTYPE html>");var Pe,Re,Me=Oe("");function Le(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Fe(e){return ye.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(le,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(he,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(fe,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(de,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(pe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(me,"&#0;"))),e}function Ue(e){s.setTimeout((function(){throw e}),0)}function Ve(e,t){Re||function(){if(s.Promise&&s.Promise.resolve){var e=s.Promise.resolve(void 0);Re=function(){e.then(je)}}else Re=function(){var e=je;!g(s.setImmediate)||s.Window&&s.Window.prototype&&!Ae("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Pe=Pe||function(){var e=s.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ae("Presto")&&(e=function(){var e,t,n=document.createElement("IFRAME");n.style.display="none",e=n,t=ue($(te)),L(e,"HTMLIFrameElement"),e.src=re(t).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(_e(Me)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=S((function(e){"*"!=o&&e.origin!=o||e.data!=i||this.port1.onmessage()}),this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===e||Ae("Trident")||Ae("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){s.setTimeout(e,0)};var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}())(e):s.setImmediate(e)}}(),Be||(Re(),Be=!0),qe.add(e,t)}Oe("<br>");var Be=!1,qe=new P;function je(){for(var e;n=t=void 0,n=null,(t=qe).a&&(n=t.a,t.a=t.a.next,t.a||(t.b=null),n.next=null),e=n;){try{e.a.call(e.b)}catch(e){Ue(e)}O(R,e)}var t,n;Be=!1}function ze(e,t){if(this.a=We,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=f)try{var n=this;e.call(t,(function(e){nt(n,Ke,e)}),(function(e){if(!(e instanceof ct))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}nt(n,Ge,e)}))}catch(e){nt(this,Ge,e)}}var We=0,Ke=2,Ge=3;function Qe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Qe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var He=new x((function(){return new Qe}),(function(e){e.reset()}));function Ye(e,t,n){var r=He.get();return r.g=e,r.b=t,r.f=n,r}function Xe(e){if(e instanceof ze)return e;var t=new ze(f);return nt(t,Ke,e),t}function Je(e){return new ze((function(t,n){n(e)}))}function $e(e,t,n){rt(e,t,n,null)||Ve(I(t,e))}function Ze(e){return new ze((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)$e(e[o],I(i,o,!0),I(i,o,!1));else t(r)}))}function et(e,t){e.b||e.a!=Ke&&e.a!=Ge||it(e),e.f?e.f.next=t:e.b=t,e.f=t}function tt(e,t,n,r){var i=Ye(null,null,null);return i.a=new ze((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(n){o(n)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof ct?o(t):e(i)}catch(t){o(t)}}:o})),et(i.a.c=e,i),i.a}function nt(e,t,n){var r,i;e.a==We&&(e===n&&(t=Ge,n=new TypeError("Promise cannot resolve to itself")),e.a=1,rt(n,e.Oc,e.Pc,e)||(e.i=n,e.a=t,e.c=null,it(e),t!=Ge||n instanceof ct||(i=n,(r=e).g=!0,Ve((function(){r.g&&ut.call(null,i)})))))}function rt(e,t,n,r){if(e instanceof ze)return et(e,Ye(t||f,n||null,r)),1;if(N(e))return e.then(t,n,r),1;if(v(e))try{var i=e.then;if(g(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,n.call(i,e))}),o)}catch(e){o(e)}}(e,i,t,n,r),1}catch(e){return n.call(r,e),1}}function it(e){e.h||(e.h=!0,Ve(e.Zb,e))}function ot(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function at(e,t,n,r){if(n==Ge&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,st(t,n,r);else try{t.c?t.g.call(t.f):st(t,n,r)}catch(e){ut.call(null,e)}O(He,t)}function st(e,t,n){t==Ke?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}ze.prototype.then=function(e,t,n){return tt(this,g(e)?e:null,g(t)?t:null,n)},ze.prototype.$goog_Thenable=!0,(t=ze.prototype).ka=function(e,t){return(e=Ye(e,e,t)).c=!0,et(this,e),this},t.s=function(e,t){return tt(this,null,e,t)},t.cancel=function(e){this.a==We&&Ve((function(){!function e(t,n){if(t.a==We)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==We&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):ot(r),at(r,o,Ge,n)))}t.c=null}else nt(t,Ge,n)}(this,new ct(e))}),this)},t.Oc=function(e){this.a=We,nt(this,Ke,e)},t.Pc=function(e){this.a=We,nt(this,Ge,e)},t.Zb=function(){for(var e;e=ot(this);)at(this,e,this.a,this.i);this.h=!1};var ut=Ue;function ct(e){A.call(this,e)}function lt(){0!=ht&&(ft[this[b]||(this[b]=++w)]=this),this.va=this.va,this.la=this.la}C(ct,A);var ht=0,ft={};function dt(e){if(!e.va&&(e.va=!0,e.za(),0!=ht)){var t=e[b]||(e[b]=++w);if(0!=ht&&e.la&&0<e.la.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ft[t]}}function pt(e){return pt[" "](e),e}lt.prototype.va=!(ct.prototype.name="cancel"),lt.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},pt[" "]=f;var mt,yt,gt=Ae("Opera"),vt=Ae("Trident")||Ae("MSIE"),bt=Ae("Edge"),wt=bt||vt,Tt=Ae("Gecko")&&!(ge(Se.toLowerCase(),"webkit")&&!Ae("Edge"))&&!(Ae("Trident")||Ae("MSIE"))&&!Ae("Edge"),Et=ge(Se.toLowerCase(),"webkit")&&!Ae("Edge");function St(){var e=s.document;return e?e.documentMode:void 0}e:{var It="",kt=(yt=Se,Tt?/rv:([^\);]+)(\)|;)/.exec(yt):bt?/Edge\/([\d\.]+)/.exec(yt):vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(yt):Et?/WebKit\/(\S+)/.exec(yt):gt?/(?:Version)[ \/]?(\S+)/.exec(yt):void 0);if(kt&&(It=kt?kt[1]:""),vt){var Ct=St();if(null!=Ct&&Ct>parseFloat(It)){mt=String(Ct);break e}}mt=It}var Nt,At={};function Dt(e){return t=e,n=At,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(){for(var t=0,n=ce(String(mt)).split("."),r=ce(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ve(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ve(0==a[2].length,0==s[2].length)||ve(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}();var t,n}Nt=s.document&&vt?St():void 0;var _t=Object.freeze||function(e){return e},xt=!vt||9<=Number(Nt),Ot=vt&&!Dt("9"),Pt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",f,t),s.removeEventListener("test",f,t)}catch(e){}return e}();function Rt(e,t){this.type=e,this.b=this.target=t,this.Mb=!0}function Mt(e,t){if(Rt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Tt){e:{try{pt(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=u(e.pointerType)?e.pointerType:Lt[e.pointerType]||"",(this.a=e).defaultPrevented&&this.preventDefault()}}Rt.prototype.preventDefault=function(){this.Mb=!1},C(Mt,Rt);var Lt=_t({2:"touch",3:"pen",4:"mouse"});Mt.prototype.preventDefault=function(){Mt.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Ot)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},Mt.prototype.f=function(){return this.a};var Ft="closure_listenable_"+(1e6*Math.random()|0),Ut=0;function Vt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Ut,this.ta=this.Ka=!1}function Bt(e){e.ta=!0,e.listener=null,e.proxy=null,e.src=null,e.Pa=null}function qt(e){this.src=e,this.a={},this.b=0}function jt(e,t){var n=t.type;n in e.a&&j(e.a[n],t)&&(Bt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function zt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ta&&o.listener==t&&o.capture==!!n&&o.Pa==r)return i}return-1}qt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=zt(e,t,r,i);return-1<a?(t=e[a],n||(t.Ka=!1)):((t=new Vt(t,this.src,o,!!r,i)).Ka=n,e.push(t)),t};var Wt="closure_lm_"+(1e6*Math.random()|0),Kt={};function Gt(e,t,n,r,i){if(r&&r.once)Ht(e,t,n,r,i);else if(m(t))for(var o=0;o<t.length;o++)Gt(e,t[o],n,r,i);else n=rn(n),e&&e[Ft]?an(e,t,n,v(r)?!!r.capture:!!r,i):Qt(e,t,n,!1,r,i)}function Qt(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a,s,u=v(i)?!!i.capture:!!i,c=tn(e);if(c||(e[Wt]=c=new qt(e)),!(n=c.add(t,n,r,u,o)).proxy)if(a=en,r=s=xt?function(e){return a.call(s.src,s.listener,e)}:function(e){if(!(e=a.call(s.src,s.listener,e)))return e},(n.proxy=r).src=e,r.listener=n,e.addEventListener)Pt||(i=u),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function Ht(e,t,n,r,i){if(m(t))for(var o=0;o<t.length;o++)Ht(e,t[o],n,r,i);else n=rn(n),e&&e[Ft]?sn(e,t,n,v(r)?!!r.capture:!!r,i):Qt(e,t,n,!0,r,i)}function Yt(e,t,n,r,i){if(m(t))for(var o=0;o<t.length;o++)Yt(e,t[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=rn(n),e&&e[Ft]?(e=e.u,(t=String(t).toString())in e.a&&-1<(n=zt(o=e.a[t],n,r,i))&&(Bt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):(e=e&&tn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=zt(t,n,r,i)),(n=-1<e?t[e]:null)&&Xt(n))}function Xt(e){if("number"!=typeof e&&e&&!e.ta){var t=e.src;if(t&&t[Ft])jt(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tn(t))?(jt(n,e),0==n.b&&(n.src=null,t[Wt]=null)):Bt(e)}}}function Jt(e){return e in Kt?Kt[e]:Kt[e]="on"+e}function $t(e,t,n,r){var i=!0;if((e=tn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ta&&(o=Zt(o,r),i=i&&!1!==o)}return i}function Zt(e,t){var n=e.listener,r=e.Pa||e.src;return e.Ka&&Xt(e),n.call(r,t)}function en(e,t){if(e.ta)return!0;if(xt)return Zt(e,new Mt(t,this));if(!t)e:{t=["window","event"];for(var n=s,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Mt(r=t,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=$t(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=$t(r[i],e,!1,t),n=n&&o}return n}function tn(e){return(e=e[Wt])instanceof qt?e:null}var nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function rn(e){return g(e)?e:(e[nn]||(e[nn]=function(t){return e.handleEvent(t)}),e[nn])}function on(){lt.call(this),this.u=new qt(this),(this.Sb=this).Xa=null}function an(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function sn(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function un(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ta&&a.capture==n){var s=a.listener,u=a.Pa||a.src;a.Ka&&jt(e.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function cn(e,t,n){if(g(e))n&&(e=S(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=S(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ln(e){var t=null;return new ze((function(n,r){-1==(t=cn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).s((function(e){throw s.clearTimeout(t),e}))}function hn(e){if(e.U&&"function"==typeof e.U)return e.U();if(u(e))return e.split("");if(y(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function fn(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.U||"function"!=typeof e.U){if(y(e)||u(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function dn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof dn)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function pn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];mn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)mn(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function mn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C(on,lt),on.prototype[Ft]=!0,on.prototype.addEventListener=function(e,t,n,r){Gt(this,e,t,n,r)},on.prototype.removeEventListener=function(e,t,n,r){Yt(this,e,t,n,r)},on.prototype.dispatchEvent=function(e){var t,n=this.Xa;if(n)for(t=[];n;n=n.Xa)t.push(n);n=this.Sb;var r=e.type||e;if(u(e))e=new Rt(e,n);else if(e instanceof Rt)e.target=e.target||n;else{var i=e;X(e=new Rt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=un(a,r,!0,e)&&i}if(i=un(a=e.b=n,r,!0,e)&&i,i=un(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=un(a=e.b=t[o],r,!1,e)&&i;return i},on.prototype.za=function(){if(on.qb.za.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Bt(n[r]);delete t.a[e],t.b--}}this.Xa=null},(t=dn.prototype).U=function(){pn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},t.X=function(){return pn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(e,t){return mn(this.b,e)?this.b[e]:t},t.set=function(e,t){mn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},t.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function gn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof gn?(this.h=void 0!==t?t:e.h,vn(this,e.f),this.i=e.i,this.b=e.b,bn(this,e.l),this.c=e.c,wn(this,Vn(e.a)),this.g=e.g):e&&(n=String(e).match(yn))?(this.h=!!t,vn(this,n[1]||"",!0),this.i=kn(n[2]||""),this.b=kn(n[3]||"",!0),bn(this,n[4]),this.c=kn(n[5]||"",!0),wn(this,n[6]||"",!0),this.g=kn(n[7]||"")):(this.h=!!t,this.a=new Pn(null,this.h))}function vn(e,t,n){e.f=n?kn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function bn(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.l=t}else e.l=null}function wn(e,t,n){var r,i;t instanceof Pn?(e.a=t,r=e.a,(i=e.h)&&!r.f&&(Rn(r),r.c=null,r.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ln(this,t),Un(this,n,e))}),r)),r.f=i):(n||(t=Cn(t,xn)),e.a=new Pn(t,e.h))}function Tn(e,t,n){e.a.set(t,n)}function En(e,t){return e.a.get(t)}function Sn(e){return e instanceof gn?new gn(e):new gn(e,void 0)}function In(e,t){var n=new gn(null,void 0);return vn(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function kn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cn(e,t,n){return u(e)?(e=encodeURI(e).replace(t,Nn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Nn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}gn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Cn(t,An,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.i)&&e.push(Cn(t,An,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cn(n,"/"==n.charAt(0)?_n:Dn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Cn(n,On)),e.join("")},gn.prototype.resolve=function(e){var t=new gn(this),n=!!e.f;n?vn(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)bn(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ge(i,"./")||ge(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?wn(t,Vn(e.a)):n=!!e.g,n&&(t.g=e.g),t};var An=/[#\/\?@]/g,Dn=/[#\?:]/g,_n=/[#\?]/g,xn=/[#\?@]/g,On=/#/g;function Pn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Rn(e){e.a||(e.a=new dn,e.b=0,e.c&&function(t){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];a=o,s=i?decodeURIComponent(i.replace(/\+/g," ")):"",e.add(decodeURIComponent(a.replace(/\+/g," ")),s)}}var a,s}(e.c))}function Mn(e){var t=fn(e);if(void 0===t)throw Error("Keys are undefined");var n=new Pn(null,void 0);e=hn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];m(o)?Un(n,i,o):n.add(i,o)}return n}function Ln(e,t){Rn(e),t=Bn(e,t),mn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,mn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&pn(e)))}function Fn(e,t){return Rn(e),t=Bn(e,t),mn(e.a.b,t)}function Un(e,t,n){Ln(e,t),0<n.length&&(e.c=null,e.a.set(Bn(e,t),K(n)),e.b+=n.length)}function Vn(e){var t=new Pn;return t.c=e.c,e.a&&(t.a=new dn(e.a),t.b=e.b),t}function Bn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(t=Pn.prototype).add=function(e,t){Rn(this),this.c=null,e=Bn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(e,t){Rn(this),this.a.forEach((function(n,r){U(n,(function(n){e.call(t,n,r,this)}),this)}),this)},t.X=function(){Rn(this);for(var e=this.a.U(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},t.U=function(e){Rn(this);var t=[];if(u(e))Fn(this,e)&&(t=W(t,this.a.get(Bn(this,e))));else{e=this.a.U();for(var n=0;n<e.length;n++)t=W(t,e[n])}return t},t.set=function(e,t){return Rn(this),this.c=null,Fn(this,e=Bn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},t.get=function(e,t){return e&&0<(e=this.U(e)).length?String(e[0]):t},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var qn=!vt||9<=Number(Nt);function jn(e){var t=document;return u(e)?t.getElementById(e):e}function zn(e,t){G(t,(function(t,n){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Wn.hasOwnProperty(n)?e.setAttribute(Wn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var Wn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Kn(e){if(e&&"number"==typeof e.length){if(v(e))return"function"==typeof e.item||"string"==typeof e.item;if(g(e))return"function"==typeof e.item}}function Gn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(m(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Xn(i,r),r.push(":"),e(t,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Xn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,e,t),t.join("")}function Qn(){}var Hn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Yn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Xn(e,t){t.push('"',e.replace(Yn,(function(e){var t=Hn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Hn[e]=t),t})),'"')}function Jn(){var e=mr();return vt&&Nt&&11==Nt||/Edge\/\d+/.test(e)}function $n(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function Zn(e,t){t=t||s.window;var n="about:blank";e&&(n=we(Ee(e)).toString()),t.location.href=n}function er(e){return!!((e=(e||mr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function tr(e){e=e||s.window;try{e.close()}catch(e){}}function nr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(t.target=r,ge(n,"crios/")&&(t.target="_blank")),fr(mr())==hr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof be?n:Ee(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((Ae("iPhone")&&!Ae("iPod")&&!Ae("iPad")||Ae("iPad")||Ae("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(L(a=r.document.createElement("A"),"HTMLAnchorElement"),t instanceof be||t instanceof be||(t="object"==typeof t&&t.qa?t.pa():String(t),Te.test(t)||(t="about:invalid#zClosurez"),t=ke(t)),a.href=we(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=we(t).toString(),a&&(wt&&ge(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=Oe('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Fe(e)+'">'),a.document.write(_e(e)),a.document.close())):(a=r.open(we(t).toString(),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}var rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^[^@]+@[^@]+$/;function or(){var e=null;return new ze((function(t){"complete"==s.document.readyState?t():(e=function(){t()},Ht(window,"load",e))})).s((function(t){throw Yt(window,"load",e),t}))}function ar(e){return e=e||mr(),!("file:"!==wr()&&"ionic:"!==wr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function sr(){var e=s.window;try{return e&&e!=e.top}catch(e){return}}function ur(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function cr(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function lr(){var e=cr();return"ReactNative"===e||"Node"===e}var hr="Firefox";function fr(e){var t=e.toLowerCase();return ge(t,"opera/")||ge(t,"opr/")||ge(t,"opios/")?"Opera":ge(t,"iemobile")?"IEMobile":ge(t,"msie")||ge(t,"trident/")?"IE":ge(t,"edge/")?"Edge":ge(t,"firefox/")?hr:ge(t,"silk/")?"Silk":ge(t,"blackberry")?"Blackberry":ge(t,"webos")?"Webos":!ge(t,"safari/")||ge(t,"chrome/")||ge(t,"crios/")||ge(t,"android")?!ge(t,"chrome/")&&!ge(t,"crios/")||ge(t,"edge/")?ge(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":"Chrome":"Safari"}var dr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function pr(e,t){t=t||[];var n,r=[],i={};for(n in dr)i[dr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=cr())?r=fr(i=mr()):"Worker"===r&&(r=fr(i=mr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function mr(){return s.navigator&&s.navigator.userAgent||""}function yr(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function gr(){try{var e=s.localStorage,t=kr();if(e)return e.setItem(t,"1"),e.removeItem(t),!Jn()||!!s.indexedDB}catch(e){return ur()&&!!s.indexedDB}return!1}function vr(){return(br()||"chrome-extension:"===wr()||ar())&&!lr()&&gr()&&!ur()}function br(){return"http:"===wr()||"https:"===wr()}function wr(){return s.location&&s.location.protocol||null}function Tr(e){return!er(e=e||mr())&&fr(e)!=hr}function Er(e){return void 0===e?null:Gn(e)}function Sr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Ir(e){if(null!==e)return JSON.parse(e)}function kr(e){return e||Math.floor(1e9*Math.random()).toString()}function Cr(e){return"Safari"!=fr(e=e||mr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Nr(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Ar(e,t){if(t<e)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=mr(),t=cr(),this.b=er(e)||"ReactNative"===t}function Dr(){var e=s.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function _r(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function xr(){return yr("fireauth.oauthhelper",s)||yr("fireauth.iframe",s)}Ar.prototype.get=function(){var e=s.navigator;return!e||"boolean"!=typeof e.onLine||!br()&&"chrome-extension:"!==wr()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Or,Pr={};function Rr(e){Pr[e]||(Pr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Mr={};Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:2}),Or=2==Mr.abcd}catch(qo){Or=!1}function Lr(e,t,n){Or?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Fr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Lr(e,n,t[n])}function Ur(e){var t={};return Fr(t,e),t}function Vr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Lr(t,n,Vr(e[n]));return t}function Br(e){var t={},n=e[jr],r=e[zr];if(!(e=e[Wr])||e!=qr&&!n)throw Error("Invalid provider user info!");t[Gr]=r||null,t[Kr]=n||null,Lr(this,Hr,e),Lr(this,Qr,Vr(t))}var qr="EMAIL_SIGNIN",jr="email",zr="newEmail",Wr="requestType",Kr="email",Gr="fromEmail",Qr="data",Hr="operation";function Yr(e,t){this.code=Jr+e,this.message=t||$r[e]||""}function Xr(e){var t=e&&e.code;return t?new Yr(t.substring(Jr.length),e.message):null}C(Yr,Error),Yr.prototype.A=function(){return{code:this.code,message:this.message}},Yr.prototype.toJSON=function(){return this.A()};var Jr="auth/",$r={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Zr(e){var t=En(e=Sn(e),ei)||null,n=En(e,ti)||null,r=En(e,ii)||null;if(r=r&&ai[r]||null,!t||!n||!r)throw new Yr("argument-error",ei+", "+ti+"and "+ii+" are required in a valid action code URL.");Fr(this,{apiKey:t,operation:r,code:n,continueUrl:En(e,ni)||null,languageCode:En(e,ri)||null,tenantId:En(e,oi)||null})}var ei="apiKey",ti="oobCode",ni="continueUrl",ri="languageCode",ii="mode",oi="tenantId",ai={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:qr,verifyEmail:"VERIFY_EMAIL"};function si(e){try{return new Zr(e)}catch(e){return null}}function ui(e){var t=e[di];if(void 0===t)throw new Yr("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Yr("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[ci];if(n&&"object"==typeof n){t=n[yi];var r=n[pi];if(n=n[mi],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new Yr("argument-error",pi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Yr("argument-error",mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Yr("argument-error",yi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Yr("missing-android-pkg-name")}}else if(void 0!==n)throw new Yr("argument-error",ci+" property must be a non null object when specified.");if(this.f=null,(t=e[fi])&&"object"==typeof t){if("string"==typeof(t=t[gi])&&t.length)this.f=t;else if(void 0!==t)throw new Yr("argument-error",gi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Yr("argument-error",fi+" property must be a non null object when specified.");if(void 0!==(t=e[hi])&&"boolean"!=typeof t)throw new Yr("argument-error",hi+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[li])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Yr("argument-error",li+" property must be a non empty string when specified.");this.i=e||null}var ci="android",li="dynamicLinkDomain",hi="handleCodeInApp",fi="iOS",di="url",pi="installApp",mi="minimumVersion",yi="packageName",gi="bundleId";function vi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var bi=null,wi=null;function Ti(e){this.f=e.sub,k(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.c=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Ei(e){return(e=Si(e))&&e.sub&&e.iss&&e.aud&&e.exp?new Ti(e):null}function Si(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse((r="",function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=wi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!bi){bi={},wi={};for(var e=0;e<65;e++)bi[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),62<=(wi[bi[e]]=e)&&(wi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){r+=String.fromCharCode(e)})),r))}catch(e){}var r;return null}Ti.prototype.R=function(){return this.c},Ti.prototype.g=function(){return this.b};var Ii,ki={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ci(e){for(var t in ki)if(ki[t].id===e)return{firebaseEndpoint:(e=ki[t]).cb,secureTokenEndpoint:e.ib};return null}Ii=Ci("__EID__")?"__EID__":void 0;var Ni="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ai=["client_id","response_type","scope","redirect_uri","state"],Di={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Ai},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Ai},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Ai},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Ni},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function _i(e){for(var t in Di)if(Di[t].Fa==e)return Di[t];return null}function xi(e){var t={};t["facebook.com"]=Li,t["google.com"]=Ui,t["github.com"]=Fi,t["twitter.com"]=Vi;var n=e&&e[Pi];try{if(n)return t[n]?new t[n](e):new Mi(e);if(void 0!==e[Oi])return new Ri(e)}catch(e){}return null}var Oi="idToken",Pi="providerId";function Ri(e){var t=e[Pi];if(!t&&e[Oi]){var n=Ei(e[Oi]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Lr(this,"providerId",t),Lr(this,"isNewUser",n)}function Mi(e){Ri.call(this,e),Lr(this,"profile",Vr((e=Ir(e.rawUserInfo||"{}"))||{}))}function Li(e){if(Mi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Fi(e){if(Mi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Lr(this,"username",this.profile&&this.profile.login||null)}function Ui(e){if(Mi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vi(e){if(Mi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Lr(this,"username",e.screenName||null)}function Bi(e){var t=Sn(e),n=En(t,"link"),r=En(Sn(n),"link");return t=En(t,"deep_link_id"),En(Sn(t),"link")||t||r||n||e}function qi(){}function ji(e,t){return e.then((function(e){if(e[_a]){var n=Ei(e[_a]);if(!n||t!=n.f)throw new Yr("user-mismatch");return e}throw new Yr("user-mismatch")})).s((function(e){throw e&&e.code&&e.code==Jr+"user-not-found"?new Yr("user-mismatch"):e}))}function zi(e,t){if(!t)throw new Yr("internal-error","failed to construct a credential");this.a=t,Lr(this,"providerId",e),Lr(this,"signInMethod",e)}function Wi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Ki(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new zi(e.providerId,e.pendingToken)}catch(e){}return null}function Gi(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Lr(this,"idToken",t.idToken),t.accessToken&&Lr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Lr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Yr("internal-error","failed to construct a credential");Lr(this,"accessToken",t.oauthToken),Lr(this,"secret",t.oauthTokenSecret)}Lr(this,"providerId",e),Lr(this,"signInMethod",n)}function Qi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Mn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Hi(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Gi(e.providerId,t,e.signInMethod)}catch(e){}}return null}function Yi(e,t){this.Fc=t||[],Fr(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(_i(e)||{}).Ea||null,this.bb=null}function Xi(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Yr("argument-error",'SAML provider IDs must be prefixed with "saml."');Yi.call(this,e,[])}function Ji(e){Yi.call(this,e,Ai),this.a=[]}function $i(){Ji.call(this,"facebook.com")}function Zi(e){if(!e)throw new Yr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new $i).credential({accessToken:t})}function eo(){Ji.call(this,"github.com")}function to(e){if(!e)throw new Yr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new eo).credential({accessToken:t})}function no(){Ji.call(this,"google.com"),this.ya("profile")}function ro(e,t){var n=e;return v(e)&&(n=e.idToken,t=e.accessToken),(new no).credential({idToken:n,accessToken:t})}function io(){Yi.call(this,"twitter.com",Ni)}function oo(e,t){var n=e;if(v(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Yr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Gi("twitter.com",n,"twitter.com")}function ao(e,t,n){this.a=e,this.c=t,Lr(this,"providerId","password"),Lr(this,"signInMethod",n===uo.EMAIL_LINK_SIGN_IN_METHOD?uo.EMAIL_LINK_SIGN_IN_METHOD:uo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function so(e){return e&&e.email&&e.password?new ao(e.email,e.password,e.signInMethod):null}function uo(){Fr(this,{providerId:"password",isOAuthProvider:!1})}function co(e,t){if(!(t=lo(t)))throw new Yr("argument-error","Invalid email link!");return new ao(e,t.code,uo.EMAIL_LINK_SIGN_IN_METHOD)}function lo(e){return(e=si(e=Bi(e)))&&e.operation===qr?e:null}function ho(e){if(!(e.Va&&e.Ua||e.Ha&&e.ba))throw new Yr("internal-error");this.a=e,Lr(this,"providerId","phone"),Lr(this,"signInMethod","phone")}function fo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new ho(t)}return null}function po(e){return e.a.Ha&&e.a.ba?{temporaryProof:e.a.Ha,phoneNumber:e.a.ba}:{sessionInfo:e.a.Va,code:e.a.Ua}}function mo(e){try{this.a=e||r.a.auth()}catch(e){throw new Yr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Fr(this,{providerId:"phone",isOAuthProvider:!1})}function yo(e,t){if(!e)throw new Yr("missing-verification-id");if(!t)throw new Yr("missing-verification-code");return new ho({Va:e,Ua:t})}function go(e){if(e.temporaryProof&&e.phoneNumber)return new ho({Ha:e.temporaryProof,ba:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return ro(o,n);case"facebook.com":return Zi(n);case"github.com":return to(n);case"twitter.com":return oo(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new zi(t,a):new Gi(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Ji(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function vo(e){if(!e.isOAuthProvider)throw new Yr("invalid-oauth-provider")}function bo(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Yr("invalid-auth-event");if(this.g&&this.a)throw new Yr("invalid-auth-event");if(this.g&&!this.f)throw new Yr("invalid-auth-event")}function wo(e){return(e=e||{}).type?new bo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Xr(e.error),e.postBody,e.tenantId):null}function To(){this.b=null,this.a=[]}C(Mi,Ri),C(Li,Mi),C(Fi,Mi),C(Ui,Mi),C(Vi,Mi),zi.prototype.na=function(e){return Ha(e,Wi(this))},zi.prototype.b=function(e,t){var n=Wi(this);return n.idToken=t,Ya(e,n)},zi.prototype.f=function(e,t){return ji(Xa(e,Wi(this)),t)},zi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Gi.prototype.na=function(e){return Ha(e,Qi(this))},Gi.prototype.b=function(e,t){var n=Qi(this);return n.idToken=t,Ya(e,n)},Gi.prototype.f=function(e,t){return ji(Xa(e,Qi(this)),t)},Gi.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Yi.prototype.Ga=function(e){return this.zb=H(e),this},C(Xi,Yi),C(Ji,Yi),Ji.prototype.ya=function(e){return q(this.a,e)||this.a.push(e),this},Ji.prototype.Hb=function(){return K(this.a)},Ji.prototype.credential=function(e,t){var n;if(!(n=v(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new Yr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Gi(this.providerId,n,this.providerId)},C($i,Ji),Lr($i,"PROVIDER_ID","facebook.com"),Lr($i,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(eo,Ji),Lr(eo,"PROVIDER_ID","github.com"),Lr(eo,"GITHUB_SIGN_IN_METHOD","github.com"),C(no,Ji),Lr(no,"PROVIDER_ID","google.com"),Lr(no,"GOOGLE_SIGN_IN_METHOD","google.com"),C(io,Yi),Lr(io,"PROVIDER_ID","twitter.com"),Lr(io,"TWITTER_SIGN_IN_METHOD","twitter.com"),ao.prototype.na=function(e){return this.signInMethod==uo.EMAIL_LINK_SIGN_IN_METHOD?ks(e,is,{email:this.a,oobCode:this.c}):ks(e,Ts,{email:this.a,password:this.c})},ao.prototype.b=function(e,t){return this.signInMethod==uo.EMAIL_LINK_SIGN_IN_METHOD?ks(e,os,{idToken:t,email:this.a,oobCode:this.c}):ks(e,ms,{idToken:t,email:this.a,password:this.c})},ao.prototype.f=function(e,t){return ji(this.na(e),t)},ao.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Fr(uo,{PROVIDER_ID:"password"}),Fr(uo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Fr(uo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),ho.prototype.na=function(e){return e.Wa(po(this))},ho.prototype.b=function(e,t){var n=po(this);return n.idToken=t,ks(e,Ss,n)},ho.prototype.f=function(e,t){var n=po(this);return n.operation="REAUTH",ji(e=ks(e,Is,n),t)},ho.prototype.A=function(){var e={providerId:"phone"};return this.a.Va&&(e.verificationId=this.a.Va),this.a.Ua&&(e.verificationCode=this.a.Ua),this.a.Ha&&(e.temporaryProof=this.a.Ha),this.a.ba&&(e.phoneNumber=this.a.ba),e},mo.prototype.Wa=function(e,t){var n=this.a.b;return Xe(t.verify()).then((function(r){if(!u(r))throw new Yr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return ks(n,ds,{phoneNumber:e,recaptchaToken:r}).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new Yr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Fr(mo,{PROVIDER_ID:"phone"}),Fr(mo,{PHONE_SIGN_IN_METHOD:"phone"}),bo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},bo.prototype.R=function(){return this.h},bo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Eo,So=null;function Io(e){var t="unauthorized-domain",n=void 0,r=Sn(e);e=r.b,"chrome-extension"==(r=r.f)?n=Le("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Le("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Yr.call(this,t,n)}function ko(e,t,n){Yr.call(this,e,n),(e=t||{}).Ab&&Lr(this,"email",e.Ab),e.ba&&Lr(this,"phoneNumber",e.ba),e.credential&&Lr(this,"credential",e.credential),e.Qb&&Lr(this,"tenantId",e.Qb)}function Co(e){if(e.code){var t=e.code||"";0==t.indexOf(Jr)&&(t=t.substring(Jr.length));var n={credential:go(e),Qb:e.tenantId};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.ba=e.phoneNumber;else if(!n.credential)return new Yr(t,e.message||void 0);return new ko(t,n,e.message)}return null}function No(){}function Ao(e){return e.c||(e.c=e.b())}function Do(){}function _o(e){if(e.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return e.f;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function xo(){}function Oo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.fc,this),this.a.onerror=S(this.Ib,this),this.a.onprogress=S(this.gc,this),this.a.ontimeout=S(this.kc,this)}function Po(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Ro(e,t,n){this.reset(e,t,n,void 0,void 0)}function Mo(e){this.f=e,this.b=this.c=this.a=null}function Lo(e,t){this.name=e,this.value=t}C(Io,Yr),C(ko,Yr),ko.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.A();return t&&X(e,t),e},ko.prototype.toJSON=function(){return this.A()},No.prototype.c=null,C(Do,No),Do.prototype.a=function(){var e=_o(this);return e?new ActiveXObject(e):new XMLHttpRequest},Do.prototype.b=function(){var e={};return _o(this)&&(e[0]=!0,e[1]=!0),e},Eo=new Do,C(xo,No),xo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Oo;throw Error("Unsupported browser")},xo.prototype.b=function(){return{}},(t=Oo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},t.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Po(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",Po(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,Po(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ro.prototype.a=null,Ro.prototype.reset=function(e,t,n,r,i){r||k(),delete this.a},Lo.prototype.toString=function(){return this.name};var Fo=new Lo("SEVERE",1e3),Uo=new Lo("WARNING",900),Vo=new Lo("CONFIG",700),Bo=new Lo("FINE",500);Mo.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(_("Root logger has no level set."),null)}(this).value)for(g(t)&&(t=t()),e=new Ro(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var qo,jo={},zo=null;function Wo(e){var t;if(zo||(zo=new Mo(""),(jo[""]=zo).c=Vo),!(t=jo[e])){t=new Mo(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=Wo(e.substr(0,n))).b||(n.b={}),(n.b[r]=t).a=n,jo[e]=t}return t}function Ko(e,t){e&&e.log(Bo,t,void 0)}function Go(e){this.f=e}function Qo(e){on.call(this),this.o=e,this.readyState=Ho,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Wo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}C(Go,No),Go.prototype.a=function(){return new Qo(this.f)},Go.prototype.b=(qo={},function(){return qo}),C(Qo,on);var Ho=0;function Yo(e){e.c.read().then(e.ec.bind(e)).catch(e.Oa.bind(e))}function Xo(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,Jo(e)}function Jo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function $o(e){on.call(this),this.headers=new dn,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Zo,this.v=this.P=!1}(t=Qo.prototype).open=function(e,t){if(this.readyState!=Ho)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,Jo(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.o.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.Oa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Xo(this,!1)),this.readyState=Ho},t.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Jo(this)),this.a&&(this.readyState=3,Jo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==s.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,Yo(this)):e.text().then(this.ic.bind(this),this.Oa.bind(this)))))},t.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Xo(this,!0):Jo(this),3==this.readyState&&Yo(this)}},t.ic=function(e){this.a&&(this.response=this.responseText=e,Xo(this,!0))},t.hc=function(e){this.a&&(this.response=e,Xo(this,!0))},t.Oa=function(e){var t=this.h;t&&t.log(Uo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&Xo(this,!0)},t.setRequestHeader=function(e,t){this.i.append(e,t)},t.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Uo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Uo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},C($o,on);var Zo="";$o.prototype.b=Wo("goog.net.XhrIo");var ea=/^https?$/i,ta=["POST","PUT"];function na(e){return"content-type"==e.toLowerCase()}function ra(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ia(e),aa(e)}function ia(e){e.I||(e.I=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function oa(e){if(e.c&&void 0!==a)if(e.w[1]&&4==ua(e)&&2==ca(e))Ko(e.b,la(e,"Local request error detected and ignored"));else if(e.i&&4==ua(e))cn(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==ua(e)){Ko(e.b,la(e,"Request complete")),e.c=!1;try{var t,n=ca(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(yn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!ea.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<ua(e)?e.a.statusText:""}catch(t){Ko(e.b,"Can not get status: "+t.message),c=""}e.h=c+" ["+ca(e)+"]",ia(e)}}finally{aa(e)}}}function aa(e,t){if(e.a){sa(e);var n=e.a,r=e.w[0]?f:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Fo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function sa(e){e.a&&e.v&&(e.a.ontimeout=null),e.o&&(s.clearTimeout(e.o),e.o=null)}function ua(e){return e.a?e.a.readyState:0}function ca(e){try{return 2<ua(e)?e.a.status:-1}catch(e){return-1}}function la(e,t){return t+" ["+e.O+" "+e.l+" "+ca(e)+"]"}function ha(e){var t=Ea;this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function fa(e,t,n){e.a=!0,e.c=n,e.f=!t,ya(e)}function da(e){if(e.a){if(!e.u)throw new ga;e.u=!1}}function pa(e,t,n,r){e.g.push([t,n,r]),e.a&&ya(e)}function ma(e){return B(e.g,(function(e){return g(e[1])}))}function ya(e){if(e.h&&e.a&&ma(e)){var t=e.h,n=wa[t];n&&(s.clearTimeout(n.a),delete wa[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var u=o.call(i||e.o,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(N(t)||"function"==typeof s.Promise&&t instanceof s.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,ma(e)||(n=!0)}}e.c=t,r&&(u=S(e.m,e,!0),r=S(e.m,e,!1),t instanceof ha?(pa(t,u,r),t.w=!0):t.then(u,r)),n&&(t=new ba(t),wa[t.a]=t,e.h=t.a)}function ga(){A.call(this)}function va(){A.call(this)}function ba(e){this.a=s.setTimeout(S(this.c,this),0),this.b=e}(t=$o.prototype).Ia=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ko(this.b,la(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Ko(this.b,la(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),aa(this))},t.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),aa(this,!0)),$o.qb.za.call(this)},t.Lb=function(){this.va||(this.J||this.i||this.f?oa(this):this.yc())},t.yc=function(){oa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Zo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Fo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Ko(this.b,"Can not get response: "+e.message),null}},ha.prototype.cancel=function(e){if(this.a)this.c instanceof ha&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,t.l<=0&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new va,da(this),fa(this,!1,e))}},ha.prototype.m=function(e,t){this.i=!1,fa(this,e,t)},ha.prototype.then=function(e,t,n){var r,i,o=new ze((function(e,t){r=e,i=t}));return pa(this,r,(function(e){e instanceof va?o.cancel():i(e)})),o.then(e,t,n)},ha.prototype.$goog_Thenable=!0,C(ga,A),ga.prototype.message="Deferred has already fired",ga.prototype.name="AlreadyCalledError",C(va,A),va.prototype.message="Deferred was canceled",va.prototype.name="CanceledError",ba.prototype.c=function(){throw delete wa[this.a],this.b};var wa={};function Ta(e){var t,n,r,i,o={},a=o.document||document,u=re(e).toString(),c=document.createElement("SCRIPT"),f={Nb:c,Ia:void 0},d=new ha(f),p=null,m=null!=o.timeout?o.timeout:5e3;return 0<m&&(p=window.setTimeout((function(){Sa(c,!0);var e=new Ca(ka,"Timeout reached for loading script "+u);da(d),fa(d,!1,e)}),m),f.Ia=p),c.onload=c.onreadystatechange=function(){c.readyState&&"loaded"!=c.readyState&&"complete"!=c.readyState||(Sa(c,o.gd||!1,p),da(d),fa(d,!0,null))},c.onerror=function(){Sa(c,!0,p);var e=new Ca(Ia,"Error while loading script "+u);da(d),fa(d,!1,e)},X(f=o.attributes||{},{type:"text/javascript",charset:"UTF-8"}),zn(c,f),i=e,L(r=c,"HTMLScriptElement"),r.src=re(i),null===h&&(h=(i=(i=s.document).querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&l.test(i)?i:""),(i=h)&&r.setAttribute("nonce",i),((n=((t=a)||document).getElementsByTagName("HEAD"))&&0!=n.length?n[0]:t.documentElement).appendChild(c),d}function Ea(){if(this&&this.Nb){var e=this.Nb;e&&"SCRIPT"==e.tagName&&Sa(e,!0,this.Ia)}}function Sa(e,t,n){null!=n&&s.clearTimeout(n),e.onload=f,e.onerror=f,e.onreadystatechange=f,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Ia=0,ka=1;function Ca(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),A.call(this,n),this.code=e}function Na(e){this.f=e}function Aa(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||xa,this.g=H(e.secureTokenHeaders||Oa),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||Pa,this.a=H(e.firebaseHeaders||Ra),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==cr(),!(n=s.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!ur())throw new Yr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ur()?this.f=new Go(self):lr()?this.f=new Na(n):this.f=new xo,this.b=null}C(Ca,A),C(Na,No),Na.prototype.a=function(){return new this.f},Na.prototype.b=function(){return{}};var Da,_a="idToken",xa=new Ar(3e4,6e4),Oa={"Content-Type":"application/x-www-form-urlencoded"},Pa=new Ar(3e4,6e4),Ra={"Content-Type":"application/json"};function Ma(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function La(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Fa(e,t,n,r,i,o,a){var u;(e=!((u="Chrome"==fr(u=mr())&&(u=u.match(/\sChrome\/(\d+)/i))&&2==u.length?parseInt(u[1],10):null)&&u<30||vt&&Nt&&!(9<Nt))||ur()?S(e.o,e):(Da=Da||new ze((function(e,t){var n,r;n=e,r=t,((window.gapi||{}).client||{}).request?n():(s[Va]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},pa(Ta(ie(Ua,{onload:Va})),null,(function(){r(Error("CORS_UNSUPPORTED"))}),void 0))})),S(e.m,e)))(t,n,r,i,o,a)}Aa.prototype.R=function(){return this.b},Aa.prototype.o=function(e,t,n,r,i,o){if(ur()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new Yr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new $o(this.f);if(o){a.g=Math.max(0,o);var c=setTimeout((function(){a.dispatchEvent("timeout")}),o)}an(a,"complete",(function(){c&&clearTimeout(c);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Ko(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}t&&t(e)})),sn(a,"ready",(function(){c&&clearTimeout(c),dt(this)})),sn(a,"timeout",(function(){c&&clearTimeout(c),dt(this),t&&t(null)})),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():Eo.a(),e.w=e.B?Ao(e.B):Ao(Eo),e.a.onreadystatechange=S(e.Lb,e);try{Ko(e.b,la(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(t){return Ko(e.b,la(e,"Error opening Xhr: "+t.message)),ra(e,t)}t=r||"";var o,a=new dn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(y(e)||u(e))U(e,t,void 0);else for(var n=fn(e),r=hn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){a.set(t,e)})),i=function(e){e:{for(var t=na,n=e.length,r=u(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:u(e)?e.charAt(t):e[t]}(a.X()),r=s.FormData&&t instanceof s.FormData,!q(ta,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{sa(e),0<e.g&&(e.v=(o=e.a,vt&&Dt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),Ko(e.b,la(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=S(e.Ia,e)):e.o=cn(e.Ia,e.g,e)),Ko(e.b,la(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){Ko(e.b,la(e,"Send error: "+t.message)),ra(e,t)}}(a,e,n,r,i)};var Ua=new J(ee,"https://apis.google.com/js/client.js?onload=%{onload}"),Va="__fcb"+Math.floor(1e6*Math.random()).toString();function Ba(e){if(!u(e=e.email)||!ir.test(e))throw new Yr("invalid-email")}function qa(e){"email"in e&&Ba(e)}function ja(e){if(!e[_a])throw new Yr("internal-error")}function za(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Yr("internal-error")}else{if(!e.sessionInfo)throw new Yr("missing-verification-id");if(!e.code)throw new Yr("missing-verification-code")}}Aa.prototype.m=function(e,t,n,r,i){var o=this;Da.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).s((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Aa.prototype.ob=function(){return ks(this,ys,{})},Aa.prototype.rb=function(e,t){return ks(this,ps,{idToken:e,email:t})},Aa.prototype.sb=function(e,t){return ks(this,ms,{idToken:e,password:t})};var Wa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ka(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Yr("internal-error")}function Ga(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&Fn(e=new Pn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function Qa(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Co(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Co(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Co(e)):e.errorMessage&&(t=Cs(e.errorMessage)),t)throw t;if(!e[_a])throw new Yr("internal-error")}function Ha(e,t){return t.returnIdpCredential=!0,ks(e,gs,t)}function Ya(e,t){return t.returnIdpCredential=!0,ks(e,bs,t)}function Xa(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,ks(e,vs,t)}function Ja(e){if(!e.oobCode)throw new Yr("invalid-action-code")}(t=Aa.prototype).tb=function(e,t){var n={idToken:e},r=[];return G(Wa,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ks(this,ps,n)},t.kb=function(e,t){return X(e={requestType:"PASSWORD_RESET",email:e},t),ks(this,cs,e)},t.lb=function(e,t){return X(e={requestType:"EMAIL_SIGNIN",email:e},t),ks(this,ss,e)},t.jb=function(e,t){return X(e={requestType:"VERIFY_EMAIL",idToken:e},t),ks(this,us,e)},t.Wa=function(e){return ks(this,Es,e)},t.ab=function(e,t){return ks(this,fs,{oobCode:e,newPassword:t})},t.Ma=function(e){return ks(this,Za,{oobCode:e})},t.Ya=function(e){return ks(this,$a,{oobCode:e})};var $a={endpoint:"setAccountInfo",D:Ja,fa:"email",F:!0},Za={endpoint:"resetPassword",D:Ja,K:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Yr("internal-error")},F:!0},es={endpoint:"signupNewUser",D:function(e){if(Ba(e),!e.password)throw new Yr("weak-password")},K:ja,T:!0,F:!0},ts={endpoint:"createAuthUri",F:!0},ns={endpoint:"deleteAccount",V:["idToken"]},rs={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(e){if(!m(e.deleteProvider))throw new Yr("internal-error")}},is={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Ba,K:ja,T:!0,F:!0},os={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Ba,K:ja,T:!0},as={endpoint:"getAccountInfo"},ss={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Yr("internal-error");Ba(e)},fa:"email",F:!0},us={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Yr("internal-error")},fa:"email",F:!0},cs={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Yr("internal-error");Ba(e)},fa:"email",F:!0},ls={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},hs={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(e){if(!e.recaptchaSiteKey)throw new Yr("internal-error")}},fs={endpoint:"resetPassword",D:Ja,fa:"email",F:!0},ds={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},ps={endpoint:"setAccountInfo",V:["idToken"],D:qa,T:!0},ms={endpoint:"setAccountInfo",V:["idToken"],D:function(e){if(qa(e),!e.password)throw new Yr("weak-password")},K:ja,T:!0},ys={endpoint:"signupNewUser",K:ja,T:!0,F:!0},gs={endpoint:"verifyAssertion",D:Ka,Ra:Ga,K:Qa,T:!0,F:!0},vs={endpoint:"verifyAssertion",D:Ka,Ra:Ga,K:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Yr("user-not-found");if(e.errorMessage)throw Cs(e.errorMessage);if(!e[_a])throw new Yr("internal-error")},T:!0,F:!0},bs={endpoint:"verifyAssertion",D:function(e){if(Ka(e),!e.idToken)throw new Yr("internal-error")},Ra:Ga,K:Qa,T:!0},ws={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new Yr("invalid-custom-token")},K:ja,T:!0,F:!0},Ts={endpoint:"verifyPassword",D:function(e){if(Ba(e),!e.password)throw new Yr("wrong-password")},K:ja,T:!0,F:!0},Es={endpoint:"verifyPhoneNumber",D:za,K:ja,F:!0},Ss={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new Yr("internal-error");za(e)},K:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Co(e);ja(e)}},Is={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:za,K:ja,F:!0};function ks(e,t,n){if(!function(e,t){if(!t||!t.length)return 1;if(e){for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return}return 1}}(n,t.V))return Je(new Yr("internal-error"));var r,i=t.Kb||"POST";return Xe(n).then(t.D).then((function(){return t.T&&(n.returnSecureToken=!0),t.F&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o){var a=Sn(e.h+t);Tn(a,"key",e.c),o&&Tn(a,"cb",k().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Tn(a,u,r[u]);return new ze((function(t,o){Fa(e,a.toString(),(function(e){e?e.error?o(Ns(e,i||{})):t(e):o(new Yr("network-request-failed"))}),n,s?void 0:Gn(Sr(r)),e.a,e.i.get())}))}(e,t.endpoint,i,n,t.Yb,t.wb||!1)})).then((function(e){return r=e,t.Ra?t.Ra(n,r):r})).then(t.K).then((function(){if(!t.fa)return r;if(!(t.fa in r))throw new Yr("internal-error");return r[t.fa]}))}function Cs(e){return Ns({error:{errors:[{message:e}],code:400,message:e}})}function Ns(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Yr(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",X(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new Yr(r[i],t);return!t&&e&&(t=Er(e)),new Yr("internal-error",t)}function As(e){var t;this.b=e,this.a=null,this.gb=(t=this,(Os=Os||new ze((function(e,t){function n(){Nr(),yr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Nr(),t(Error("Network Error"))},timeout:_s.get()})}if(yr("gapi.iframes.Iframe"))e();else if(yr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){yr("gapi.load")?n():t(Error("Network Error"))},Xe(Ta(r=ie(Ds,{onload:r}))).s((function(){t(Error("Network Error"))}))}})).s((function(e){throw Os=null,e}))).then((function(){return new ze((function(e,n){yr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),xs.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))})))}var Ds=new J(ee,"https://apis.google.com/js/api.js?onload=%{onload}"),_s=new Ar(3e4,6e4),xs=new Ar(5e3,15e3),Os=null;function Ps(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=In(this.i,"/__/auth/iframe"),Tn(this.a,"apiKey",this.g),Tn(this.a,"appName",this.h),this.b=null,this.c=[]}function Rs(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Ms(e){try{return r.a.app(e).auth().Ca()}catch(e){return[]}}function Ls(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Fs(e){var t=$n();return ks(e,ls,{}).then((function(e){return e.authorizedDomains||[]})).then((function(e){e:{var n=Sn(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(a=0==o.indexOf("chrome-extension://")?Sn(o).b==a&&"chrome-extension"==s:("http"==s||"https"==s)&&(rr.test(o)?a==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)))){e=!0;break e}}e=!1}if(!e)throw new Io($n())}))}function Us(e){return e.l||(e.l=or().then((function(){if(!e.o){var t=e.c,n=e.h,r=Ms(e.b),i=new Ps(e.u,e.f,e.b);i.f=t,i.b=n,i.c=K(r||[]),e.o=i.toString()}e.i=new As(e.o),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");var t,n;t=e.i,n=function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=wo(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Xe(n)}return n.status="ERROR",Xe(n)},t.gb.then((function(){t.a.register("authEvent",n,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e)}))),e.l}function Vs(e){return e.m||(e.v=e.c?pr(e.c,Ms(e.b)):null,e.m=new Aa(e.f,Ci(e.h),e.v)),e.m}function Bs(e,t,n,r,i,o,a,s,u,c,l){return(e=new Rs(e,t,n,r,i)).l=o,e.g=a,e.i=s,e.b=H(u||null),e.f=c,e.nb(l).toString()}function qs(e){if(this.a=e||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Yr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function js(e){this.b=e,this.a={},this.f=S(this.c,this)}Ps.prototype.toString=function(){return this.f?Tn(this.a,"v",this.f):Ln(this.a.a,"v"),this.b?Tn(this.a,"eid",this.b):Ln(this.a.a,"eid"),this.c.length?Tn(this.a,"fw",this.c.join(",")):Ln(this.a.a,"fw"),this.a.toString()},Rs.prototype.nb=function(e){return this.h=e,this},Rs.prototype.toString=function(){var e=In(this.o,"/__/auth/handler");if(Tn(e,"apiKey",this.m),Tn(e,"appName",this.c),Tn(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var n=r.a.app(this.c).auth().ha()}catch(e){n=null}for(var i in t.bb=n,Tn(e,"providerId",this.a.providerId),n=Sr((t=this.a).zb))n[i]=n[i].toString();i=t.Fc,n=H(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}t.eb&&t.bb&&!n[t.eb]&&(n[t.eb]=t.bb),Q(n)||Tn(e,"customParameters",Er(n))}if("function"==typeof this.a.Hb&&(t=this.a.Hb()).length&&Tn(e,"scopes",t.join(",")),this.l?Tn(e,"redirectUrl",this.l):Ln(e.a,"redirectUrl"),this.g?Tn(e,"eventId",this.g):Ln(e.a,"eventId"),this.i?Tn(e,"v",this.i):Ln(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!En(e,s)&&Tn(e,s,this.b[s]);return this.h?Tn(e,"tid",this.h):Ln(e.a,"tid"),this.f?Tn(e,"eid",this.f):Ln(e.a,"eid"),(s=Ms(this.c)).length&&Tn(e,"fw",s.join(",")),e.toString()},(t=Ls.prototype).Fb=function(e,t,n){var r=new Yr("popup-closed-by-user"),i=new Yr("web-storage-unsupported"),o=this,a=!1;return this.ia().then((function(){var n,r;r={type:"webStorageSupport"},Us(n=o).then((function(){return e=n.i,t=r,e.gb.then((function(){return new ze((function(n){e.a.send(t.type,t,n,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}));var e,t})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})).then((function(n){n||(e&&tr(e),t(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return t=e,new ze((function(e){return function n(){ln(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}));var t})).then((function(){if(!a)return ln(n).then((function(){t(r)}))}))},t.Ob=function(){var e=mr();return!Tr(e)&&!Cr(e)},t.Jb=function(){return!1},t.Db=function(e,t,n,r,i,o,a,s){if(!e)return Je(new Yr("popup-blocked"));if(a&&!Tr())return this.ia().s((function(t){tr(e),i(t)})),r(),Xe();this.a||(this.a=Fs(Vs(this)));var u=this;return this.a.then((function(){var t=u.ia().s((function(t){throw tr(e),i(t),t}));return r(),t})).then((function(){vo(n),a||Zn(Bs(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,s),e)})).s((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},t.Eb=function(e,t,n,r){this.a||(this.a=Fs(Vs(this)));var i=this;return this.a.then((function(){vo(t),Zn(Bs(i.u,i.f,i.b,e,t,$n(),n,i.c,void 0,i.h,r))})).s((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},t.ia=function(){var e=this;return Us(this).then((function(){return e.i.gb})).s((function(){throw e.a=null,new Yr("network-request-failed")}))},t.Rb=function(){return!0},t.Aa=function(e){this.g.push(e)},t.Na=function(e){z(this.g,(function(t){return t==e}))},(t=qs.prototype).get=function(e){return Xe(this.a.getItem(e)).then((function(e){return e&&Ir(e)}))},t.set=function(e,t){return Xe(this.a.setItem(e,Er(t)))},t.S=function(e){return Xe(this.a.removeItem(e))},t.$=function(){},t.ea=function(){};var zs,Ws=[];function Ks(e,t,n){Q(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Gs(e){this.a=e}function Qs(e){this.c=e,this.b=!1,this.a=[]}function Hs(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return Je(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ze((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Ys(e,c),t})).s((function(t){throw Ys(e,c),t}))}function Ys(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),z(e.a,(function(e){return e==t}))}}function Xs(){if(!$s())throw new Yr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var e,t=this;ur()&&self?(this.l=function(){var e=ur()?self:null;if(U(Ws,(function(n){n.b==e&&(t=n)})),!t){var t=new js(e);Ws.push(t)}return t}(),Ks(this.l,"keyChanged",(function(e,n){return ru(t).then((function(e){return 0<e.length&&U(t.a,(function(t){t(e)})),{keyProcessed:q(e,n.key)}}))})),Ks(this.l,"ping",(function(){return Xe(["keyChanged"])}))):((e=s.navigator)&&e.serviceWorker?Xe().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).s((function(){return null})):Xe(null)).then((function(e){(t.h=e)&&(t.g=new Qs(new Gs(e)),Hs(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&q(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function Js(e){return e.m||(e.m=function e(t){return new ze((function(n,r){var i=t.u.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(e){}r(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){var o;(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):(o=t,new ze((function(e,t){var n=o.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){e()},n.onerror=function(e){t(Error(e.target.error))}})).then((function(){return e(t)})).then((function(e){n(e)})).s((function(e){r(e)})))}}))}(e)),e.m}function $s(){try{return s.indexedDB}catch(e){return}}function Zs(e){return e.objectStore("firebaseLocalStorage")}function eu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function tu(e){return new ze((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function nu(e,t){return e.g&&e.h&&((n=s.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===e.h?Hs(e.g,"keyChanged",{key:t},e.o).then((function(){})).s((function(){})):Xe();var n}function ru(e){return Js(e).then((function(e){var t=Zs(eu(e,!1));return t.getAll?tu(t.getAll()):new ze((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n&&typeof t[r]==typeof n[r]?"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function iu(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function ou(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Xe().then((function(){if($s()){var e=kr(),r="__sak"+e;return zs=zs||new Xs,(n=zs).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.$((function(e){U(t.a,(function(t){t(e)}))})),e}))}function au(){this.a={},this.type="inMemory"}function su(){if(!function(){var e="Node"==cr();if(e=uu()||e&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage)try{return e.setItem("__sak","1"),e.removeItem("__sak"),1}catch(e){return}}()){if("Node"==cr())throw new Yr("internal-error","The LocalStorage compatibility library was not found.");throw new Yr("web-storage-unsupported")}this.a=uu()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function uu(){try{var e=s.localStorage,t=kr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function cu(){this.type="nullStorage"}function lu(){if(!function(){var e="Node"==cr();if(e=hu()||e&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage)try{return e.setItem("__sak","1"),e.removeItem("__sak"),1}catch(e){return}}()){if("Node"==cr())throw new Yr("internal-error","The SessionStorage compatibility library was not found.");throw new Yr("web-storage-unsupported")}this.a=hu()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function hu(){try{var e=s.sessionStorage,t=kr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function fu(){var e={};e.Browser=mu,e.Node=yu,e.ReactNative=gu,e.Worker=vu,this.a=e[cr()]}js.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];U(r,(function(t){i.push(Xe().then((function(){return t(e.origin,e.data.data)})))})),Ze(i).then((function(r){var i=[];U(r,(function(e){i.push({fulfilled:e.Gb,value:e.value,reason:e.reason?e.reason.message:void 0})})),U(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Gs.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Qs.prototype.close=function(){for(;0<this.a.length;)Ys(this,this.a[0]);this.b=!0},(t=Xs.prototype).set=function(e,t){var n,r=!1,i=this;return Js(this).then((function(t){return tu((t=Zs(eu(n=t,!0))).get(e))})).then((function(o){var a=Zs(eu(n,!0));return o?(o.value=t,tu(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,tu(a.add(o)))})).then((function(){return i.c[e]=t,nu(i,e)})).ka((function(){r&&i.b--}))},t.get=function(e){return Js(this).then((function(t){return tu(Zs(eu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},t.S=function(e){var t=!1,n=this;return Js(this).then((function(r){return t=!0,n.b++,tu(Zs(eu(r,!0)).delete(e))})).then((function(){return delete n.c[e],nu(n,e)})).ka((function(){t&&n.b--}))},t.$=function(e){var t;0==this.a.length&&(iu(t=this),function e(){t.f=setTimeout((function(){t.i=ru(t).then((function(e){0<e.length&&U(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()),this.a.push(e)},t.ea=function(e){z(this.a,(function(t){return t==e})),0==this.a.length&&iu(this)},(t=ou.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},t.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},t.S=function(e){return this.b.then((function(t){return t.S(e)}))},t.$=function(e){this.a.push(e)},t.ea=function(e){z(this.a,(function(t){return t==e}))},(t=au.prototype).get=function(e){return Xe(this.a[e])},t.set=function(e,t){return this.a[e]=t,Xe()},t.S=function(e){return delete this.a[e],Xe()},t.$=function(){},t.ea=function(){},(t=su.prototype).get=function(e){var t=this;return Xe().then((function(){return Ir(t.a.getItem(e))}))},t.set=function(e,t){var n=this;return Xe().then((function(){var r=Er(t);null===r?n.S(e):n.a.setItem(e,r)}))},t.S=function(e){var t=this;return Xe().then((function(){t.a.removeItem(e)}))},t.$=function(e){s.window&&Gt(s.window,"storage",e)},t.ea=function(e){s.window&&Yt(s.window,"storage",e)},(t=cu.prototype).get=function(){return Xe(null)},t.set=function(){return Xe()},t.S=function(){return Xe()},t.$=function(){},t.ea=function(){},(t=lu.prototype).get=function(e){var t=this;return Xe().then((function(){return Ir(t.a.getItem(e))}))},t.set=function(e,t){var n=this;return Xe().then((function(){var r=Er(t);null===r?n.S(e):n.a.setItem(e,r)}))},t.S=function(e){var t=this;return Xe().then((function(){t.a.removeItem(e)}))},t.$=function(){},t.ea=function(){};var du,pu,mu={C:su,Ta:lu},yu={C:su,Ta:lu},gu={C:qs,Ta:cu},vu={C:su,Ta:cu},bu={ad:"local",NONE:"none",cd:"session"};function wu(){var e=!(Cr(mr())||!sr()),t=Tr(),n=gr();this.m=e,this.h=t,this.l=n,this.a={},e=du=du||new fu;try{this.g=!Jn()&&xr()||!s.indexedDB?new e.a.C:new ou(ur()?new au:new e.a.C)}catch(e){this.g=new au,this.h=!0}try{this.i=new e.a.Ta}catch(e){this.i=new au}this.u=new au,this.f=S(this.Pb,this),this.b={}}function Tu(){return pu=pu||new wu}function Eu(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function Su(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Iu(e,t,n){return n=Su(t,n),"local"==t.C&&(e.b[n]=null),Eu(e,t.C).S(n)}function ku(e){e.c&&(clearInterval(e.c),e.c=null)}function Cu(e){this.a=e,this.b=Tu()}(t=wu.prototype).get=function(e,t){return Eu(this,e.C).get(Su(e,t))},t.set=function(e,t,n){var r=Su(e,n),i=this,o=Eu(this,e.C);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.C&&(i.b[r]=t)}))},t.addListener=function(e,t,n){var r;e=Su(e,t),this.l&&(this.b[e]=s.localStorage.getItem(e)),Q(this.a)&&(Eu(this,"local").$(this.f),this.h||(Jn()||!xr())&&s.indexedDB||!this.l||(ku(r=this),r.c=setInterval((function(){for(var e in r.a){var t=s.localStorage.getItem(e),n=r.b[e];t!=n&&(r.b[e]=t,t=new Mt({type:"storage",key:e,target:window,oldValue:n,newValue:t,a:!0}),r.Pb(t))}}),1e3))),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},t.removeListener=function(e,t,n){e=Su(e,t),this.a[e]&&(z(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),Q(this.a)&&(Eu(this,"local").ea(this.f),ku(this))},t.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?Eu(this,"local").ea(this.f):ku(this),this.m)if(n=s.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?s.localStorage.setItem(t,r):s.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===s.localStorage.getItem(t)||(o.b[t]=s.localStorage.getItem(t),o.$a(t))},vt&&Nt&&10==Nt&&s.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else U(e,S(this.$a,this))},t.$a=function(e){this.a[e]&&U(this.a[e],(function(e){e()}))};var Nu,Au={name:"authEvent",C:"local"};function Du(){this.a=Tu()}function _u(e,t){this.b=xu,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0!==Nu||(Nu=s.Int32Array?new Int32Array(Uu):Uu),this.reset()}C(_u,(function(){this.b=-1}));for(var xu=64,Ou=xu-1,Pu=[],Ru=0;Ru<Ou;Ru++)Pu[Ru]=0;var Mu=W(128,Pu);function Lu(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;t<64;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;t<64;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Nu[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Fu(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(u(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Lu(e),i=0);else{if(!y(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Lu(e),i=0)}}e.c=i,e.g+=n}_u.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):K(this.h)};var Uu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Vu(){_u.call(this,8,Bu)}C(Vu,_u);var Bu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function qu(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=i||null,this.h=t+":"+n,this.v=new Du,this.g=new Cu(this.h),this.f=null,this.b=[],this.a=this.c=null}function ju(e){return new Yr("invalid-cordova-configuration",e)}function zu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function Wu(e){return e.f||(e.f=e.ia().then((function(){return new ze((function(t){function n(e){u=!0,c&&c.cancel(),Ku(r).then((function(t){var n=a;if(t&&e&&e.url){var i=null;-1!=(n=Bi(e.url)).indexOf("/__/auth/callback")&&(i=(i="object"==typeof(i=Ir(En(i=Sn(n),"firebaseError")||null))?Xr(i):null)?new bo(t.c,t.b,null,null,i,null,t.R()):new bo(t.c,t.b,n,t.f,null,null,t.R())),n=i||a}zu(r,n)}))}var r,i,o,a,u,c,l;e.Aa((function n(r){return t(r),e.Na(n),!1})),r=e,a=new bo("unknown",null,null,null,new Yr("no-auth-event")),u=!1,c=ln(500).then((function(){return Ku(r).then((function(){u||zu(r,a)}))})),l=s.handleOpenURL,s.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(yr("BuildInfo.packageName",s).toLowerCase()+"://")&&n({url:e}),"function"==typeof l)try{l(e)}catch(e){console.error(e)}},So=So||new To,i=n,(o=So).a.push(i),o.b||(o.b=function(e){for(var t=0;t<o.a.length;t++)o.a[t](e)},"function"==typeof(i=yr("universalLinks.subscribe",s))&&i(null,o.b))}))}))),e.f}function Ku(e){var t,n=null;return(t=e.g).b.get(Au,t.a).then((function(e){return wo(e)})).then((function(t){return n=t,Iu((t=e.g).b,Au,t.a)})).then((function(){return n}))}function Gu(e){this.a=e,this.b=Tu()}(t=qu.prototype).ia=function(){return this.Da?this.Da:this.Da=(ar(void 0)?or().then((function(){return new ze((function(e,t){var n=s.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Je(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof yr("universalLinks.subscribe",s))throw ju("cordova-universal-links-plugin-fix is not installed");if(void 0===yr("BuildInfo.packageName",s))throw ju("cordova-plugin-buildinfo is not installed");if("function"!=typeof yr("cordova.plugins.browsertab.openUrl",s))throw ju("cordova-plugin-browsertab is not installed");if("function"!=typeof yr("cordova.InAppBrowser.open",s))throw ju("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Yr("cordova-not-ready")}))},t.Fb=function(e,t){return t(new Yr("operation-not-supported-in-this-environment")),Xe()},t.Db=function(){return Je(new Yr("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(e,t,n,r){if(this.c)return Je(new Yr("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Xe().then((function(){return vo(t),Wu(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new bo(t,r,null,o,new Yr("no-auth-event"),null,i),u=yr("BuildInfo.packageName",s);if("string"!=typeof u)throw new Yr("invalid-cordova-configuration");var c=yr("BuildInfo.displayName",s),l={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!mr().toLowerCase().match(/android/))return Je(new Yr("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(e){var t=new Vu;Fu(t,e),e=[];var n=8*t.g;t.c<56?Fu(t,Mu,56-t.c):Fu(t,Mu,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Lu(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return V(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(o),l.sessionId=o;var h=Bs(e.u,e.i,e.l,t,n,null,r,e.m,l,e.o,i);return e.ia().then((function(){var t=e.h;return e.v.a.set(Au,a.A(),t)})).then((function(){var t=yr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof t)throw new Yr("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=yr("cordova.plugins.browsertab.openUrl",s)))throw new Yr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=yr("cordova.InAppBrowser.open",s)))throw new Yr("invalid-cordova-configuration");t=mr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new ze((function(e,t){u=function(){var t=yr("cordova.plugins.browsertab.close",s);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(u),c=function(){a=a||ln(2e3).then((function(){t(new Yr("redirect-cancelled-by-user"))}))},l=function(){Dr()&&c()},o.addEventListener("resume",c,!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(e){return Ku(i).then((function(){throw e}))}))})).ka((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Na(u),i.c=null}))},t.Aa=function(e){this.b.push(e),Wu(this).s((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new bo("unknown",null,null,null,new Yr("no-auth-event")),e(t))}))},t.Na=function(e){z(this.b,(function(t){return t==e}))};var Qu={name:"pendingRedirect",C:"session"};function Hu(e){return Iu(e.b,Qu,e.a)}function Yu(e,t,n){this.i={},this.v=0,this.B=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=S(this.o,this),this.b=new cc,this.w=new pc,this.g=new Gu(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Xu(this.B,this.u,this.m,Ii)}function Xu(e,t,n,i){var o=r.a.SDK_VERSION||null;return new(ar()?qu:Ls)(e,t,n,o,i)}function Ju(e){e.f||(e.f=!0,e.a.Aa(e.l));var t=e.a;return e.a.ia().s((function(n){throw e.a==t&&e.reset(),n}))}function $u(e){e.a.Ob()&&Ju(e).s((function(t){var n=new bo("unknown",null,null,null,new Yr("operation-not-supported-in-this-environment"));ic(t)&&e.o(n)})),e.a.Jb()||lc(e.b)}function Zu(e,t){var n;q(e.h,t)||e.h.push(t),e.f||(n=e.g).b.get(Qu,n.a).then((function(e){return"pending"==e})).then((function(t){t?Hu(e.g).then((function(){Ju(e).s((function(t){var n=new bo("unknown",null,null,null,new Yr("operation-not-supported-in-this-environment"));ic(t)&&e.o(n)}))})):$u(e)})).s((function(){$u(e)}))}function ec(e,t){z(e.h,(function(e){return e==t}))}Yu.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=Xu(this.B,this.u,this.m),this.i={}},Yu.prototype.o=function(e){if(!e)throw new Yr("invalid-auth-event");if(6e5<=k()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=k())),t=!0;break}}return lc(this.b),t};var tc=new Ar(2e3,1e4),nc=new Ar(3e4,6e4);function rc(e,t,n,r,i,o,a){return e.a.Db(t,n,r,(function(){e.f||(e.f=!0,e.a.Aa(e.l))}),(function(){e.reset()}),i,o,a)}function ic(e){return e&&"auth/cordova-not-ready"==e.code}function oc(e,t,n,r,i){var o,a;return(a=e.g).b.set(Qu,"pending",a.a).then((function(){return e.a.Eb(t,n,r,i).s((function(t){if(ic(t))throw new Yr("operation-not-supported-in-this-environment");return o=t,Hu(e.g).then((function(){throw o}))})).then((function(){return e.a.Rb()?new ze((function(){})):Hu(e.g).then((function(){return e.oa()})).then((function(){})).s((function(){}))}))}))}function ac(e,t,n,r,i){return e.a.Fb(r,(function(e){t.ja(n,null,e,i)}),tc.get())}Yu.prototype.oa=function(){return this.b.oa()};var sc={};function uc(e,t,n){var r=t+":"+n;return sc[r]||(sc[r]=new Yu(e,t,n)),sc[r]}function cc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function lc(e){e.g||(e.g=!0,dc(e,!1,null,null))}function hc(e){e.g&&!e.i&&dc(e,!1,null,null)}function fc(e,t){if(e.b=function(){return Xe(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function dc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Je(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):fc(e,n):fc(e,{user:null}),e.f=[],e.c=[]}function pc(){}function mc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(e){this.vb=e},enumerable:!1})}function yc(e,t){this.a=t,Lr(this,"verificationId",e)}function gc(e,t,n,r){return new mo(e).Wa(t,n).then((function(e){return new yc(e,r)}))}function vc(e){var t=Si(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Yr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Fr(this,{token:e,expirationTime:_r(1e3*t.exp),authTime:_r(1e3*t.auth_time),issuedAtTime:_r(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function bc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function wc(e){this.f=e,this.b=this.a=null,this.c=0}function Tc(e,t){var n=t[_a],r=t.refreshToken;t=Ec(t.expiresIn),e.b=n,e.c=t,e.a=r}function Ec(e){return k()+1e3*parseInt(e,10)}function Sc(e,t){this.a=e||null,this.b=t||null,Fr(this,{lastSignInTime:_r(t||null),creationTime:_r(e||null)})}function Ic(e,t,n,r,i,o){Fr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function kc(e,t){for(var n in Rt.call(this,e),t)this[n]=t[n]}function Cc(e,t,n){var i;this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=r.a.SDK_VERSION?pr(r.a.SDK_VERSION):null,this.a=new Aa(this.l,Ci(Ii),e),this.b=new wc(this.a),Pc(this,t[_a]),Tc(this.b,t),Lr(this,"refreshToken",this.b.a),Lc(this,n||{}),on.call(this),this.J=!1,this.o&&vr()&&(this.i=uc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=(i=this,new bc((function(){return i.G(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var e=i.b.c-k()-3e5;return 0<e?e:0}))),this.W=S(this.Ja,this);var o=this;this.ga=null,this.xa=function(e){o.ua(e.g)},this.Z=null,this.P=[],this.wa=function(e){Ac(o,e.c)},this.Y=null}function Nc(e,t){e.Z&&Yt(e.Z,"languageCodeChanged",e.xa),(e.Z=t)&&Gt(t,"languageCodeChanged",e.xa)}function Ac(e,t){e.P=t,La(e.a,r.a.SDK_VERSION?pr(r.a.SDK_VERSION,e.P):null)}function Dc(e,t){e.Y&&Yt(e.Y,"frameworkChanged",e.wa),(e.Y=t)&&Gt(t,"frameworkChanged",e.wa)}function _c(e){try{return r.a.app(e.m).auth()}catch(t){throw new Yr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function xc(e){e.B||e.w.b||(e.w.start(),Yt(e,"tokenChanged",e.W),Gt(e,"tokenChanged",e.W))}function Oc(e){Yt(e,"tokenChanged",e.W),e.w.stop()}function Pc(e,t){e.ma=t,Lr(e,"_lat",t)}function Rc(e){for(var t=[],n=0;n<e.O.length;n++)t.push(e.O[n](e));return Ze(t).then((function(){return e}))}function Mc(e){e.i&&!e.J&&(e.J=!0,Zu(e.i,e))}function Lc(e,t){Fr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Sc(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Fc(){}function Uc(e){return Xe().then((function(){if(e.B)throw new Yr("app-deleted")}))}function Vc(e){return V(e.providerData,(function(e){return e.providerId}))}function Bc(e,t){t&&(qc(e,t.providerId),e.providerData.push(t))}function qc(e,t){z(e.providerData,(function(e){return e.providerId==t}))}function jc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Lr(e,t,n)}function zc(e,t){var n,r,i;e!=t&&(Fr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Lr(e,"metadata",new Sc((i=t.metadata).a,i.b)):Lr(e,"metadata",new Sc),U(t.providerData,(function(t){Bc(e,t)})),n=e.b,r=t.b,n.b=r.b,n.a=r.a,n.c=r.c,Lr(e,"refreshToken",e.b.a))}function Wc(e){return e.G().then((function(t){var n,r,i=e.isAnonymous;return r=t,ks((n=e).a,as,{idToken:r}).then(S(n.zc,n)).then((function(){return i||jc(e,"isAnonymous",!1),t}))}))}function Kc(e,t){t[_a]&&e.ma!=t[_a]&&(Tc(e.b,t),e.dispatchEvent(new kc("tokenChanged")),Pc(e,t[_a]),jc(e,"refreshToken",e.b.a))}function Gc(e,t){return Wc(e).then((function(){if(q(Vc(e),t))return Rc(e).then((function(){throw new Yr("provider-already-linked")}))}))}function Qc(e,t,n){return Ur({user:e,credential:go(t),additionalUserInfo:t=xi(t),operationType:n})}function Hc(e,t){return Kc(e,t),e.reload().then((function(){return e}))}function Yc(e,t,n,i,o){if(!vr())return Je(new Yr("operation-not-supported-in-this-environment"));if(e.h&&!o)return Je(e.h);var a=_i(n.providerId),s=kr(e.uid+":::"),u=null;(!Tr()||sr())&&e.o&&n.isOAuthProvider&&(u=Bs(e.o,e.l,e.m,t,n,null,s,r.a.SDK_VERSION||null,null,null,e.tenantId));var c=nr(u,a&&a.sa,a&&a.ra);return i=i().then((function(){if(Jc(e),!o)return e.G().then((function(){}))})).then((function(){return rc(e.i,c,t,n,s,!!u,e.tenantId)})).then((function(){return new ze((function(n,r){e.ja(t,null,new Yr("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=s,e.c=ac(e.i,e,t,c,s)}))})).then((function(e){return c&&tr(c),e?Ur(e):null})).s((function(e){throw c&&tr(c),e})),$c(e,i,o)}function Xc(e,t,n,r,i){if(!vr())return Je(new Yr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Je(e.h);var o=null,a=kr(e.uid+":::");return r=r().then((function(){if(Jc(e),!i)return e.G().then((function(){}))})).then((function(){return e.ca=a,Rc(e)})).then((function(t){return e.da&&(t=(t=e.da).b.set(tl,e.A(),t.a)),t})).then((function(){return oc(e.i,t,n,a,e.tenantId)})).s((function(t){if(o=t,e.da)return nl(e.da);throw o})).then((function(){if(o)throw o})),$c(e,r,i)}function Jc(e){if(!e.i||!e.J){if(e.i&&!e.J)throw new Yr("internal-error");throw new Yr("auth-domain-config-required")}}function $c(e,t,n){var r,i,o,a=(i=t,o=n,(r=e).h&&!o?(i.cancel(),Je(r.h)):i.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(r.h||r.dispatchEvent(new kc("userInvalidated")),r.h=e),e})));return e.I.push(a),a.ka((function(){j(e.I,a)})),a}function Zc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[_a]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-k())/1e3;var r=new Cc(t,n,e);return e.providerData&&U(e.providerData,(function(e){e&&Bc(r,Ur(e))})),e.redirectEventId&&(r.ca=e.redirectEventId),r}function el(e){this.a=e,this.b=Tu()}cc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},cc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(dc(this,!0,null,e.a),Xe()):t.Ba(n,r)?function(e,t,n){n=n.Ba(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.R(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){dc(e,s,t,null)})).s((function(t){dc(e,s,null,t)}))}(this,e,t):Je(new Yr("invalid-auth-event")):(dc(this,!1,null,null),Xe())}else Je(new Yr("invalid-auth-event"))},cc.prototype.oa=function(){var e=this;return new ze((function(t,n){var r,i;e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),r=e,i=new Yr("timeout"),r.a&&r.a.cancel(),r.a=ln(nc.get()).then((function(){r.b||(r.g=!0,dc(r,!0,null,i))})))}))},pc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ja(e.c,null,e.a,e.b),Xe()):t.Ba(n,r)?(o=t,a=(i=e).b,s=i.c,o.Ba(s,a)(i.g,i.f,i.R(),i.i).then((function(e){o.ja(s,e,null,a)})).s((function(e){o.ja(s,null,e,a)}))):Je(new Yr("invalid-auth-event"))}else Je(new Yr("invalid-auth-event"));var i,o,a,s},yc.prototype.confirm=function(e){return e=yo(this.verificationId,e),this.a(e)},bc.prototype.start=function(){this.a=this.c,function e(t,n){var r,i;t.stop(),t.b=ln((r=t,(i=n)?(r.a=r.c,r.g()):(i=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),i))).then((function(){return e=s.document,t=null,Dr()||!e?Xe():new ze((function(n){t=function(){Dr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).s((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}));var e,t})).then((function(){return t.h()})).then((function(){e(t,!0)})).s((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},bc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},wc.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Je(new Yr("user-token-expired")):e||!this.b||k()>this.c-3e4?this.a?function(e,t){return n=e.f,r=t,new ze((function(e,t){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?Fa(n,n.l+"?key="+encodeURIComponent(n.c),(function(n){n?n.error?t(Ns(n)):n.access_token&&n.refresh_token?e(n):t(new Yr("internal-error")):t(new Yr("network-request-failed"))}),"POST",Mn(r).toString(),n.g,n.u.get()):t(new Yr("internal-error"))})).then((function(t){return e.b=t.access_token,e.c=Ec(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}})).s((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}));var n,r}(this,{grant_type:"refresh_token",refresh_token:this.a}):Xe(null):Xe({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Sc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(kc,Rt),C(Cc,on),Cc.prototype.ua=function(e){this.ga=e,Ma(this.a,e)},Cc.prototype.ha=function(){return this.ga},Cc.prototype.Ca=function(){return K(this.P)},Cc.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Lr(Cc.prototype,"providerId","firebase"),(t=Cc.prototype).reload=function(){var e=this;return $c(this,Uc(this).then((function(){return Wc(e).then((function(){return Rc(e)})).then(Fc)})))},t.dc=function(e){return this.G(e).then((function(e){return new vc(e)}))},t.G=function(e){var t=this;return $c(this,Uc(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new Yr("internal-error");return e.accessToken!=t.ma&&(Pc(t,e.accessToken),t.dispatchEvent(new kc("tokenChanged"))),jc(t,"refreshToken",e.refreshToken),e.accessToken})))},t.zc=function(e){if(!(e=e.users)||!e.length)throw new Yr("internal-error");Lc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=(r=(r=e).providerUserInfo)&&r.length?V(r,(function(e){return new Ic(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[],n=0;n<t.length;n++)Bc(this,t[n]);var r;jc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},t.Ac=function(e){return Rr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(e)},t.hb=function(e){var t=this,n=null;return $c(this,e.f(this.a,this.uid).then((function(e){return Kc(t,e),n=Qc(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},t.rc=function(e){return Rr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(e)},t.fb=function(e){var t=this,n=null;return $c(this,Gc(this,e.providerId).then((function(){return t.G()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Qc(t,e,"link"),Hc(t,e)})).then((function(){return n})))},t.sc=function(e,t){var n=this;return $c(this,Gc(this,"phone").then((function(){return gc(_c(n),e,t,S(n.fb,n))})))},t.Bc=function(e,t){var n=this;return $c(this,Xe().then((function(){return gc(_c(n),e,t,S(n.hb,n))})),!0)},t.rb=function(e){var t=this;return $c(this,this.G().then((function(n){return t.a.rb(n,e)})).then((function(e){return Kc(t,e),t.reload()})))},t.Sc=function(e){var t=this;return $c(this,this.G().then((function(n){return e.b(t.a,n)})).then((function(e){return Kc(t,e),t.reload()})))},t.sb=function(e){var t=this;return $c(this,this.G().then((function(n){return t.a.sb(n,e)})).then((function(e){return Kc(t,e),t.reload()})))},t.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Uc(this);var t=this;return $c(this,this.G().then((function(n){return t.a.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Kc(t,e),jc(t,"displayName",e.displayName||null),jc(t,"photoURL",e.photoUrl||null),U(t.providerData,(function(e){"password"===e.providerId&&(Lr(e,"displayName",t.displayName),Lr(e,"photoURL",t.photoURL))})),Rc(t)})).then(Fc))},t.Qc=function(e){var t=this;return $c(this,Wc(this).then((function(n){return q(Vc(t),e)?ks(t.a,rs,{idToken:n,deleteProvider:[e]}).then((function(e){var n={};return U(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),U(Vc(t),(function(e){n[e]||qc(t,e)})),n[mo.PROVIDER_ID]||Lr(t,"phoneNumber",null),Rc(t)})):Rc(t).then((function(){throw new Yr("no-such-provider")}))})))},t.delete=function(){var e=this;return $c(this,this.G().then((function(t){return ks(e.a,ns,{idToken:t})})).then((function(){e.dispatchEvent(new kc("userDeleted"))}))).then((function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");Nc(e,null),Dc(e,null),e.I=[],e.B=!0,Oc(e),Lr(e,"refreshToken",null),e.i&&ec(e.i,e)}))},t.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ca||null)==t||"reauthViaRedirect"==e&&(this.ca||null)==t)},t.ja=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?S(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?S(this.Cb,this):"linkViaRedirect"==e&&(this.ca||null)==t?S(this.Bb,this):"reauthViaRedirect"==e&&(this.ca||null)==t?S(this.Cb,this):null},t.tc=function(e){var t=this;return Yc(this,"linkViaPopup",e,(function(){return Gc(t,e.providerId).then((function(){return Rc(t)}))}),!1)},t.Cc=function(e){return Yc(this,"reauthViaPopup",e,(function(){return Xe()}),!0)},t.uc=function(e){var t=this;return Xc(this,"linkViaRedirect",e,(function(){return Gc(t,e.providerId)}),!1)},t.Dc=function(e){return Xc(this,"reauthViaRedirect",e,(function(){return Xe()}),!0)},t.Bb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $c(this,this.G().then((function(n){return Ya(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Qc(i,e,"link"),Hc(i,e)})).then((function(){return o})))},t.Cb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $c(this,Xe().then((function(){return ji(Xa(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Qc(i,e,"reauthenticate"),Kc(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},t.jb=function(e){var t=this,n=null;return $c(this,this.G().then((function(t){return n=t,void 0===e||Q(e)?{}:vi(new ui(e))})).then((function(e){return t.a.jb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},t.toJSON=function(){return this.A()},t.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&X(e,this.metadata.A()),U(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),e};var tl={name:"redirectUser",C:"session"};function nl(e){return Iu(e.b,tl,e.a)}function rl(e){var t,n,r,i,o,a,u,c,l;this.a=e,this.b=Tu(),this.c=null,this.f=(u=al("local"),c=al("session"),l=al("none"),n=(t=this).b,r=u,i=t.a,o=Su(r,i),a=Eu(n,r.C),n.get(r,i).then((function(e){var t=null;try{t=Ir(s.localStorage.getItem(o))}catch(e){}if(t&&!e)return s.localStorage.removeItem(o),n.set(r,t,i);t&&e&&"localStorage"!=a.type&&s.localStorage.removeItem(o)})).then((function(){return t.b.get(c,t.a)})).then((function(e){return e?c:t.b.get(l,t.a).then((function(e){return e?l:t.b.get(u,t.a).then((function(e){return e?u:t.b.get(ol,t.a).then((function(e){return e?al(e):u}))}))}))})).then((function(e){return t.c=e,il(t,e.C)})).s((function(){t.c||(t.c=u)}))),this.b.addListener(al("local"),this.a,S(this.g,this))}function il(e,t){var n,r,i=[];for(n in bu)bu[n]!==t&&i.push(Iu(e.b,al(bu[n]),e.a));return i.push(Iu(e.b,ol,e.a)),r=i,new ze((function(e,t){var n=r.length,i=[];if(n)for(var o=function(t,r){n--,i[t]=r,0==n&&e(i)},a=function(e){t(e)},s=0;s<r.length;s++)$e(r[s],I(o,s),a);else e(i)}))}rl.prototype.g=function(){var e=this,t=al("local");ll(this,(function(){return Xe().then((function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null})).then((function(n){if(n)return il(e,"local").then((function(){e.c=t}))}))}))};var ol={name:"persistence",C:"session"};function al(e){return{name:"authUser",C:e}}function sl(e,t){return ll(e,(function(){return e.b.set(e.c,t.A(),e.a)}))}function ul(e){return ll(e,(function(){return Iu(e.b,e.c,e.a)}))}function cl(e,t){return ll(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Zc(e||{})}))}))}function ll(e,t){return e.f=e.f.then(t,t),e.f}function hl(e){if(this.l=!1,Lr(this,"settings",new mc),Lr(this,"app",e),!bl(this).options||!bl(this).options.apiKey)throw new Yr("invalid-api-key");var t,n,i,o,a,s,u,c,l,h,f,d;e=r.a.SDK_VERSION?pr(r.a.SDK_VERSION):null,this.b=new Aa(bl(this).options&&bl(this).options.apiKey,Ci(Ii),e),this.O=[],this.m=[],this.J=[],this.Ub=r.a.INTERNAL.createSubscribe(S(this.oc,this)),this.W=void 0,this.Vb=r.a.INTERNAL.createSubscribe(S(this.pc,this)),gl(this,null),this.h=new rl(bl(this).options.apiKey+":"+bl(this).name),this.w=new el(bl(this).options.apiKey+":"+bl(this).name),this.Y=Sl(this,(f=bl(s=this).options.authDomain,c=(u=s).w,l=bl(u).options.authDomain,h=c.b.get(tl,c.a).then((function(e){return e&&l&&(e.authDomain=l),Zc(e||{})})).then((function(e){return(u.B=e)&&(e.da=u.w),nl(u.w)})),d=Sl(u,h).then((function(){return cl(s.h,f)})).then((function(e){return e?(e.da=s.w,s.B&&(s.B.ca||null)==(e.ca||null)?e:e.reload().then((function(){return sl(s.h,e).then((function(){return e}))})).s((function(t){return"auth/network-request-failed"==t.code?e:ul(s.h)}))):null})).then((function(e){gl(s,e||null)})),Sl(s,d))),this.i=Sl(this,(a=this).Y.then((function(){return ml(a)})).s((function(){})).then((function(){if(!a.l)return a.ma()})).s((function(){})).then((function(){if(!a.l){a.ga=!0;var e=a.h;e.b.addListener(al("local"),e.a,a.ma)}}))),this.ga=!1,this.ma=S(this.Nc,this),this.ub=S(this.aa,this),this.wa=S(this.bc,this),this.xa=S(this.mc,this),this.Ja=S(this.nc,this),this.a=null,i=bl(n=this).options.authDomain,o=bl(n).options.apiKey,i&&vr()&&(n.Tb=n.Y.then((function(){if(!n.l){if(n.a=uc(i,o,bl(n).name),Zu(n.a,n),wl(n)&&Mc(wl(n)),n.B){Mc(n.B);var e=n.B;e.ua(n.ha()),Nc(e,n),Ac(e=n.B,n.I),Dc(e,n),n.B=null}return n.a}}))),this.INTERNAL={},this.INTERNAL.delete=S(this.delete,this),this.INTERNAL.logFramework=S(this.vc,this),this.o=0,on.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.ha()},set:function(e){this.ua(e)},enumerable:!1}),t.Z=null,Object.defineProperty(t,"ti",{get:function(){return this.R()},set:function(e){this.nb(e)},enumerable:!1}),t.P=null,this.I=[]}function fl(e){Rt.call(this,"languageCodeChanged"),this.g=e}function dl(e){Rt.call(this,"frameworkChanged"),this.c=e}function pl(e){return e.Tb||Je(new Yr("auth-domain-config-required"))}function ml(e){if(!vr())return Je(new Yr("operation-not-supported-in-this-environment"));var t=pl(e).then((function(){return e.a.oa()})).then((function(e){return e?Ur(e):null}));return Sl(e,t)}function yl(e,t){var n={};return n.apiKey=bl(e).options.apiKey,n.authDomain=bl(e).options.authDomain,n.appName=bl(e).name,e.Y.then((function(){return r=n,i=t,o=e.w,a=e.Ca(),s=new Cc(r,i),o&&(s.da=o),a&&Ac(s,a),s.reload().then((function(){return s}));var r,i,o,a,s})).then((function(t){return wl(e)&&t.uid==wl(e).uid?zc(wl(e),t):(gl(e,t),Mc(t)),e.aa(t)})).then((function(){El(e)}))}function gl(e,t){var n,r;wl(e)&&(n=wl(e),r=e.ub,z(n.O,(function(e){return e==r})),Yt(wl(e),"tokenChanged",e.wa),Yt(wl(e),"userDeleted",e.xa),Yt(wl(e),"userInvalidated",e.Ja),Oc(wl(e))),t&&(t.O.push(e.ub),Gt(t,"tokenChanged",e.wa),Gt(t,"userDeleted",e.xa),Gt(t,"userInvalidated",e.Ja),0<e.o&&xc(t)),Lr(e,"currentUser",t),t&&(t.ua(e.ha()),Nc(t,e),Ac(t,e.I),Dc(t,e))}function vl(e,t){var n=null,r=null;return Sl(e,t.then((function(t){return n=go(t),r=xi(t),yl(e,t)})).then((function(){return Ur({user:wl(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function bl(e){return e.app}function wl(e){return e.currentUser}function Tl(e){return wl(e)&&wl(e)._lat||null}function El(e){if(e.ga){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](Tl(e));if(e.W!==e.getUid()&&e.J.length)for(e.W=e.getUid(),t=0;t<e.J.length;t++)e.J[t]&&e.J[t](Tl(e))}}function Sl(e,t){return e.O.push(t),t.ka((function(){j(e.O,t)})),t}function Il(){}function kl(){this.a={},this.b=1e12}rl.prototype.mb=function(e){var t=null,n=this;return function(e){var t=new Yr("invalid-persistence-type"),n=new Yr("unsupported-persistence-type");e:{for(r in bu)if(bu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(cr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!gr()&&"none"!==e)throw n}}(e),ll(this,(function(){return e!=n.c.C?n.b.get(n.c,n.a).then((function(r){return t=r,il(n,e)})).then((function(){if(n.c=al(e),t)return n.b.set(n.c,t,n.a)})):Xe()}))},C(hl,on),C(fl,Rt),C(dl,Rt),(t=hl.prototype).mb=function(e){return Sl(this,e=this.h.mb(e))},t.ua=function(e){this.Z===e||this.l||(this.Z=e,Ma(this.b,this.Z),this.dispatchEvent(new fl(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var e=s.navigator;this.ua(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},t.vc=function(e){this.I.push(e),La(this.b,r.a.SDK_VERSION?pr(r.a.SDK_VERSION,this.I):null),this.dispatchEvent(new dl(this.I))},t.Ca=function(){return K(this.I)},t.nb=function(e){this.P===e||this.l||(this.P=e,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:bl(this).options.apiKey,authDomain:bl(this).options.authDomain,appName:bl(this).name,currentUser:wl(this)&&wl(this).A()}},t.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},t.ja=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?S(this.ac,this):null},t.ac=function(e,t,n,r){var i=this;e={requestUri:e,postBody:r,sessionId:t,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=Ha(i.b,e).then((function(e){return o=go(e),a=xi(e),e}));return Sl(this,e=i.Y.then((function(){return s})).then((function(e){return yl(i,e)})).then((function(){return Ur({user:wl(i),credential:o,additionalUserInfo:a,operationType:"signIn"})})))},t.Lc=function(e){if(!vr())return Je(new Yr("operation-not-supported-in-this-environment"));var t=this,n=_i(e.providerId),i=kr(),o=null;(!Tr()||sr())&&bl(this).options.authDomain&&e.isOAuthProvider&&(o=Bs(bl(this).options.authDomain,bl(this).options.apiKey,bl(this).name,"signInViaPopup",e,null,i,r.a.SDK_VERSION||null,null,null,this.R()));var a=nr(o,n&&n.sa,n&&n.ra);return Sl(this,n=pl(this).then((function(n){return rc(n,a,"signInViaPopup",e,i,!!o,t.R())})).then((function(){return new ze((function(e,n){t.ja("signInViaPopup",null,new Yr("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=i,t.c=ac(t.a,t,"signInViaPopup",a,i)}))})).then((function(e){return a&&tr(a),e?Ur(e):null})).s((function(e){throw a&&tr(a),e})))},t.Mc=function(e){if(!vr())return Je(new Yr("operation-not-supported-in-this-environment"));var t=this;return Sl(this,pl(this).then((function(){return ll(e=t.h,(function(){return e.b.set(ol,e.c.C,e.a)}));var e})).then((function(){return oc(t.a,"signInViaRedirect",e,void 0,t.R())})))},t.oa=function(){var e=this;return ml(this).then((function(t){return e.a&&hc(e.a.b),t})).s((function(t){throw e.a&&hc(e.a.b),t}))},t.Rc=function(e){if(!e)return Je(new Yr("null-user"));if(this.P!=e.tenantId)return Je(new Yr("tenant-id-mismatch"));var t=this,n={};n.apiKey=bl(this).options.apiKey,n.authDomain=bl(this).options.authDomain,n.appName=bl(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.o,appName:e.m};var i=e.b,o={};return o[_a]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-k())/1e3,t=new Cc(t,o),n&&(t.da=n),r&&Ac(t,r),zc(t,e),t}(e,n,t.w,t.Ca());return Sl(this,this.i.then((function(){if(bl(t).options.apiKey!=e.l)return r.reload()})).then((function(){return wl(t)&&e.uid==wl(t).uid?(zc(wl(t),e),t.aa(e)):(gl(t,r),Mc(r),t.aa(r))})).then((function(){El(t)})))},t.pb=function(){var e=this;return Sl(this,this.i.then((function(){return e.a&&hc(e.a.b),wl(e)?(gl(e,null),ul(e.h).then((function(){El(e)}))):Xe()})))},t.Nc=function(){var e=this;return cl(this.h,bl(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=wl(e)&&t){n=wl(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return zc(wl(e),t),wl(e).G();(wl(e)||t)&&(gl(e,t),t&&(Mc(t),t.da=e.w),e.a&&Zu(e.a,e),El(e))}}))},t.aa=function(e){return sl(this.h,e)},t.bc=function(){El(this),this.aa(wl(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(wl(t))}))},t.pc=function(e){var t,n,r=this;n=function(){e.next(wl(r))},(t=this).J.push(n),Sl(t,t.i.then((function(){!t.l&&q(t.J,n)&&t.W!==t.getUid()&&(t.W=t.getUid(),n(Tl(t)))})))},t.xc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){g(e)?e(wl(r)):g(e.next)&&e.next(wl(r))})),this.Ub(e,t,n)},t.wc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),g(e)?e(wl(r)):g(e.next)&&e.next(wl(r))})),this.Vb(e,t,n)},t.cc=function(e){var t=this;return Sl(this,this.i.then((function(){return wl(t)?wl(t).G(e).then((function(e){return{accessToken:e}})):null})))},t.Hc=function(e){var t=this;return this.i.then((function(){return vl(t,ks(t.b,ws,{token:e}))})).then((function(e){var n=e.user;return jc(n,"isAnonymous",!1),t.aa(n),e}))},t.Ic=function(e,t){var n=this;return this.i.then((function(){return vl(n,ks(n.b,Ts,{email:e,password:t}))}))},t.Xb=function(e,t){var n=this;return this.i.then((function(){return vl(n,ks(n.b,es,{email:e,password:t}))}))},t.Sa=function(e){var t=this;return this.i.then((function(){return vl(t,e.na(t.b))}))},t.Gc=function(e){return Rr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(e)},t.ob=function(){var e=this;return this.i.then((function(){var t=wl(e);if(t&&t.isAnonymous){var n=Ur({providerId:null,isNewUser:!1});return Ur({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vl(e,e.b.ob()).then((function(t){var n=t.user;return jc(n,"isAnonymous",!0),e.aa(n),t}))}))},t.getUid=function(){return wl(this)&&wl(this).uid||null},t.Wb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&wl(this)&&xc(wl(this))},t.Ec=function(e){var t=this;U(this.m,(function(n){n==e&&t.o--})),this.o<0&&(this.o=0),0==this.o&&wl(this)&&Oc(wl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(e){var t=this;this.m.push(e),Sl(this,this.i.then((function(){t.l||q(t.m,e)&&e(Tl(t))})))},t.removeAuthTokenListener=function(e){z(this.m,(function(t){return t==e}))},t.delete=function(){this.l=!0;for(var e=0;e<this.O.length;e++)this.O[e].cancel("app-deleted");return this.O=[],this.h&&(e=this.h).b.removeListener(al("local"),e.a,this.ma),this.a&&(ec(this.a,this),hc(this.a.b)),Promise.resolve()},t.$b=function(e){return Sl(this,ks(this.b,ts,{identifier:e,continueUri:br()?$n():"http://localhost"}).then((function(e){return e.signinMethods||[]})))},t.qc=function(e){return!!lo(e)},t.lb=function(e,t){var n=this;return Sl(this,Xe().then((function(){var e=new ui(t);if(!e.c)throw new Yr("argument-error",hi+" must be true when sending sign in link to email");return vi(e)})).then((function(t){return n.b.lb(e,t)})).then((function(){})))},t.Uc=function(e){return this.Ma(e).then((function(e){return e.data.email}))},t.ab=function(e,t){return Sl(this,this.b.ab(e,t).then((function(){})))},t.Ma=function(e){return Sl(this,this.b.Ma(e).then((function(e){return new Br(e)})))},t.Ya=function(e){return Sl(this,this.b.Ya(e).then((function(){})))},t.kb=function(e,t){var n=this;return Sl(this,Xe().then((function(){return void 0===t||Q(t)?{}:vi(new ui(t))})).then((function(t){return n.b.kb(e,t)})).then((function(){})))},t.Kc=function(e,t){return Sl(this,gc(this,e,t,S(this.Sa,this)))},t.Jc=function(e,t){var n=this;return Sl(this,Xe().then((function(){var r=t||$n(),i=co(e,r);if(!(r=lo(r)))throw new Yr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Yr("tenant-id-mismatch");return n.Sa(i)})))},Il.prototype.render=function(){},Il.prototype.reset=function(){},Il.prototype.getResponse=function(){},Il.prototype.execute=function(){};var Cl=null;function Nl(e,t){return(t=Al(t))&&e.a[t]||null}function Al(e){return(e=void 0===e?1e12:e)?e.toString():null}function Dl(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=jn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():Gt(this.f,"click",this.i)}function _l(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function xl(){}kl.prototype.render=function(e,t){return this.a[this.b.toString()]=new Dl(e,t),this.b++},kl.prototype.reset=function(e){var t=Nl(this,e);e=Al(e),t&&e&&(t.delete(),delete this.a[e])},kl.prototype.getResponse=function(e){return(e=Nl(this,e))?e.getResponse():null},kl.prototype.execute=function(e){(e=Nl(this,e))&&e.execute()},Dl.prototype.getResponse=function(){return _l(this),this.b},Dl.prototype.execute=function(){_l(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(t){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()}),6e4)}),500))},Dl.prototype.delete=function(){_l(this),this.g=!0,clearTimeout(this.a),this.a=null,Yt(this.f,"click",this.i)},xl.prototype.g=function(){return Xe(Cl=Cl||new kl)},xl.prototype.c=function(){};var Ol=null;function Pl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Rl=new J(ee,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ml=new Ar(3e4,6e4);Pl.prototype.g=function(e){var t=this;return new ze((function(n,r){var i=setTimeout((function(){r(new Yr("network-request-failed"))}),Ml.get());!s.grecaptcha||e!==t.f&&!t.b?(s[t.a]=function(){if(s.grecaptcha){t.f=e;var o=s.grecaptcha.render;s.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new Yr("internal-error"));delete s[t.a]},Xe(Ta(ie(Rl,{onload:t.a,hl:e||""}))).s((function(){clearTimeout(i),r(new Yr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Pl.prototype.c=function(){this.b--};var Ll=null;function Fl(e,t,n,r,i,o,a){if(Lr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=t,this.g=null,a=a?Ol=Ol||new xl:Ll=Ll||new Pl,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Bl])throw new Yr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[ql],!s.document)throw new Yr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!jn(t)||!this.i&&jn(t).hasChildNodes())throw new Yr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Aa(e,o||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var c=this.a[Ul];this.a[Ul]=function(e){if(jl(u,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=yr(c,s);"function"==typeof t&&t(e)}};var l=this.a[Vl];this.a[Vl]=function(){if(jl(u,null),"function"==typeof l)l();else if("string"==typeof l){var e=yr(l,s);"function"==typeof e&&e()}}}var Ul="callback",Vl="expired-callback",Bl="sitekey",ql="size";function jl(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function zl(e,t){return e.h.push(t),t.ka((function(){j(e.h,t)})),t}function Wl(e){if(e.B)throw new Yr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kl(e,t,n){var i=!1;try{this.b=n||r.a.app()}catch(e){throw new Yr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Yr("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ca()}catch(e){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}a=r.a.SDK_VERSION?pr(r.a.SDK_VERSION,a):null,Fl.call(this,n,e,t,(function(){try{var e=o.b.auth().ha()}catch(t){e=null}return e}),a,Ci(Ii),i)}function Gl(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new Yr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].N(n[i])&&!o){if(t=t[i],i<0||i>=Ql.length)throw new Yr("internal-error","Argument validator received an unsupported number of arguments.");n=Ql[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.M+".";break e}r=null}}if(r)throw new Yr("argument-error",e+" failed: "+r)}(t=Fl.prototype).Da=function(){var e=this;return this.f?this.f:this.f=zl(this,Xe().then((function(){if(br()&&!ur())return or();throw new Yr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.v())})).then((function(t){return e.g=t,ks(e.o,hs,{})})).then((function(t){e.a[Bl]=t.recaptchaSiteKey})).s((function(t){throw e.f=null,t})))},t.render=function(){Wl(this);var e=this;return zl(this,this.Da().then((function(){if(null===e.c){var t=e.u;if(!e.i){var n=jn(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!qn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Fe(a.name),'"'),a.type){o.push(' type="',Fe(a.type),'"');var s={};X(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(u(a)?o.className=a:m(a)?o.className=a.join(" "):zn(o,a)),2<r.length&&function(e,t,n){function r(n){n&&t.appendChild(u(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!y(o)||v(o)&&0<o.nodeType?r(o):U(Kn(o)?K(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},t.verify=function(){Wl(this);var e=this;return zl(this,this.render().then((function(t){return new ze((function(n){var r=e.g.getResponse(t);r?n(r):(e.l.push((function t(r){var i;r&&(i=t,z(e.l,(function(e){return e==i})),n(r))})),e.i&&e.g.execute(e.c))}))})))},t.reset=function(){Wl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Wl(this),this.B=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=jn(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},C(Kl,Fl);var Ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Hl(e,t){return{name:e||"",M:"a valid string",optional:!!t,N:u}}function Yl(e,t){return{name:e||"",M:"a boolean",optional:!!t,N:c}}function Xl(e,t){return{name:e||"",M:"a valid object",optional:!!t,N:v}}function Jl(e,t){return{name:e||"",M:"a function",optional:!!t,N:g}}function $l(e,t){return{name:e||"",M:"null",optional:!!t,N:p}}function Zl(e){return{name:e?e+"Credential":"credential",M:e?"a valid "+e+" credential":"a valid credential",optional:!1,N:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.na||!n)}}}function eh(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(e){return!!(e&&u(e.type)&&g(e.verify))}}}function th(e,t,n,r){return{name:n||"",M:e.M+" or "+t.M,optional:!!r,N:function(n){return e.N(n)||t.N(n)}}}function nh(e,t){for(var n in t){var r=t[n].name;e[r]=oh(r,e[n],t[n].j)}}function rh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:I((function(e){return this[e]}),n),set:I((function(e,t,n,r){Gl(e,[n],[r],!0),this[t]=r}),r,n,t[n].Za),enumerable:!0})}}function ih(e,t,n,r){e[t]=oh(t,n,r)}function oh(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Gl(a,n,e),t.apply(this,e)}if(!n)return t;var i,o,a=(o=(o=e).split("."))[o.length-1];for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}nh(hl.prototype,{Ya:{name:"applyActionCode",j:[Hl("code")]},Ma:{name:"checkActionCode",j:[Hl("code")]},ab:{name:"confirmPasswordReset",j:[Hl("code"),Hl("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Hl("email"),Hl("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Hl("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Hl("emailLink")]},wc:{name:"onAuthStateChanged",j:[th(Xl(),Jl(),"nextOrObserver"),Jl("opt_error",!0),Jl("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[th(Xl(),Jl(),"nextOrObserver"),Jl("opt_error",!0),Jl("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Hl("email"),th(Xl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Hl("email"),Xl("actionCodeSettings")]},mb:{name:"setPersistence",j:[Hl("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[Zl()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[Zl()]},Hc:{name:"signInWithCustomToken",j:[Hl("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Hl("email"),Hl("password")]},Jc:{name:"signInWithEmailLink",j:[Hl("email"),Hl("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Hl("phoneNumber"),eh()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[th({name:"user",M:"an instance of Firebase User",optional:!1,N:function(e){return!!(e&&e instanceof Cc)}},$l(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Hl("code")]}}),rh(hl.prototype,{lc:{name:"languageCode",Za:th(Hl(),$l(),"languageCode")},ti:{name:"tenantId",Za:th(Hl(),$l(),"tenantId")}}),(hl.Persistence=bu).LOCAL="local",hl.Persistence.SESSION="session",hl.Persistence.NONE="none",nh(Cc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Yl("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[Yl("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[Zl()]},fb:{name:"linkWithCredential",j:[Zl()]},sc:{name:"linkWithPhoneNumber",j:[Hl("phoneNumber"),eh()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Zl()]},hb:{name:"reauthenticateWithCredential",j:[Zl()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Hl("phoneNumber"),eh()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[th(Xl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},Qc:{name:"unlink",j:[Hl("provider")]},rb:{name:"updateEmail",j:[Hl("email")]},sb:{name:"updatePassword",j:[Hl("password")]},Sc:{name:"updatePhoneNumber",j:[Zl("phone")]},tb:{name:"updateProfile",j:[Xl("profile")]}}),nh(kl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(Il.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(ze.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),rh(mc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:Yl("appVerificationDisabledForTesting")}}),nh(yc.prototype,{confirm:{name:"confirm",j:[Hl("verificationCode")]}}),ih(qi,"fromJSON",(function(e){e=u(e)?JSON.parse(e):e;for(var t,n=[Hi,so,fo,Ki],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[th(Hl(),Xl(),"json")]),ih(uo,"credential",(function(e,t){return new ao(e,t)}),[Hl("email"),Hl("password")]),nh(ao.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),nh($i.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih($i,"credential",Zi,[th(Hl(),Xl(),"token")]),ih(uo,"credentialWithLink",co,[Hl("email"),Hl("emailLink")]),nh(eo.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(eo,"credential",to,[th(Hl(),Xl(),"token")]),nh(no.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(no,"credential",ro,[th(Hl(),th(Xl(),$l()),"idToken"),th(Hl(),$l(),"accessToken",!0)]),nh(io.prototype,{Ga:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(io,"credential",oo,[th(Hl(),Xl(),"token"),Hl("secret",!0)]),nh(Ji.prototype,{ya:{name:"addScope",j:[Hl("scope")]},credential:{name:"credential",j:[th(Hl(),th(Xl(),$l()),"optionsOrIdToken"),th(Hl(),$l(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),nh(Gi.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),nh(zi.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),ih(mo,"credential",yo,[Hl("verificationId"),Hl("verificationCode")]),nh(mo.prototype,{Wa:{name:"verifyPhoneNumber",j:[Hl("phoneNumber"),eh()]}}),nh(ho.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),nh(Yr.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),nh(ko.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),nh(Io.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),nh(Kl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ih(Zr,"parseLink",si,[Hl("link")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:hl,AuthCredential:qi,Error:Yr};ih(e,"EmailAuthProvider",uo,[]),ih(e,"FacebookAuthProvider",$i,[]),ih(e,"GithubAuthProvider",eo,[]),ih(e,"GoogleAuthProvider",no,[]),ih(e,"TwitterAuthProvider",io,[]),ih(e,"OAuthProvider",Ji,[Hl("providerId")]),ih(e,"SAMLAuthProvider",Xi,[Hl("providerId")]),ih(e,"PhoneAuthProvider",mo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(e){return!!(e&&e instanceof hl)}}]),ih(e,"RecaptchaVerifier",Kl,[th(Hl(),{name:"",M:"an HTML element",optional:!1,N:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Xl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof r.a.app.App)}}]),ih(e,"ActionCodeURL",Zr,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new hl(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:S((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:S(e.cc,e),addAuthTokenListener:S(e.Wb,e),removeAuthTokenListener:S(e.Ec,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.13.5"),r.a.INTERNAL.extendNamespace({User:Cc})}()}).apply(void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(6))},function(e,t,n){"use strict";n(22)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(1))&&"object"==typeof r&&"default"in r?r.default:r,o=n(9),a=n(5),s=n(8),u=n(24),c=i.SDK_VERSION,l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function h(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function d(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function p(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var y,g,v=new o.Logger("@firebase/firestore");function b(){return v.logLevel===o.LogLevel.DEBUG?y.DEBUG:v.logLevel===o.LogLevel.SILENT?y.SILENT:y.ERROR}function w(e){switch(e){case y.DEBUG:v.logLevel=o.LogLevel.DEBUG;break;case y.ERROR:v.logLevel=o.LogLevel.ERROR;break;case y.SILENT:v.logLevel=o.LogLevel.SILENT;break;default:v.error("Firestore ("+c+"): Invalid value passed to `setLogLevel`")}}function T(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(v.logLevel<=o.LogLevel.DEBUG){var i=n.map(S);v.debug.apply(v,m(["Firestore ("+c+") ["+e+"]: "+t],i))}}function E(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(v.logLevel<=o.LogLevel.ERROR){var r=t.map(S);v.error.apply(v,m(["Firestore ("+c+"): "+e],r))}}function S(e){if("string"==typeof e)return e;var t=N.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function I(e){var t="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+e;throw E(t),new Error(t)}function k(e,t){e||I(t)}(g=y=y||{})[g.DEBUG=0]="DEBUG",g[g.ERROR=1]="ERROR",g[g.SILENT=2]="SILENT";var C,N=(x.setPlatform=function(e){x.platform&&I("Platform already defined"),x.platform=e},x.getPlatform=function(){return x.platform||I("Platform not set"),x.platform},x),A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=(h(_,C=Error),_);function _(e,t){var n=C.call(this,t)||this;return n.code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function x(){}function O(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new D(A.INVALID_ARGUMENT,e)}return n.prototype=e.prototype,Object.assign(n,e),n}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function R(e,t){return void 0!==e?e:t}function M(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function L(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function F(e){for(var t in k(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function U(e,t){if(0!==t.length)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+te(t.length,"argument")+".")}function V(e,t,n){if(t.length!==n)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires "+te(n,"argument")+", but was called with "+te(t.length,"argument")+".")}function B(e,t,n){if(t.length<n)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires at least "+te(n,"argument")+", but was called with "+te(t.length,"argument")+".")}function q(e,t,n,r){if(t.length<n||t.length>r)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+te(t.length,"argument")+".")}function j(e,t,n,r){Q(e,t,ee(n)+" argument",r)}function z(e,t,n,r){void 0!==r&&j(e,t,n,r)}function W(e,t,n,r){Q(e,t,n+" option",r)}function K(e,t,n,r){void 0!==r&&W(e,t,n,r)}function G(e,t,n,r,i){void 0!==r&&function(e,t,n){for(var r=[],o=0,a=i;o<a.length;o++){var s=a[o];if(s===n)return;r.push(Y(s))}var u=Y(n);throw new D(A.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+e+'() for option "'+t+'". Acceptable values: '+r.join(", "))}(e,n,r)}function Q(e,t,n,r){if(!("object"===t?H(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=Y(r);throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function H(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Y(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":I("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function X(e,t,n){if(void 0===n)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+ee(t)+" argument, but it was undefined.")}function J(e,t,n){L(t,(function(t,r){if(n.indexOf(t)<0)throw new D(A.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function $(e,t,n,r){var i=Y(r);return new D(A.INVALID_ARGUMENT,"Function "+e+"() requires its "+ee(n)+" argument to be a "+t+", but it was: "+i)}function Z(e,t,n){if(n<=0)throw new D(A.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+ee(t)+" argument to be a positive number, but it was: "+n+".")}function ee(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function te(e,t){return e+" "+t+(1===e?"":"s")}var ne=(re.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return k(20===t.length,"Invalid auto ID: "+t),t},re);function re(){}function ie(e,t){return e<t?-1:t<e?1:0}function oe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function ae(e){return e+"\0"}var se=(ue.fromBase64String=function(e){return new ue(N.getPlatform().atob(e))},ue.fromUint8Array=function(e){return new ue(ce(e))},ue.prototype.toBase64=function(){return N.getPlatform().btoa(this._binaryString)},ue.prototype.toUint8Array=function(){return le(this._binaryString)},ue.prototype.approximateByteSize=function(){return 2*this._binaryString.length},ue.prototype.isEqual=function(e){return this._binaryString===e._binaryString},ue.EMPTY_BYTE_STRING=new ue(""),ue);function ue(e){this._binaryString=e}function ce(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}function le(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function he(){if("undefined"==typeof Uint8Array)throw new D(A.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function fe(){if(!N.getPlatform().base64Available)throw new D(A.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function de(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i}function pe(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}var me,ye,ge,ve,be=(Re.fromBase64String=function(e){V("Blob.fromBase64String",arguments,1),j("Blob.fromBase64String","string",1,e),fe();try{return new Re(N.getPlatform().atob(e))}catch(e){throw new D(A.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},Re.fromUint8Array=function(e){if(V("Blob.fromUint8Array",arguments,1),he(),!(e instanceof Uint8Array))throw $("Blob.fromUint8Array","Uint8Array",1,e);return new Re(ce(e))},Re.prototype.toBase64=function(){return V("Blob.toBase64",arguments,0),fe(),N.getPlatform().btoa(this._binaryString)},Re.prototype.toUint8Array=function(){return V("Blob.toUint8Array",arguments,0),he(),le(this._binaryString)},Re.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Re.prototype.isEqual=function(e){return this._binaryString===e._binaryString},Re.prototype._approximateByteSize=function(){return 2*this._binaryString.length},Re.prototype._compareTo=function(e){return ie(this._binaryString,e._binaryString)},Re),we=O(be,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Te=(Object.defineProperty(Pe.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),Pe.prototype.isEqual=function(e){return e instanceof Pe&&e.projectId===this.projectId&&e.database===this.database},Pe.prototype.compareTo=function(e){return ie(this.projectId,e.projectId)||ie(this.database,e.database)},Pe),Ee=(Oe.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},Oe.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},Oe.INVALID=-1,Oe),Se=(Object.defineProperty(xe.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),xe.prototype.isEqual=function(e){return 0===xe.comparator(this,e)},xe.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof xe?e.forEach((function(e){t.push(e)})):t.push(e),this.construct(t)},xe.prototype.limit=function(){return this.offset+this.length},xe.prototype.popFirst=function(e){return e=void 0===e?1:e,k(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},xe.prototype.popLast=function(){return k(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},xe.prototype.firstSegment=function(){return k(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},xe.prototype.lastSegment=function(){return this.get(this.length-1)},xe.prototype.get=function(e){return k(e<this.length,"Index out of range"),this.segments[this.offset+e]},xe.prototype.isEmpty=function(){return 0===this.length},xe.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},xe.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},xe.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},xe.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},xe.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},xe),Ie=(h(_e,ge=Se),_e.prototype.construct=function(e,t,n){return new _e(e,t,n)},_e.prototype.canonicalString=function(){return this.toArray().join("/")},_e.prototype.toString=function(){return this.canonicalString()},_e.fromString=function(e){if(0<=e.indexOf("//"))throw new D(A.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new _e(e.split("/").filter((function(e){return 0<e.length})))},_e.EMPTY_PATH=new _e([]),_e),ke=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ce=(h(De,ye=Se),De.prototype.construct=function(e,t,n){return new De(e,t,n)},De.isValidIdentifier=function(e){return ke.test(e)},De.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),De.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},De.prototype.toString=function(){return this.canonicalString()},De.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},De.keyField=function(){return new De(["__name__"])},De.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new D(A.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var a=e[r];if("\\"===a){if(r+1===e.length)throw new D(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new D(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new D(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new De(t)},De.EMPTY_PATH=new De([]),De),Ne=(Ae.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},Ae.prototype.isEqual=function(e){return null!==e&&0===Ie.comparator(this.path,e.path)},Ae.prototype.toString=function(){return this.path.toString()},Ae.comparator=function(e,t){return Ie.comparator(e.path,t.path)},Ae.isDocumentKey=function(e){return e.length%2==0},Ae.fromSegments=function(e){return new Ae(new Ie(e.slice()))},Ae.fromPathString=function(e){return new Ae(Ie.fromString(e))},Ae.EMPTY=new Ae(new Ie([])),Ae);function Ae(e){this.path=e,k(Ae.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}function De(){return null!==ye&&ye.apply(this,arguments)||this}function _e(){return null!==ge&&ge.apply(this,arguments)||this}function xe(e,t,n){void 0===t?t=0:t>e.length&&I("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&I("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}function Oe(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}function Pe(e,t){this.projectId=e,this.database=t||"(default)"}function Re(e){fe(),this._binaryString=e}(ve=me=me||{}).All="all",ve.ListenStreamIdle="listen_stream_idle",ve.ListenStreamConnectionBackoff="listen_stream_connection_backoff",ve.WriteStreamIdle="write_stream_idle",ve.WriteStreamConnectionBackoff="write_stream_connection_backoff",ve.OnlineStateTimeout="online_state_timeout",ve.ClientMetadataRefresh="client_metadata_refresh",ve.LruGarbageCollection="lru_garbage_collection",ve.RetryTransaction="retry_transaction";var Me=(Ue.createAndSchedule=function(e,t,n,r,i){var o=new Ue(e,t,Date.now()+n,r,i);return o.start(n),o},Ue.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},Ue.prototype.skipDelay=function(){return this.handleDelayElapsed()},Ue.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},Ue.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},Ue.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},Ue),Le=(Object.defineProperty(Fe.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),Fe.prototype.enqueueAndForget=function(e){this.enqueue(e)},Fe.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},Fe.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},Fe.prototype.enqueueAndInitiateShutdown=function(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},Fe.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},Fe.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw E("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n},Fe.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),k(0<=t,"Attempted to schedule an operation with a negative delay of "+t),-1<this.timerIdsToSkip.indexOf(e)&&(t=0);var i=Me.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},Fe.prototype.verifyNotFailed=function(){this.failure&&I("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},Fe.prototype.verifyOperationInProgress=function(){k(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},Fe.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},Fe.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},Fe.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){k(e===me.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==me.All&&i.timerId===e)break}return t.drain()}))},Fe.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},Fe.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);k(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},Fe);function Fe(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}function Ue(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}function Ve(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=qe(t)),t=Be(e.get(n),t);return qe(t)}function Be(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function qe(e){return e+""}function je(e){var t=e.length;if(k(2<=t,"Invalid path "+e),2===t)return k(""===e.charAt(0)&&""===e.charAt(1),"Non-empty path "+e+" had length 2"),Ie.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||n<a)&&I('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:I('Invalid encoded resource path: "'+e+'"')}o=a+2}return new Ie(r)}var ze=(et.now=function(){return et.fromMillis(Date.now())},et.fromDate=function(e){return et.fromMillis(e.getTime())},et.fromMillis=function(e){var t=Math.floor(e/1e3);return new et(t,1e6*(e-1e3*t))},et.prototype.toDate=function(){return new Date(this.toMillis())},et.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},et.prototype._compareTo=function(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)},et.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},et.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},et),We=(Ze.fromMicroseconds=function(e){var t=Math.floor(e/1e6);return new Ze(new ze(t,e%1e6*1e3))},Ze.fromTimestamp=function(e){return new Ze(e)},Ze.forDeletedDoc=function(){return Ze.MIN},Ze.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},Ze.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},Ze.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Ze.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Ze.prototype.toTimestamp=function(){return this.timestamp},Ze.MIN=new Ze(new ze(0,0)),Ze),Ke=($e.prototype.insert=function(e,t){return new $e(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qe.BLACK,null,null))},$e.prototype.remove=function(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))},$e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},$e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},$e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty($e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),$e.prototype.minKey=function(){return this.root.minKey()},$e.prototype.maxKey=function(){return this.root.maxKey()},$e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},$e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},$e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},$e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},$e.prototype.getIterator=function(){return new Ge(this.root,null,this.comparator,!1)},$e.prototype.getIteratorFrom=function(e){return new Ge(this.root,e,this.comparator,!1)},$e.prototype.getReverseIterator=function(){return new Ge(this.root,null,this.comparator,!0)},$e.prototype.getReverseIteratorFrom=function(e){return new Ge(this.root,e,this.comparator,!0)},$e),Ge=(Je.prototype.getNext=function(){k(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},Je.prototype.hasNext=function(){return 0<this.nodeStack.length},Je.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},Je),Qe=(Xe.prototype.copy=function(e,t,n,r,i){return new Xe(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Xe.prototype.isEmpty=function(){return!1},Xe.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},Xe.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},Xe.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},Xe.prototype.minKey=function(){return this.min().key},Xe.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Xe.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},Xe.prototype.removeMin=function(){if(this.left.isEmpty())return Xe.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},Xe.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Xe.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},Xe.prototype.isRed=function(){return this.color},Xe.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},Xe.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},Xe.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},Xe.prototype.rotateLeft=function(){var e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},Xe.prototype.rotateRight=function(){var e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},Xe.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},Xe.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},Xe.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw I("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw I("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw I("Black depths differ");return e+(this.isRed()?0:1)},Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1,Xe),He=(Object.defineProperty(Ye.prototype,"key",{get:function(){throw I("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"value",{get:function(){throw I("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"color",{get:function(){throw I("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"left",{get:function(){throw I("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"right",{get:function(){throw I("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),Ye.prototype.copy=function(e,t,n,r,i){return this},Ye.prototype.insert=function(e,t,n){return new Qe(e,t)},Ye.prototype.remove=function(e,t){return this},Ye.prototype.isEmpty=function(){return!0},Ye.prototype.inorderTraversal=function(e){return!1},Ye.prototype.reverseTraversal=function(e){return!1},Ye.prototype.minKey=function(){return null},Ye.prototype.maxKey=function(){return null},Ye.prototype.isRed=function(){return!1},Ye.prototype.checkMaxDepth=function(){return!0},Ye.prototype.check=function(){return 0},Ye);function Ye(){this.size=0}function Xe(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Xe.RED,this.left=null!=r?r:Xe.EMPTY,this.right=null!=i?i:Xe.EMPTY,this.size=this.left.size+1+this.right.size}function Je(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}function $e(e,t){this.comparator=e,this.root=t||Qe.EMPTY}function Ze(e){this.timestamp=e}function et(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new D(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new D(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new D(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new D(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}Qe.EMPTY=new He;var tt=(ot.fromMapKeys=function(e){var t=new ot(e.comparator);return e.forEach((function(e){t=t.add(e)})),t},ot.prototype.has=function(e){return null!==this.data.get(e)},ot.prototype.first=function(){return this.data.minKey()},ot.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(ot.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),ot.prototype.indexOf=function(e){return this.data.indexOf(e)},ot.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},ot.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},ot.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},ot.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},ot.prototype.getIterator=function(){return new nt(this.data.getIterator())},ot.prototype.getIteratorFrom=function(e){return new nt(this.data.getIteratorFrom(e))},ot.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},ot.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},ot.prototype.isEmpty=function(){return this.data.isEmpty()},ot.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},ot.prototype.isEqual=function(e){if(!(e instanceof ot))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},ot.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},ot.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},ot.prototype.copy=function(e){var t=new ot(this.comparator);return t.data=e,t},ot),nt=(it.prototype.getNext=function(){return this.iter.getNext().key},it.prototype.hasNext=function(){return this.iter.hasNext()},it),rt=new Ke(Ne.comparator);function it(e){this.iter=e}function ot(e){this.comparator=e,this.data=new Ke(this.comparator)}function at(){return rt}function st(){return at()}var ut=new Ke(Ne.comparator);function ct(){return ut}var lt=new Ke(Ne.comparator);function ht(){return lt}var ft=new tt(Ne.comparator);function dt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=ft,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var pt=new tt(ie);function mt(){return pt}var yt,gt,vt=(kt.prototype.applyToRemoteDocument=function(e,t,n){t&&k(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;k(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},kt.prototype.applyToLocalView=function(e,t){t&&k(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},kt.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},kt.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),dt())},kt.prototype.isEqual=function(e){return this.batchId===e.batchId&&oe(this.mutations,e.mutations)&&oe(this.baseMutations,e.baseMutations)},kt),bt=(It.from=function(e,t,n,r){k(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var i=ht(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new It(e,t,n,r,i)},It),wt=(St.prototype.catch=function(e){return this.next(void 0,e)},St.prototype.next=function(e,t){var n=this;return this.callbackAttached&&I("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new St((function(r,i){n.nextCallback=function(t){n.wrapSuccess(e,t).next(r,i)},n.catchCallback=function(e){n.wrapFailure(t,e).next(r,i)}}))},St.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},St.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof St?t:St.resolve(t)}catch(e){return St.reject(e)}},St.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):St.resolve(t)},St.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):St.reject(t)},St.resolve=function(e){return new St((function(t,n){t(e)}))},St.reject=function(e){return new St((function(t,n){n(e)}))},St.waitFor=function(e){return new St((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(e){return n(e)}))})),o=!0,i===r&&t()}))},St.or=function(e){for(var t=St.resolve(!1),n=function(e){t=t.next((function(t){return t?St.resolve(t):e()}))},r=0,i=e;r<i.length;r++)n(i[r]);return t},St.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},St),Tt=(Et.forUser=function(e,t,n,r){return k(""!==e.uid,"UserID must not be an empty string."),new Et(e.isAuthenticated()?e.uid:"",t,n,r)},Et.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return At(e).iterate({index:$r.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},Et.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=n.toBase64(),_t(e).put(t)}))},Et.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return se.fromBase64String(e.lastStreamToken)}))},Et.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=t.toBase64(),_t(e).put(n)}))},Et.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Dt(e),a=At(e);return a.add({}).next((function(s){k("number"==typeof s,"Auto-generated key is not a number");for(var u=new vt(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new tt((function(e,t){return ie(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=ti.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,ti.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),wt.waitFor(l).next((function(){return u}))}))},Et.prototype.lookupMutationBatch=function(e,t){var n=this;return At(e).get(t).next((function(e){return e?(k(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},Et.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?wt.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r}return null}))},Et.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return At(e).iterate({index:$r.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(k(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},Et.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return At(e).iterate({index:$r.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},Et.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return At(e).loadAll($r.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},Et.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=ti.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Dt(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=je(u);if(s===n.userId&&t.path.isEqual(l))return At(e).get(c).next((function(e){if(!e)throw I("Dangling document-mutation reference found: "+r+" which points to "+c);k(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},Et.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new tt(ie),i=[];return t.forEach((function(t){var o=ti.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Dt(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=je(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),wt.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},Et.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;k(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),k(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=ti.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new tt(ie);return Dt(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=je(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},Et.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(At(e).get(t).next((function(e){if(null===e)throw I("Dangling document-mutation reference found, which points to "+t);k(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),wt.waitFor(i).next((function(){return r}))},Et.prototype.removeMutationBatch=function(e,t){var n=this;return Nt(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),wt.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},Et.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},Et.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return wt.resolve();var r=IDBKeyRange.lowerBound(ti.prefixForUser(t.userId)),i=[];return Dt(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=je(e[1]);i.push(o)}else r.done()})).next((function(){k(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},Et.prototype.containsKey=function(e,t){return Ct(e,this.userId,t)},Et.prototype.getMutationQueueMetadata=function(e){var t=this;return _t(e).get(this.userId).next((function(e){return e||new Jr(t.userId,-1,"")}))},Et);function Et(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function St(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}function It(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}function kt(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,k(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}function Ct(e,t,n){var r=ti.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Dt(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Nt(e,t,n){var r=e.store($r.store),i=e.store(ti.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){k(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=ti.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return wt.waitFor(o).next((function(){return c}))}function At(e){return eo.getStore(e,$r.store)}function Dt(e){return eo.getStore(e,ti.store)}function _t(e){return eo.getStore(e,Jr.store)}(gt=yt=yt||{})[gt.QueryCache=0]="QueryCache",gt[gt.SyncEngine=1]="SyncEngine";var xt=(qt.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},qt.prototype.after=function(e){return this.seek(e+2),this.next()},qt.prototype.seek=function(e){k((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},qt.forTargetCache=function(){return new qt(yt.QueryCache,2)},qt.forSyncEngine=function(){return new qt(yt.SyncEngine)},qt),Ot="SimpleDb",Pt=(Bt.openOrCreate=function(e,t,n){return k(Bt.isAvailable(),"IndexedDB not supported in current environment."),T(Ot,"Opening database:",e),new wt((function(r,i){var o=window.indexedDB.open(e,t);o.onsuccess=function(e){var t=e.target.result;r(new Bt(t))},o.onblocked=function(){i(new D(A.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(e){var t=e.target.error;"VersionError"===t.name?i(new D(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i(t)},o.onupgradeneeded=function(t){T(Ot,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var r=t.target.result;n.createOrUpgrade(r,o.transaction,t.oldVersion,zr).next((function(){T(Ot,"Database upgrade to version "+zr+" complete")}))}})).toPromise()},Bt.delete=function(e){return T(Ot,"Removing database:",e),jt(window.indexedDB.deleteDatabase(e)).toPromise()},Bt.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(Bt.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=a.getUA(),t=Bt.getIOSVersion(e),n=0<t&&t<10,r=Bt.getAndroidVersion(e),i=0<r&&r<4.5;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/")||n||i)},Bt.isMockPersistence=function(){var t;return void 0!==e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},Bt.getStore=function(e,t){return e.store(t)},Bt.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Bt.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Bt.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},Bt.prototype.runTransaction=function(e,t,n){return d(this,void 0,void 0,(function(){var r,i,o,a,s,u;return p(this,(function(c){switch(c.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,a=function(){var e,a,u,c;return p(this,(function(l){switch(l.label){case 0:++o,e=Mt.open(s.db,r?"readonly":"readwrite",t),l.label=1;case 1:return l.trys.push([1,3,,4]),(a=n(e).catch((function(t){return e.abort(t),wt.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return l.sent(),[2,{value:a}];case 3:return u=l.sent(),c=i&&"FirebaseError"!==u.name&&o<3,T(Ot,"Transaction failed with error: %s. Retrying: %s.",u.message,c),c?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:return"object"==typeof(u=c.sent())?[2,u.value]:[3,1];case 3:return[2]}}))}))},Bt.prototype.close=function(){this.db.close()},Bt),Rt=(Object.defineProperty(Vt.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(Vt.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(Vt.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),Vt.prototype.done=function(){this.shouldStop=!0},Vt.prototype.skip=function(e){this.nextKey=e},Vt.prototype.delete=function(){return jt(this.dbCursor.delete())},Vt),Mt=(Ut.open=function(e,t,n){return new Ut(e.transaction(n,t))},Object.defineProperty(Ut.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Ut.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(T(Ot,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Ut.prototype.store=function(e){var t=this.transaction.objectStore(e);return k(!!t,"Object store not part of transaction: "+e),new Lt(t)},Ut),Lt=(Ft.prototype.put=function(e,t){return jt(void 0!==t?(T(Ot,"PUT",this.store.name,e,t),this.store.put(t,e)):(T(Ot,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},Ft.prototype.add=function(e){return T(Ot,"ADD",this.store.name,e,e),jt(this.store.add(e))},Ft.prototype.get=function(e){var t=this;return jt(this.store.get(e)).next((function(n){return void 0===n&&(n=null),T(Ot,"GET",t.store.name,e,n),n}))},Ft.prototype.delete=function(e){return T(Ot,"DELETE",this.store.name,e),jt(this.store.delete(e))},Ft.prototype.count=function(){return T(Ot,"COUNT",this.store.name),jt(this.store.count())},Ft.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},Ft.prototype.deleteAll=function(e,t){T(Ot,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},Ft.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},Ft.prototype.iterateSerial=function(e){var t=this.cursor({});return new wt((function(n,r){t.onerror=function(e){var t=Wt(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},Ft.prototype.iterateCursor=function(e,t){var n=[];return new wt((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Rt(i),a=t(i.primaryKey,i.value,o);if(a instanceof wt){var s=a.catch((function(e){return o.done(),wt.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return wt.waitFor(n)}))},Ft.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(k(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},Ft.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},Ft);function Ft(e){this.store=e}function Ut(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new pe,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=Wt(e.target.error);t.completionDeferred.reject(n)}}function Vt(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}function Bt(e){this.db=e,12.2===Bt.getIOSVersion(a.getUA())&&E("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function qt(e,t){k((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}function jt(e){return new wt((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Wt(e.target.error);n(t)}}))}var zt=!1;function Wt(e){var t=Pt.getIOSVersion(a.getUA());if(12.2<=t&&t<13){var n="An internal error was encountered in the Indexed Database server";if(0<=e.message.indexOf(n)){var r=new D("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return zt||(zt=!0,setTimeout((function(){throw r}),0)),r}}return e}var Kt=(Gt.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},Gt.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return We.fromTimestamp(new ze(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},Gt.prototype.getHighestSequenceNumber=function(e){return Yt(e.simpleDbTransaction)},Gt.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},Gt.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},Gt.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},Gt.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Qt(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return k(0<t.targetCount,"Removing from an empty target cache"),--t.targetCount,n.saveMetadata(e,t)}))},Gt.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Qt(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return wt.waitFor(o)})).next((function(){return i}))},Gt.prototype.forEachTarget=function(e,t){var n=this;return Qt(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},Gt.prototype.retrieveMetadata=function(e){return Ht(e.simpleDbTransaction)},Gt.prototype.saveMetadata=function(e,t){return eo.getStore(e,hi.store).put(hi.key,t)},Gt.prototype.saveTargetData=function(e,t){return Qt(e).put(this.serializer.toDbTarget(t))},Gt.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},Gt.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},Gt.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Qt(e).iterate({range:i,index:ci.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},Gt.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=Xt(e);return t.forEach((function(t){var a=Ve(t.path);i.push(o.put(new li(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),wt.waitFor(i)},Gt.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=Xt(e);return wt.forEach(t,(function(t){var o=Ve(t.path);return wt.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},Gt.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Xt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},Gt.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Xt(e),i=dt();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=je(e[1]),o=new Ne(r);i=i.add(o)})).next((function(){return i}))},Gt.prototype.containsKey=function(e,t){var n=Ve(t.path),r=IDBKeyRange.bound([n],[ae(n)],!1,!0),i=0;return Xt(e).iterate({index:li.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return 0<i}))},Gt.prototype.getTargetDataForTarget=function(e,t){var n=this;return Qt(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},Gt);function Gt(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=xt.forTargetCache()}function Qt(e){return eo.getStore(e,ci.store)}function Ht(e){return Pt.getStore(e,hi.store).get(hi.key).next((function(e){return k(null!==e,"Missing metadata row."),e}))}function Yt(e){return Ht(e).next((function(e){return e.highestListenSequenceNumber}))}function Xt(e){return eo.getStore(e,li.store)}function Jt(e,t){this.version=e,this.transformResults=t}var $t,Zt,en=(rn.fromSet=function(e){return new rn(e)},rn.fromArray=function(e){var t=new tt(Ce.comparator);return e.forEach((function(e){return t=t.add(e)})),new rn(t)},rn.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},rn.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},rn),tn=(nn.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},nn);function nn(e,t){this.field=e,this.transform=t}function rn(e){this.fields=e}(Zt=$t=$t||{})[Zt.Set=0]="Set",Zt[Zt.Patch=1]="Patch",Zt[Zt.Transform=2]="Transform",Zt[Zt.Delete=3]="Delete",Zt[Zt.Verify=4]="Verify";var on,an,sn,un,cn,ln,hn,fn,dn,pn=(Nn.exists=function(e){return new Nn(void 0,e)},Nn.updateTime=function(e){return new Nn(e)},Object.defineProperty(Nn.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Nn.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof dr&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof dr:(k(this.isNone,"Precondition should be empty"),!0)},Nn.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},Nn.NONE=new Nn,Nn),mn=(Cn.prototype.verifyKeyMatches=function(e){null!=e&&k(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},Cn.getPostMutationVersion=function(e){return e instanceof dr?e.version:We.MIN},Cn),yn=(h(kn,hn=mn),kn.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),k(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new dr(this.key,n,{hasCommittedMutations:!0},this.value)},kn.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=mn.getPostMutationVersion(e);return new dr(this.key,r,{hasLocalMutations:!0},this.value)},kn.prototype.extractBaseValue=function(e){return null},kn.prototype.isEqual=function(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},kn),gn=(h(In,ln=mn),In.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),k(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new mr(this.key,t.version);var n=this.patchDocument(e);return new dr(this.key,t.version,{hasCommittedMutations:!0},n)},In.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=mn.getPostMutationVersion(e),i=this.patchDocument(e);return new dr(this.key,r,{hasLocalMutations:!0},i)},In.prototype.extractBaseValue=function(e){return null},In.prototype.isEqual=function(e){return e instanceof In&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},In.prototype.patchDocument=function(e){var t;return t=e instanceof dr?e.data():lr.EMPTY,this.patchObject(t)},In.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},In),vn=(h(Sn,cn=mn),Sn.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),k(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new mr(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new dr(this.key,i,{hasCommittedMutations:!0},o)},Sn.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new dr(this.key,r.version,{hasLocalMutations:!0},o)},Sn.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof dr?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?lr.EMPTY.set(i.field,a):t.set(i.field,a))}return t},Sn.prototype.isEqual=function(e){return e instanceof Sn&&this.key.isEqual(e.key)&&oe(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},Sn.prototype.requireDocument=function(e){return k(e instanceof dr,"Unknown MaybeDocument type "+e),k(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},Sn.prototype.serverTransformResults=function(e,t){var n=[];k(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof dr&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},Sn.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof dr&&(u=t.field(a.field)),null===u&&n instanceof dr&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},Sn.prototype.transformObject=function(e,t){k(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},Sn),bn=(h(En,un=mn),En.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),k(null==t.transformResults,"Transform results received by DeleteMutation."),new pr(this.key,t.version,{hasCommittedMutations:!0})},En.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&k(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new pr(this.key,We.forDeletedDoc())):e},En.prototype.extractBaseValue=function(e){return null},En.prototype.isEqual=function(e){return e instanceof En&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},En),wn=(h(Tn,sn=mn),Tn.prototype.applyToRemoteDocument=function(e,t){I("VerifyMutation should only be used in Transactions.")},Tn.prototype.applyToLocalView=function(e,t,n){I("VerifyMutation should only be used in Transactions.")},Tn.prototype.extractBaseValue=function(e){I("VerifyMutation should only be used in Transactions.")},Tn.prototype.isEqual=function(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Tn);function Tn(e,t){var n=sn.call(this)||this;return n.key=e,n.precondition=t,n.type=$t.Verify,n}function En(e,t){var n=un.call(this)||this;return n.key=e,n.precondition=t,n.type=$t.Delete,n}function Sn(e,t){var n=cn.call(this)||this;return n.key=e,n.fieldTransforms=t,n.type=$t.Transform,n.precondition=pn.exists(!0),n}function In(e,t,n,r){var i=ln.call(this)||this;return i.key=e,i.data=t,i.fieldMask=n,i.precondition=r,i.type=$t.Patch,i}function kn(e,t,n){var r=hn.call(this)||this;return r.key=e,r.value=t,r.precondition=n,r.type=$t.Set,r}function Cn(){}function Nn(e,t){this.updateTime=e,this.exists=t,k(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}(dn=on=on||{})[dn.NullValue=0]="NullValue",dn[dn.BooleanValue=1]="BooleanValue",dn[dn.NumberValue=2]="NumberValue",dn[dn.TimestampValue=3]="TimestampValue",dn[dn.StringValue=4]="StringValue",dn[dn.BlobValue=5]="BlobValue",dn[dn.RefValue=6]="RefValue",dn[dn.GeoPointValue=7]="GeoPointValue",dn[dn.ArrayValue=8]="ArrayValue",dn[dn.ObjectValue=9]="ObjectValue",(fn=an=an||{})[fn.Default=0]="Default",fn[fn.Estimate=1]="Estimate",fn[fn.Previous=2]="Previous";var An,Dn,_n,xn=(Bn.fromSnapshotOptions=function(e,t){switch(e.serverTimestamps){case"estimate":return new Bn(an.Estimate,t);case"previous":return new Bn(an.Previous,t);case"none":case void 0:return new Bn(an.Default,t);default:return I("fromSnapshotOptions() called with invalid options.")}},Bn),On=(Vn.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},Vn.prototype.defaultCompareTo=function(e){return k(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),ie(this.typeOrder,e.typeOrder)},Vn),Pn=(h(Un,_n=On),Un.prototype.value=function(e){return null},Un.prototype.isEqual=function(e){return e instanceof Un},Un.prototype.compareTo=function(e){return e instanceof Un?0:this.defaultCompareTo(e)},Un.prototype.approximateByteSize=function(){return 4},Un.INSTANCE=new Un,Un),Rn=(h(Fn,Dn=On),Fn.prototype.value=function(e){return this.internalValue},Fn.prototype.isEqual=function(e){return e instanceof Fn&&this.internalValue===e.internalValue},Fn.prototype.compareTo=function(e){return e instanceof Fn?ie(this,e):this.defaultCompareTo(e)},Fn.prototype.approximateByteSize=function(){return 4},Fn.of=function(e){return e?Fn.TRUE:Fn.FALSE},Fn.TRUE=new Fn(!0),Fn.FALSE=new Fn(!1),Fn),Mn=(h(Ln,An=On),Ln.prototype.value=function(e){return this.internalValue},Ln.prototype.compareTo=function(e){return e instanceof Ln?(t=this.internalValue)<(n=e.internalValue)?-1:n<t?1:t===n?0:isNaN(t)?isNaN(n)?0:-1:1:this.defaultCompareTo(e);var t,n},Ln.prototype.approximateByteSize=function(){return 8},Ln);function Ln(e){var t=An.call(this)||this;return t.internalValue=e,t.typeOrder=on.NumberValue,t}function Fn(e){var t=Dn.call(this)||this;return t.internalValue=e,t.typeOrder=on.BooleanValue,t}function Un(){var e=_n.call(this)||this;return e.typeOrder=on.NullValue,e.internalValue=null,e}function Vn(){}function Bn(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}function qn(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var jn,zn,Wn,Kn,Gn,Qn,Hn,Yn,Xn,Jn,$n,Zn,er,tr,nr=(h(Lr,tr=Mn),Lr.prototype.isEqual=function(e){return e instanceof Lr&&qn(this.internalValue,e.internalValue)},Lr),rr=(h(Mr,er=Mn),Mr.prototype.isEqual=function(e){return e instanceof Mr&&qn(this.internalValue,e.internalValue)},Mr.NAN=new Mr(NaN),Mr.POSITIVE_INFINITY=new Mr(1/0),Mr.NEGATIVE_INFINITY=new Mr(-1/0),Mr),ir=(h(Rr,Zn=On),Rr.prototype.value=function(e){return this.internalValue},Rr.prototype.isEqual=function(e){return e instanceof Rr&&this.internalValue===e.internalValue},Rr.prototype.compareTo=function(e){return e instanceof Rr?ie(this.internalValue,e.internalValue):this.defaultCompareTo(e)},Rr.prototype.approximateByteSize=function(){return 2*this.internalValue.length},Rr),or=(h(Pr,$n=On),Pr.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},Pr.prototype.isEqual=function(e){return e instanceof Pr&&this.internalValue.isEqual(e.internalValue)},Pr.prototype.compareTo=function(e){return e instanceof Pr?this.internalValue._compareTo(e.internalValue):e instanceof ar?-1:this.defaultCompareTo(e)},Pr.prototype.approximateByteSize=function(){return 16},Pr),ar=(h(Or,Jn=On),Or.prototype.value=function(e){return e&&e.serverTimestampBehavior===an.Estimate?new or(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===an.Previous&&this.previousValue?this.previousValue.value(e):null},Or.prototype.isEqual=function(e){return e instanceof Or&&this.localWriteTime.isEqual(e.localWriteTime)},Or.prototype.compareTo=function(e){return e instanceof Or?this.localWriteTime._compareTo(e.localWriteTime):e instanceof or?1:this.defaultCompareTo(e)},Or.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},Or.prototype.approximateByteSize=function(){return 16+(this.previousValue?this.previousValue.approximateByteSize():0)},Or),sr=(h(xr,Xn=On),xr.prototype.value=function(e){return this.internalValue},xr.prototype.isEqual=function(e){return e instanceof xr&&this.internalValue.isEqual(e.internalValue)},xr.prototype.compareTo=function(e){return e instanceof xr?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},xr.prototype.approximateByteSize=function(){return this.internalValue._approximateByteSize()},xr),ur=(h(_r,Yn=On),_r.prototype.value=function(e){return this.key},_r.prototype.isEqual=function(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},_r.prototype.compareTo=function(e){if(e instanceof _r){var t=this.databaseId.compareTo(e.databaseId);return 0!==t?t:Ne.comparator(this.key,e.key)}return this.defaultCompareTo(e)},_r.prototype.approximateByteSize=function(){return this.databaseId.projectId.length+this.databaseId.database.length+this.key.toString().length},_r),cr=(h(Dr,Hn=On),Dr.prototype.value=function(e){return this.internalValue},Dr.prototype.isEqual=function(e){return e instanceof Dr&&this.internalValue.isEqual(e.internalValue)},Dr.prototype.compareTo=function(e){return e instanceof Dr?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Dr.prototype.approximateByteSize=function(){return 16},Dr),lr=(h(Ar,Qn=On),Ar.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},Ar.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},Ar.prototype.isEqual=function(e){if(e instanceof Ar){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!t.hasNext()&&!n.hasNext()}return!1},Ar.prototype.compareTo=function(e){if(e instanceof Ar){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext(),o=ie(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return ie(t.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},Ar.prototype.set=function(e,t){if(k(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),t);var n=this.child(e.firstSegment());n instanceof Ar||(n=Ar.EMPTY);var r=n.set(e.popFirst(),t);return this.setChild(e.firstSegment(),r)},Ar.prototype.delete=function(e){if(k(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new Ar(this.internalValue.remove(e.firstSegment()));var t=this.child(e.firstSegment());if(t instanceof Ar){var n=t.delete(e.popFirst());return new Ar(this.internalValue.insert(e.firstSegment(),n))}return this},Ar.prototype.contains=function(e){return null!==this.field(e)},Ar.prototype.field=function(e){k(!e.isEmpty(),"Can't get field of empty path");var t=this;return e.forEach((function(e){t=t instanceof Ar?t.internalValue.get(e):null})),t},Ar.prototype.fieldMask=function(){var e=new tt(Ce.comparator);return this.internalValue.forEach((function(t,n){var r=new Ce([t]);if(n instanceof Ar){var i=n.fieldMask().fields;i.isEmpty()?e=e.add(r):i.forEach((function(t){e=e.add(r.child(t))}))}else e=e.add(r)})),en.fromSet(e)},Ar.prototype.approximateByteSize=function(){var e=0;return this.internalValue.inorderTraversal((function(t,n){e+=t.length+n.approximateByteSize()})),e},Ar.prototype.toString=function(){return this.internalValue.toString()},Ar.prototype.child=function(e){return this.internalValue.get(e)||void 0},Ar.prototype.setChild=function(e,t){return new Ar(this.internalValue.insert(e,t))},Ar.EMPTY=new Ar(new Ke(ie)),Ar),hr=(h(Nr,Gn=On),Nr.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},Nr.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},Nr.prototype.forEach=function(e){this.internalValue.forEach(e)},Nr.prototype.isEqual=function(e){if(e instanceof Nr){if(this.internalValue.length!==e.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(e.internalValue[t]))return!1;return!0}return!1},Nr.prototype.compareTo=function(e){if(e instanceof Nr){for(var t=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<t;n++){var r=this.internalValue[n].compareTo(e.internalValue[n]);if(r)return r}return ie(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},Nr.prototype.approximateByteSize=function(){return this.internalValue.reduce((function(e,t){return e+t.approximateByteSize()}),0)},Nr.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},Nr),fr=(Cr.compareByKey=function(e,t){return Ne.comparator(e.key,t.key)},Cr),dr=(h(kr,Kn=fr),kr.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},kr.prototype.data=function(){var e=this;if(!this.objectValue){var t=lr.EMPTY;L(this.proto.fields||{},(function(n,r){t=t.set(new Ce([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},kr.prototype.value=function(){return this.data().value()},kr.prototype.isEqual=function(e){return e instanceof kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},kr.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(kr.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),kr.prototype.getProtoField=function(e){k(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},kr.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):I("Trying to compare documents on fields that don't exist")},kr),pr=(h(Ir,Wn=fr),Ir.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Ir.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ir.prototype.isEqual=function(e){return e instanceof Ir&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Ir),mr=(h(Sr,zn=fr),Sr.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Sr.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Sr.prototype.isEqual=function(e){return e instanceof Sr&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Sr),yr=(Er.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},Er.prototype.has=function(e){return void 0!==this.get(e)},Er.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},Er.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},Er.prototype.forEach=function(e){L(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},Er.prototype.isEmpty=function(){return F(this.inner)},Er),gr=(Object.defineProperty(Tr.prototype,"readTime",{get:function(){return k(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){k(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),Tr.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},Tr.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},Tr.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?wt.resolve(n):this.getFromCache(e,t)},Tr.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},Tr.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},Tr.prototype.assertNotApplied=function(){k(!this.changesApplied,"Changes have already been applied.")},Tr),vr=(br.prototype.addEntry=function(e,t,n){return Ur(e).put(Vr(t),n)},br.prototype.removeEntry=function(e,t){var n=Ur(e),r=Vr(t);return n.delete(r)},br.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},br.prototype.getEntry=function(e,t){var n=this;return Ur(e).get(Vr(t)).next((function(e){return n.maybeDecodeDocument(e)}))},br.prototype.getSizedEntry=function(e,t){var n=this;return Ur(e).get(Vr(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:Br(e)}:null}))},br.prototype.getEntries=function(e,t){var n=this,r=st();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},br.prototype.getSizedEntries=function(e,t){var n=this,r=st(),i=new Ke(Ne.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);i=o?(r=r.insert(e,o),i.insert(e,Br(t))):(r=r.insert(e,null),i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},br.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return wt.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Ur(e).iterate({range:r},(function(e,t,r){for(var a=Ne.fromSegments(e);o&&Ne.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},br.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;k(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=ct(),o=t.path.length+1,a={};if(n.isEqual(We.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=oi.collectionReadTimeIndex}return Ur(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof dr&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},br.prototype.getNewDocumentChanges=function(e,t){var n=this,r=at(),i=this.serializer.toDbTimestampKey(t),o=Ur(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:oi.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},br.prototype.getLastReadTime=function(e){var t=this,n=Ur(e),r=We.MIN;return n.iterate({index:oi.readTimeIndex,reverse:!0},(function(e,n,i){n.readTime&&(r=t.serializer.fromDbTimestampKey(n.readTime)),i.done()})).next((function(){return r}))},br.prototype.newChangeBuffer=function(e){return new br.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},br.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},br.prototype.getMetadata=function(e){return Fr(e).get(ai.key).next((function(e){return k(!!e,"Missing document cache metadata"),e}))},br.prototype.setMetadata=function(e,t){return Fr(e).put(ai.key,t)},br.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof pr&&t.version.isEqual(We.forDeletedDoc())?null:t}return null},br.RemoteDocumentChangeBuffer=(h(wr,jn=gr),wr.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new tt((function(e,t){return ie(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(k(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){k(!t.readTime.isEqual(We.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=Br(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new pr(o,We.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),wt.waitFor(n)},wr.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},wr.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},wr),br);function br(e,t){this.serializer=e,this.indexManager=t}function wr(e,t){var n=jn.call(this)||this;return n.documentCache=e,n.trackRemovals=t,n.documentSizes=new yr((function(e){return e.toString()})),n}function Tr(){this.changes=new yr((function(e){return e.toString()})),this.changesApplied=!1}function Er(e){this.mapKeyFn=e,this.inner={}}function Sr(){return null!==zn&&zn.apply(this,arguments)||this}function Ir(e,t,n){var r=Wn.call(this,e,t)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function kr(e,t,n,r,i,o){var a=Kn.call(this,e,t)||this;return a.objectValue=r,a.proto=i,a.converter=o,k(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!n.hasLocalMutations,a.hasCommittedMutations=!!n.hasCommittedMutations,a}function Cr(e,t){this.key=e,this.version=t}function Nr(e){var t=Gn.call(this)||this;return t.internalValue=e,t.typeOrder=on.ArrayValue,t}function Ar(e){var t=Qn.call(this)||this;return t.internalValue=e,t.typeOrder=on.ObjectValue,t}function Dr(e){var t=Hn.call(this)||this;return t.internalValue=e,t.typeOrder=on.GeoPointValue,t}function _r(e,t){var n=Yn.call(this)||this;return n.databaseId=e,n.key=t,n.typeOrder=on.RefValue,n}function xr(e){var t=Xn.call(this)||this;return t.internalValue=e,t.typeOrder=on.BlobValue,t}function Or(e,t){var n=Jn.call(this)||this;return n.localWriteTime=e,n.previousValue=t,n.typeOrder=on.TimestampValue,n}function Pr(e){var t=$n.call(this)||this;return t.internalValue=e,t.typeOrder=on.TimestampValue,t}function Rr(e){var t=Zn.call(this)||this;return t.internalValue=e,t.typeOrder=on.StringValue,t}function Mr(){return null!==er&&er.apply(this,arguments)||this}function Lr(){return null!==tr&&tr.apply(this,arguments)||this}function Fr(e){return eo.getStore(e,ai.store)}function Ur(e){return eo.getStore(e,oi.store)}function Vr(e){return e.path.toArray()}function Br(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw I("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var qr=(Qr.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),wt.resolve()},Qr.prototype.getCollectionParents=function(e,t){return wt.resolve(this.collectionParentIndex.getEntries(t))},Qr),jr=(Gr.prototype.add=function(e){k(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tt(Ie.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},Gr.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},Gr.prototype.getEntries=function(e){return(this.index[e]||new tt(Ie.comparator)).toArray()},Gr),zr=9,Wr=(Kr.prototype.createOrUpgrade=function(e,t,n,r){var i=this;k(n<r&&0<=n&&r<=zr,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o,a=new Mt(t);n<1&&1<=r&&(e.createObjectStore(Yr.store),(o=e).createObjectStore(Jr.store,{keyPath:Jr.keyPath}),o.createObjectStore($r.store,{keyPath:$r.keyPath,autoIncrement:!0}).createIndex($r.userMutationsIndex,$r.userMutationsKeyPath,{unique:!0}),o.createObjectStore(ti.store),gi(e),e.createObjectStore(oi.store));var s,u=wt.resolve();return n<3&&3<=r&&(0!==n&&((s=e).deleteObjectStore(li.store),s.deleteObjectStore(ci.store),s.deleteObjectStore(hi.store),gi(e)),u=u.next((function(){return e=a.store(hi.store),t=new hi(0,0,We.MIN.toTimestamp(),0),e.put(hi.key,t);var e,t}))),n<4&&4<=r&&(0!==n&&(u=u.next((function(){return t=e,(n=a).store($r.store).loadAll().next((function(e){t.deleteObjectStore($r.store),t.createObjectStore($r.store,{keyPath:$r.keyPath,autoIncrement:!0}).createIndex($r.userMutationsIndex,$r.userMutationsKeyPath,{unique:!0});var r=n.store($r.store),i=e.map((function(e){return r.put(e)}));return wt.waitFor(i)}));var t,n}))),u=u.next((function(){e.createObjectStore(vi.store,{keyPath:vi.keyPath})}))),n<5&&5<=r&&(u=u.next((function(){return i.removeAcknowledgedMutations(a)}))),n<6&&6<=r&&(u=u.next((function(){return e.createObjectStore(ai.store),i.addDocumentGlobal(a)}))),n<7&&7<=r&&(u=u.next((function(){return i.ensureSequenceNumbers(a)}))),n<8&&8<=r&&(u=u.next((function(){return i.createCollectionParentIndex(e,a)}))),n<9&&9<=r&&(u=u.next((function(){var n,r;(r=e).objectStoreNames.contains("remoteDocumentChanges")&&r.deleteObjectStore("remoteDocumentChanges"),(n=t.objectStore(oi.store)).createIndex(oi.readTimeIndex,oi.readTimeIndexPath,{unique:!1}),n.createIndex(oi.collectionReadTimeIndex,oi.collectionReadTimeIndexPath,{unique:!1})}))),u},Kr.prototype.addDocumentGlobal=function(e){var t=0;return e.store(oi.store).iterate((function(e,n){t+=Br(n)})).next((function(){var n=new ai(t);return e.store(ai.store).put(ai.key,n)}))},Kr.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(Jr.store),r=e.store($r.store);return n.loadAll().next((function(n){return wt.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll($r.userMutationsIndex,i).next((function(r){return wt.forEach(r,(function(r){k(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return Nt(e,n.userId,i).next((function(){}))}))}))}))}))},Kr.prototype.ensureSequenceNumbers=function(e){var t=e.store(li.store),n=e.store(oi.store);return Yt(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new Ie(n),a=[0,Ve(o)];r.push(t.get(a).next((function(n){return n?wt.resolve():(r=o,t.put(new li(0,Ve(r),e)));var r})))})).next((function(){return wt.waitFor(r)}))}))},Kr.prototype.createCollectionParentIndex=function(e,t){function n(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:Ve(n)})}}e.createObjectStore(fi.store,{keyPath:fi.keyPath});var r=t.store(fi.store),i=new jr;return t.store(oi.store).iterate({keysOnly:!0},(function(e,t){return n(new Ie(e).popLast())})).next((function(){return t.store(ti.store).iterate({keysOnly:!0},(function(e,t){e[0];var r=e[1];return n((e[2],je(r)).popLast())}))}))},Kr);function Kr(e){this.serializer=e}function Gr(){this.index={}}function Qr(){this.collectionParentIndex=new jr}function Hr(e,t){this.seconds=e,this.nanoseconds=t}var Yr=(Xr.store="owner",Xr.key="owner",Xr);function Xr(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}var Jr=(ei.store="mutationQueues",ei.keyPath="userId",ei),$r=(Zr.store="mutations",Zr.keyPath="batchId",Zr.userMutationsIndex="userMutationsIndex",Zr.userMutationsKeyPath=["userId","batchId"],Zr);function Zr(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}function ei(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}var ti=(ni.prefixForUser=function(e){return[e]},ni.prefixForPath=function(e,t){return[e,Ve(t)]},ni.key=function(e,t,n){return[e,Ve(t),n]},ni.store="documentMutations",ni.PLACEHOLDER=new ni,ni);function ni(){}function ri(e,t){this.path=e,this.readTime=t}function ii(e,t){this.path=e,this.version=t}var oi=(ui.store="remoteDocuments",ui.readTimeIndex="readTimeIndex",ui.readTimeIndexPath="readTime",ui.collectionReadTimeIndex="collectionReadTimeIndex",ui.collectionReadTimeIndexPath=["parentPath","readTime"],ui),ai=(si.store="remoteDocumentGlobal",si.key="remoteDocumentGlobalKey",si);function si(e){this.byteSize=e}function ui(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var ci=(yi.store="targets",yi.keyPath="targetId",yi.queryTargetsIndexName="queryTargetsIndex",yi.queryTargetsKeyPath=["canonicalId","targetId"],yi),li=(mi.store="targetDocuments",mi.keyPath=["targetId","path"],mi.documentTargetsIndex="documentTargetsIndex",mi.documentTargetsKeyPath=["path","targetId"],mi),hi=(pi.key="targetGlobalKey",pi.store="targetGlobal",pi),fi=(di.store="collectionParents",di.keyPath=["collectionId","parent"],di);function di(e,t){this.collectionId=e,this.parent=t}function pi(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function mi(e,t,n){this.targetId=e,this.path=t,k(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}function yi(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}function gi(e){e.createObjectStore(li.store,{keyPath:li.keyPath}).createIndex(li.documentTargetsIndex,li.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(ci.store,{keyPath:ci.keyPath}).createIndex(ci.queryTargetsIndexName,ci.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(hi.store)}var vi=(bi.store="clientMetadata",bi.keyPath="clientId",bi);function bi(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}var wi,Ti,Ei=m([Jr.store,$r.store,ti.store,oi.store,ci.store,Yr.store,hi.store,li.store],[vi.store]),Si=m(Ei,[ai.store]),Ii=m(Si,[fi.store]),ki=(Ci.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(k(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.has(t))return wt.resolve();var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:Ve(i)};return Ni(e).put(o)},Ci.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ae(t),""],!1,!0);return Ni(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(je(o.parent))}return n}))},Ci);function Ci(){this.collectionParentsCache=new jr}function Ni(e){return eo.getStore(e,fi.store)}(Ti=wi=wi||{})[Ti.Listen=0]="Listen",Ti[Ti.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Ti[Ti.LimboResolution=2]="LimboResolution";var Ai=(xi.prototype.withSequenceNumber=function(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},xi.prototype.withResumeToken=function(e,t){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},xi.prototype.withLastLimboFreeSnapshotVersion=function(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},xi.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(e.resumeToken)&&this.target.isEqual(e.target)},xi),Di=(_i.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Ne.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new pr(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=Ne.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new mr(t,n)):I("Unexpected DbRemoteDocument")},_i.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof dr){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new oi(null,null,i,o,n,r)}if(e instanceof pr){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);return o=e.hasCommittedMutations,new oi(null,new ri(a,s),null,o,n,r)}if(e instanceof mr){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new oi(new ii(a,u),null,null,!0,n,r)}return I("Unexpected MaybeDocument")},_i.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},_i.prototype.fromDbTimestampKey=function(e){var t=new ze(e[0],e[1]);return We.fromTimestamp(t)},_i.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new Hr(t.seconds,t.nanoseconds)},_i.prototype.fromDbTimestamp=function(e){var t=new ze(e.seconds,e.nanoseconds);return We.fromTimestamp(t)},_i.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new $r(e,t.batchId,t.localWriteTime.toMillis(),r,i)},_i.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=ze.fromMillis(e.localWriteTimeMs);return new vt(e.batchId,i,n,r)},_i.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(Ve(e.path))})),t},_i.prototype.fromDbResourcePaths=function(e){for(var t=dt(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new Ne(je(i)))}return t},_i.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):We.MIN;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new Ai(t,e.targetId,wi.Listen,e.lastListenSequenceNumber,n,r,se.fromBase64String(e.resumeToken))},_i.prototype.toDbTarget=function(e){k(wi.Listen===e.purpose,"Only queries with purpose "+wi.Listen+" may be stored, got "+e.purpose);var t,n=this.toDbTimestamp(e.snapshotVersion),r=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target);var i=e.resumeToken.toBase64();return new ci(e.targetId,e.target.canonicalId(),n,i,e.sequenceNumber,r,t)},_i);function _i(e){this.remoteSerializer=e}function xi(e,t,n,r,i,o,a){void 0===i&&(i=We.MIN),void 0===o&&(o=We.MIN),void 0===a&&(a=se.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}var Oi=(ji.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},ji.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},ji.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=st();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},ji.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},ji.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=at();return i.forEach((function(e,t){t=t||new pr(e,We.forDeletedDoc()),o=o.insert(e,t)})),o}))},ji.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},ji.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new Ne(t)).next((function(e){var t=ct();return e instanceof dr&&(t=t.insert(e.key,e)),t}))},ji.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;k(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=ct();return this.indexManager.getCollectionParents(e,i).next((function(a){return wt.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},ji.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof dr?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},ji.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=dt(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof gn&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof dr&&(c=c.insert(e,t))})),c}))},ji),Pi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ri=(qi.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},qi.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},qi),Mi=(Bi.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},Bi.prototype.addReference=function(e,t){var n=new Li(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},Bi.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},Bi.prototype.removeReference=function(e,t){this.removeRef(new Li(e,t))},Bi.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},Bi.prototype.removeReferencesForId=function(e){var t=this,n=Ne.EMPTY,r=new Li(n,e),i=new Li(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},Bi.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},Bi.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},Bi.prototype.referencesForId=function(e){var t=Ne.EMPTY,n=new Li(t,e),r=new Li(t,e+1),i=dt();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},Bi.prototype.containsKey=function(e){var t=new Li(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},Bi),Li=(Vi.compareByKey=function(e,t){return Ne.comparator(e.key,t.key)||ie(e.targetOrBatchId,t.targetOrBatchId)},Vi.compareByTargetId=function(e,t){return ie(e.targetOrBatchId,t.targetOrBatchId)||Ne.comparator(e.key,t.key)},Vi),Fi=(Ui.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},Ui.prototype.handleUserChange=function(e){return d(this,void 0,void 0,(function(){var t,n,r,i=this;return p(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new Oi(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=dt(),s=0,u=o;s<u.length;s++){var c=u[s];t.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){c=p[d],i.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++)f=y[m],a=a.add(f.key)}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},Ui.prototype.localWrite=function(e){var t,n=this,r=ze.now(),i=e.reduce((function(e,t){return e.add(t.key)}),dt());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new gn(c.key,l,l.fieldMask(),pn.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},Ui.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):wt.resolve(null)}))}))},Ui.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},Ui.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return k(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},Ui.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},Ui.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},Ui.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},Ui.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},Ui.prototype.applyRemoteEvent=function(e){var t=this,n=e.snapshotVersion,r=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(i){var o=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=t.targetDataByTarget;var a=[];M(e.targetChanges,(function(e,o){var s=r.get(e);if(s){a.push(t.targetCache.removeMatchingKeys(i,o.removedDocuments,e).next((function(){return t.targetCache.addMatchingKeys(i,o.addedDocuments,e)})));var u=o.resumeToken;if(0<u.approximateByteSize()){var c=s.withResumeToken(u,n).withSequenceNumber(i.currentSequenceNumber);r=r.insert(e,c),Ui.shouldPersistTargetData(s,c,o)&&a.push(t.targetCache.updateTargetData(i,c))}}}));var s=at(),u=dt();if(e.documentUpdates.forEach((function(e,t){u=u.add(e)})),a.push(o.getEntries(i,u).next((function(r){e.documentUpdates.forEach((function(u,c){var l=r.get(u);c instanceof pr&&c.version.isEqual(We.MIN)?(o.removeEntry(u,n),s=s.insert(u,c)):null==l||0<c.version.compareTo(l.version)||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(k(!We.MIN.isEqual(n),"Cannot add a document when the remote version is zero"),o.addEntry(c,n),s=s.insert(u,c)):T("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}))}))),!n.isEqual(We.MIN)){var c=t.targetCache.getLastRemoteSnapshotVersion(i).next((function(e){return k(0<=n.compareTo(e),"Watch stream reverted to previous snapshot?? "+n+" < "+e),t.targetCache.setTargetsMetadata(i,i.currentSequenceNumber,n)}));a.push(c)}return wt.waitFor(a).next((function(){return o.apply(i)})).next((function(){return t.localDocuments.getLocalViewOfDocuments(i,s)}))})).then((function(e){return t.targetDataByTarget=r,e}))},Ui.shouldPersistTargetData=function(e,t,n){return k(0<t.resumeToken.approximateByteSize(),"Attempted to persist target data with no resume token"),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},Ui.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);k(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return wt.forEach(e,(function(e){return wt.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},Ui.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},Ui.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},Ui.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?(r=i,wt.resolve(r)):t.targetCache.allocateTargetId(n).next((function(i){return r=new Ai(e,i,wi.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},Ui.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?wt.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},Ui.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);k(null!==r,"Tried to release nonexistent target: "+e);var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?wt.resolve():wt.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},Ui.prototype.executeQuery=function(e,t){var n=this,r=We.MIN,i=dt();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:We.MIN,t?i:dt())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},Ui.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},Ui.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},Ui.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},Ui.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},Ui.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=wt.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);k(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):k(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},Ui.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},Ui.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},Ui.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},Ui.prototype.synchronizeLastDocumentChangeReadTime=function(){return d(this,void 0,void 0,(function(){var e,t=this;return p(this,(function(n){switch(n.label){case 0:return[4,(e=this).persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(e){return t.remoteDocuments.getLastReadTime(e)}))];case 1:return e.lastDocumentChangeReadTime=n.sent(),[2]}}))}))},Ui.RESUME_TOKEN_MAX_AGE_MICROS=3e8,Ui);function Ui(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new Mi,this.targetDataByTarget=new Ke(ie),this.targetIdByTarget=new yr((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=We.MIN,k(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new Oi(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}function Vi(e,t){this.key=e,this.targetOrBatchId=t}function Bi(){this.refsByKey=new tt(Li.compareByKey),this.refsByTarget=new tt(Li.compareByTargetId)}function qi(){this.onCommittedListeners=[]}function ji(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}function zi(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){if(e.code!==A.FAILED_PRECONDITION||e.message!==Pi)throw e;return T("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Wi(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=ie(n,i);return 0===a?ie(r,o):a}var Ki,Gi=(ao.prototype.nextIndex=function(){return++this.previousIndex},ao.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Wi(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(ao.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),ao),Qi={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hi=(oo.withCacheSize=function(e){return new oo(e,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},oo.COLLECTION_DISABLED=-1,oo.MINIMUM_CACHE_SIZE_BYTES=1048576,oo.DEFAULT=new oo(oo.DEFAULT_CACHE_SIZE_BYTES=41943040,oo.DEFAULT_COLLECTION_PERCENTILE=10,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),oo.DISABLED=new oo(oo.COLLECTION_DISABLED,0,0),oo),Yi=(io.prototype.start=function(){k(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Hi.COLLECTION_DISABLED&&this.scheduleGC()},io.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(io.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),io.prototype.scheduleGC=function(){var e=this;k(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;T("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(me.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(zi)}))},io),Xi=(ro.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},ro.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return wt.resolve(Ee.INVALID);var r=new Gi(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},ro.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},ro.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},ro.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Hi.COLLECTION_DISABLED?(T("LruGarbageCollector","Garbage collection skipped; disabled"),wt.resolve(Qi)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Qi):n.runGarbageCollection(e,t)}))},ro.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},ro.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return r=t>c.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),c.params.maximumSequenceNumbersToCollect):t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),b()<=y.DEBUG&&T("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),wt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},ro),Ji="IndexedDbPersistence",$i="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Zi=(h(no,Ki=Ri),no),eo=(to.getStore=function(e,t){if(e instanceof Zi)return Pt.getStore(e.simpleDbTransaction,t);throw I("IndexedDbPersistence must use instances of IndexedDbTransaction")},to.createIndexedDbPersistence=function(e){return d(this,void 0,void 0,(function(){var t;return p(this,(function(n){switch(n.label){case 0:if(!to.isAvailable())throw new D(A.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(t=new to(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return n.sent(),[2,t]}}))}))},to.prototype.start=function(){var e=this;return k(!this.started,"IndexedDbPersistence double-started!"),k(null!==this.window,"Expected 'window' to be defined"),Pt.openOrCreate(this.dbName,zr,new Wr(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[hi.store],(function(e){return Yt(e)}))})).then((function(t){e.listenSequence=new Ee(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},to.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return d(t,void 0,void 0,(function(){return p(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},to.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return d(t,void 0,void 0,(function(){return p(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},to.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return d(t,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},to.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",Ii,(function(t){return uo(t).put(new vi(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return T(Ji,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},to.prototype.verifyPrimaryLease=function(e){var t=this;return so(e).get(Yr.key).next((function(e){return wt.resolve(t.isLocalClient(e))}))},to.prototype.removeClientMetadata=function(e){return uo(e).delete(this.clientId)},to.prototype.maybeGarbageCollectMultiClientState=function(){return d(this,void 0,void 0,(function(){var e=this;return p(this,(function(t){switch(t.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(t){var n=to.getStore(t,vi.store);return n.loadAll().next((function(t){var r=e.filterActiveClients(t,18e5),i=t.filter((function(e){return-1===r.indexOf(e)}));return wt.forEach(i,(function(e){return n.delete(e.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:t.sent().forEach((function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))})),t.label=2;case 2:return[2]}}))}))},to.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(me.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},to.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},to.prototype.canActAsPrimary=function(e){var t=this;return so(e).get(Yr.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new D(A.FAILED_PRECONDITION,$i);return!1}}return!(!t.networkEnabled||!t.inForeground)||uo(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&T(Ji,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},to.prototype.shutdown=function(){return d(this,void 0,void 0,(function(){var e=this;return p(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[Yr.store,vi.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},to.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},to.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[vi.store],(function(t){return uo(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},to.clearPersistence=function(e){return d(this,void 0,void 0,(function(){var t;return p(this,(function(n){switch(n.label){case 0:return to.isAvailable()?(t=e+to.MAIN_DATABASE,[4,Pt.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(to.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),to.prototype.getMutationQueue=function(e){return k(this.started,"Cannot initialize MutationQueue before persistence is started."),Tt.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},to.prototype.getTargetCache=function(){return k(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},to.prototype.getRemoteDocumentCache=function(){return k(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},to.prototype.getIndexManager=function(){return k(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},to.prototype.runTransaction=function(e,t,n){var r=this;T(Ji,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,Ii,(function(o){return i=new Zi(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw E("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new D(A.FAILED_PRECONDITION,Pi);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},to.prototype.verifyAllowTabSynchronization=function(e){var t=this;return so(e).get(Yr.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new D(A.FAILED_PRECONDITION,$i)}))},to.prototype.acquireOrExtendPrimaryLease=function(e){var t=new Yr(this.clientId,this.allowTabSynchronization,Date.now());return so(e).put(Yr.key,t)},to.isAvailable=function(){return Pt.isAvailable()},to.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},to.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=so(e);return n.get(Yr.key).next((function(e){return t.isLocalClient(e)?(T(Ji,"Releasing primary lease."),n.delete(Yr.key)):wt.resolve()}))},to.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(E("Detected an update time that is in the future: "+e+" > "+n),1))},to.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},to.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(k(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},to.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},to.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(k("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},to.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return T(Ji,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return E(Ji,"Failed to get zombied client id.",e),!1}},to.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){E("Failed to set zombie client id.",e)}},to.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},to.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},to.MAIN_DATABASE="main",to);function to(e,t,n,r,i,o,a,s){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new co(this,i),this.dbName=t+to.MAIN_DATABASE,this.serializer=new Di(a),this.document=r.document,this.targetCache=new Kt(this.referenceDelegate,this.serializer),this.indexManager=new ki,this.remoteDocumentCache=new vr(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new D(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function no(e,t){var n=Ki.call(this)||this;return n.simpleDbTransaction=e,n.currentSequenceNumber=t,n}function ro(e,t){this.delegate=e,this.params=t}function io(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}function oo(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}function ao(e){this.maxElements=e,this.buffer=new tt(Wi),this.previousIndex=0}function so(e){return e.store(Yr.store)}function uo(e){return e.store(vi.store)}var co=(lo.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},lo.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},lo.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},lo.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},lo.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},lo.prototype.addReference=function(e,t){return ho(e,t)},lo.prototype.removeReference=function(e,t){return ho(e,t)},lo.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},lo.prototype.removeMutationReference=function(e,t){return ho(e,t)},lo.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?wt.resolve(!0):(r=t,i=!1,_t(n=e).iterateSerial((function(e){return Ct(n,e,r).next((function(e){return e&&(i=!0),wt.resolve(!e)}))})).next((function(){return i})));var n,r,i},lo.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),Xt(e).delete([0,Ve(a.path)])}))}));i.push(u)}})).next((function(){return wt.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},lo.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},lo.prototype.updateLimboDocument=function(e,t){return ho(e,t)},lo.prototype.forEachOrphanedDocument=function(e,t){var n,r=Xt(e),i=Ee.INVALID;return r.iterate({index:li.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Ee.INVALID&&t(new Ne(je(n)),i),i=s,n=a):i=Ee.INVALID})).next((function(){i!==Ee.INVALID&&t(new Ne(je(n)),i)}))},lo.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},lo);function lo(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new Xi(this,t)}function ho(e,t){return Xt(e).put((n=t,r=e.currentSequenceNumber,new li(0,Ve(n.path),r)));var n,r}var fo=Number,po=fo.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),mo=fo.MAX_SAFE_INTEGER||Math.pow(2,53)-1,yo=fo.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function go(e){return null==e}function vo(e){return yo(e)&&e<=mo&&po<=e}var bo,wo,To=(Eo.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";go(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},Eo.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),go(this.limit)||(e+=", limit: "+this.limit),0<this.orderBy.length&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},Eo.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},Eo.prototype.isDocumentQuery=function(){return Ne.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},Eo);function Eo(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}(wo=bo=bo||{}).First="F",wo.Last="L";var So,Io,ko,Co,No,Ao,Do=(na.atPath=function(e){return new na(e)},Object.defineProperty(na.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[Bo]:this.memoizedOrderBy=[new Vo(e),Bo];else{k(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Fo.ASCENDING;this.memoizedOrderBy.push(a===Fo.ASCENDING?Bo:qo)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),na.prototype.addFilter=function(e){k(null==this.getInequalityFilterField()||!(e instanceof xo)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),k(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([e]);return new na(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.limitType,this.startAt,this.endAt)},na.prototype.addOrderBy=function(e){k(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([e]);return new na(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},na.prototype.withLimitToFirst=function(e){return new na(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,bo.First,this.startAt,this.endAt)},na.prototype.withLimitToLast=function(e){return new na(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,bo.Last,this.startAt,this.endAt)},na.prototype.withStartAt=function(e){return new na(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,e,this.endAt)},na.prototype.withEndAt=function(e){return new na(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,e)},na.prototype.asCollectionQueryAtPath=function(e){return new na(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},na.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},na.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},na.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},na.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},na.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return k(n,"orderBy used that doesn't compare on key field"),0},na.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},na.prototype.hasLimitToFirst=function(){return!go(this.limit)&&this.limitType===bo.First},na.prototype.hasLimitToLast=function(){return!go(this.limit)&&this.limitType===bo.Last},na.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},na.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof xo&&n.isInequality())return n.field}return null},na.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof xo&&0<=e.indexOf(r.op))return r.op}return null},na.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},na.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},na.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===bo.First)this.memoizedTarget=new To(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===Fo.DESCENDING?Fo.ASCENDING:Fo.DESCENDING;e.push(new Vo(r.field,i))}var o=this.endAt?new Uo(this.endAt.position,!this.endAt.before):null,a=this.startAt?new Uo(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new To(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},na.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):Ne.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},na.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},na.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},na.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},na.prototype.assertValidBound=function(e){k(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},na),_o=(ta.fromString=function(e){switch(e){case"<":return ta.LESS_THAN;case"<=":return ta.LESS_THAN_OR_EQUAL;case"==":return ta.EQUAL;case">=":return ta.GREATER_THAN_OR_EQUAL;case">":return ta.GREATER_THAN;case"array-contains":return ta.ARRAY_CONTAINS;case"in":return ta.IN;case"array-contains-any":return ta.ARRAY_CONTAINS_ANY;default:return I("Unknown FieldFilter operator: "+e)}},ta.prototype.toString=function(){return this.name},ta.prototype.isEqual=function(e){return this.name===e.name},ta.LESS_THAN=new ta("<"),ta.LESS_THAN_OR_EQUAL=new ta("<="),ta.EQUAL=new ta("=="),ta.GREATER_THAN=new ta(">"),ta.GREATER_THAN_OR_EQUAL=new ta(">="),ta.ARRAY_CONTAINS=new ta("array-contains"),ta.IN=new ta("in"),ta.ARRAY_CONTAINS_ANY=new ta("array-contains-any"),ta),xo=(h(ea,Ao=function(){}),ea.create=function(e,t,n){if(e.isKeyField())return t===_o.IN?(k(n instanceof hr,"Comparing on key with IN, but filter value not an ArrayValue"),k(n.internalValue.every((function(e){return e instanceof ur})),"Comparing on key with IN, but an array value was not a RefValue"),new Po(e,n)):(k(n instanceof ur,"Comparing on key, but filter value not a RefValue"),k(t!==_o.ARRAY_CONTAINS&&t!==_o.ARRAY_CONTAINS_ANY,"'"+t.toString()+"' queries don't make sense on document keys."),new Oo(e,t,n));if(n.isEqual(Pn.INSTANCE)){if(t!==_o.EQUAL)throw new D(A.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new ea(e,t,n)}if(n.isEqual(rr.NAN)){if(t!==_o.EQUAL)throw new D(A.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new ea(e,t,n)}return t===_o.ARRAY_CONTAINS?new Ro(e,n):t===_o.IN?(k(n instanceof hr,"IN filter has invalid value: "+n.toString()),new Mo(e,n)):t===_o.ARRAY_CONTAINS_ANY?(k(n instanceof hr,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new Lo(e,n)):new ea(e,t,n)},ea.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},ea.prototype.matchesComparison=function(e){switch(this.op){case _o.LESS_THAN:return e<0;case _o.LESS_THAN_OR_EQUAL:return e<=0;case _o.EQUAL:return 0===e;case _o.GREATER_THAN:return 0<e;case _o.GREATER_THAN_OR_EQUAL:return 0<=e;default:return I("Unknown FieldFilter operator: "+this.op)}},ea.prototype.isInequality=function(){return 0<=[_o.LESS_THAN,_o.LESS_THAN_OR_EQUAL,_o.GREATER_THAN,_o.GREATER_THAN_OR_EQUAL].indexOf(this.op)},ea.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},ea.prototype.isEqual=function(e){return e instanceof ea&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},ea.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},ea),Oo=(h(Zo,No=xo),Zo.prototype.matches=function(e){var t=this.value,n=Ne.comparator(e.key,t.key);return this.matchesComparison(n)},Zo),Po=(h($o,Co=xo),$o.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},$o),Ro=(h(Jo,ko=xo),Jo.prototype.matches=function(e){var t=e.field(this.field);return t instanceof hr&&t.contains(this.value)},Jo),Mo=(h(Xo,Io=xo),Xo.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},Xo),Lo=(h(Yo,So=xo),Yo.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof hr&&n.internalValue.some((function(e){return t.value.contains(e)}))},Yo),Fo=(Ho.prototype.toString=function(){return this.name},Ho.ASCENDING=new Ho("asc"),Ho.DESCENDING=new Ho("desc"),Ho),Uo=(Qo.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},Qo.prototype.sortsBeforeDocument=function(e,t){k(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())k(o instanceof ur,"Bound has a non-key value where the key path is being used."),n=Ne.comparator(o.key,t.key);else{var a=t.field(i.field);k(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Fo.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Qo.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},Qo),Vo=(Go.prototype.compare=function(e,t){var n=this.isKeyOrderBy?dr.compareByKey(e,t):dr.compareByField(this.field,e,t);switch(this.dir){case Fo.ASCENDING:return n;case Fo.DESCENDING:return-1*n;default:return I("Unknown direction: "+this.dir)}},Go.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},Go.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},Go.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},Go),Bo=new Vo(Ce.keyField(),Fo.ASCENDING),qo=new Vo(Ce.keyField(),Fo.DESCENDING),jo=(Ko.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},Ko.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return k(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()||n.isEqual(We.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(o){var a=i.applyQuery(t,o);return(t.hasLimitToFirst()||t.hasLimitToLast())&&i.needsRefill(t.limitType,a,r,n)?i.executeFullCollectionScan(e,t):(b()<=y.DEBUG&&T("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),i.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},Ko.prototype.applyQuery=function(e,t){var n=new tt((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof dr&&e.matches(r)&&(n=n.add(r))})),n},Ko.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===bo.First?t.last():t.first();return!!i&&(i.hasPendingWrites||0<i.version.compareTo(r))},Ko.prototype.executeFullCollectionScan=function(e,t){return b()<=y.DEBUG&&T("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,We.MIN)},Ko),zo=(Wo.prototype.checkEmpty=function(e){return wt.resolve(0===this.mutationQueue.length)},Wo.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");k(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return k(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,wt.resolve()},Wo.prototype.getLastStreamToken=function(e){return wt.resolve(this.lastStreamToken)},Wo.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,wt.resolve()},Wo.prototype.addMutationBatch=function(e,t,n,r){k(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&k(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new vt(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Li(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return wt.resolve(o)},Wo.prototype.lookupMutationBatch=function(e,t){return wt.resolve(this.findMutationBatch(t))},Wo.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return k(null!=n,"Failed to find local mutation batch."),wt.resolve(n.keys())},Wo.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return wt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},Wo.prototype.getHighestUnacknowledgedBatchId=function(){return wt.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},Wo.prototype.getAllMutationBatches=function(e){return wt.resolve(this.mutationQueue.slice())},Wo.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Li(t,0),i=new Li(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){k(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);k(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),wt.resolve(o)},Wo.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new tt(ie);return t.forEach((function(e){var t=new Li(e,0),i=new Li(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){k(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),wt.resolve(this.findMutationBatches(r))},Wo.prototype.getAllMutationBatchesAffectingQuery=function(e,t){k(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;Ne.isDocumentKey(i)||(i=i.child(""));var o=new Li(new Ne(i),0),a=new tt(ie);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),wt.resolve(this.findMutationBatches(a))},Wo.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},Wo.prototype.removeMutationBatch=function(e,t){var n=this;k(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return wt.forEach(t.mutations,(function(i){var o=new Li(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},Wo.prototype.removeCachedMutationKeys=function(e){},Wo.prototype.containsKey=function(e,t){var n=new Li(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return wt.resolve(t.isEqual(r&&r.key))},Wo.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&k(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),wt.resolve()},Wo.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return k(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},Wo.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},Wo.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return k(n.batchId===e,"If found batch must match"),n},Wo);function Wo(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=se.EMPTY_BYTE_STRING,this.batchesByDocumentKey=new tt(Li.compareByKey)}function Ko(){}function Go(e,t){this.field=e,void 0===t&&(t=Fo.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}function Qo(e,t){this.position=e,this.before=t}function Ho(e){this.name=e}function Yo(e,t){var n=So.call(this,e,_o.ARRAY_CONTAINS_ANY,t)||this;return n.value=t,n}function Xo(e,t){var n=Io.call(this,e,_o.IN,t)||this;return n.value=t,n}function Jo(e,t){return ko.call(this,e,_o.ARRAY_CONTAINS,t)||this}function $o(e,t){var n=Co.call(this,e,_o.IN,t)||this;return n.value=t,n}function Zo(){return null!==No&&No.apply(this,arguments)||this}function ea(e,t,n){var r=Ao.call(this)||this;return r.field=e,r.op=t,r.value=n,r}function ta(e){this.name=e}function na(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=bo.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}var ra,ia,oa,aa,sa=(wa.prototype.addEntry=function(e,t,n){k(!n.isEqual(We.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},wa.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},wa.prototype.getEntry=function(e,t){var n=this.docs.get(t);return wt.resolve(n?n.maybeDocument:null)},wa.prototype.getEntries=function(e,t){var n=this,r=st();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),wt.resolve(r)},wa.prototype.getDocumentsMatchingQuery=function(e,t,n){k(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=ct(),i=new Ne(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof dr&&t.matches(c)&&(r=r.insert(c.key,c))}return wt.resolve(r)},wa.prototype.forEachDocumentKey=function(e,t){return wt.forEach(this.docs,(function(e){return t(e)}))},wa.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},wa.prototype.getLastReadTime=function(e){return wt.resolve(We.MIN)},wa.prototype.newChangeBuffer=function(e){return new wa.RemoteDocumentChangeBuffer(this)},wa.prototype.getSize=function(e){return wt.resolve(this.size)},wa.RemoteDocumentChangeBuffer=(h(Ta,oa=gr),Ta.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),wt.waitFor(n)},Ta.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},Ta.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},Ta),wa),ua=(ba.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),wt.resolve()},ba.prototype.getLastRemoteSnapshotVersion=function(e){return wt.resolve(this.lastRemoteSnapshotVersion)},ba.prototype.getHighestSequenceNumber=function(e){return wt.resolve(this.highestSequenceNumber)},ba.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,wt.resolve(t)},ba.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),wt.resolve()},ba.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},ba.prototype.addTargetData=function(e,t){return k(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,wt.resolve()},ba.prototype.updateTargetData=function(e,t){return k(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),wt.resolve()},ba.prototype.removeTargetData=function(e,t){return k(0<this.targetCount,"Removing a target from an empty cache"),k(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),--this.targetCount,wt.resolve()},ba.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),wt.waitFor(o).next((function(){return i}))},ba.prototype.getTargetCount=function(e){return wt.resolve(this.targetCount)},ba.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return wt.resolve(n)},ba.prototype.getTargetDataForTarget=function(e,t){return I("Not yet implemented.")},ba.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),wt.waitFor(i)},ba.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),wt.waitFor(i)},ba.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),wt.resolve()},ba.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return wt.resolve(n)},ba.prototype.containsKey=function(e,t){return wt.resolve(this.references.containsKey(t))},ba),ca=(va.createLruPersistence=function(e,t){return new va(e,(function(e){return new fa(e,t)}))},va.createEagerPersistence=function(e){return new va(e,(function(e){return new ha(e)}))},va.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(va.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),va.prototype.getActiveClients=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){return[2,[this.clientId]]}))}))},va.prototype.setPrimaryStateListener=function(e){return e(!0)},va.prototype.setDatabaseDeletedListener=function(){},va.prototype.setNetworkEnabled=function(e){},va.prototype.getIndexManager=function(){return this.indexManager},va.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new zo(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},va.prototype.getTargetCache=function(){return this.targetCache},va.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},va.prototype.runTransaction=function(e,t,n){var r=this;T("MemoryPersistence","Starting transaction:",e);var i=new la(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},va.prototype.mutationQueuesContainKey=function(e,t){return wt.or((n=this.mutationQueues,r=[],L(n,(function(e,t){return r.push(t)})),r.map((function(n){return function(){return n.containsKey(e,t)}}))));var n,r},va),la=(h(ga,ia=Ri),ga),ha=(Object.defineProperty(ya.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw I("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),ya.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},ya.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),wt.resolve()},ya.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),wt.resolve()},ya.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),wt.resolve()},ya.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},ya.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},ya.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wt.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},ya.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},ya.prototype.documentSize=function(e){return 0},ya.prototype.isReferenced=function(e,t){var n=this;return wt.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return wt.resolve(n.inMemoryPins.containsKey(t))}])},ya),fa=(ma.prototype.onTransactionStarted=function(){},ma.prototype.onTransactionCommitted=function(e){return wt.resolve()},ma.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},ma.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},ma.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},ma.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return wt.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?wt.resolve():t(i)}))}))},ma.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},ma.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},ma.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},ma.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wt.resolve()},ma.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},ma.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wt.resolve()},ma.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wt.resolve()},ma.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wt.resolve()},ma.prototype.documentSize=function(e){var t=e.key.toString().length;return e instanceof dr&&(t+=e.data().approximateByteSize()),t},ma.prototype.isPinned=function(e,t,n){var r=this;return wt.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return wt.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return wt.resolve(void 0!==e&&n<e)}])},ma.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},ma),da=(pa.prototype.reset=function(){this.currentBaseMs=0},pa.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},pa.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&T("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},pa.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},pa.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},pa);function pa(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}function ma(e,t){this.persistence=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new yr((function(e){return Ve(e.path)})),this.garbageCollector=new Xi(this,t)}function ya(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}function ga(e){var t=ia.call(this)||this;return t.currentSequenceNumber=e,t}function va(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new Ee(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new ua(this),this.indexManager=new qr,this.remoteDocumentCache=new sa(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}function ba(e){this.persistence=e,this.targets=new yr((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=We.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Mi,this.targetCount=0,this.targetIdGenerator=xt.forTargetCache()}function wa(e,t){this.indexManager=e,this.sizer=t,this.docs=new Ke(Ne.comparator),this.size=0}function Ta(e){var t=oa.call(this)||this;return t.documentCache=e,t}(aa=ra=ra||{})[aa.Initial=0]="Initial",aa[aa.Starting=1]="Starting",aa[aa.Open=2]="Open",aa[aa.Error=3]="Error",aa[aa.Backoff=4]="Backoff";var Ea,Sa,Ia,ka,Ca,Na,Aa=(Fa.prototype.isStarted=function(){return this.state===ra.Starting||this.state===ra.Open||this.state===ra.Backoff},Fa.prototype.isOpen=function(){return this.state===ra.Open},Fa.prototype.start=function(){this.state!==ra.Error?(k(this.state===ra.Initial,"Already started"),this.auth()):this.performBackoff()},Fa.prototype.stop=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(ra.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Fa.prototype.inhibitBackoff=function(){k(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=ra.Initial,this.backoff.reset()},Fa.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},Fa.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},Fa.prototype.handleIdleCloseTimer=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){return this.isOpen()?[2,this.close(ra.Initial)]:[2]}))}))},Fa.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},Fa.prototype.close=function(e,t){return d(this,void 0,void 0,(function(){return p(this,(function(n){switch(n.label){case 0:return k(this.isStarted(),"Only started streams should be closed."),k(e===ra.Error||go(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==ra.Error?this.backoff.reset():t&&t.code===A.RESOURCE_EXHAUSTED?(E(t.toString()),E("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===A.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},Fa.prototype.tearDown=function(){},Fa.prototype.auth=function(){var e=this;k(this.state===ra.Initial,"Must be in initial state to auth"),this.state=ra.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new D(A.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},Fa.prototype.startStream=function(e){var t=this;k(this.state===ra.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return k(t.state===ra.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=ra.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},Fa.prototype.performBackoff=function(){var e=this;k(this.state===ra.Error,"Should only perform backoff when in Error state"),this.state=ra.Backoff,this.backoff.backoffAndRun((function(){return d(e,void 0,void 0,(function(){return p(this,(function(e){return k(this.state===ra.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=ra.Initial,this.start(),k(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},Fa.prototype.handleStreamClose=function(e){return k(this.isStarted(),"Can't handle server close on non-started stream"),T("PersistentStream","close with error: "+e),this.stream=null,this.close(ra.Error,e)},Fa.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},Fa),Da=(h(La,ka=Aa),La.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},La.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},La.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},La.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},La),_a=(h(Ma,Ia=Aa),Object.defineProperty(Ma.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),Ma.prototype.start=function(){this.handshakeComplete_=!1,Ia.prototype.start.call(this)},Ma.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},Ma.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},Ma.prototype.onMessage=function(e){if(k(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.fromBytes(e.streamToken),this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return k(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},Ma.prototype.writeHandshake=function(){k(this.isOpen(),"Writing handshake requires an opened stream"),k(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},Ma.prototype.writeMutations=function(e){var t=this;k(this.isOpen(),"Writing mutations requires an opened stream"),k(this.handshakeComplete_,"Handshake must be complete before writing mutations"),k(0<this.lastStreamToken.approximateByteSize(),"Trying to write mutation without a token");var n={streamToken:this.serializer.toBytes(this.lastStreamToken),writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},Ma),xa=(Ra.prototype.newPersistentWriteStream=function(e){return new _a(this.queue,this.connection,this.credentials,this.serializer,e)},Ra.prototype.newPersistentWatchStream=function(e){return new Da(this.queue,this.connection,this.credentials,this.serializer,e)},Ra.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},Ra.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=at();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);k(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},Ra.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===A.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},Ra.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===A.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},Ra),Oa=(Pa.prototype.lookup=function(e){return d(this,void 0,void 0,(function(){var t,n=this;return p(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new D(A.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof pr||e instanceof dr?n.recordVersion(e):I("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},Pa.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},Pa.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},Pa.prototype.delete=function(e){this.write([new bn(e,this.precondition(e))]),this.writtenDocs.add(e)},Pa.prototype.commit=function(){return d(this,void 0,void 0,(function(){var e,t=this;return p(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),e.forEach((function(e,n){t.mutations.push(new wn(e,t.precondition(e)))})),[4,this.datastore.commit(this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},Pa.prototype.recordVersion=function(e){var t;if(e instanceof dr)t=e.version;else{if(!(e instanceof pr))throw I("Document in a transaction was a "+e.constructor.name);t=We.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new D(A.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},Pa.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?pn.updateTime(t):pn.NONE},Pa.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(this.writtenDocs.has(e)||!t)return pn.exists(!0);if(t.isEqual(We.forDeletedDoc()))throw new D(A.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pn.updateTime(t)},Pa.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},Pa.prototype.ensureCommitNotCalled=function(){k(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},Pa);function Pa(e){this.datastore=e,this.readVersions=ht(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function Ra(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}function Ma(e,t,n,r,i){var o=Ia.call(this,e,me.WriteStreamConnectionBackoff,me.WriteStreamIdle,t,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=se.EMPTY_BYTE_STRING,o}function La(e,t,n,r,i){var o=ka.call(this,e,me.ListenStreamConnectionBackoff,me.ListenStreamIdle,t,n,i)||this;return o.serializer=r,o}function Fa(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=ra.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new da(e,t)}(Na=Ea=Ea||{})[Na.Unknown=0]="Unknown",Na[Na.Online=1]="Online",Na[Na.Offline=2]="Offline",(Ca=Sa=Sa||{})[Ca.RemoteStore=0]="RemoteStore",Ca[Ca.SharedClientState=1]="SharedClientState";var Ua,Va,Ba=(qa.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Ea.Unknown),k(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(me.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,k(e.state===Ea.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Ea.Offline),Promise.resolve()})))},qa.prototype.handleWatchStreamFailure=function(e){this.state===Ea.Online?(this.setAndBroadcast(Ea.Unknown),k(0===this.watchStreamFailures,"watchStreamFailures must be 0"),k(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Ea.Offline)))},qa.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Ea.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},qa.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},qa.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(E(t),this.shouldWarnClientIsOffline=!1):T("OnlineStateTracker",t)},qa.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},qa);function qa(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Ea.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function ja(e){switch(e){case A.OK:return I("Treated status OK as error");case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return 1;default:return I("Unknown status code: "+e)}}function za(e){if(void 0===e)return E("GRPC error has no .code"),A.UNKNOWN;switch(e){case Ua.OK:return A.OK;case Ua.CANCELLED:return A.CANCELLED;case Ua.UNKNOWN:return A.UNKNOWN;case Ua.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Ua.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Ua.INTERNAL:return A.INTERNAL;case Ua.UNAVAILABLE:return A.UNAVAILABLE;case Ua.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Ua.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Ua.NOT_FOUND:return A.NOT_FOUND;case Ua.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Ua.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Ua.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Ua.ABORTED:return A.ABORTED;case Ua.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Ua.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Ua.DATA_LOSS:return A.DATA_LOSS;default:return I("Unknown status code: "+e)}}(Va=Ua=Ua||{})[Va.OK=0]="OK",Va[Va.CANCELLED=1]="CANCELLED",Va[Va.UNKNOWN=2]="UNKNOWN",Va[Va.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Va[Va.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Va[Va.NOT_FOUND=5]="NOT_FOUND",Va[Va.ALREADY_EXISTS=6]="ALREADY_EXISTS",Va[Va.PERMISSION_DENIED=7]="PERMISSION_DENIED",Va[Va.UNAUTHENTICATED=16]="UNAUTHENTICATED",Va[Va.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Va[Va.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Va[Va.ABORTED=10]="ABORTED",Va[Va.OUT_OF_RANGE=11]="OUT_OF_RANGE",Va[Va.UNIMPLEMENTED=12]="UNIMPLEMENTED",Va[Va.INTERNAL=13]="INTERNAL",Va[Va.UNAVAILABLE=14]="UNAVAILABLE",Va[Va.DATA_LOSS=15]="DATA_LOSS";var Wa,Ka,Ga,Qa,Ha=(Ya.emptySet=function(e){return new Ya(e.comparator)},Ya.prototype.has=function(e){return null!=this.keyedMap.get(e)},Ya.prototype.get=function(e){return this.keyedMap.get(e)},Ya.prototype.first=function(){return this.sortedSet.minKey()},Ya.prototype.last=function(){return this.sortedSet.maxKey()},Ya.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},Ya.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(Ya.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),Ya.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},Ya.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},Ya.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},Ya.prototype.isEqual=function(e){if(!(e instanceof Ya))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},Ya.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Ya.prototype.copy=function(e,t){var n=new Ya;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},Ya);function Ya(e){this.comparator=e?function(t,n){return e(t,n)||Ne.comparator(t.key,n.key)}:function(e,t){return Ne.comparator(e.key,t.key)},this.keyedMap=ct(),this.sortedSet=new Ke(this.comparator)}function Xa(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}function Ja(e,t){this.targetId=e,this.existenceFilter=t}(Qa=Wa=Wa||{})[Qa.Added=0]="Added",Qa[Qa.Removed=1]="Removed",Qa[Qa.Modified=2]="Modified",Qa[Qa.Metadata=3]="Metadata",(Ga=Ka=Ka||{})[Ga.Local=0]="Local",Ga[Ga.Synced=1]="Synced";var $a,Za,es=(ss.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);!n||e.type!==Wa.Added&&n.type===Wa.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Wa.Metadata&&n.type!==Wa.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Wa.Modified&&n.type===Wa.Modified?this.changeMap=this.changeMap.insert(t,{type:Wa.Modified,doc:e.doc}):e.type===Wa.Modified&&n.type===Wa.Added?this.changeMap=this.changeMap.insert(t,{type:Wa.Added,doc:e.doc}):e.type===Wa.Removed&&n.type===Wa.Added?this.changeMap=this.changeMap.remove(t):e.type===Wa.Removed&&n.type===Wa.Modified?this.changeMap=this.changeMap.insert(t,{type:Wa.Removed,doc:n.doc}):e.type===Wa.Added&&n.type===Wa.Removed?this.changeMap=this.changeMap.insert(t,{type:Wa.Modified,doc:e.doc}):I("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n))},ss.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},ss),ts=(as.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach((function(e){i.push({type:Wa.Added,doc:e})})),new as(e,t,Ha.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(as.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),as.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},as),ns=(os.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n,r=((n={})[e]=rs.createSynthesizedTargetChangeForCurrentChange(e,t),n);return new os(We.MIN,r,mt(),at(),dt())},os),rs=(is.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new is(se.EMPTY_BYTE_STRING,t,dt(),dt(),dt())},is);function is(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function os(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function as(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}function ss(){this.changeMap=new Ke(Ne.comparator)}function us(e,t,n,r){void 0===n&&(n=se.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}(Za=$a=$a||{})[Za.NoChange=0]="NoChange",Za[Za.Added=1]="Added",Za[Za.Removed=2]="Removed",Za[Za.Current=3]="Current",Za[Za.Reset=4]="Reset";var cs=(Object.defineProperty(fs.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(fs.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(fs.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(fs.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),fs.prototype.updateResumeToken=function(e){0<e.approximateByteSize()&&(this._hasPendingChanges=!0,this._resumeToken=e)},fs.prototype.toTargetChange=function(){var e=dt(),t=dt(),n=dt();return this.documentChanges.forEach((function(r,i){switch(i){case Wa.Added:e=e.add(r);break;case Wa.Modified:t=t.add(r);break;case Wa.Removed:n=n.add(r);break;default:I("Encountered invalid change type: "+i)}})),new rs(this._resumeToken,this._current,e,t,n)},fs.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ps()},fs.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},fs.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},fs.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},fs.prototype.recordTargetResponse=function(){--this.pendingResponses},fs.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},fs),ls=(hs.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof dr?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof pr&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},hs.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case $a.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case $a.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case $a.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),k(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case $a.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case $a.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:I("Unknown target watch change state: "+e.state)}}))},hs.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):M(this.targetStates,t)},hs.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new Ne(i.path);this.removeDocumentFromTarget(t,o,new pr(o,We.forDeletedDoc()))}else k(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},hs.prototype.createRemoteEvent=function(e){var t=this,n={};M(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new Ne(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new pr(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=dt();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===wi.LimboResolution||(i=!1)})),i&&(r=r.add(e))}));var i=new ns(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=at(),this.pendingDocumentTargetMapping=ds(),this.pendingTargetResets=new tt(ie),i},hs.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Wa.Modified:Wa.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},hs.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Wa.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},hs.prototype.removeTarget=function(e){delete this.targetStates[e]},hs.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},hs.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},hs.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new cs),this.targetStates[e]},hs.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new tt(ie),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},hs.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t},hs.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},hs.prototype.resetTarget=function(e){var t=this;k(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new cs,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},hs.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},hs);function hs(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=at(),this.pendingDocumentTargetMapping=ds(),this.pendingTargetResets=new tt(ie)}function fs(){this.pendingResponses=0,this.documentChanges=ps(),this._resumeToken=se.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}function ds(){return new Ke(Ne.comparator)}function ps(){return new Ke(Ne.comparator)}var ms=(Cs.prototype.start=function(){return this.enableNetwork()},Cs.prototype.enableNetwork=function(){return d(this,void 0,void 0,(function(){var e;return p(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Ea.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},Cs.prototype.disableNetwork=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Ea.Offline),[2]}}))}))},Cs.prototype.disableNetworkInternal=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(T("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},Cs.prototype.shutdown=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return T("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Ea.Unknown),[2]}}))}))},Cs.prototype.listen=function(e){P(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},Cs.prototype.unlisten=function(e){k(P(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),F(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Ea.Unknown))},Cs.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},Cs.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},Cs.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},Cs.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},Cs.prototype.startWatchStream=function(){k(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new ls(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},Cs.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!F(this.listenTargets)},Cs.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},Cs.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},Cs.prototype.onWatchStreamOpen=function(){return d(this,void 0,void 0,(function(){var e=this;return p(this,(function(t){return M(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},Cs.prototype.onWatchStreamClose=function(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){return void 0===e&&k(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Ea.Unknown),[2]}))}))},Cs.prototype.onWatchStreamChange=function(e,t){return d(this,void 0,void 0,(function(){var n;return p(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Ea.Online),e instanceof us&&e.state===$a.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Xa?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Ja?this.watchChangeAggregator.handleExistenceFilter(e):(k(e instanceof us,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(We.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),0<=t.compareTo(n)?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},Cs.prototype.raiseWatchSnapshot=function(e){var t=this;k(!e.isEqual(We.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return M(n.targetChanges,(function(n,r){if(0<r.resumeToken.approximateByteSize()){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(se.EMPTY_BYTE_STRING,n.snapshotVersion),t.sendUnwatchRequest(e);var r=new Ai(n.target,e,wi.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},Cs.prototype.handleTargetError=function(e){var t=this;k(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return d(t,void 0,void 0,(function(){return p(this,(function(t){return P(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},Cs.prototype.fillWritePipeline=function(){return d(this,void 0,void 0,(function(){var e,t;return p(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},Cs.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},Cs.prototype.outstandingWrites=function(){return this.writePipeline.length},Cs.prototype.addToWritePipeline=function(e){k(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},Cs.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},Cs.prototype.startWriteStream=function(){k(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},Cs.prototype.onWriteStreamOpen=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},Cs.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(zi)},Cs.prototype.onMutationResult=function(e,t){var n=this;k(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=bt.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},Cs.prototype.onWriteStreamClose=function(e){return d(this,void 0,void 0,(function(){var t=this;return p(this,(function(n){return void 0===e&&k(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]:[2]}))}))},Cs.prototype.handleHandshakeError=function(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){return ja(e.code)?(T("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=se.EMPTY_BYTE_STRING,[2,this.localStore.setLastStreamToken(se.EMPTY_BYTE_STRING).catch(zi)]):[2]}))}))},Cs.prototype.handleWriteError=function(e){return d(this,void 0,void 0,(function(){var t,n=this;return p(this,(function(r){return ja(i=e.code)&&i!==A.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},Cs.prototype.createTransaction=function(){return new Oa(this.datastore)},Cs.prototype.restartNetwork=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Ea.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},Cs.prototype.handleCredentialChange=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(T("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Cs.prototype.applyPrimaryState=function(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Ea.Unknown),t.label=4;case 4:return[2]}}))}))},Cs),ys=(Object.defineProperty(ks.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(ks.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),ks.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},ks.prototype._compareTo=function(e){return ie(this._lat,e._lat)||ie(this._long,e._long)},ks),gs=(Is.prototype.applyToLocalView=function(e,t){return new ar(t,e)},Is.prototype.applyToRemoteDocument=function(e,t){return t},Is.prototype.computeBaseValue=function(e){return null},Is.prototype.isEqual=function(e){return e instanceof Is},Is.instance=new Is,Is),vs=(Ss.prototype.applyToLocalView=function(e,t){return this.apply(e)},Ss.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Ss.prototype.apply=function(e){for(var t=Ns(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new hr(t)},Ss.prototype.computeBaseValue=function(e){return null},Ss.prototype.isEqual=function(e){return e instanceof Ss&&oe(e.elements,this.elements)},Ss),bs=(Es.prototype.applyToLocalView=function(e,t){return this.apply(e)},Es.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Es.prototype.apply=function(e){for(var t=Ns(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new hr(t)},Es.prototype.computeBaseValue=function(e){return null},Es.prototype.isEqual=function(e){return e instanceof Es&&oe(e.elements,this.elements)},Es),ws=(Ts.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof nr&&this.operand instanceof nr){var r=n.internalValue+this.operand.internalValue;return new nr(r)}return r=n.internalValue+this.operand.internalValue,new rr(r)},Ts.prototype.applyToRemoteDocument=function(e,t){return k(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},Ts.prototype.computeBaseValue=function(e){return e instanceof Mn?e:new nr(0)},Ts.prototype.isEqual=function(e){return e instanceof Ts&&this.operand.isEqual(e.operand)},Ts);function Ts(e){this.operand=e}function Es(e){this.elements=e}function Ss(e){this.elements=e}function Is(){}function ks(e,t){if(V("GeoPoint",arguments,2),j("GeoPoint","number",1,e),j("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new D(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new D(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}function Cs(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return d(o,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(T("RemoteStore","Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Ba(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}function Ns(e){return e instanceof hr?e.internalValue.slice():[]}var As,Ds,_s=(Rs.prototype.isEqual=function(e){return e&&e.count===this.count},Rs),xs=((Ds={})[Fo.ASCENDING.name]="ASCENDING",Ds[Fo.DESCENDING.name]="DESCENDING",Ds),Os=((As={})[_o.LESS_THAN.name]="LESS_THAN",As[_o.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",As[_o.GREATER_THAN.name]="GREATER_THAN",As[_o.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",As[_o.EQUAL.name]="EQUAL",As[_o.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",As[_o.IN.name]="IN",As[_o.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",As),Ps=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(e){this.count=e}function Ms(e,t){k(!go(e),t+" is missing")}function Ls(e){return"number"==typeof e?e:"string"==typeof e?Number(e):I("can't parse "+e)}function Fs(){this.viewSnap=null,this.targetId=0,this.listeners=[]}function Us(e){this.key=e}function Vs(e){this.key=e}var Bs=(Ys.prototype.fromRpcStatus=function(e){var t=void 0===e.code?A.UNKNOWN:za(e.code);return new D(t,e.message||"")},Ys.prototype.toInt32Value=function(e){return this.options.useProto3Json||go(e)?e:{value:e}},Ys.prototype.fromInt32Value=function(e){var t;return go(t="object"==typeof e?e.value:e)?null:t},Ys.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},Ys.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);k(!!e,"Cannot deserialize null or undefined timestamp.");var t=Ls(e.seconds||"0"),n=e.nanos||0;return new ze(t,n)},Ys.prototype.fromIso8601String=function(e){var t=0,n=Ps.exec(e);if(k(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new ze(o,t)},Ys.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():e.toUint8Array()},Ys.prototype.fromBytes=function(e){return this.options.useProto3Json?(k(void 0===e||"string"==typeof e,"value must be undefined or a string when using proto3 Json"),se.fromBase64String(e||"")):(k(void 0===e||e instanceof Uint8Array,"value must be undefined or Uint8Array"),se.fromUint8Array(e||new Uint8Array))},Ys.prototype.fromBlob=function(e){return"string"==typeof e?(k(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),be.fromBase64String(e)):(k(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),be.fromUint8Array(e))},Ys.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},Ys.prototype.fromVersion=function(e){return k(!!e,"Trying to deserialize version that isn't set"),We.fromTimestamp(this.fromTimestamp(e))},Ys.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},Ys.prototype.fromResourceName=function(e){var t=Ie.fromString(e);return k(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},Ys.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},Ys.prototype.fromName=function(e){var t=this.fromResourceName(e);return k(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),k(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Ne(this.extractLocalPathFromResourceName(t))},Ys.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},Ys.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?Ie.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(Ys.prototype,"encodedDatabaseId",{get:function(){return new Ie(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),Ys.prototype.fullyQualifiedPrefixPath=function(e){return new Ie(["projects",e.projectId,"databases",e.database])},Ys.prototype.extractLocalPathFromResourceName=function(e){return k(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},Ys.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},Ys.prototype.toValue=function(e){if(e instanceof Pn)return{nullValue:"NULL_VALUE"};if(e instanceof Rn)return{booleanValue:e.value()};if(e instanceof nr)return{integerValue:""+e.value()};if(e instanceof rr){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof ir?{stringValue:e.value()}:e instanceof lr?{mapValue:this.toMapValue(e)}:e instanceof hr?{arrayValue:this.toArrayValue(e)}:e instanceof or?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof cr?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof sr?{bytesValue:this.toBytes(e.value())}:e instanceof ur?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:I("Unknown FieldValue "+JSON.stringify(e))},Ys.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Pn.INSTANCE;if("booleanValue"in e)return Rn.of(e.booleanValue);if("integerValue"in e)return new nr(Ls(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return rr.NAN;if("Infinity"===e.doubleValue)return rr.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return rr.NEGATIVE_INFINITY}return new rr(e.doubleValue)}if("stringValue"in e)return new ir(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){Ms(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new hr(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return Ms(e.timestampValue,"timestampValue"),new or(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){Ms(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new cr(new ys(r,i))}if("bytesValue"in e){Ms(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new sr(o)}if("referenceValue"in e){Ms(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new Te(a.get(1),a.get(3)),u=new Ne(this.extractLocalPathFromResourceName(a));return new ur(s,u)}return I("Unknown Value proto "+JSON.stringify(e))},Ys.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},Ys.prototype.toDocument=function(e){return k(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},Ys.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new dr(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},Ys.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},Ys.prototype.fromFields=function(e){var t=this,n=e,r=lr.EMPTY;return L(n,(function(e,n){r=r.set(new Ce([e]),t.fromValue(n))})),r},Ys.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},Ys.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},Ys.prototype.fromFound=function(e){var t=this;k(!!e.found,"Tried to deserialize a found document from a missing document."),Ms(e.found.name,"doc.found.name"),Ms(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new dr(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},Ys.prototype.fromMissing=function(e){k(!!e.missing,"Tried to deserialize a missing document from a found document."),k(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new pr(t,n)},Ys.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):I("invalid batch get response: "+JSON.stringify(e))},Ys.prototype.toWatchTargetChangeState=function(e){switch(e){case $a.Added:return"ADD";case $a.Current:return"CURRENT";case $a.NoChange:return"NO_CHANGE";case $a.Removed:return"REMOVE";case $a.Reset:return"RESET";default:return I("Unknown WatchTargetChangeState: "+e)}},Ys.prototype.toTestWatchChange=function(e){if(e instanceof Ja)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Xa){if(e.newDoc instanceof dr){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof pr)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof us){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return Ua.OK;switch(e){case A.OK:return Ua.OK;case A.CANCELLED:return Ua.CANCELLED;case A.UNKNOWN:return Ua.UNKNOWN;case A.DEADLINE_EXCEEDED:return Ua.DEADLINE_EXCEEDED;case A.RESOURCE_EXHAUSTED:return Ua.RESOURCE_EXHAUSTED;case A.INTERNAL:return Ua.INTERNAL;case A.UNAVAILABLE:return Ua.UNAVAILABLE;case A.UNAUTHENTICATED:return Ua.UNAUTHENTICATED;case A.INVALID_ARGUMENT:return Ua.INVALID_ARGUMENT;case A.NOT_FOUND:return Ua.NOT_FOUND;case A.ALREADY_EXISTS:return Ua.ALREADY_EXISTS;case A.PERMISSION_DENIED:return Ua.PERMISSION_DENIED;case A.FAILED_PRECONDITION:return Ua.FAILED_PRECONDITION;case A.ABORTED:return Ua.ABORTED;case A.OUT_OF_RANGE:return Ua.OUT_OF_RANGE;case A.UNIMPLEMENTED:return Ua.UNIMPLEMENTED;case A.DATA_LOSS:return Ua.DATA_LOSS;default:return I("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.toBytes(e.resumeToken),cause:n}}}return I("Unrecognized watch change: "+JSON.stringify(e))},Ys.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){Ms(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=this.fromBytes(e.targetChange.resumeToken),a=e.targetChange.cause;t=new us(r,i,o,a&&this.fromRpcStatus(a)||null)}else if("documentChange"in e){Ms(e.documentChange,"documentChange");var s=e.documentChange;Ms(s.document,"documentChange.name"),Ms(s.document.name,"documentChange.document.name"),Ms(s.document.updateTime,"documentChange.document.updateTime");var u=this.fromName(s.document.name),c=this.fromVersion(s.document.updateTime),l=new dr(u,c,{},void 0,s.document,(function(e){return n.fromValue(e)})),h=s.targetIds||[],f=s.removedTargetIds||[];t=new Xa(h,f,l.key,l)}else if("documentDelete"in e){Ms(e.documentDelete,"documentDelete");var d=e.documentDelete;Ms(d.document,"documentDelete.document"),u=this.fromName(d.document),c=d.readTime?this.fromVersion(d.readTime):We.forDeletedDoc(),l=new pr(u,c),t=new Xa([],f=d.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){Ms(e.documentRemove,"documentRemove");var p=e.documentRemove;Ms(p.document,"documentRemove"),u=this.fromName(p.document),t=new Xa([],f=p.removedTargetIds||[],u,null)}else{if(!("filter"in e))return I("Unknown change type "+JSON.stringify(e));Ms(e.filter,"filter");var m=e.filter;Ms(m.targetId,"filter.targetId");var y=m.count||0,g=new _s(y);t=new Ja(m.targetId,g)}return t},Ys.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?$a.NoChange:"ADD"===e?$a.Added:"REMOVE"===e?$a.Removed:"CURRENT"===e?$a.Current:"RESET"===e?$a.Reset:I("Got unexpected TargetChange.state: "+e)},Ys.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return We.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length||!t.readTime?We.MIN:this.fromVersion(t.readTime)},Ys.prototype.toMutation=function(e){var t,n=this;if(e instanceof yn)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof bn)t={delete:this.toName(e.key)};else if(e instanceof gn)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else if(e instanceof vn)t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}};else{if(!(e instanceof wn))return I("Unknown mutation type "+e.type);t={verify:this.toName(e.key)}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},Ys.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):pn.NONE;if(e.update){Ms(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new gn(r,i,o,n)}return new yn(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new bn(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return k(!0===n.exists,'Transforms only support precondition "exists == true"'),new vn(r,a)}return e.verify?(r=this.fromName(e.verify),new wn(r,n)):I("unknown mutation proto: "+JSON.stringify(e))},Ys.prototype.toPrecondition=function(e){return k(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:I("Unknown precondition")},Ys.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?pn.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?pn.exists(e.exists):pn.NONE},Ys.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(We.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new Jt(r,i)},Ys.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(k(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},Ys.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof gs)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vs)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof bs)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof ws)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw I("Unknown transform: "+e.transform)},Ys.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)k("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=gs.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new vs(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e)r=e.removeAllFromArray.values||[],n=new bs(r.map((function(e){return t.fromValue(e)})));else if("increment"in e){var i=this.fromValue(e.increment);k(i instanceof Mn,"NUMERIC_ADD transform requires a NumberValue"),n=new ws(i)}else I("Unknown transform proto: "+JSON.stringify(e));var o=Ce.fromServerFormat(e.fieldPath);return new tn(o,n)},Ys.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},Ys.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;k(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Do.atPath(this.fromQueryPath(n)).toTarget()},Ys.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(k(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(k(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},Ys.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){k(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Do(t,i,s,a,u,bo.First,c,l).toTarget()},Ys.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},Ys.prototype.toLabel=function(e){switch(e){case wi.Listen:return null;case wi.ExistenceFilterMismatch:return"existence-filter-mismatch";case wi.LimboResolution:return"limbo-document";default:return I("Unrecognized query purpose: "+e)}},Ys.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.approximateByteSize()&&(t.resumeToken=this.toBytes(e.resumeToken)),t},Ys.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof xo?t.toUnaryOrFieldFilter(e):I("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},Ys.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):I("Unknown filter: "+JSON.stringify(e)):[]},Ys.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},Ys.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},Ys.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},Ys.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new Uo(r,n)},Ys.prototype.toDirection=function(e){return xs[e.name]},Ys.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return Fo.ASCENDING;case"DESCENDING":return Fo.DESCENDING;default:return}},Ys.prototype.toOperatorName=function(e){return Os[e.name]},Ys.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return _o.EQUAL;case"GREATER_THAN":return _o.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return _o.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return _o.LESS_THAN;case"LESS_THAN_OR_EQUAL":return _o.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return _o.ARRAY_CONTAINS;case"IN":return _o.IN;case"ARRAY_CONTAINS_ANY":return _o.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return I("Unspecified operator");default:return I("Unknown operator")}},Ys.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},Ys.prototype.fromFieldPathReference=function(e){return Ce.fromServerFormat(e.fieldPath)},Ys.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},Ys.prototype.fromPropertyOrder=function(e){return new Vo(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},Ys.prototype.fromFieldFilter=function(e){return xo.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},Ys.prototype.toUnaryOrFieldFilter=function(e){if(e.op===_o.EQUAL){if(e.value.isEqual(rr.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Pn.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},Ys.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return xo.create(t,_o.EQUAL,rr.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return xo.create(n,_o.EQUAL,Pn.INSTANCE);case"OPERATOR_UNSPECIFIED":return I("Unspecified filter");default:return I("Unknown filter")}},Ys.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},Ys.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return Ce.fromServerFormat(e)}));return en.fromArray(t)},Ys),qs=(Hs.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new Fs,this.queries.set(t,r)),r.listeners.push(e),k(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap&&e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e})):Promise.resolve(r.targetId)},Hs.prototype.unlisten=function(e){return d(this,void 0,void 0,(function(){var t,n,r,i;return p(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(e))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},Hs.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].onViewSnapshot(i)&&(t=!0);a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},Hs.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},Hs.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)})),t&&this.raiseSnapshotsInSyncEvent()},Hs.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},Hs.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},Hs.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},Hs),js=(Qs.prototype.onViewSnapshot=function(e){if(k(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Wa.Metadata&&t.push(i)}e=new ts(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},Qs.prototype.onError=function(e){this.queryObserver.error(e)},Qs.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},Qs.prototype.shouldRaiseInitialEvent=function(e,t){if(k(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Ea.Offline;return this.options.waitForSyncWhenOnline&&n?(k(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Ea.Offline},Qs.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},Qs.prototype.raiseInitialEvent=function(e){k(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},Qs),zs=(Gs.fromSnapshot=function(e,t){for(var n=dt(),r=dt(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case Wa.Added:n=n.add(a.doc.key);break;case Wa.Removed:r=r.add(a.doc.key)}}return new Gs(e,t.fromCache,n,r)},Gs),Ws=(Object.defineProperty(Ks.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),Ks.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new es,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof dr?t:null;h&&(k(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:Wa.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:Wa.Modified,doc:h}),p=!0,(u&&0<n.query.docComparator(h,u)||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:Wa.Added,doc:h}),p=!0):l&&!h&&(r.track({type:Wa.Removed,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(o=h?(a=a.add(h),d?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:Wa.Removed,doc:l})}return k(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},Ks.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},Ks.prototype.applyChanges=function(e,t,n){var r=this;k(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return i=e.type,o=t.type,n(i)-n(o)||r.query.docComparator(e.doc,t.doc);function n(e){switch(e){case Wa.Added:return 1;case Wa.Modified:case Wa.Metadata:return 2;case Wa.Removed:return 0;default:return I("Unknown ChangeType: "+e)}}var i,o})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Ka.Synced:Ka.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new ts(this.query,e.documentSet,i,o,e.mutatedKeys,s===Ka.Local,u,!1),limboChanges:a}:{limboChanges:a}},Ks.prototype.applyOnlineStateChange=function(e){return this.current&&e===Ea.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new es,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},Ks.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},Ks.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return k(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},Ks.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=dt(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new Vs(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new Us(e))})),n},Ks.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=dt();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},Ks.prototype.computeInitialSnapshot=function(){return ts.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ka.Local)},Ks);function Ks(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=dt(),this.mutatedKeys=dt(),this.documentSet=new Ha(e.docComparator.bind(e))}function Gs(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}function Qs(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Ea.Unknown,this.options=n||{}}function Hs(e){this.syncEngine=e,this.queries=new yr((function(e){return e.canonicalId()})),this.onlineState=Ea.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}function Ys(e,t){this.databaseId=e,this.options=t}function Xs(e,t,n){this.query=e,this.targetId=t,this.view=n}function Js(e){this.key=e,this.receivedDocument=!1}var $s=(ru.prototype.run=function(){this.runWithBackOff()},ru.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return d(e,void 0,void 0,(function(){var e,t,n=this;return p(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},ru.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!go(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},ru.prototype.handleTransactionError=function(e){var t=this;0<this.retries&&this.isRetryableTransactionError(e)?(--this.retries,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},ru.prototype.isRetryableTransactionError=function(e){if("FirebaseError"!==e.name)return!1;var t=e.code;return"aborted"===t||"failed-precondition"===t||!ja(t)},ru),Zs=(Object.defineProperty(nu.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),nu.prototype.subscribe=function(e){k(null!==e,"SyncEngine listener cannot be null"),k(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},nu.prototype.listen=function(e){return d(this,void 0,void 0,(function(){var t,n,r,i,o;return p(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},nu.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return d(this,void 0,void 0,(function(){var r,i,o,a,s,u;return p(this,(function(c){switch(c.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=c.sent(),i=new Ws(e,r.remoteKeys),o=i.computeDocChanges(r.documents),a=rs.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Ea.Offline),k(0===(s=i.applyChanges(o,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),k(!!s.snapshot,"applyChanges for new view should always return a snapshot"),u=new Xs(e,t,i),this.queryViewsByQuery.set(e,u),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,s.snapshot]}}))}))},nu.prototype.synchronizeViewAndComputeSnapshot=function(e){return d(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},nu.prototype.unlisten=function(e){return d(this,void 0,void 0,(function(){var t,n,r=this;return p(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),k(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),1<(n=this.queriesByTarget[t.targetId]).length?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(zi)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},nu.prototype.write=function(e,t){return d(this,void 0,void 0,(function(){var n;return p(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},nu.prototype.runTransaction=function(e,t,n){new $s(e,this.remoteStore,t,n).run()},nu.prototype.applyRemoteEvent=function(e){return d(this,void 0,void 0,(function(){var t,n=this;return p(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),L(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(k(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?r.receivedDocument=!0:0<t.modifiedDocuments.size?k(r.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(k(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,zi(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},nu.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Sa.RemoteStore||!this.isPrimary&&t===Sa.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);k(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},nu.prototype.rejectListen=function(e,t){return d(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return p(this,(function(u){switch(u.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new Ke(Ne.comparator)).insert(r,new pr(r,We.forDeletedDoc())),o=dt().add(r),a=new ns(We.MIN,{},new tt(ie),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return s.removeAndCleanupTarget(e,t)})).catch(zi)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},nu.prototype.applyBatchState=function(e,t,n){return d(this,void 0,void 0,(function(){var r;return p(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(T("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):I("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},nu.prototype.applySuccessfulWrite=function(e){return d(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,zi(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},nu.prototype.rejectFailedWrite=function(e,t){return d(this,void 0,void 0,(function(){var n;return p(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,zi(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},nu.prototype.registerPendingWritesCallback=function(e){return d(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||T("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?e.resolve():((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n)),[2]}}))}))},nu.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},nu.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new D(A.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},nu.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new Ke(ie)).insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},nu.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(k(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},nu.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),k(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},nu.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},nu.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof Us?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof Vs?(T("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):I("Unknown limbo change: "+JSON.stringify(i))}},nu.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){T("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Do.atPath(t.path);this.limboResolutionsByTarget[n]=new Js(t),this.remoteStore.listen(new Ai(r.toTarget(),n,wi.LimboResolution,Ee.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},nu.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},nu.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return d(this,void 0,void 0,(function(){var n,r,i,o=this;return p(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=zs.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},nu.prototype.assertSubscribed=function(e){k(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},nu.prototype.handleCredentialChange=function(e){return d(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},nu.prototype.applyPrimaryState=function(e){return d(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u=this;return p(this,(function(c){switch(c.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),M(this.queriesByTarget,(function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then((function(){return u.removeAndCleanupTarget(e),u.localStore.releaseTarget(e,!0)})),u.remoteStore.unlisten(e)})),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},nu.prototype.resetLimboDocuments=function(){var e=this;M(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Ke(Ne.comparator)},nu.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return d(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,d;return p(this,(function(p){switch(p.label){case 0:t=[],n=[],r=0,i=e,p.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queriesByTarget[o])&&0!==s.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return p.sent(),[4,this.localStore.allocateTarget(s[0].toTarget())];case 3:a=p.sent(),u=0,c=s,p.label=4;case 4:return u<c.length?(l=c[u],k(!!(h=this.queryViewsByQuery.get(l)),"No query view found for "+l),[4,this.synchronizeViewAndComputeSnapshot(h)]):[3,7];case 5:(f=p.sent()).snapshot&&n.push(f.snapshot),p.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return k(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return k(!!(d=p.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(d)];case 10:return a=p.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(d),o,!1)];case 11:p.sent(),p.label=12;case 12:t.push(a),p.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},nu.prototype.synthesizeTargetToQuery=function(e){return new Do(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,bo.First,e.startAt,e.endAt)},nu.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},nu.prototype.applyTargetState=function(e,t,n){return d(this,void 0,void 0,(function(){var r,i;return p(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return T("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=ns.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:I("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},nu.prototype.applyActiveTargetsChange=function(e,t){return d(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h=this;return p(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(l=r[n],k(!this.queriesByTarget[l],"Trying to add an already active target"),[4,this.localStore.getTarget(l)]):[3,6];case 2:return k(!!(i=f.sent()),"Query data for active target "+l+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:a=function(e){return p(this,(function(t){switch(t.label){case 0:return s.queriesByTarget[e]?[4,s.localStore.releaseTarget(e,!1).then((function(){h.remoteStore.unlisten(e),h.removeAndCleanupTarget(e)})).catch(zi)]:[2,"continue"];case 1:return t.sent(),[2]}}))},s=this,u=0,c=t,f.label=7;case 7:return u<c.length?(l=c[u],[5,a(l)]):[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},nu.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},nu.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},nu.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return dt().add(t.key);var n=dt(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);k(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},nu),eu=(tu.prototype.isAuthenticated=function(){return null!=this.uid},tu.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},tu.prototype.isEqual=function(e){return e.uid===this.uid},tu.UNAUTHENTICATED=new tu(null),tu.GOOGLE_CREDENTIALS=new tu("google-credentials-uid"),tu.FIRST_PARTY=new tu("first-party-uid"),tu);function tu(e){this.uid=e}function nu(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new yr((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new Ke(Ne.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Mi,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=xt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Ea.Unknown}function ru(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new da(this.asyncQueue,me.RetryTransaction)}function iu(e,t){return k(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),"firestore_clients_"+e+"_"+t}function ou(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function au(e,t){return"firestore_targets_"+e+"_"+t}var su="SharedClientState",uu=(bu.fromWebStorageEntry=function(e,t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new D(r.error.code,r.error.message)),i?new bu(e,t,r.state,o):(E(su,"Failed to parse mutation state for ID '"+t+"': "+n),null)},bu.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},bu),cu=(vu.fromWebStorageEntry=function(e,t){var n=JSON.parse(t),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new D(n.error.code,n.error.message)),r?new vu(e,n.state,i):(E(su,"Failed to parse target state for ID '"+e+"': "+t),null)},vu.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},vu),lu=(gu.fromWebStorageEntry=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=mt(),o=0;r&&o<n.activeTargetIds.length;++o)r=vo(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new gu(e,i):(E(su,"Failed to parse client data for instance '"+e+"': "+t),null)},gu),hu=(yu.fromWebStorageEntry=function(e){var t=JSON.parse(e);return"object"==typeof t&&t.onlineState in Ea&&"string"==typeof t.clientId?new yu(t.clientId,Ea[t.onlineState]):(E(su,"Failed to parse online state: "+e),null)},yu),fu=(mu.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},mu.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},mu.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},mu),du=(pu.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},pu.prototype.start=function(){return d(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l,h=this;return p(this,(function(f){switch(f.label){case 0:return k(!this.started,"WebStorageSharedClientState already started"),k(null!==this.syncEngine,"syncEngine property must be set before calling start()"),k(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(iu(this.persistenceKey,r)))&&(o=lu.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,c=this.earlyEvents;u<c.length;u++)l=c[u],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},pu.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},pu.prototype.getAllActiveQueryTargets=function(){var e=mt();return L(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},pu.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},pu.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},pu.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},pu.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(au(this.persistenceKey,e));if(n){var r=cu.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},pu.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},pu.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},pu.prototype.clearQueryState=function(e){this.removeItem(au(this.persistenceKey,e))},pu.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},pu.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},pu.prototype.setOnlineState=function(e){this.persistOnlineState(e)},pu.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},pu.prototype.getItem=function(e){var t=this.storage.getItem(e);return T(su,"READ",e,t),t},pu.prototype.setItem=function(e,t){T(su,"SET",e,t),this.storage.setItem(e,t)},pu.prototype.removeItem=function(e){T(su,"REMOVE",e),this.storage.removeItem(e)},pu.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(T(su,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void E("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return d(t,void 0,void 0,(function(){var t,n,r,i,o,a;return p(this,(function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(k(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=Ee.INVALID;if(null!=e)try{var n=JSON.parse(e);k("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){E(su,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==Ee.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(pu.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),pu.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},pu.prototype.persistMutationState=function(e,t,n){var r=new uu(this.currentUser,e,t,n),i=ou(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},pu.prototype.removeMutationState=function(e){var t=ou(this.persistenceKey,this.currentUser,e);this.removeItem(t)},pu.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Ea[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},pu.prototype.persistQueryTargetState=function(e,t,n){var r=au(this.persistenceKey,e),i=new cu(e,t,n);this.setItem(r,i.toWebStorageJSON())},pu.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},pu.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return k(null!==n,"Cannot parse client state key '"+e+"'"),lu.fromWebStorageEntry(n,t)},pu.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);k(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return uu.fromWebStorageEntry(new eu(i),r,t)},pu.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);k(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return cu.fromWebStorageEntry(r,t)},pu.prototype.fromWebStorageOnlineState=function(e){return hu.fromWebStorageEntry(e)},pu.prototype.handleMutationBatchEvent=function(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){return e.user.uid!==this.currentUser.uid?(T(su,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},pu.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},pu.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach((function(e){return d(n,void 0,void 0,(function(){return p(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return d(n,void 0,void 0,(function(){return p(this,(function(t){return i.has(e)||a.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,a)},pu.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},pu);function pu(e,t,n,r,i){if(this.queue=e,this.platform=t,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!pu.isAvailable(this.platform))throw new D(A.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=iu(this.persistenceKey,this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+this.persistenceKey,this.activeClients[this.localClientId]=new fu,this.clientStateKeyRe=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+this.persistenceKey,this.platform.window.addEventListener("storage",this.storageListener)}function mu(){this.activeTargetIds=mt()}function yu(e,t){this.clientId=e,this.onlineState=t}function gu(e,t){this.clientId=e,this.activeTargetIds=t}function vu(e,t,n){this.targetId=e,this.state=t,k(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}function bu(e,t,n,r){this.user=e,this.batchId=t,this.state=n,k(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}function wu(){}var Tu=(xu.prototype.addPendingMutation=function(e){},xu.prototype.updateMutationState=function(e,t,n){},xu.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},xu.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},xu.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},xu.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},xu.prototype.clearQueryState=function(e){delete this.queryState[e]},xu.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},xu.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},xu.prototype.start=function(){return this.localState=new fu,Promise.resolve()},xu.prototype.handleUserChange=function(e,t,n){},xu.prototype.setOnlineState=function(e){},xu.prototype.shutdown=function(){},xu.prototype.writeSequenceNumber=function(e){},xu),Eu=(_u.prototype.lruParams=function(){return Hi.withCacheSize(this.cacheSizeBytes)},_u),Su=(Du.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new pe,r=new pe,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},Du.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},Du.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Eu?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},Du.prototype.canFallback=function(e){return e instanceof D?e.code===A.FAILED_PRECONDITION||e.code===A.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},Du.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new D(A.FAILED_PRECONDITION,"The client has already been terminated.")},Du.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=eo.buildStoragePrefix(this.databaseInfo),i=new Bs(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return d(n,void 0,void 0,(function(){var n,o;return p(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!du.isAvailable(this.platform))throw new D(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new du(this.asyncQueue,this.platform,r,this.clientId,e):new Tu,[4,eo.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),[2,(this.persistence=o).referenceDelegate.garbageCollector]}}))}))}))},Du.prototype.startMemoryPersistence=function(){return this.persistence=ca.createEagerPersistence(this.clientId),this.sharedClientState=new Tu,Promise.resolve(null)},Du.prototype.initializeRest=function(e,t){var n=this;return T("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return d(n,void 0,void 0,(function(){var n,i,o,a,s,u,c=this;return p(this,(function(l){switch(l.label){case 0:return n=new jo,this.localStore=new Fi(this.persistence,n,e),[4,this.localStore.start()];case 1:return l.sent(),t&&(this.lruScheduler=new Yi(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),a=new xa(this.asyncQueue,r,this.credentials,o),s=function(e){return c.syncEngine.applyOnlineStateChange(e,Sa.RemoteStore)},u=function(e){return c.syncEngine.applyOnlineStateChange(e,Sa.SharedClientState)},this.remoteStore=new ms(this.localStore,a,this.asyncQueue,s,i),this.syncEngine=new Zs(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new qs(this.syncEngine),[4,this.sharedClientState.start()];case 2:return l.sent(),[4,this.remoteStore.start()];case 3:return l.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return d(c,void 0,void 0,(function(){return p(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return d(c,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},Du.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},Du.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},Du.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return d(e,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},Du.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new pe;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},Du.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new js(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},Du.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},Du.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof dr)return e;if(e instanceof pr)return null;throw new D(A.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},Du.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return d(t,void 0,void 0,(function(){var t,n,r;return p(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new Ws(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},Du.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},Du.prototype.databaseId=function(){return this.databaseInfo.databaseId},Du.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},Du.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(Du.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),Du.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},Du),Iu=(Au.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},Au.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},Au.prototype.mute=function(){this.muted=!0},Au.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},Au),ku=(Nu.documentId=function(){return Nu._DOCUMENT_ID},Nu.prototype.isEqual=function(e){if(!(e instanceof Nu))throw $("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},Nu._DOCUMENT_ID=new Nu(Ce.keyField().canonicalString()),Nu),Cu=new RegExp("[~\\*/\\[\\]]");function Nu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new D(A.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+te(1,"element")+".")}(0,e);for(var n=0;n<e.length;++n)if(j("FieldPath","string",n,e[n]),0===e[n].length)throw new D(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ce(e)}function Au(e){this.observer=e,this.muted=!1}function Du(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=ne.newId()}function _u(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}function xu(){this.localState=new fu,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}function Ou(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e}var Pu=(Bu.prototype.getToken=function(){return Promise.resolve(null)},Bu.prototype.invalidateToken=function(){},Bu.prototype.setChangeListener=function(e){k(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(eu.UNAUTHENTICATED)},Bu.prototype.removeChangeListener=function(){k(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},Bu),Ru=(Vu.prototype.getToken=function(){var e=this;k(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new D(A.ABORTED,"getToken aborted due to token change.");return n?(k("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Ou(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},Vu.prototype.invalidateToken=function(){this.forceRefresh=!0},Vu.prototype.setChangeListener=function(e){k(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},Vu.prototype.removeChangeListener=function(){k(null!=this.tokenListener,"removeChangeListener() called twice"),k(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},Vu.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return k(null===e||"string"==typeof e,"Received invalid UID: "+e),new eu(e)},Vu),Mu=(Object.defineProperty(Uu.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),Uu),Lu=(Fu.prototype.getToken=function(){return Promise.resolve(new Mu(this.gapi,this.sessionIndex))},Fu.prototype.setChangeListener=function(e){e(eu.FIRST_PARTY)},Fu.prototype.removeChangeListener=function(){},Fu.prototype.invalidateToken=function(){},Fu);function Fu(e,t){this.gapi=e,this.sessionIndex=t}function Uu(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=eu.FIRST_PARTY}function Vu(e){var t=this;this.tokenListener=null,this.currentUser=eu.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}function Bu(){this.changeListener=null}function qu(e){return function(){if("object"==typeof e&&null!==e)for(var t=e,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return 1}}()}var ju,zu,Wu,Ku,Gu,Qu,Hu,Yu=(fc.delete=function(){return U("FieldValue.delete",arguments),Xu.instance},fc.serverTimestamp=function(){return U("FieldValue.serverTimestamp",arguments),Ju.instance},fc.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return B("FieldValue.arrayUnion",arguments,1),new $u(e)},fc.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return B("FieldValue.arrayRemove",arguments,1),new Zu(e)},fc.increment=function(e){return j("FieldValue.increment","number",1,e),V("FieldValue.increment",arguments,1),new ec(e)},fc.prototype.isEqual=function(e){return this===e},fc),Xu=(h(hc,Qu=Yu),hc.instance=new hc,hc),Ju=(h(lc,Gu=Yu),lc.instance=new lc,lc),$u=(h(cc,Ku=Yu),cc),Zu=(h(uc,Wu=Yu),uc),ec=(h(sc,zu=Yu),sc),tc=O(Yu,"Use FieldValue.<field>() instead."),nc=/^__.*__$/,rc=(ac.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new gn(e,this.data,this.fieldMask,t)):n.push(new yn(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new vn(e,this.fieldTransforms)),n},ac),ic=(oc.prototype.toMutations=function(e,t){var n=[new gn(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new vn(e,this.fieldTransforms)),n},oc);function oc(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function ac(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function sc(e){var t=zu.call(this,"FieldValue.increment")||this;return t._operand=e,t}function uc(e){var t=Wu.call(this,"FieldValue.arrayRemove")||this;return t._elements=e,t}function cc(e){var t=Ku.call(this,"FieldValue.arrayUnion")||this;return t._elements=e,t}function lc(){return Gu.call(this,"FieldValue.serverTimestamp")||this}function hc(){return Qu.call(this,"FieldValue.delete")||this}function fc(e){this._methodName=e}function dc(e){switch(e){case ju.Set:case ju.MergeSet:case ju.Update:return 1;case ju.Argument:case ju.ArrayArgument:return;default:throw I("Unexpected case for UserDataSource: "+e)}}(Hu=ju=ju||{})[Hu.Set=0]="Set",Hu[Hu.Update=1]="Update",Hu[Hu.MergeSet=2]="MergeSet",Hu[Hu.Argument=3]="Argument",Hu[Hu.ArrayArgument=4]="ArrayArgument";var pc=(vc.prototype.childContextForField=function(e){var t=null==this.path?null:this.path.child(e),n=new vc(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(e),n},vc.prototype.childContextForFieldPath=function(e){var t=null==this.path?null:this.path.child(e),n=new vc(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},vc.prototype.childContextForArray=function(e){return new vc(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},vc.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new D(A.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},vc.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},vc.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},vc.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(dc(this.dataSource)&&nc.test(e))throw this.createError('Document fields cannot begin and end with "__"')},vc),mc=function(e,t){this.databaseId=e,this.key=t},yc=(gc.prototype.parseSetData=function(e,t){var n=new pc(ju.Set,e,Ce.EMPTY_PATH);wc("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new rc(r,null,n.fieldTransforms)},gc.prototype.parseMergeData=function(e,t,n){var r=new pc(ju.MergeSet,e,Ce.EMPTY_PATH);wc("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new tt(Ce.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof ku)h=l._internalPath;else{if("string"!=typeof l)throw I("Expected stringOrFieldPath to be a string or a FieldPath");h=Ec(e,l)}if(!r.contains(h))throw new D(A.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=en.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=en.fromArray(r.fieldMask),o=r.fieldTransforms;return new rc(a,i,o)},gc.prototype.parseUpdateData=function(e,t){var n=this,r=new pc(ju.Update,e,Ce.EMPTY_PATH);wc("Data must be an object, but it was:",r,t);var i=new tt(Ce.comparator),o=lr.EMPTY;L(t,(function(t,a){var s=Ec(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Xu)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=en.fromSet(i);return new ic(o,a,r.fieldTransforms)},gc.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new pc(ju.Update,e,Ce.EMPTY_PATH),o=[Tc(e,t)],a=[n];if(r.length%2!=0)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Tc(e,r[s])),a.push(r[s+1]);var u=new tt(Ce.comparator),c=lr.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof Xu)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=en.fromSet(u);return new ic(c,p,i.fieldTransforms)},gc.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new pc(n?ju.ArrayArgument:ju.Argument,e,Ce.EMPTY_PATH),i=this.parseData(t,r);return k(null!=i,"Parsed data should not be null."),k(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},gc.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Sc(e);throw t.createError(n)}},gc.prototype.parseData=function(e,t){if(bc(e=this.runPreConverter(e,t)))return wc("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Yu)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==ju.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},gc.prototype.parseObject=function(e,t){var n=this,r=new Ke(ie);return F(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):L(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new lr(r)},gc.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=Pn.INSTANCE),n.push(s),r++}return new hr(n)},gc.prototype.parseSentinelFieldValue=function(e,t){if(!dc(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof Xu){if(t.dataSource!==ju.MergeSet)throw t.dataSource===ju.Update?(k(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof Ju)t.fieldTransforms.push(new tn(t.path,gs.instance));else if(e instanceof $u){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new vs(n);t.fieldTransforms.push(new tn(t.path,r))}else if(e instanceof Zu){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new bs(n);t.fieldTransforms.push(new tn(t.path,i))}else if(e instanceof ec){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new ws(o);t.fieldTransforms.push(new tn(t.path,a))}else I("Unknown FieldValue type: "+e)},gc.prototype.parseScalarValue=function(e,t){if(null===e)return Pn.INSTANCE;if("number"==typeof e)return new(vo(e)?nr:rr)(e);if("boolean"==typeof e)return Rn.of(e);if("string"==typeof e)return new ir(e);if(e instanceof Date)return new or(ze.fromDate(e));if(e instanceof ze)return new or(new ze(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof ys)return new cr(e);if(e instanceof be)return new sr(e);if(e instanceof mc)return new ur(e.databaseId,e.key);throw t.createError("Unsupported field value: "+Y(e))},gc.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new pc(ju.Argument,e,Ce.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},gc);function gc(e){this.preConverter=e}function vc(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}function bc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ze||e instanceof ys||e instanceof be||e instanceof mc||e instanceof Yu)}function wc(e,t,n){if(!bc(n)||!H(n)){var r=Y(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Tc(e,t){if(t instanceof ku)return t._internalPath;if("string"==typeof t)return Ec(e,t);throw new D(A.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ec(e,t){try{return function(e){if(0<=e.search(Cu))throw new D(A.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ku.bind.apply(ku,m([void 0],e.split("."))))}catch(t){throw new D(A.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Sc(t);throw new D(A.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Sc(e){return e instanceof Error?e.message:e.toString()}var Ic,kc=Hi.COLLECTION_DISABLED,Cc=(Kc.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},Kc),Nc=(Wc.prototype.settings=function(e){if(V("Firestore.settings",arguments,1),j("Firestore.settings","object",1,e),P(e,"persistence"))throw new D(A.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Cc(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new D(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=t).credentials&&(this._credentials=function(e){if(!e)return new Pu;switch(e.type){case"gapi":var t=e.client;return k(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Lu(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new D(A.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},Wc.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},Wc.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},Wc.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new D(A.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&E("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=R(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Eu(this._settings.cacheSizeBytes,t))},Wc.prototype.clearPersistence=function(){var e=this,t=eo.buildStoragePrefix(this.makeDatabaseInfo()),n=new pe;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return d(e,void 0,void 0,(function(){var e;return p(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new D(A.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,eo.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},Wc.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(Wc.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),Wc.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},Wc.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),qu(e))return this.onSnapshotsInSyncInternal(e);j("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},Wc.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Iu({next:function(){e.next&&e.next()},error:function(e){throw I("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},Wc.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new wu),this._firestoreClient},Wc.prototype.makeDatabaseInfo=function(){return new de(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},Wc.prototype.configureClient=function(e){k(!!this._settings.host,"FirestoreSettings.host is not set"),k(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Su(N.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},Wc.prototype.createDataConverter=function(e){return new yc((function(t){if(t instanceof _c){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new D(A.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new mc(e,t._key)}return t}))},Wc.databaseIdFromApp=function(e){var t=e.options;if(!P(t,"projectId"))throw new D(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new D(A.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Te(n)},Object.defineProperty(Wc.prototype,"app",{get:function(){if(!this._firebaseApp)throw new D(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),Wc.prototype.collection=function(e){return V("Firestore.collection",arguments,1),j("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Qc(Ie.fromString(e),this)},Wc.prototype.doc=function(e){return V("Firestore.doc",arguments,1),j("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),_c.forPath(Ie.fromString(e),this)},Wc.prototype.collectionGroup=function(e){if(V("Firestore.collectionGroup",arguments,1),j("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new D(A.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Rc(new Do(Ie.EMPTY_PATH,e),this)},Wc.prototype.runTransaction=function(e){var t=this;return V("Firestore.runTransaction",arguments,1),j("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Ac(t,n))}))},Wc.prototype.batch=function(){return this.ensureClientConfigured(),new Dc(this)},Object.defineProperty(Wc,"logLevel",{get:function(){switch(b()){case y.DEBUG:return"debug";case y.ERROR:return"error";case y.SILENT:return"silent";default:return I("Unknown log level: "+b())}},enumerable:!0,configurable:!0}),Wc.setLogLevel=function(e){switch(V("Firestore.setLogLevel",arguments,1),j("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":w(y.DEBUG);break;case"error":w(y.ERROR);break;case"silent":w(y.SILENT);break;default:throw new D(A.INVALID_ARGUMENT,"Invalid log level: "+e)}},Wc.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},Wc),Ac=(zc.prototype.get=function(e){var t=this;V("Transaction.get",arguments,1);var n=$c("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return I("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof pr)return new Oc(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof dr)return new Oc(t._firestore,n._key,r,!1,!1,n._converter);throw I("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},zc.prototype.set=function(e,t,n){q("Transaction.set",arguments,2,3);var r=$c("Transaction.set",e,this._firestore);n=Yc("Transaction.set",n);var i=Zc(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},zc.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof t||t instanceof ku?(B("Transaction.update",arguments,3),r=$c("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(V("Transaction.update",arguments,2),r=$c("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},zc.prototype.delete=function(e){V("Transaction.delete",arguments,1);var t=$c("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},zc),Dc=(jc.prototype.set=function(e,t,n){q("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=$c("WriteBatch.set",e,this._firestore);n=Yc("WriteBatch.set",n);var i=Zc(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,pn.NONE)),this},jc.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof ku?(B("WriteBatch.update",arguments,3),r=$c("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(V("WriteBatch.update",arguments,2),r=$c("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,pn.exists(!0))),this},jc.prototype.delete=function(e){V("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=$c("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new bn(t._key,pn.NONE)),this},jc.prototype.commit=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},jc.prototype.verifyNotCommitted=function(){if(this._committed)throw new D(A.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},jc),_c=(qc.forPath=function(e,t,n){if(e.length%2!=0)throw new D(A.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new qc(new Ne(e),t,n)},Object.defineProperty(qc.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(qc.prototype,"parent",{get:function(){return new Qc(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(qc.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),qc.prototype.collection=function(e){if(V("DocumentReference.collection",arguments,1),j("DocumentReference.collection","non-empty string",1,e),!e)throw new D(A.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=Ie.fromString(e);return new Qc(this._key.path.child(t),this.firestore)},qc.prototype.isEqual=function(e){if(!(e instanceof qc))throw $("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)&&this._converter===e._converter},qc.prototype.set=function(e,t){q("DocumentReference.set",arguments,1,2),t=Yc("DocumentReference.set",t);var n=Zc(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,pn.NONE))},qc.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof ku?(B("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(V("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,pn.exists(!0)))},qc.prototype.delete=function(){return V("DocumentReference.delete",arguments,0),this._firestoreClient.write([new bn(this._key,pn.NONE)])},qc.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];q("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||qu(e[i])||(J("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),K("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=qu(e[i])?e[i]:(j("DocumentReference.onSnapshot","function",i,e[i]),z("DocumentReference.onSnapshot","function",i+1,e[i+1]),z("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},qc.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Iu({next:function(e){if(t.next){k(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Oc(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(Do.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},qc.prototype.get=function(e){var t=this;return q("DocumentReference.get",arguments,0,1),Jc("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new Oc(t.firestore,t._key,e,!0,e instanceof dr&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},qc.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new D(A.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new D(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},qc.prototype.withConverter=function(e){return new qc(this._key,this.firestore,e)},qc),xc=(Bc.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},Bc),Oc=(Vc.prototype.data=function(e){if(q("DocumentSnapshot.data",arguments,0,1),e=Xc("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new Pc(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),xn.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Vc.prototype.get=function(e,t){if(q("DocumentSnapshot.get",arguments,1,2),t=Xc("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(Tc("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,xn.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(Vc.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Vc.prototype,"ref",{get:function(){return new _c(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(Vc.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(Vc.prototype,"metadata",{get:function(){return new xc(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),Vc.prototype.isEqual=function(e){if(!(e instanceof Vc))throw $("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))&&this._converter===e._converter},Vc.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},Vc.prototype.toJSValue=function(e,t){if(e instanceof lr)return this.toJSObject(e,t);if(e instanceof hr)return this.toJSArray(e,t);if(e instanceof ur){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||E("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new _c(n,this._firestore,this._converter)}return e.value(t)},Vc.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},Vc),Pc=(h(Uc,Ic=Oc),Uc.prototype.data=function(e){var t=Ic.prototype.data.call(this,e);return k(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t},Uc),Rc=(Fc.prototype.where=function(e,t,n){var r;V("Query.where",arguments,3),X("Query.where",3,n),function(e,t,n,r){if(!t.some((function(e){return e===r})))throw new D(A.INVALID_ARGUMENT,"Invalid value "+Y(r)+" provided to function Query.where() for its "+ee(2)+" argument. Acceptable values: "+t.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,t);var i=Tc("Query.where",e),o=_o.fromString(t);if(i.isKeyField()){if(o===_o.ARRAY_CONTAINS||o===_o.ARRAY_CONTAINS_ANY)throw new D(A.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===_o.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new hr(a)}else r=this.parseDocumentIdValue(n)}else o!==_o.IN&&o!==_o.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n,o===_o.IN);var l=xo.create(i,o,r);return this.validateNewFilter(l),new Fc(this._query.addFilter(l),this.firestore,this._converter)},Fc.prototype.orderBy=function(e,t){var n;if(q("Query.orderBy",arguments,1,2),z("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)n=Fo.ASCENDING;else{if("desc"!==t)throw new D(A.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");n=Fo.DESCENDING}if(null!==this._query.startAt)throw new D(A.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new D(A.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=Tc("Query.orderBy",e),i=new Vo(r,n);return this.validateNewOrderBy(i),new Fc(this._query.addOrderBy(i),this.firestore,this._converter)},Fc.prototype.limit=function(e){return V("Query.limit",arguments,1),j("Query.limit","number",1,e),Z("Query.limit",1,e),new Fc(this._query.withLimitToFirst(e),this.firestore,this._converter)},Fc.prototype.limitToLast=function(e){return V("Query.limitToLast",arguments,1),j("Query.limitToLast","number",1,e),Z("Query.limitToLast",1,e),new Fc(this._query.withLimitToLast(e),this.firestore,this._converter)},Fc.prototype.startAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];B("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,t,!0);return new Fc(this._query.withStartAt(r),this.firestore,this._converter)},Fc.prototype.startAfter=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];B("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,t,!1);return new Fc(this._query.withStartAt(r),this.firestore,this._converter)},Fc.prototype.endBefore=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];B("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,t,!0);return new Fc(this._query.withEndAt(r),this.firestore,this._converter)},Fc.prototype.endAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];B("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,t,!1);return new Fc(this._query.withEndAt(r),this.firestore,this._converter)},Fc.prototype.isEqual=function(e){if(!(e instanceof Fc))throw $("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},Fc.prototype.withConverter=function(e){return new Fc(this._query,this.firestore,e)},Fc.prototype.boundFromDocOrFields=function(e,t,n,r){if(X(e,1,t),t instanceof Oc){if(0<n.length)throw new D(A.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new D(A.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},Fc.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new ur(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof ar)throw new D(A.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new D(A.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Uo(r,n)},Fc.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new D(A.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new D(A.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(Ie.fromString(a));if(!Ne.isDocumentKey(s))throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new Ne(s);i.push(new ur(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new Uo(i,n)},Fc.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];q("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||qu(e[i])||(J("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),K("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=qu(e[i])?e[i]:(j("Query.onSnapshot","function",i,e[i]),z("Query.onSnapshot","function",i+1,e[i+1]),z("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},Fc.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Iu({next:function(e){t.next&&t.next(new Mc(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},Fc.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new D(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},Fc.prototype.get=function(e){var t=this;return q("Query.get",arguments,0,1),Jc("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new Mc(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},Fc.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new D(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},Fc.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(Ie.fromString(e));if(!Ne.isDocumentKey(t))throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new ur(this.firestore._databaseId,new Ne(t))}if(e instanceof _c){var n=e;return new ur(this.firestore._databaseId,n._key)}throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Y(e)+".")},Fc.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new D(A.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new D(A.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=e.indexOf(null))throw new D(A.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(0<e.filter((function(e){return Number.isNaN(e)})).length)throw new D(A.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},Fc.prototype.validateNewFilter=function(e){if(e instanceof xo){var t=[_o.ARRAY_CONTAINS,_o.ARRAY_CONTAINS_ANY],n=[_o.IN,_o.ARRAY_CONTAINS_ANY],r=0<=t.indexOf(e.op),i=0<=n.indexOf(e.op);if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new D(A.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new D(A.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new D(A.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},Fc.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},Fc.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new D(A.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},Fc),Mc=(Object.defineProperty(Lc.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(Lc.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(Lc.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),Lc.prototype.forEach=function(e,t){var n=this;q("QuerySnapshot.forEach",arguments,1,2),j("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(Lc.prototype,"query",{get:function(){return new Rc(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Lc.prototype.docChanges=function(e){e&&(J("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),K("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new D(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var a=new Pc(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return k(t.type===Wa.Added,"Invalid event type for first snapshot"),k(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==Wa.Metadata})).map((function(t){var i=new Pc(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,s=-1;return t.type!==Wa.Added&&(k(0<=(o=a.indexOf(t.doc.key)),"Index for document not found"),a=a.delete(t.doc.key)),t.type!==Wa.Removed&&(s=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case Wa.Added:return"added";case Wa.Modified:case Wa.Metadata:return"modified";case Wa.Removed:return"removed";default:return I("Unknown change type: "+e)}}(t.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},Lc.prototype.isEqual=function(e){if(!(e instanceof Lc))throw $("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)&&this._converter===e._converter},Lc.prototype.convertToDocumentImpl=function(e){return new Pc(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},Lc);function Lc(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new xc(n.hasPendingWrites,n.fromCache)}function Fc(e,t,n){this._query=e,this.firestore=t,this._converter=n}function Uc(){return null!==Ic&&Ic.apply(this,arguments)||this}function Vc(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}function Bc(e,t){this.hasPendingWrites=e,this.fromCache=t}function qc(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}function jc(e){this._firestore=e,this._mutations=[],this._committed=!1}function zc(e,t){this._firestore=e,this._transaction=t}function Wc(e,t){var n=this;if(this._firebaseApp=null,this._queue=new Le,this.INTERNAL={delete:function(){return d(n,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=Wc.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Ru(t)}else{var i=e;if(!i.projectId)throw new D(A.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new Te(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new Pu}this._settings=new Cc({}),this._dataConverter=this.createDataConverter(this._databaseId)}function Kc(e){if(void 0===e.host){if(void 0!==e.ssl)throw new D(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else W("settings","non-empty string","host",e.host),this.host=e.host,K("settings","boolean","ssl",e.ssl),this.ssl=R(e.ssl,!0);if(J("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),K("settings","object","credentials",e.credentials),this.credentials=e.credentials,K("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?E("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&E("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=R(e.timestampsInSnapshots,!0),K("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Hi.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==kc&&e.cacheSizeBytes<Hi.MINIMUM_CACHE_SIZE_BYTES)throw new D(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Hi.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}K("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}m(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(Mc.prototype.docChanges,e,{get:function(){return function(){throw new D(A.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var Gc,Qc=(h(Hc,Gc=Rc),Object.defineProperty(Hc.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Hc.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new _c(new Ne(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Hc.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),Hc.prototype.doc=function(e){if(q("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=ne.newId()),j("CollectionReference.doc","non-empty string",1,e),""===e)throw new D(A.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=Ie.fromString(e);return _c.forPath(this._query.path.child(t),this.firestore,this._converter)},Hc.prototype.add=function(e){V("CollectionReference.add",arguments,1),j("CollectionReference.add","object",1,this._converter?this._converter.toFirestore(e):e);var t=this.doc();return t.set(e).then((function(){return t}))},Hc.prototype.withConverter=function(e){return new Hc(this._path,this.firestore,e)},Hc);function Hc(e,t,n){var r=Gc.call(this,Do.atPath(e),t,n)||this;if((r._path=e).length%2!=1)throw new D(A.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}function Yc(e,t){if(void 0===t)return{merge:!1};if(J(e,t,["merge","mergeFields"]),K(e,"boolean","merge",t.merge),n=e,"mergeFields","a string or a FieldPath",void 0!==(r=t.mergeFields)&&function(e,t,n,r,i){if(!(r instanceof Array))throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+Y(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+Y(r[o]))}(n,"mergeFields",0,r,(function(e){return"string"==typeof e||e instanceof ku})),void 0!==t.mergeFields&&void 0!==t.merge)throw new D(A.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');var n,r;return t}function Xc(e,t){return void 0===t?{}:(J(e,t,["serverTimestamps"]),G(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Jc(e,t){z(e,"object",1,t),t&&(J(e,t,["source"]),G(e,0,"source",t.source,["default","server","cache"]))}function $c(e,t,n){if(t instanceof _c){if(t.firestore!==n)throw new D(A.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw $(e,"DocumentReference",1,t)}function Zc(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var el=O(Nc,"Use firebase.firestore() instead."),tl=O(Ac,"Use firebase.firestore().runTransaction() instead."),nl=O(Dc,"Use firebase.firestore().batch() instead."),rl=O(_c,"Use firebase.firestore().doc() instead."),il=O(Oc),ol=O(Pc),al=O(Rc),sl=O(Mc),ul=O(Qc,"Use firebase.firestore().collection() instead."),cl={Firestore:el,GeoPoint:ys,Timestamp:ze,Blob:we,Transaction:tl,WriteBatch:nl,DocumentReference:rl,DocumentSnapshot:il,Query:al,QueryDocumentSnapshot:ol,QuerySnapshot:sl,CollectionReference:ul,FieldPath:ku,FieldValue:tc,setLogLevel:Nc.setLogLevel,CACHE_SIZE_UNLIMITED:kc},ll=(El.prototype.addCallback=function(e){},El.prototype.shutdown=function(){},El),hl=(Tl.prototype.addCallback=function(e){this.callbacks.push(e)},Tl.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},Tl.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},Tl.prototype.onNetworkAvailable=function(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},Tl.prototype.onNetworkUnavailable=function(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},Tl.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Tl),fl=(wl.prototype.onOpen=function(e){k(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},wl.prototype.onClose=function(e){k(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},wl.prototype.onMessage=function(e){k(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},wl.prototype.close=function(){this.closeFn()},wl.prototype.send=function(e){this.sendFn(e)},wl.prototype.callOnOpen=function(){k(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},wl.prototype.callOnClose=function(e){k(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},wl.prototype.callOnMessage=function(e){k(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},wl),dl="Connection",pl={BatchGetDocuments:"batchGet",Commit:"commit"},ml="gl-js/ fire/"+c,yl=(bl.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=ml},bl.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,a){var s=new u.XhrIo;s.listenOnce(u.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var t=s.getResponseJson();T(dl,"XHR received:",JSON.stringify(t)),o(t);break;case u.ErrorCode.TIMEOUT:T(dl,'RPC "'+e+'" timed out'),a(new D(A.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(T(dl,'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),0<n){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=(c=r.status.toLowerCase().replace("_","-"),0<=Object.values(A).indexOf(c)?c:A.UNKNOWN);a(new D(i,r.message))}else a(new D(A.UNKNOWN,"Server responded with status "+s.getStatus()))}else T(dl,'RPC "'+e+'" failed'),a(new D(A.UNAVAILABLE,"Connection failed."));break;default:I('RPC "'+e+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{T(dl,'RPC "'+e+'" completed.')}var c}));var c=f({},t);delete c.database;var l=JSON.stringify(c);T(dl,"XHR sending: ",i+" "+l);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),s.send(i,"POST",l,h,15)}))},bl.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},bl.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=u.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function s(e,t){c.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))}T(dl,"Creating WebChannel: "+o+" "+i);var c=r.createWebChannel(o,i),l=!1,h=!1,f=new fl({sendFn:function(e){h?T(dl,"Not sending because WebChannel is closed:",e):(l||(T(dl,"Opening WebChannel transport."),c.open(),l=!0),T(dl,"WebChannel sending:",e),c.send(e))},closeFn:function(){return c.close()}});return s(u.WebChannel.EventType.OPEN,(function(){h||T(dl,"WebChannel transport opened.")})),s(u.WebChannel.EventType.CLOSE,(function(){h||(h=!0,T(dl,"WebChannel transport closed"),f.callOnClose())})),s(u.WebChannel.EventType.ERROR,(function(e){h||(h=!0,T(dl,"WebChannel transport errored:",e),f.callOnClose(new D(A.UNAVAILABLE,"The operation could not be completed")))})),s(u.WebChannel.EventType.MESSAGE,(function(e){var t;if(!h){var n=e.data[0];k(!!n,"Got a webchannel message without data.");var r=n.error||(null===(t=n[0])||void 0===t?void 0:t.error);if(r){T(dl,"WebChannel received error:",r);var i=r.status,o=function(){var e=Ua[i];if(void 0!==e)return za(e)}(),a=r.message;void 0===o&&(o=A.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),h=!0,f.callOnClose(new D(o,a)),c.close()}else T(dl,"WebChannel received:",n),f.callOnMessage(n)}})),setTimeout((function(){f.callOnOpen()}),0),f},bl.prototype.makeUrl=function(e){var t=pl[e];return k(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},bl),gl=(Object.defineProperty(vl.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(vl.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),vl.prototype.loadConnection=function(e){return Promise.resolve(new yl(e))},vl.prototype.newConnectivityMonitor=function(){return new(hl.isAvailable()?hl:ll)},vl.prototype.newSerializer=function(e){return new Bs(e,{useProto3Json:!0})},vl.prototype.formatJSON=function(e){return JSON.stringify(e)},vl.prototype.atob=function(e){return atob(e)},vl.prototype.btoa=function(e){return btoa(e)},vl);function vl(){this.base64Available="undefined"!=typeof atob}function bl(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}function wl(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}function Tl(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}function El(){}function Sl(e){var t;e.INTERNAL.registerComponent(new s.Component("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new Nc(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps((k((t=cl)&&"object"==typeof t,"shallowCopy() expects object parameter."),f({},t)))),e.registerVersion("@firebase/firestore","1.11.1")}N.setPlatform(new gl),Sl(i),t.registerFirestore=Sl}).call(this,n(23))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",(function(){return ar})),n.d(t,"EventType",(function(){return sr})),n.d(t,"WebChannel",(function(){return ur})),n.d(t,"XhrIo",(function(){return cr})),n.d(t,"createWebChannelTransport",(function(){return or}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function l(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function f(e){return"array"==h(e)}function d(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now||function(){return+new Date};function E(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,(e.prototype.constructor=e).xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function S(){this.j=this.j,this.i=this.i}S.prototype.j=!1,S.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[m]||(this[m]=++y))},S.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var I=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},k=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function C(e){return Array.prototype.concat.apply([],arguments)}function N(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e){return/^[\s\xa0]*$/.test(e)}var D,_=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function x(e,t){return-1!=e.indexOf(t)}function O(e,t){return e<t?-1:t<e?1:0}e:{var P=a.navigator;if(P){var R=P.userAgent;if(R){D=R;break e}}D=""}function M(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L(e){var t,n={};for(t in e)n[t]=e[t];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V(e){return V[" "](e),e}V[" "]=l;var B,q,j=x(D,"Opera"),z=x(D,"Trident")||x(D,"MSIE"),W=x(D,"Edge"),K=W||z,G=x(D,"Gecko")&&!(x(D.toLowerCase(),"webkit")&&!x(D,"Edge"))&&!(x(D,"Trident")||x(D,"MSIE"))&&!x(D,"Edge"),Q=x(D.toLowerCase(),"webkit")&&!x(D,"Edge");function H(){var e=a.document;return e?e.documentMode:void 0}e:{var Y="",X=(q=D,G?/rv:([^\);]+)(\)|;)/.exec(q):W?/Edge\/([\d\.]+)/.exec(q):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):Q?/WebKit\/(\S+)/.exec(q):j?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(X&&(Y=X?X[1]:""),z){var J=H();if(null!=J&&J>parseFloat(Y)){B=String(J);break e}}B=Y}var $,Z={};function ee(e){return t=e,n=Z,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(){for(var t=0,n=_(String(B)).split("."),r=_(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=O(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||O(0==a[2].length,0==s[2].length)||O(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}();var t,n}var te=a.document;$=te&&z?H()||("CSS1Compat"==te.compatMode?parseInt(B,10):5):void 0;var ne=!z||9<=Number($),re=z&&!ee("9"),ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(e){}return e}();function oe(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function ae(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(G){e:{try{V(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:se[e.pointerType]||"",(this.c=e).defaultPrevented&&this.b()}}oe.prototype.b=function(){this.Ia=!1},E(ae,oe);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.b=function(){ae.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var ue="closure_listenable_"+(1e6*Math.random()|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ce,this.X=this.Z=!1}function he(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function fe(e){this.src=e,this.a={},this.b=0}function de(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=I(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}fe.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new le(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ye={};function ge(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(f(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Ie(r),t&&t[ue]?t.Aa(n,r,p(i)?!!i.capture:!!i,o):ve(t,n,r,!0,i,o)}(e,t,n,r,i);if(f(t)){for(var o=0;o<t.length;o++)ge(e,t[o],n,r,i);return null}return n=Ie(n),e&&e[ue]?e.za(t,n,p(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!ne)return null;var s,u,c=Ee(e);if(c||(e[me]=c=new fe(e)),(n=c.add(t,n,r,a,o)).proxy)return n;if(s=Te,r=u=ne?function(e){return s.call(u.src,u.listener,e)}:function(e){if(!(e=s.call(u.src,u.listener,e)))return e},(n.proxy=r).src=e,r.listener=n,e.addEventListener)ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(we(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function be(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[ue])de(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(we(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ee(t))?(de(n,e),0==n.b&&(n.src=null,t[me]=null)):he(e)}}}function we(e){return e in ye?ye[e]:ye[e]="on"+e}function Te(e,t){return!!e.X||function(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&be(e),n.call(r,t)}(e,ne?new ae(t,this):t=new ae(t||c("window.event"),this))}function Ee(e){return(e=e[me])instanceof fe?e:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(e){return"function"==h(e)?e:(e[Se]||(e[Se]=function(t){return e.handleEvent(t)}),e[Se])}function ke(){S.call(this),this.c=new fe(this),(this.J=this).B=null}function Ce(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&de(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}E(ke,S),ke.prototype[ue]=!0,(r=ke.prototype).addEventListener=function(e,t,n,r){ge(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(f(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Ie(r),t&&t[ue]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=pe(a=t.a[n],r,i,o))&&(he(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):(t=t&&Ee(t))&&(n=t.a[n.toString()],t=-1,n&&(t=pe(n,r,i,o)),(r=-1<t?n[t]:null)&&be(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var i=e;U(e=new oe(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Ce(a,r,!0,e)&&i}if(i=Ce(a=e.a=n,r,!0,e)&&i,i=Ce(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ce(a=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(ke.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)he(n[r]);delete t.a[e],t.b--}}this.B=null},r.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ne=a.JSON.stringify;function Ae(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function De(){this.b=this.a=null}Ae.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var _e,xe=new Ae((function(){return new Oe}),(function(e){e.reset()}));function Oe(){this.next=this.b=this.a=null}function Pe(e){a.setTimeout((function(){throw e}),0)}function Re(e,t){var n;_e||(n=a.Promise.resolve(void 0),_e=function(){n.then(Fe)}),Me||(_e(),Me=!0),Le.add(e,t)}De.prototype.add=function(e,t){var n=xe.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Oe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var Me=!(Oe.prototype.reset=function(){this.next=this.b=this.a=null}),Le=new De;function Fe(){for(var e;r=n=void 0,r=null,(n=Le).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),e=r;){try{e.a.call(e.b)}catch(e){Pe(e)}var t=xe;t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}var n,r;Me=!1}function Ue(e,t){ke.call(this),this.b=e||1,this.a=t||a,this.f=b(this.fb,this),this.g=T()}function Ve(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Be(e,t,n){if("function"==h(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function qe(e,t,n){S.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.$a,this),this.a=[]}function je(e){e.U=Be(e.b,e.c),e.f.apply(null,e.a)}function ze(e){S.call(this),this.b=e,this.a={}}E(Ue,ke),(r=Ue.prototype).ba=!1,r.L=null,r.fb=function(){if(this.ba){var e=T()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Ve(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=T())},r.G=function(){Ue.N.G.call(this),Ve(this),delete this.a},E(qe,S),(r=qe.prototype).ea=!1,r.U=null,r.Ta=function(e){this.a=arguments,this.U?this.ea=!0:je(this)},r.G=function(){qe.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,je(this))},E(ze,S);var We=[];function Ke(e,t,n,r){f(n)||(n&&(We[0]=n.toString()),n=We);for(var i=0;i<n.length;i++){var o=ge(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Ge(e){M(e.a,(function(e,t){this.a.hasOwnProperty(t)&&be(e)}),e),e.a={}}function Qe(){}ze.prototype.G=function(){ze.N.G.call(this),Ge(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var He=new ke;function Ye(e){oe.call(this,"serverreachability",e)}function Xe(e){He.dispatchEvent(new Ye(He))}function Je(e){oe.call(this,"statevent",e)}function $e(e){He.dispatchEvent(new Je(He))}function Ze(e){oe.call(this,"timingevent",e)}function et(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}E(Ye,oe),E(Je,oe),E(Ze,oe);var tt={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},nt={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function rt(){}function it(e){var t;return(t=e.a)||(t=e.a={}),t}function ot(){}rt.prototype.a=null;var at,st={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function ut(){oe.call(this,"d")}function ct(){oe.call(this,"c")}function lt(){}function ht(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new ze(this),this.O=ft,e=K?125:void 0,this.P=new Ue(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}E(ut,oe),E(ct,oe),E(lt,rt),at=new lt;var ft=45e3,dt={},pt={};function mt(e,t,n){e.F=1,e.f=Vt(Ot(t)),e.l=n,e.H=!0,gt(e,null)}function yt(e,t,n,r){e.F=1,e.f=Vt(Ot(t)),e.l=null,e.H=n,gt(e,r)}function gt(e,t){e.v=T(),bt(e),e.D=Ot(e.f),Ut(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new qe(b(e.Ja,e,e.a),e.J)),Ke(e.I,e.a,"readystatechange",e.cb),t=e.h?L(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),Xe()}function vt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=(a=n,u=s=void 0,s=(o=e).A,-1==(u=a.indexOf("\n",s))?pt:(s=Number(a.substring(s,u)),isNaN(s)?dt:(u+=1)+s>a.length?pt:(a=a.substr(u,s),o.A=u+s,a)));if(i==pt){4==t&&(e.c=4,$e(),r=!1);break}if(i==dt){e.c=4,$e(),r=!1;break}It(e,i)}var o,a,s,u;4==t&&0==n.length&&(e.c=1,$e(),r=!1),e.b=e.b&&r,r||(St(e),Et(e))}function bt(e){e.R=T()+e.O,wt(e,e.O)}function wt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=et(b(e.ab,e),t)}function Tt(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function Et(e){e.g.Ca()||e.m||e.g.na(e)}function St(e){Tt(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,Ve(e.P),Ge(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function It(e,t){try{e.g.Fa(e,t),Xe()}catch(e){}}function kt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||s(e))k(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(d(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Ct(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ct)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Nt(e,t){Dt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&At(e))}function At(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Dt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Dt(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function Dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ht.prototype).setTimeout=function(e){this.O=e},r.cb=function(e){e=e.target;var t=this.B;t&&3==On(e)?t.Ta():this.Ja(e)},r.Ja=function(e){try{if(e==this.a)e:{var t=On(this.a),n=this.a.ya();this.a.T();if(!(t<3||3==t&&!K&&!this.a.aa())){this.m||4!=t||7==n||Xe(),Tt(this);var r=this.a.T();this.o=r;var i=this.a.aa();if(this.b=200==r){if(this.S&&!this.s){t:{if(this.a){var o=Pn(this.a,"X-HTTP-Initial-Response");if(o&&!A(o)){var a=o;break t}}a=null}if(!a){this.b=!1,this.c=3,$e(),St(this),Et(this);break e}this.s=!0,It(this,a)}this.H?(vt(this,t,i),K&&this.b&&3==t&&(Ke(this.I,this.P,"tick",this.bb),this.P.start())):It(this,i),4==t&&St(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,bt(this)))}else 400==r&&0<i.indexOf("Unknown SID")?(this.c=3,$e()):(this.c=0,$e()),St(this),Et(this)}}}catch(e){}},r.bb=function(){if(this.a){var e=On(this.a),t=this.a.aa();this.A<t.length&&(Tt(this),vt(this,e,t),this.b&&4!=e&&bt(this))}},r.cancel=function(){this.m=!0,St(this)},r.ab=function(){this.i=null;var e=T();0<=e-this.R?(2!=this.F&&(Xe(),$e()),St(this),this.c=2,Et(this)):wt(this,this.R-e)},(r=Ct.prototype).C=function(){At(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return At(this),this.a.concat()},r.get=function(e,t){return Dt(this.b,e)?this.b[e]:t},r.set=function(e,t){Dt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var _t=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof xt?(this.h=void 0!==t?t:e.h,Pt(this,e.f),this.j=e.j,Rt(this,e.b),Mt(this,e.i),this.a=e.a,Lt(this,Zt(e.c)),this.g=e.g):e&&(n=String(e).match(_t))?(this.h=!!t,Pt(this,n[1]||"",!0),this.j=Bt(n[2]||""),Rt(this,n[3]||"",!0),Mt(this,n[4]),this.a=Bt(n[5]||"",!0),Lt(this,n[6]||"",!0),this.g=Bt(n[7]||"")):(this.h=!!t,this.c=new Ht(null,this.h))}function Ot(e){return new xt(e)}function Pt(e,t,n){e.f=n?Bt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Rt(e,t,n){e.b=n?Bt(t,!0):t}function Mt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Lt(e,t,n){var r,i;t instanceof Ht?(e.c=t,r=e.c,(i=e.h)&&!r.f&&(Yt(r),r.c=null,r.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Xt(this,t),$t(this,n,e))}),r)),r.f=i):(n||(t=qt(t,Gt)),e.c=new Ht(t,e.h))}function Ft(e,t,n){e.c.set(t,n)}function Ut(e,t,n){f(n)||(n=[String(n)]),$t(e.c,t,n)}function Vt(e){return Ft(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),e}function Bt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,jt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function jt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}xt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(qt(t,zt,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.j)&&e.push(qt(t,zt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(qt(n,"/"==n.charAt(0)?Kt:Wt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",qt(n,Qt)),e.join("")},xt.prototype.resolve=function(e){var t=Ot(this),n=!!e.f;n?Pt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Rt(t,e.b):n=null!=e.i;var r=e.a;if(n)Mt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(x(i,"./")||x(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Lt(t,Zt(e.c)):n=!!e.g,n&&(t.g=e.g),t};var zt=/[#\/\?@]/g,Wt=/[#\?:]/g,Kt=/[#\?]/g,Gt=/[#\?@]/g,Qt=/#/g;function Ht(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Yt(e){e.a||(e.a=new Ct,e.b=0,e.c&&function(t){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];a=o,s=i?decodeURIComponent(i.replace(/\+/g," ")):"",e.add(decodeURIComponent(a.replace(/\+/g," ")),s)}}var a,s}(e.c))}function Xt(e,t){Yt(e),t=en(e,t),Dt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Nt(e.a,t))}function Jt(e,t){return Yt(e),t=en(e,t),Dt(e.a.b,t)}function $t(e,t,n){Xt(e,t),0<n.length&&(e.c=null,e.a.set(en(e,t),N(n)),e.b+=n.length)}function Zt(e){var t=new Ht;return t.c=e.c,e.a&&(t.a=new Ct(e.a),t.b=e.b),t}function en(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function tn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function nn(e){var t=e.a.F.a;if(null!=t)$e(),t?($e(),Kn(e.a,e,!1)):($e(),Kn(e.a,e,!0));else{e.b=new ht(e,void 0,void 0),e.b.h=e.h,t=Xn(t=e.a,t.Y()?e.f:null,e.i),$e(),Ut(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Ft(t,n,r),yt(e.b,t,!1,e.f)}}function rn(){this.a=this.b=null}function on(){this.a=new Ct}function an(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++y)):t.charAt(0)+e}function sn(e,t){this.b=e,this.a=t}function un(e){this.g=e||cn,e=a.PerformanceNavigationTiming?0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new on),this.b=null,this.c=[]}(r=Ht.prototype).add=function(e,t){Yt(this),this.c=null,e=en(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){Yt(this),this.a.forEach((function(n,r){k(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.K=function(){Yt(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){Yt(this);var t=[];if(s(e))Jt(this,e)&&(t=C(t,this.a.get(en(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=C(t,e[n])}return t},r.set=function(e,t){return Yt(this),this.c=null,Jt(this,e=en(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},E((function(){}),(function(){})),(r=tn.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Pn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Pn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Hn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Hn(t,2)}else 1==this.M&&(this.g?$e():"11111"==t?($e(),this.g=!0,(!z||10<=Number($))&&(this.c=200,this.b.cancel(),$e(),Kn(this.a,this,!0))):($e(),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,nn(this)):1==this.M&&(this.g?($e(),Kn(this.a,this,!0)):($e(),Kn(this.a,this,!1)));else{0==this.M?$e():1==this.M&&$e();var e=this.a;e.m=this.c,Hn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},on.prototype.add=function(e){this.a.set(an(e),e)},on.prototype.C=function(){return this.a.C()};var cn=10;function ln(e,t){!e.a&&(x(t,"spdy")||x(t,"quic")||x(t,"h2"))&&(e.f=e.g,e.a=new on,e.b&&(pn(e,e.b),e.b=null))}function hn(e){return e.b||e.a&&e.a.a.c>=e.f}function fn(e){return e.b?1:e.a?e.a.a.c:0}function dn(e,t){return e.b?e.b==t:!!e.a&&(t=an(t),Dt(e.a.a.b,t))}function pn(e,t){e.a?e.a.add(t):e.b=t}function mn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=an(t),n=Dt(e.a.a.b,n)),n&&Nt(e.a.a,an(t)))}function yn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null==e.a||0==e.a.a.c)return N(e.c);var t=e.c;return k(e.a.C(),(function(e){t=t.concat(e.j)})),t}function gn(){}function vn(){this.a=new gn}function bn(e,t,n){var r=n||"";try{kt(e,(function(e,n){var i=e;p(e)&&(i=Ne(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function wn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}un.prototype.cancel=function(){var e;this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(k(this.a.C(),(function(e){e.cancel()})),(e=this.a.a).b={},e.a.length=0,e.c=0)},gn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},gn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var Tn=a.JSON.parse;function En(e){ke.call(this),this.headers=new Ct,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Sn,this.D=this.F=!1}E(En,ke);var Sn="",In=/^https?$/i,kn=["POST","PUT"];function Cn(e){return"content-type"==e.toLowerCase()}function Nn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,An(e),_n(e)}function An(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Dn(e){if(e.b&&void 0!==o&&(!e.s[1]||4!=On(e)||2!=e.T()))if(e.l&&4==On(e))Be(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==On(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.A).match(_t)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!In.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var c=2<On(e)?e.a.statusText:""}catch(e){c=""}e.f=c+" ["+e.T()+"]",An(e)}}finally{_n(e)}}}function _n(e,t){if(e.a){xn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function xn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function On(e){return e.a?e.a.readyState:0}function Pn(e,t){return e.a?e.a.getResponseHeader(t):null}function Rn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(o="",M(n,(function(e,t){o+=t,o+=":",o+=e,o+="\r\n"})),n=o,s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}var o;return Ft(e,t,n),e}function Mn(e){this.f=[],this.F=new rn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!c("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=c("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=c("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=c("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new un(e&&e.concurrentRequestLimit),this.ja=new vn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Ln(e){if(Fn(e),3==e.u){var t=e.P++,n=Ot(e.B);Ft(n,"SID",e.H),Ft(n,"RID",t),Ft(n,"TYPE","terminate"),qn(e,n),(t=new ht(e,t,void 0)).F=2,t.f=Vt(Ot(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=T(),bt(t)}Yn(e)}function Fn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),Gn(e),e.b.cancel(),e.h&&(u(e.h)&&a.clearTimeout(e.h),e.h=null)}function Un(e,t){e.f.push(new sn(e.Qa++,t)),3==e.u&&Vn(e)}function Vn(e){hn(e.b)||e.h||(e.h=!0,Re(e.Ha,e),e.A=0)}function Bn(e,t){var n;n=t?t.W:e.P++;var r=Ot(e.B);Ft(r,"SID",e.H),Ft(r,"RID",n),Ft(r,"AID",e.O),qn(e,r),e.g&&e.i&&Rn(r,e.g,e.i),n=new ht(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=jn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),pn(e.b,n),mt(n,r,t)}function qn(e,t){e.c&&kt({},(function(e,n){Ft(t,n,e)}))}function jn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{bn(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function zn(e){e.a||e.l||(e.S=1,Re(e.Ga,e),e.v=0)}function Wn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=et(b(e.Ga,e),Qn(e,e.v)),e.v++,1)}function Kn(e,t,n){var r=t.l;r&&ln(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Xn(e,null,e.ha),Vn(e)}function Gn(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function Qn(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function Hn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.eb,e);n||(n=new xt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Pt(n,"https"),Vt(n)),function(e,t){var n=new Qe;if(a.Image){var r=new Image;r.onload=w(wn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(wn,n,r,"TestLoadImage: error",!1,t),r.onabort=w(wn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(wn,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else $e();e.u=0,e.c&&e.c.ta(t),Yn(e),Fn(e)}function Yn(e){e.u=0,e.m=-1,e.c&&(0==yn(e.b).length&&0==e.f.length||(e.b.c.length=0,N(e.f),e.f.length=0),e.c.sa())}function Xn(e,t,n){var r,i,o,s,u,c,l=(r=n)instanceof xt?Ot(r):new xt(r,void 0);if(""!=l.b)t&&Rt(l,t+"."+l.b),Mt(l,l.i);else{var h,f=a.location;h=t?t+"."+f.hostname:f.hostname,i=f.protocol,o=h,s=+f.port,u=n,c=new xt(null,void 0),i&&Pt(c,i),o&&Rt(c,o),s&&Mt(c,s),u&&(c.a=u),l=c}return e.V&&M(e.V,(function(e,t){Ft(l,t,e)})),t=e.j,n=e.I,t&&n&&Ft(l,t,n),Ft(l,"VER",e.wa),qn(e,l),l}function Jn(){}function $n(){if(z&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function Zn(e,t){ke.call(this),this.a=new Mn(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!A(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new nr(this)}function er(e){ut.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function tr(){ct.call(this),this.status=1}function nr(e){this.a=e}(r=En.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?it(this.H):it(at),this.a.onreadystatechange=b(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void Nn(this,e)}e=n||"";var i,o=new Ct(this.headers);r&&kt(r,(function(e,t){o.set(t,e)})),r=function(e){e:{for(var t=Cn,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:s(e)?e.charAt(t):e[t]}(o.K()),n=a.FormData&&e instanceof a.FormData,0<=I(kn,t)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.D=(i=this.a,z&&ee(9)&&u(i.timeout)&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ba,this)):this.m=Be(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){Nn(this,e)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),_n(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_n(this,!0)),En.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?Dn(this):this.Za())},r.Za=function(){Dn(this)},r.T=function(){try{return 2<On(this)?this.a.status:-1}catch(e){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},r.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Tn(t)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},(r=Mn.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ht(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?U(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=jn(this,n,t),Ft(i=Ot(this.B),"RID",e),Ft(i,"CVER",22),this.o&&this.j&&Ft(i,"X-HTTP-Session-Id",this.j),qn(this,i),this.g&&r&&Rn(i,this.g,r),pn(this.b,n),this.W?(Ft(i,"$req",t),Ft(i,"SID","null"),n.S=!0,mt(n,i,null)):mt(n,i,t),this.u=2}}else 3==this.u&&(e?Bn(this,e):0==this.f.length||hn(this.b)||Bn(this))},r.Ga=function(){this.l=null,this.a=new ht(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Ot(this.pa);Ft(e,"RID","rpc"),Ft(e,"SID",this.H),Ft(e,"CI",this.ia?"0":"1"),Ft(e,"AID",this.O),qn(this,e),Ft(e,"TYPE","xmlhttp"),this.g&&this.i&&Rn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),yt(this.a,e,!0,this.ga)},r.Fa=function(e,t){if(0!=this.u&&(this.a==e||dn(this.b,e)))if(this.m=e.o,!e.s&&dn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(f(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Gn(this),this.a.cancel(),this.a=null}Wn(this),$e()}}else this.ra=t[1],0<this.ra-this.O&&t[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=et(b(this.Ya,this),6e3));if(fn(this.b)<=1&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Hn(this,11)}else if(!e.s&&this.a!=e||Gn(this),!A(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Pn(r,"X-Client-Wire-Protocol"))&&ln(this.b,i),this.j&&(r=Pn(r,"X-HTTP-Session-Id")))&&(this.I=r,Ft(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Xn(this,this.Y()?this.ga:null,this.ha),r.s?(mn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Tt(r),bt(r)),this.a=r):zn(this),0<this.f.length&&Vn(this)}else"stop"!=r[0]&&"close"!=r[0]||Hn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Hn(this,7):Ln(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Wn(this),$e())},r.na=function(e){var t,n,r=null;if(this.a==e){Gn(this),this.a=null;var i=2}else{if(!dn(this.b,e))return;r=e.j,mn(this.b,e),i=1}if(this.m=e.o,0!=this.u)if(e.b)1==i?(r=T()-e.v,He.dispatchEvent(new Ze(He,e.l&&e.l.length,this.A)),Vn(this)):zn(this);else{var o=e.c;if(3==o||0==o&&0<this.m||(1!=i||(n=e,fn((t=this).b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=n.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)||(t.h=et(b(t.Ha,t,n),Qn(t,t.A)),t.A++,0))))&&(2!=i||!Wn(this)))switch(r&&0<r.length&&(e=this.b,e.c=e.c.concat(r)),o){case 1:Hn(this,5);break;case 4:Hn(this,10);break;case 3:Hn(this,6);break;default:Hn(this,2)}}},r.eb=function(e){$e()},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new En(this.Ka)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Jn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},$n.prototype.a=function(e,t){return new Zn(e,t)},E(Zn,ke),(r=Zn.prototype).addEventListener=function(e,t,n,r){Zn.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){Zn.N.removeEventListener.call(this,e,t,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;$e(),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new tn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Rn(t,e.g,e.i)),(e=e.w).i=n,t=Xn(e.a,null,e.i),$e(),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,nn(e)):(Ut(t,"MODE","init"),!e.a.o&&e.a.j&&Ut(t,"X-HTTP-Session-Id",e.a.j),e.b=new ht(e,void 0,void 0),e.b.h=e.h,yt(e.b,t,!1,null),e.M=0)},r.close=function(){Ln(this.a)},r.Wa=function(e){if(s(e)){var t={};t.__data__=e,Un(this.a,t)}else this.h?((t={}).__data__=Ne(e),Un(this.a,t)):Un(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Ln(this.a),delete this.a,Zn.N.G.call(this)},E(er,ut),E(tr,ct),E(nr,Jn),nr.prototype.va=function(){this.a.dispatchEvent("a")},nr.prototype.ua=function(e){this.a.dispatchEvent(new er(e))},nr.prototype.ta=function(e){this.a.dispatchEvent(new tr)},nr.prototype.sa=function(){this.a.dispatchEvent("b")};var rr=w((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),$n);$n.prototype.createWebChannel=$n.prototype.a,Zn.prototype.send=Zn.prototype.Wa,Zn.prototype.open=Zn.prototype.Va,Zn.prototype.close=Zn.prototype.close,tt.NO_ERROR=0,tt.TIMEOUT=8,tt.HTTP_ERROR=6,nt.COMPLETE="complete",(ot.EventType=st).OPEN="a",st.CLOSE="b",st.ERROR="c",st.MESSAGE="d",ke.prototype.listen=ke.prototype.za,En.prototype.listenOnce=En.prototype.Aa,En.prototype.getLastError=En.prototype.Xa,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.T,En.prototype.getResponseJson=En.prototype.Ua,En.prototype.getResponseText=En.prototype.aa,En.prototype.send=En.prototype.ca;var ir={createWebChannelTransport:rr,ErrorCode:tt,EventType:nt,WebChannel:ot,XhrIo:En},or=ir.createWebChannelTransport,ar=ir.ErrorCode,sr=ir.EventType,ur=ir.WebChannel,cr=ir.XhrIo;t.default=ir}.call(this,n(6))}]])},function(e,t){!function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],h=0,f=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={0:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;o.push([0,1]),n()}([function(e,t,n){n(1),n(2),n(3),n(4),e.exports=n(5)},,,function(e,t){
/*! For license information please see 2.2b4640eb.chunk.js.LICENSE.txt */
(this["webpackJsonpahw-check-in"]=this["webpackJsonpahw-check-in"]||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(12)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(4),a=n(5),s=n(8),u=n(9),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Logger("@firebase/app"),p=(Object.defineProperty(m.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),m.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},m.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},m.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},m.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){d.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},m.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},m.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},m);function m(e,t,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var y=function e(){var t,n,r,i,u=(t=p,n={},r=new Map,(i={__esModule:!0,initializeApp:function(e,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var o=r;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(n,s))throw l.create("duplicate-app",{appName:s});var u=new t(e,o,i);return n[s]=u},app:c,registerVersion:function(e,t,n){var r,i=null!==(r=f[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}h(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:"7.8.1",INTERNAL:{registerComponent:h,removeApp:function(e){delete n[e]},components:r,useAsService:function(e,t){return"serverAuth"===t?null:t}}}).default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),c.App=t,i);function c(e){if(e=e||"[DEFAULT]",!a.contains(n,e))throw l.create("no-app",{appName:e});return n[e]}function h(e){var s,u,h=e.name;if(r.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===e.type?i[h]:null;if(r.set(h,e),"PUBLIC"===e.type){var f=function(e){if(void 0===e&&(e=c()),"function"!=typeof e[h])throw l.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==e.serviceProps&&a.deepExtend(f,e.serviceProps),i[h]=f,t.prototype[h]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,h).apply(this,e.multipleInstances?t:[])}}try{for(var p=o.__values(Object.keys(n)),m=p.next();!m.done;m=p.next()){var y=m.value;n[y]._addComponent(e)}}catch(u){s={error:u}}finally{try{m&&!m.done&&(u=p.return)&&u.call(p)}finally{if(s)throw s.error}}return"PUBLIC"===e.type?i[h]:null}return u.INTERNAL=o.__assign(o.__assign({},u.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(u,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),u}(),g=(v.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if("VERSION"!==(null==(t=e.getComponent())?void 0:t.type))return null;var t,n=e.getImmediate();return n.library+"/"+n.version})).filter((function(e){return e})).join(" ")},v);function v(e){this.container=e}if(a.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&0<=b.indexOf("LITE")&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var w=y.initializeApp;y.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),w.apply(void 0,e)};var T,E=y;(T=E).INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new g(e)}),"PRIVATE")),T.registerVersion(h,"0.5.4",void 0),T.registerVersion("fire-js",""),t.default=E,t.firebase=E},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r,i=(r=n(1))&&"object"==typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.9.1","app"),e.exports=i},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return d})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return y})),n.d(t,"__await",(function(){return g})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return T})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return S}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){1<o.push([e,t,n,r])||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=d(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){var o,a,s,u;o=r,a=i,s=(t=e[n](t)).done,u=t.value,Promise.resolve(u).then((function(e){o({value:e,done:s})}),a)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";(function(e){function r(e,t){if(!e)throw a(t)}function i(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}function o(e){try{return c.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}function a(e){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=(f.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},f);function f(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var p,m=(p=Error,s.__extends(v,p),v),y=(g.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e){return o.replace(b,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}(r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new m(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},g);function g(e,t,n){this.service=e,this.serviceName=t,this.errors=n}function v(e,t){var n=p.call(this,t)||this;return n.code=e,n.name="FirebaseError",Object.setPrototypeOf(n,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,y.prototype.create),n}var b=/\{\$([^}]+)}/g;function w(e){return JSON.parse(e)}function T(e){var t={},n={},r={},i="";try{var a=e.split(".");t=w(o(a[0])||""),n=w(o(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}}var E=(S.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},S.prototype.compress_=function(e,t){t=t||0;var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)a=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},S.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},S.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},S);function S(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}var I=(k.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},k.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},k.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},k.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e){if("object"==typeof e&&null!==e)for(var t=0,n=["next","error","complete"];t<n.length;t++){var r=n[t];if(r in e&&"function"==typeof e[r])return 1}}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},k.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},k.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},k.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},k.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},k);function k(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}function C(){}function N(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+r+" argument "}t.CONSTANTS=u,t.Deferred=h,t.ErrorFactory=y,t.FirebaseError=m,t.Sha1=E,t.assert=r,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=c,t.base64Decode=o,t.base64Encode=function(e){var t=i(e);return c.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new I(e,t);return n.subscribe.bind(n)},t.decode=T,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=N,t.getUA=d,t.isAdmin=function(e){var t=T(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},t.isElectron=function(){return 0<=d().indexOf("Electron/")},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){var e=d();return 0<=e.indexOf("MSIE ")||0<=e.indexOf("Trident/")},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isUWP=function(){return 0<=d().indexOf("MSAppHost/")},t.isValidFormat=function(e){var t=T(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=T(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&r<=n&&n<=i},t.issuedAtTime=function(e){var t=T(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=w,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:55296<=r&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(55296<=o&&o<=56319){var a=o-55296;r(++i<e.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(e.charCodeAt(i)-56320)}o<128?t[n++]=o:(o<2048?t[n++]=o>>6|192:(o<65536?t[n++]=o>>12|224:(t[n++]=o>>18|240,t[n++]=o>>12&63|128),t[n++]=o>>6&63|128),t[n++]=63&o|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(N(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(N(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(N(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(6))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(s[c]=n[c]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(5),o=(u.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},u.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},u.prototype.setServiceProps=function(e){return this.serviceProps=e,this},u),a=(s.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},s.prototype.getImmediate=function(e){var t=r.__assign({identifier:"[DEFAULT]",optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService(o);if(a)return a;if(i)return null;throw Error("Service "+this.name+" is not available")}catch(e){if(i)return null;throw e}},s.prototype.getComponent=function(){return this.component},s.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=e).instantiationMode)try{this.getOrInitializeService("[DEFAULT]")}catch(e){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),s=a[0],u=a[1],c=this.normalizeInstanceIdentifier(s);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},s.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},s.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},s.prototype.isComponentSet=function(){return null!=this.component},s.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,"[DEFAULT]"===e?void 0:e),this.instances.set(e,t)),t||null},s.prototype.normalizeInstanceIdentifier=function(e){return!this.component||this.component.multipleInstances?e:"[DEFAULT]"},s);function s(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}function u(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var c=(l.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},l.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},l.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},l.prototype.getProviders=function(){return Array.from(this.providers.values())},l);function l(e){this.name=e,this.providers=new Map}t.Component=o,t.ComponentContainer=c,t.Provider=a},function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}n.r(t),n.d(t,"LogLevel",(function(){return i})),n.d(t,"Logger",(function(){return c})),n.d(t,"setLogLevel",(function(){return h}));var i,o,a=[];function s(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var a=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}(o=i=i||{})[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";var u=i.INFO,c=(Object.defineProperty(l.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),l.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.DEBUG],e))},l.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.VERBOSE],e))},l.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.INFO],e))},l.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.WARN],e))},l.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.ERROR],e))},l);function l(e){this.name=e,this._logLevel=u,this._logHandler=s,a.push(this)}function h(e){a.forEach((function(t){t.logLevel=e}))}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(13)},,function(e,t,n){"use strict";var r=n(7),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var y="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function T(){}function E(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=w.prototype;var S=E.prototype=new T;S.constructor=E,r(S,w.prototype),S.isPureReactComponent=!0;var I={current:null},k={current:null},C=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:k.current}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var _=/\/+/g,x=[];function O(e,t,n,r){if(x.length){var i=x.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,x.length<10&&x.push(e)}function R(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+M(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+M(s=t[c],c);u+=e(s,l,r,i)}else if("function"==typeof(l=null!==t&&"object"==typeof t&&"function"==typeof(l=y&&t[y]||t["@@iterator"])?l:null))for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=n+M(s,c++),r,i);else if("object"===s)throw r=""+t,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return u}(e,"",t,n)}function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function L(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r,i,a=e.result,s=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,a,n,(function(e){return e})):null!=e&&(D(e)&&(i=s+(!(r=e).key||t&&t.key===e.key?"":(""+e.key).replace(_,"$&/")+"/")+n,e={$$typeof:o,type:r.type,key:i,ref:r.ref,props:r.props,_owner:r._owner}),a.push(e))}function U(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(_,"$&/")+"/"),R(e,F,t=O(t,o,r,i)),P(t)}function V(){var e=I.current;if(null===e)throw Error(g(321));return e}var B={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,L,t=O(null,null,t,n)),P(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!D(e))throw Error(g(143));return e}},createRef:function(){return{current:null}},Component:w,PureComponent:E,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return V().useCallback(e,t)},useContext:function(e,t){return V().useContext(e,t)},useEffect:function(e,t){return V().useEffect(e,t)},useImperativeHandle:function(e,t,n){return V().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return V().useLayoutEffect(e,t)},useMemo:function(e,t){return V().useMemo(e,t)},useReducer:function(e,t,n){return V().useReducer(e,t,n)},useRef:function(e){return V().useRef(e)},useState:function(e){return V().useState(e)},Fragment:s,Profiler:c,StrictMode:u,Suspense:d,createElement:A,cloneElement:function(e,t,n){if(null==e)throw Error(g(267,e));var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)C.call(t,l)&&!N.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},createFactory:function(e){var t=A.bind(null,e);return t.type=e,t},isValidElement:D,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r}};e.exports=B.default||B},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(14);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=null,u={};function c(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!h[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in n=(h[n]=t).eventTypes){var i=void 0,o=n[r],c=t,d=r;if(f.hasOwnProperty(d))throw Error(a(99,d));var p=(f[d]=o).phasedRegistrationNames;if(p){for(i in p)p.hasOwnProperty(i)&&l(p[i],c,d);i=!0}else i=!!o.registrationName&&(l(o.registrationName,c,d),!0);if(!i)throw Error(a(98,r,e))}}}}function l(e,t,n){if(d[e])throw Error(a(100,e));d[e]=t,p[e]=t.eventTypes[n].dependencies}var h=[],f={},d={},p={},m=!1,y=null,g=!1,v=null,b={onError:function(e){m=!0,y=e}},w=null,T=null,E=null;function S(e,t,n){var r=e.type||"unknown-event";e.currentTarget=E(n),function(e,t,n,r,i,o,s,u,c){if(function(e,t,n,r,i,o,a,s,u){m=!1,y=null,function(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}.apply(b,arguments)}.apply(this,arguments),m){if(!m)throw Error(a(198));var l=y;m=!1,y=null,g||(g=!0,v=l)}}(r,t,void 0,e),e.currentTarget=null}function I(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?(Array.isArray(t)?e.push.apply(e,t):e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function k(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var C=null;function N(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)S(e,t[r],n[r]);else t&&S(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function A(e){if(null!==e&&(C=I(C,e)),e=C,C=null,e){if(k(e,N),C)throw Error(a(95));if(g)throw e=v,g=!1,v=null,e}}var D={injectEventPluginOrder:function(e){if(s)throw Error(a(101));s=Array.prototype.slice.call(e),c()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!u.hasOwnProperty(t)||u[t]!==r){if(u[t])throw Error(a(102,t));u[t]=r,n=!0}}n&&c()}};function _(e,t){var n=e.stateNode;if(!n)return null;var r=w(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;x.hasOwnProperty("ReactCurrentDispatcher")||(x.ReactCurrentDispatcher={current:null}),x.hasOwnProperty("ReactCurrentBatchConfig")||(x.ReactCurrentBatchConfig={suspense:null});var O=/^(.*)[\\\/]/,P="function"==typeof Symbol&&Symbol.for,R=P?Symbol.for("react.element"):60103,M=P?Symbol.for("react.portal"):60106,L=P?Symbol.for("react.fragment"):60107,F=P?Symbol.for("react.strict_mode"):60108,U=P?Symbol.for("react.profiler"):60114,V=P?Symbol.for("react.provider"):60109,B=P?Symbol.for("react.context"):60110,q=P?Symbol.for("react.concurrent_mode"):60111,j=P?Symbol.for("react.forward_ref"):60112,z=P?Symbol.for("react.suspense"):60113,W=P?Symbol.for("react.suspense_list"):60120,K=P?Symbol.for("react.memo"):60115,G=P?Symbol.for("react.lazy"):60116;P&&Symbol.for("react.fundamental"),P&&Symbol.for("react.responder"),P&&Symbol.for("react.scope");var Q="function"==typeof Symbol&&Symbol.iterator;function H(e){return null!==e&&"object"==typeof e&&"function"==typeof(e=Q&&e[Q]||e["@@iterator"])?e:null}function Y(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case L:return"Fragment";case M:return"Portal";case U:return"Profiler";case F:return"StrictMode";case z:return"Suspense";case W:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case B:return"Context.Consumer";case V:return"Context.Provider";case j:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case K:return Y(e.type);case G:if(e=1===e._status?e._result:null)return Y(e)}return null}function X(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=Y(e.type);n=null,r&&(n=Y(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(O,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var J=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),$=null,Z=null,ee=null;function te(e){if(e=T(e)){if("function"!=typeof $)throw Error(a(280));var t=w(e.stateNode);$(e.stateNode,e.type,t)}}function ne(e){Z?ee?ee.push(e):ee=[e]:Z=e}function re(){if(Z){var e=Z,t=ee;if(ee=Z=null,te(e),t)for(e=0;e<t.length;e++)te(t[e])}}function ie(e,t){return e(t)}function oe(e,t,n,r){return e(t,n,r)}function ae(){}var se=ie,ue=!1,ce=!1;function le(){null===Z&&null===ee||(ae(),re())}new Map;var he=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fe=Object.prototype.hasOwnProperty,de={},pe={};function me(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ye[e]=new me(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ye[t]=new me(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ye[e]=new me(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ye[e]=new me(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ye[e]=new me(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ye[e]=new me(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){ye[e]=new me(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){ye[e]=new me(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){ye[e]=new me(e,5,!1,e.toLowerCase(),null,!1)}));var ge=/[\-:]([a-z])/g;function ve(e){return e[1].toUpperCase()}function be(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e,t,n,r){var i,o=ye.hasOwnProperty(t)?ye[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,n,r){if(null==e||function(e,t,n,r){if(null===n||0!==n.type)switch(typeof t){case"function":case"symbol":return 1;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return}}(t,e,n,r))return 1;if(!r&&null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||e<1}}(n,o,r)&&(n=null),r||null===o?(i=t,(fe.call(pe,i)||!fe.call(de,i)&&(he.test(i)?pe[i]=!0:(de[i]=!0,0)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Te(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ee(e){e._valueTracker||(e._valueTracker=function(e){var t=Te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Se(e){if(e){var t=e._valueTracker;if(!t)return 1;var n=t.getValue(),r="";return e&&(r=Te(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),1)}}function Ie(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ke(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=be(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ce(e,t){null!=(t=t.checked)&&we(e,"checked",t,!1)}function Ne(e,t){Ce(e,t);var n=be(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?De(e,t.type,n):t.hasOwnProperty("defaultValue")&&De(e,t.type,be(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ae(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function De(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function _e(e,t){return e=i({children:void 0},t),n=t.children,o="",r.Children.forEach(n,(function(e){null!=e&&(o+=e)})),(t=o)&&(e.children=t),e;var n,o}function xe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+be(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pe(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw Error(a(92));if(Array.isArray(t)){if(!(t.length<=1))throw Error(a(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:be(n)}}function Re(e,t){var n=be(t.value),r=be(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Me(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ge,ve);ye[t]=new me(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ge,ve);ye[t]=new me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ge,ve);ye[t]=new me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){ye[e]=new me(e,1,!1,e.toLowerCase(),null,!1)})),ye.xlinkHref=new me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){ye[e]=new me(e,1,!1,e.toLowerCase(),null,!0)}));var Le="http://www.w3.org/1999/xhtml";function Fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ve,Be,qe=(Be=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Ve=Ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Be(e,t)}))}:Be);function je(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function ze(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var We={animationend:ze("Animation","AnimationEnd"),animationiteration:ze("Animation","AnimationIteration"),animationstart:ze("Animation","AnimationStart"),transitionend:ze("Transition","TransitionEnd")},Ke={},Ge={};function Qe(e){if(Ke[e])return Ke[e];if(!We[e])return e;var t,n=We[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Ke[e]=n[t];return e}J&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);var He=Qe("animationend"),Ye=Qe("animationiteration"),Xe=Qe("animationstart"),Je=Qe("transitionend"),$e="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else for(e=t;0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return;);return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function tt(e){if(Ze(e)!==e)throw Error(a(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null!==o){if(i.child===o.child){for(o=i.child;o;){if(o===n)return tt(i),e;if(o===r)return tt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}else{if(null===(r=i.return))break;n=r}}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var rt,it,ot,at=!1,st=[],ut=null,ct=null,lt=null,ht=new Map,ft=new Map,dt=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),mt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function yt(e,t,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r}}function gt(e,t){switch(e){case"focus":case"blur":ut=null;break;case"dragenter":case"dragleave":ct=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ht.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function vt(e,t,n,r,i){return null===e||e.nativeEvent!==i?(e=yt(t,n,r,i),null!==t&&null!==(t=or(t))&&it(t)):e.eventSystemFlags|=r,e}function bt(e){var t=ir(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){ot(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wt(e){if(null===e.blockedOn){var t=Nn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null===t)return 1;var n=or(t);return null!==n&&it(n),e.blockedOn=t,0}}function Tt(e,t,n){wt(e)&&n.delete(t)}function Et(){for(at=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=or(e.blockedOn))&&rt(e);break}var t=Nn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:st.shift()}null!==ut&&wt(ut)&&(ut=null),null!==ct&&wt(ct)&&(ct=null),null!==lt&&wt(lt)&&(lt=null),ht.forEach(Tt),ft.forEach(Tt)}function St(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Et)))}function It(e){function t(t){return St(t,e)}if(0<st.length){St(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&St(ut,e),null!==ct&&St(ct,e),null!==lt&&St(lt,e),ht.forEach(t),ft.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)bt(n),null===n.blockedOn&&dt.shift()}function kt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Ct(e){for(;(e=e.return)&&5!==e.tag;);return e||null}function Nt(e,t,n){(t=_(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=I(n._dispatchListeners,t),n._dispatchInstances=I(n._dispatchInstances,e))}function At(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Ct(t);for(t=n.length;0<t--;)Nt(n[t],"captured",e);for(t=0;t<n.length;t++)Nt(n[t],"bubbled",e)}}function Dt(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=_(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=I(n._dispatchListeners,t),n._dispatchInstances=I(n._dispatchInstances,e))}function _t(e){e&&e.dispatchConfig.registrationName&&Dt(e._targetInst,null,e)}function xt(e){k(e,At)}function Ot(){return!0}function Pt(){return!1}function Rt(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Ot:Pt,this.isPropagationStopped=Pt,this}function Mt(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Lt(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),this.eventPool.length<10&&this.eventPool.push(e)}function Ft(e){e.eventPool=[],e.getPooled=Mt,e.release=Lt}i(Rt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ot)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ot)},persist:function(){this.isPersistent=Ot},isPersistent:Pt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Pt,this._dispatchInstances=this._dispatchListeners=null}}),Rt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Rt.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),((n.prototype=o).constructor=n).Interface=i({},r.Interface,e),n.extend=r.extend,Ft(n),n},Ft(Rt);var Ut=Rt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Vt=Rt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bt=Rt.extend({view:null,detail:null}),qt=Bt.extend({relatedTarget:null});function jt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var zt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Kt[e])&&!!t[e]}function Qt(){return Gt}for(var Ht=Bt.extend({key:function(e){if(e.key){var t=zt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=jt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Wt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qt,charCode:function(e){return"keypress"===e.type?jt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?jt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Yt=0,Xt=0,Jt=!1,$t=!1,Zt=Bt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Yt;return Yt=e.screenX,Jt?"mousemove"===e.type?e.screenX-t:0:(Jt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Xt;return Xt=e.screenY,$t?"mousemove"===e.type?e.screenY-t:0:($t=!0,0)}}),en=Zt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),tn=Zt.extend({dataTransfer:null}),nn=Bt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qt}),rn=Rt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),on=Zt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),an=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[He,"animationEnd",2],[Ye,"animationIteration",2],[Xe,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Je,"transitionEnd",2],["waiting","waiting",2]],sn={},un={},cn=0;cn<an.length;cn++){var ln=an[cn],hn=ln[0],fn=ln[1],dn=ln[2],pn="on"+(fn[0].toUpperCase()+fn.slice(1)),mn={phasedRegistrationNames:{bubbled:pn,captured:pn+"Capture"},dependencies:[hn],eventPriority:dn};sn[fn]=mn,un[hn]=mn}var yn={eventTypes:sn,getEventPriority:function(e){return void 0!==(e=un[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=un[e];if(!i)return null;switch(e){case"keypress":if(0===jt(n))return null;case"keydown":case"keyup":e=Ht;break;case"blur":case"focus":e=qt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Zt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=tn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=nn;break;case He:case Ye:case Xe:e=Ut;break;case Je:e=rn;break;case"scroll":e=Bt;break;case"wheel":e=on;break;case"copy":case"cut":case"paste":e=Vt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=en;break;default:e=Rt}return xt(t=e.getPooled(i,t,n,r)),t}},gn=o.unstable_UserBlockingPriority,vn=o.unstable_runWithPriority,bn=yn.getEventPriority,wn=[];function Tn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=ir(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=kt(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=e.eventSystemFlags,s=null,u=0;u<h.length;u++){var c=h[u];(c=c&&c.extractEvents(r,t,o,i,a))&&(s=I(s,c))}A(s)}}var En=!0;function Sn(e,t){In(t,e,!1)}function In(e,t,n){switch(bn(t)){case 0:var r=function(e,t,n){ue||ae();var r=Cn,i=ue;ue=!0;try{oe(r,e,t,n)}finally{(ue=i)||le()}}.bind(null,t,1);break;case 1:r=function(e,t,n){vn(gn,Cn.bind(null,e,t,n))}.bind(null,t,1);break;default:r=Cn.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function kn(e,t,n,r){if(wn.length){var i=wn.pop();i.topLevelType=e,i.eventSystemFlags=t,i.nativeEvent=n,i.targetInst=r,e=i}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:r,ancestors:[]};try{if(t=Tn,n=e,ce)t(n,void 0);else{ce=!0;try{se(t,n,void 0)}finally{ce=!1,le()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,wn.length<10&&wn.push(e)}}function Cn(e,t,n){if(En)if(0<st.length&&-1<pt.indexOf(e))e=yt(null,e,t,n),st.push(e);else{var r=Nn(e,t,n);null===r?gt(e,n):-1<pt.indexOf(e)?(e=yt(r,e,t,n),st.push(e)):function(e,t,n,r){switch(t){case"focus":return ut=vt(ut,e,t,n,r),1;case"dragenter":return ct=vt(ct,e,t,n,r),1;case"mouseover":return lt=vt(lt,e,t,n,r),1;case"pointerover":var i=r.pointerId;return ht.set(i,vt(ht.get(i)||null,e,t,n,r)),1;case"gotpointercapture":return i=r.pointerId,ft.set(i,vt(ft.get(i)||null,e,t,n,r)),1}}(r,e,t,n)||(gt(e,n),kn(e,t,n,null))}}function Nn(e,t,n){var r=kt(n);if(null!==(r=ir(r))){var i=Ze(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=et(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return kn(e,t,n,r),null}function An(e){if(!J)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var Dn=new("function"==typeof WeakMap?WeakMap:Map);function _n(e){var t=Dn.get(e);return void 0===t&&(t=new Set,Dn.set(e,t)),t}function xn(e,t,n){if(!n.has(e)){switch(e){case"scroll":In(t,"scroll",!0);break;case"focus":case"blur":In(t,"focus",!0),In(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":An(e)&&In(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$e.indexOf(e)&&Sn(e,t)}n.add(e)}}var On={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pn=["Webkit","ms","Moz","O"];function Rn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||On.hasOwnProperty(e)&&On[e]?(""+t).trim():t+"px"}function Mn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Rn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(On).forEach((function(e){Pn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),On[t]=On[e]}))}));var Ln=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fn(e,t){if(t){if(Ln[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62,""))}}function Un(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Vn(e,t){var n=_n(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=p[t];for(var r=0;r<t.length;r++)xn(t[r],e,n)}function Bn(){}function qn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zn(e,t){var n,r=jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&t<=n)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jn(r)}}function Wn(){for(var e=window,t=qn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=qn((e=t.contentWindow).document)}return t}function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Gn=null,Qn=null;function Hn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Yn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Xn="function"==typeof setTimeout?setTimeout:void 0,Jn="function"==typeof clearTimeout?clearTimeout:void 0;function $n(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Zn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var er=Math.random().toString(36).slice(2),tr="__reactInternalInstance$"+er,nr="__reactEventHandlers$"+er,rr="__reactContainere$"+er;function ir(e){var t=e[tr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rr]||n[tr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Zn(e);null!==e;){if(n=e[tr])return n;e=Zn(e)}return t}n=(e=n).parentNode}return null}function or(e){return!(e=e[tr]||e[rr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ar(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function sr(e){return e[nr]||null}var ur=null,cr=null,lr=null;function hr(){if(lr)return lr;var e,t,n=cr,r=n.length,i="value"in ur?ur.value:ur.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return lr=i.slice(e,1<t?1-t:void 0)}var fr=Rt.extend({data:null}),dr=Rt.extend({data:null}),pr=[9,13,27,32],mr=J&&"CompositionEvent"in window,yr=null;J&&"documentMode"in document&&(yr=document.documentMode);var gr=J&&"TextEvent"in window&&!yr,vr=J&&(!mr||yr&&8<yr&&yr<=11),br=String.fromCharCode(32),wr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Tr=!1;function Er(e,t){switch(e){case"keyup":return-1!==pr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return 1;default:return}}function Sr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ir=!1,kr={eventTypes:wr,extractEvents:function(e,t,n,r){var i;if(mr)e:{switch(e){case"compositionstart":var o=wr.compositionStart;break e;case"compositionend":o=wr.compositionEnd;break e;case"compositionupdate":o=wr.compositionUpdate;break e}o=void 0}else Ir?Er(e,n)&&(o=wr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=wr.compositionStart);return i=o?(vr&&"ko"!==n.locale&&(Ir||o!==wr.compositionStart?o===wr.compositionEnd&&Ir&&(i=hr()):(cr="value"in(ur=r)?ur.value:ur.textContent,Ir=!0)),o=fr.getPooled(o,t,n,r),!i&&null===(i=Sr(n))||(o.data=i),xt(o),o):null,(e=(gr?function(e,t){switch(e){case"compositionend":return Sr(t);case"keypress":return 32!==t.which?null:(Tr=!0,br);case"textInput":return(e=t.data)===br&&Tr?null:e;default:return null}}:function(e,t){if(Ir)return"compositionend"===e||!mr&&Er(e,t)?(e=hr(),lr=cr=ur=null,Ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vr&&"ko"!==t.locale?null:t.data;default:return null}})(e,n))?((t=dr.getPooled(wr.beforeInput,t,n,r)).data=e,xt(t)):t=null,null===i?t:null===t?i:[i,t]}},Cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?Cr[e.type]:"textarea"===t}var Ar={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Dr(e,t,n){return(e=Rt.getPooled(Ar.change,e,t,n)).type="change",ne(n),xt(e),e}var _r=null,xr=null;function Or(e){A(e)}function Pr(e){if(Se(ar(e)))return e}function Rr(e,t){if("change"===e)return t}var Mr=!1;function Lr(){_r&&(_r.detachEvent("onpropertychange",Fr),xr=_r=null)}function Fr(e){if("value"===e.propertyName&&Pr(xr))if(e=Dr(xr,e,kt(e)),ue)A(e);else{ue=!0;try{ie(Or,e)}finally{ue=!1,le()}}}function Ur(e,t,n){"focus"===e?(Lr(),xr=n,(_r=t).attachEvent("onpropertychange",Fr)):"blur"===e&&Lr()}function Vr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Pr(xr)}function Br(e,t){if("click"===e)return Pr(t)}function qr(e,t){if("input"===e||"change"===e)return Pr(t)}J&&(Mr=An("input")&&(!document.documentMode||9<document.documentMode));var jr,zr={eventTypes:Ar,_isInputEventSupported:Mr,extractEvents:function(e,t,n,r){var i=t?ar(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=Rr;else if(Nr(i))if(Mr)a=qr;else{a=Vr;var s=Ur}else!(o=i.nodeName)||"input"!==o.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(a=Br);if(a=a&&a(e,t))return Dr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&De(i,"number",i.value)}},Wr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Kr={eventTypes:Wr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?ir(t):null)&&(t!==(o=Ze(t))||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Zt,u=Wr.mouseLeave,c=Wr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=en,u=Wr.pointerLeave,c=Wr.pointerEnter,l="pointer");if(e=null==a?i:ar(a),i=null==t?i:ar(t),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=e,u.relatedTarget=i,(r=s.getPooled(c,t,n,r)).type=l+"enter",r.target=i,r.relatedTarget=e,l=t,(s=a)&&l)e:{for(e=l,a=0,t=c=s;t;t=Ct(t))a++;for(t=0,i=e;i;i=Ct(i))t++;for(;0<a-t;)c=Ct(c),a--;for(;0<t-a;)e=Ct(e),t--;for(;a--;){if(c===e||c===e.alternate)break e;c=Ct(c),e=Ct(e)}c=null}else c=null;for(e=c,c=[];s&&s!==e&&(null===(a=s.alternate)||a!==e);)c.push(s),s=Ct(s);for(s=[];l&&l!==e&&(null===(a=l.alternate)||a!==e);)s.push(l),l=Ct(l);for(l=0;l<c.length;l++)Dt(c[l],"bubbled",u);for(l=s.length;0<l--;)Dt(s[l],"captured",r);return n===jr?(jr=null,[u]):(jr=n,[u,r])}},Gr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Qr=Object.prototype.hasOwnProperty;function Hr(e,t){if(Gr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Qr.call(t,n[r])||!Gr(e[n[r]],t[n[r]]))return!1;return!0}var Yr=J&&"documentMode"in document&&document.documentMode<=11,Xr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Jr=null,$r=null,Zr=null,ei=!1;function ti(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return ei||null==Jr||Jr!==qn(n)?null:(n="selectionStart"in(n=Jr)&&Kn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Zr&&Hr(Zr,n)?null:(Zr=n,(e=Rt.getPooled(Xr.select,$r,e,t)).type="select",e.target=Jr,xt(e),e))}var ni={eventTypes:Xr,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=_n(o),i=p.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?ar(t):window,e){case"focus":!Nr(o)&&"true"!==o.contentEditable||(Jr=o,$r=t,Zr=null);break;case"blur":Zr=$r=Jr=null;break;case"mousedown":ei=!0;break;case"contextmenu":case"mouseup":case"dragend":return ei=!1,ti(n,r);case"selectionchange":if(Yr)break;case"keydown":case"keyup":return ti(n,r)}return null}};D.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=sr,T=or,E=ar,D.injectEventPluginsByName({SimpleEventPlugin:yn,EnterLeaveEventPlugin:Kr,ChangeEventPlugin:zr,SelectEventPlugin:ni,BeforeInputEventPlugin:kr}),new Set;var ri=[],ii=-1;function oi(e){ii<0||(e.current=ri[ii],ri[ii]=null,ii--)}function ai(e,t){ri[++ii]=e.current,e.current=t}var si={},ui={current:si},ci={current:!1},li=si;function hi(e,t){var n=e.type.contextTypes;if(!n)return si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function fi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function di(){oi(ci),oi(ui)}function pi(){oi(ci),oi(ui)}function mi(e,t,n){if(ui.current!==si)throw Error(a(168));ai(ui,t),ai(ci,n)}function yi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,Y(t)||"Unknown",o));return i({},n,{},r)}function gi(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||si,li=ui.current,ai(ui,t),ai(ci,ci.current),1}function vi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(t=yi(e,t,li),r.__reactInternalMemoizedMergedChildContext=t,oi(ci),oi(ui),ai(ui,t)):oi(ci),ai(ci,n)}var bi=o.unstable_runWithPriority,wi=o.unstable_scheduleCallback,Ti=o.unstable_cancelCallback,Ei=o.unstable_shouldYield,Si=o.unstable_requestPaint,Ii=o.unstable_now,ki=o.unstable_getCurrentPriorityLevel,Ci=o.unstable_ImmediatePriority,Ni=o.unstable_UserBlockingPriority,Ai=o.unstable_NormalPriority,Di=o.unstable_LowPriority,_i=o.unstable_IdlePriority,xi={},Oi=void 0!==Si?Si:function(){},Pi=null,Ri=null,Mi=!1,Li=Ii(),Fi=Li<1e4?Ii:function(){return Ii()-Li};function Ui(){switch(ki()){case Ci:return 99;case Ni:return 98;case Ai:return 97;case Di:return 96;case _i:return 95;default:throw Error(a(332))}}function Vi(e){switch(e){case 99:return Ci;case 98:return Ni;case 97:return Ai;case 96:return Di;case 95:return _i;default:throw Error(a(332))}}function Bi(e,t){return e=Vi(e),bi(e,t)}function qi(e,t,n){return e=Vi(e),wi(e,t,n)}function ji(e){return null===Pi?(Pi=[e],Ri=wi(Ci,Wi)):Pi.push(e),xi}function zi(){if(null!==Ri){var e=Ri;Ri=null,Ti(e)}Wi()}function Wi(){if(!Mi&&null!==Pi){Mi=!0;var e=0;try{var t=Pi;Bi(99,(function(){for(;e<t.length;e++)for(var n=t[e];null!==(n=n(!0)););})),Pi=null}catch(t){throw null!==Pi&&(Pi=Pi.slice(e+1)),wi(Ci,zi),t}finally{Mi=!1}}}var Ki=3;function Gi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Qi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Hi={current:null},Yi=null,Xi=null,Ji=null;function $i(){Ji=Xi=Yi=null}function Zi(e,t){var n=e.type._context;ai(Hi,n._currentValue),n._currentValue=t}function eo(e){var t=Hi.current;oi(Hi),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function no(e,t){Ji=Xi=null,null!==(e=(Yi=e).dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Fa=!0),e.firstContext=null)}function ro(e,t){if(Ji!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Ji=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Xi){if(null===Yi)throw Error(a(308));Xi=t,Yi.dependencies={expirationTime:0,firstContext:t,responders:null}}else Xi=Xi.next=t;return e._currentValue}var io=!1;function oo(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ao(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function so(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function uo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function co(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=oo(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=oo(e.memoizedState),i=n.updateQueue=oo(n.memoizedState)):r=e.updateQueue=ao(i):null===i&&(i=n.updateQueue=ao(r));null===i||r===i?uo(r,t):null===r.lastUpdate||null===i.lastUpdate?(uo(r,t),uo(i,t)):(uo(r,t),i.lastUpdate=t)}function lo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=oo(e.memoizedState):ho(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function ho(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=ao(t)),t}function fo(e,t,n,r,o,a){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(a,r,o):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null===(o="function"==typeof(e=n.payload)?e.call(a,r,o):e)||void 0===o)break;return i({},r,o);case 2:io=!0}return r}function po(e,t,n,r,i){io=!1;for(var o=(t=ho(e,t)).baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(ou(l,u.suspenseConfig),c=fo(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,(u.nextEffect=null)===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=fo(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,(u.nextEffect=null)===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,au(s),e.expirationTime=s,e.memoizedState=c}function mo(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),yo(t.firstEffect,n),t.firstEffect=t.lastEffect=null,yo(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function yo(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;if("function"!=typeof n)throw Error(a(191,n));n.call(r)}e=e.nextEffect}}var go=x.ReactCurrentBatchConfig,vo=(new r.Component).refs;function bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var wo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Hs(),i=go.suspense;(i=so(r=Ys(r,e,i),i)).payload=t,null!=n&&(i.callback=n),co(e,i),Xs(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Hs(),i=go.suspense;(i=so(r=Ys(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),co(e,i),Xs(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Hs(),r=go.suspense;(r=so(n=Ys(n,e,r),r)).tag=2,null!=t&&(r.callback=t),co(e,r),Xs(e,n)}};function To(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&Hr(n,r)&&Hr(i,o))}function Eo(e,t,n){var r=!1,i=si,o=t.contextType;return t=new t(n,o="object"==typeof o&&null!==o?ro(o):(i=fi(t)?li:ui.current,(r=null!==(r=t.contextTypes)&&void 0!==r)?hi(e,i):si)),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=wo,(e.stateNode=t)._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function So(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wo.enqueueReplaceState(t,t.state,null)}function Io(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=vo;var o=t.contextType;"object"==typeof o&&null!==o?i.context=ro(o):(o=fi(t)?li:ui.current,i.context=hi(e,o)),null!==(o=e.updateQueue)&&(po(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(bo(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&wo.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(po(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var ko=Array.isArray;function Co(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===vo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function No(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ao(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Iu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null===(r=t.alternate)||(r=r.index)<n?(t.effectTag=2,n):r:n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=Nu(n,e.mode,r)).return=e:(t=i(t,n)).return=e,t}function c(e,t,n,r){return null!==t&&t.elementType===n.type?(r=i(t,n.props)).ref=Co(e,t,n):(r=ku(n.type,n.key,n.props,null,e.mode,r)).ref=Co(e,t,n),r.return=e,r}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Au(n,e.mode,r)).return=e:(t=i(t,n.children||[])).return=e,t}function h(e,t,n,r,o){return null===t||7!==t.tag?(t=Cu(n,e.mode,r,o)).return=e:(t=i(t,n)).return=e,t}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Nu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case R:return(n=ku(t.type,t.key,t.props,null,e.mode,n)).ref=Co(e,null,t),n.return=e,n;case M:return(t=Au(t,e.mode,n)).return=e,t}if(ko(t)||H(t))return(t=Cu(t,e.mode,n,null)).return=e,t;No(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case R:return n.key===i?n.type===L?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case M:return n.key===i?l(e,t,n,r):null}if(ko(n)||H(n))return null!==i?null:h(e,t,n,r,null);No(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case R:return e=e.get(null===r.key?n:r.key)||null,r.type===L?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case M:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ko(r)||H(r))return h(t,e=e.get(n)||null,r,i,null);No(t,r)}return null}return function(u,c,l,h){var m="object"==typeof l&&null!==l&&l.type===L&&null===l.key;m&&(l=l.props.children);var y="object"==typeof l&&null!==l;if(y)switch(l.$$typeof){case R:e:{for(y=l.key,m=c;null!==m;){if(m.key===y){if(7===m.tag?l.type===L:m.elementType===l.type){n(u,m.sibling),(c=i(m,l.type===L?l.props.children:l.props)).ref=Co(u,m,l),c.return=u,u=c;break e}n(u,m);break}t(u,m),m=m.sibling}u=l.type===L?((c=Cu(l.props.children,u.mode,h,l.key)).return=u,c):((h=ku(l.type,l.key,l.props,null,u.mode,h)).ref=Co(u,c,l),h.return=u,h)}return s(u);case M:e:{for(m=l.key;null!==c;){if(c.key===m){if(4===c.tag&&c.stateNode.containerInfo===l.containerInfo&&c.stateNode.implementation===l.implementation){n(u,c.sibling),(c=i(c,l.children||[])).return=u,u=c;break e}n(u,c);break}t(u,c),c=c.sibling}(c=Au(l,u.mode,h)).return=u,u=c}return s(u)}if("string"==typeof l||"number"==typeof l)return l=""+l,s((null!==c&&6===c.tag?(n(u,c.sibling),(c=i(c,l)).return=u):(n(u,c),(c=Nu(l,u.mode,h)).return=u),u=c));if(ko(l))return function(i,a,s,u){for(var c=null,l=null,h=a,m=a=0,y=null;null!==h&&m<s.length;m++){h.index>m?(y=h,h=null):y=h.sibling;var g=d(i,h,s[m],u);if(null===g){null===h&&(h=y);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g,h=y}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],u))&&(a=o(h,a,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);m<s.length;m++)null!==(y=p(h,i,m,s[m],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),a=o(y,a,m),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),c}(u,c,l,h);if(H(l))return function(i,s,u,c){var l=H(u);if("function"!=typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,m=s,y=s=0,g=null,v=u.next();null!==m&&!v.done;y++,v=u.next()){m.index>y?(g=m,m=null):g=m.sibling;var b=d(i,m,v.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,m=g}if(v.done)return n(i,m),l;if(null===m){for(;!v.done;y++,v=u.next())null!==(v=f(i,v.value,c))&&(s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return l}for(m=r(i,m);!v.done;y++,v=u.next())null!==(v=p(m,i,y,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),l}(u,c,l,h);if(y&&No(u,l),void 0===l&&!m)switch(u.tag){case 1:case 0:throw u=u.type,Error(a(152,u.displayName||u.name||"Component"))}return n(u,c)}}var Do=Ao(!0),_o=Ao(!1),xo={},Oo={current:xo},Po={current:xo},Ro={current:xo};function Mo(e){if(e===xo)throw Error(a(174));return e}function Lo(e,t){ai(Ro,t),ai(Po,e),ai(Oo,xo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ue(null,"");break;default:t=Ue(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}oi(Oo),ai(Oo,t)}function Fo(){oi(Oo),oi(Po),oi(Ro)}function Uo(e){Mo(Ro.current);var t=Mo(Oo.current),n=Ue(t,e.type);t!==n&&(ai(Po,e),ai(Oo,n))}function Vo(e){Po.current===e&&(oi(Oo),oi(Po))}var Bo={current:0};function qo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function jo(e,t){return{responder:e,props:t}}var zo=x.ReactCurrentDispatcher,Wo=x.ReactCurrentBatchConfig,Ko=0,Go=null,Qo=null,Ho=null,Yo=null,Xo=null,Jo=null,$o=0,Zo=null,ea=0,ta=!1,na=null,ra=0;function ia(){throw Error(a(321))}function oa(e,t){if(null!==t){for(var n=0;n<t.length&&n<e.length;n++)if(!Gr(e[n],t[n]))return;return 1}}function aa(e,t,n,r,i,o){if(Ko=o,Go=t,Ho=null!==e?e.memoizedState:null,zo.current=null===Ho?ka:Ca,t=n(r,i),ta){for(;ta=!1,ra+=1,Ho=null!==e?e.memoizedState:null,Jo=Yo,Zo=Xo=Qo=null,zo.current=Ca,t=n(r,i),ta;);na=null,ra=0}if(zo.current=Ia,(e=Go).memoizedState=Yo,e.expirationTime=$o,e.updateQueue=Zo,e.effectTag|=ea,e=null!==Qo&&null!==Qo.next,Jo=Xo=Yo=Ho=Qo=Go=null,Zo=null,ea=$o=Ko=0,e)throw Error(a(300));return t}function sa(){zo.current=Ia,Jo=Xo=Yo=Ho=Qo=Go=null,ta=!1,na=Zo=null,ra=ea=$o=Ko=0}function ua(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Xo?Yo=Xo=e:Xo=Xo.next=e,Xo}function ca(){if(null!==Jo)Jo=(Xo=Jo).next,Ho=null!==(Qo=Ho)?Qo.next:null;else{if(null===Ho)throw Error(a(310));var e={memoizedState:(Qo=Ho).memoizedState,baseState:Qo.baseState,queue:Qo.queue,baseUpdate:Qo.baseUpdate,next:null};Xo=null===Xo?Yo=e:Xo.next=e,Ho=Qo.next}return Xo}function la(e,t){return"function"==typeof t?t(e):t}function ha(e){var t=ca(),n=t.queue;if(null===n)throw Error(a(311));if(n.lastRenderedReducer=e,0<ra){var r=n.dispatch;if(null!==na){var i=na.get(n);if(void 0!==i){na.delete(n);for(var o=t.memoizedState;o=e(o,i.action),null!==(i=i.next););return Gr(o,t.memoizedState)||(Fa=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),[n.lastRenderedState=o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==(r=null!==s?(null!==r&&(r.next=null),s.next):null!==r?r.next:null)){var u=i=null,c=r,l=!1;do{var h=c.expirationTime;h<Ko?(l||(l=!0,u=s,i=o),$o<h&&au($o=h)):(ou(h,c.suspenseConfig),o=c.eagerReducer===e?c.eagerState:e(o,c.action)),c=(s=c).next}while(null!==c&&c!==r);l||(u=s,i=o),Gr(o,t.memoizedState)||(Fa=!0),t.memoizedState=o,t.baseUpdate=u,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function fa(e){var t=ua();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:la,lastRenderedState:e}).dispatch=Sa.bind(null,Go,e),[t.memoizedState,e]}function da(e){return ha(la)}function pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Zo?(Zo={lastEffect:null}).lastEffect=e.next=e:null===(t=Zo.lastEffect)?Zo.lastEffect=e.next=e:(n=t.next,(t.next=e).next=n,Zo.lastEffect=e),e}function ma(e,t,n,r){var i=ua();ea|=e,i.memoizedState=pa(t,n,void 0,void 0===r?null:r)}function ya(e,t,n,r){var i=ca();r=void 0===r?null:r;var o=void 0;if(null!==Qo){var a=Qo.memoizedState;if(o=a.destroy,null!==r&&oa(r,a.deps))return void pa(0,n,o,r)}ea|=e,i.memoizedState=pa(t,n,o,r)}function ga(e,t){return ma(516,192,e,t)}function va(e,t){return ya(516,192,e,t)}function ba(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function wa(){}function Ta(e,t){return ua().memoizedState=[e,void 0===t?null:t],e}function Ea(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Sa(e,t,n){if(!(ra<25))throw Error(a(301));var r=e.alternate;if(e===Go||null!==r&&r===Go)if(ta=!0,e={expirationTime:Ko,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===na&&(na=new Map),void 0===(n=na.get(t)))na.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=Hs(),o=go.suspense;o={expirationTime:i=Ys(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.last;if(null===s)o.next=o;else{var u=s.next;null!==u&&(o.next=u),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(o.eagerReducer=r,o.eagerState=l,Gr(l,c))return}catch(e){}Xs(e,i)}}var Ia={readContext:ro,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useResponder:ia,useDeferredValue:ia,useTransition:ia},ka={readContext:ro,useCallback:Ta,useContext:ro,useEffect:ga,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ma(4,36,ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4,36,e,t)},useMemo:function(e,t){var n=ua();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ua();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Sa.bind(null,Go,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ua().memoizedState=e},useState:fa,useDebugValue:wa,useResponder:jo,useDeferredValue:function(e,t){var n=fa(e),r=n[0],i=n[1];return ga((function(){o.unstable_next((function(){var n=Wo.suspense;Wo.suspense=void 0===t?null:t;try{i(e)}finally{Wo.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=fa(!1),n=t[0],r=t[1];return[Ta((function(t){r(!0),o.unstable_next((function(){var n=Wo.suspense;Wo.suspense=void 0===e?null:e;try{r(!1),t()}finally{Wo.suspense=n}}))}),[e,n]),n]}},Ca={readContext:ro,useCallback:Ea,useContext:ro,useEffect:va,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ya(4,36,ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ya(4,36,e,t)},useMemo:function(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ha,useRef:function(){return ca().memoizedState},useState:da,useDebugValue:wa,useResponder:jo,useDeferredValue:function(e,t){var n=da(),r=n[0],i=n[1];return va((function(){o.unstable_next((function(){var n=Wo.suspense;Wo.suspense=void 0===t?null:t;try{i(e)}finally{Wo.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=da(),n=t[0],r=t[1];return[Ea((function(t){r(!0),o.unstable_next((function(){var n=Wo.suspense;Wo.suspense=void 0===e?null:e;try{r(!1),t()}finally{Wo.suspense=n}}))}),[e,n]),n]}},Na=null,Aa=null,Da=!1;function _a(e,t){var n=Eu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function xa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,1);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,1);case 13:default:return}}function Oa(e){if(Da){var t=Aa;if(t){var n=t;if(!xa(e,t)){if(!(t=$n(n.nextSibling))||!xa(e,t))return e.effectTag=-1025&e.effectTag|2,Da=!1,void(Na=e);_a(Na,n)}Na=e,Aa=$n(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Da=!1,Na=e}}function Pa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Na=e}function Ra(e){if(e===Na){if(!Da)return Pa(e),Da=!0,0;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Yn(t,e.memoizedProps))for(t=Aa;t;)_a(e,t),t=$n(t.nextSibling);if(Pa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Aa=$n(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Aa=null}}else Aa=Na?$n(e.stateNode.nextSibling):null;return 1}}function Ma(){Aa=Na=null,Da=!1}var La=x.ReactCurrentOwner,Fa=!1;function Ua(e,t,n,r){t.child=null===e?_o(t,null,n,r):Do(t,e.child,n,r)}function Va(e,t,n,r,i){n=n.render;var o=t.ref;return no(t,i),r=aa(e,t,n,r,o,i),null===e||Fa?(t.effectTag|=1,Ua(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ts(e,t,i))}function Ba(e,t,n,r,i,o){if(null!==e)return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Hr)(i,r)&&e.ref===t.ref)?ts(e,t,o):(t.effectTag|=1,(e=Iu(a,r)).ref=t.ref,(e.return=t).child=e);var a=n.type;return"function"!=typeof a||Su(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ku(n.type,null,r,null,t.mode,o)).ref=t.ref,(e.return=t).child=e):(t.tag=15,t.type=a,qa(e,t,a,r,i,o))}function qa(e,t,n,r,i,o){return null!==e&&Hr(e.memoizedProps,r)&&e.ref===t.ref&&(Fa=!1,i<o)?ts(e,t,o):za(e,t,n,r,o)}function ja(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function za(e,t,n,r,i){var o=fi(n)?li:ui.current;return o=hi(t,o),no(t,i),n=aa(e,t,n,r,o,i),null===e||Fa?(t.effectTag|=1,Ua(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ts(e,t,i))}function Wa(e,t,n,r,i){if(fi(n)){var o=!0;gi(t)}else o=!1;if(no(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Eo(t,n,r),Io(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;c="object"==typeof c&&null!==c?ro(c):hi(t,c=fi(n)?li:ui.current);var l=n.getDerivedStateFromProps,h="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||s===r&&u===c||So(t,a,r,c),io=!1;var f=t.memoizedState;u=a.state=f;var d=t.updateQueue;null!==d&&(po(t,d,r,a,i),u=t.memoizedState),r=s!==r||f!==u||ci.current||io?("function"==typeof l&&(bo(t,n,l,r),u=t.memoizedState),(s=io||To(t,n,s,r,f,u,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:Qi(t.type,s),u=a.context,c="object"==typeof(c=n.contextType)&&null!==c?ro(c):hi(t,c=fi(n)?li:ui.current),(h="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||s===r&&u===c||So(t,a,r,c),io=!1,u=t.memoizedState,f=a.state=u,null!==(d=t.updateQueue)&&(po(t,d,r,a,i),f=t.memoizedState),r=s!==r||u!==f||ci.current||io?("function"==typeof l&&(bo(t,n,l,r),f=t.memoizedState),(l=io||To(t,n,s,r,u,f,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),!1);return Ka(e,t,n,r,o,i)}function Ka(e,t,n,r,i,o){ja(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&vi(t,n,!1),ts(e,t,o);r=t.stateNode,La.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Do(t,e.child,null,o),t.child=Do(t,null,s,o)):Ua(e,t,s,o),t.memoizedState=r.state,i&&vi(t,n,!0),t.child}function Ga(e){var t=e.stateNode;t.pendingContext?mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mi(0,t.context,!1),Lo(e,t.containerInfo)}var Qa,Ha,Ya,Xa={dehydrated:null,retryTime:0};function Ja(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Bo.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ai(Bo,1&a),null===e){if(void 0!==o.fallback&&Oa(t),s){if(s=o.fallback,0==(2&((o=Cu(null,i,0,null)).return=t).mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Cu(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=Xa,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=_o(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,0==(2&((n=Iu(e,e.pendingProps)).return=t).mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Iu(i,o,i.expirationTime)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Xa,t.child=n,i}return n=Do(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Cu(null,i,0,null)).return=t,null!==(o.child=e)&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Cu(s,i,n,null)).return=t,(o.sibling=n).effectTag|=2,o.childExpirationTime=0,t.memoizedState=Xa,t.child=o,n}return t.memoizedState=null,t.child=Do(t,e,o.children,n)}function $a(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),to(e.return,t)}function Za(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function es(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ua(e,t,r.children,n),0!=(2&(r=Bo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$a(e,n);else if(19===e.tag)$a(e,n);else if(null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ai(Bo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===qo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Za(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===qo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Za(t,!0,n,null,o,t.lastEffect);break;case"together":Za(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ts(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&au(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Iu(e=t.child,e.pendingProps,e.expirationTime),(t.child=n).return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Iu(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function ns(e){e.effectTag|=4}function rs(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function is(e){switch(e.tag){case 1:fi(e.type)&&di();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Fo(),pi(),0!=(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Vo(e),null;case 13:return oi(Bo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return oi(Bo),null;case 4:return Fo(),null;case 10:return eo(e),null;default:return null}}function os(e,t){return{value:e,source:t,stack:X(t)}}Qa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ha=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,u,c=t.stateNode;switch(Mo(Oo.current),e=null,n){case"input":a=Ie(c,a),r=Ie(c,r),e=[];break;case"option":a=_e(c,a),r=_e(c,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Oe(c,a),r=Oe(c,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(c.onclick=Bn)}for(s in Fn(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&((n=n||{})[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(d.hasOwnProperty(s)?e=e||[]:(e=e||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||((n=n||{})[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&((n=n||{})[u]=l[u])}else n||(e=e||[]).push(s,n),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(s,""+l)):"children"===s?c===l||"string"!=typeof l&&"number"!=typeof l||(e=e||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(d.hasOwnProperty(s)?(null!=l&&Vn(o,s),e||c===l||(e=[])):(e=e||[]).push(s,l))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&ns(t)}},Ya=function(e,t,n,r){n!==r&&ns(t)};var as="function"==typeof WeakSet?WeakSet:Set;function ss(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=X(n)),null!==n&&Y(n.type),t=t.value,null!==e&&1===e.tag&&Y(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function us(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){gu(e,t)}else t.current=null}function cs(e,t){switch(t.tag){case 0:case 11:case 15:ls(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}function ls(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!=(r.tag&e)){var i=r.destroy;(r.destroy=void 0)!==i&&i()}0!=(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function hs(e,t,n){switch("function"==typeof wu&&wu(t),t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Bi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(e){gu(i,e)}}e=e.next}while(e!==r)}))}break;case 1:us(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){gu(e,t)}}(t,n);break;case 5:us(t);break;case 4:ms(e,t,n)}}function fs(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,(e.memoizedProps=null)!==t&&fs(t)}function ds(e){return 5===e.tag||3===e.tag||4===e.tag}function ps(e){e:{for(var t=e.return;null!==t;){if(ds(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(je(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ds(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n=(n.child.return=n).child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o){var s=o?i.stateNode:i.stateNode.instance;if(n)if(r){var u=s;s=n,8===(o=t).nodeType?o.parentNode.insertBefore(u,s):o.insertBefore(u,s)}else t.insertBefore(s,n);else r?(8===(u=t).nodeType?(o=u.parentNode).insertBefore(s,u):(o=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==o.onclick||(o.onclick=Bn)):t.appendChild(s)}else if(4!==i.tag&&null!==i.child){i=(i.child.return=i).child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ms(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var u=e,c=o,l=n,h=c;;)if(hs(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o=(o.child.return=o).child;continue}}else if(hs(e,o,n),null!==o.child){o=(o.child.return=o).child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function ys(e,t){switch(t.tag){case 0:case 11:case 14:case 15:ls(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if((t.updateQueue=null)!==o){for(n[nr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ce(n,r),Un(e,i),t=Un(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?Mn(n,u):"dangerouslySetInnerHTML"===s?qe(n,u):"children"===s?je(n,u):we(n,s,u,t)}switch(e){case"input":Ne(n,r);break;case"textarea":Re(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?xe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?xe(n,!!r.multiple,r.defaultValue,!0):xe(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(a(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,It(t.containerInfo));break;case 12:break;case 13:if(null===(n=t).memoizedState?r=!1:(r=!0,n=t.child,Ls=Fi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=Rn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e=(e.child.return=e).child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}gs(t);break;case 19:gs(t);break;case 17:case 20:case 21:break;default:throw Error(a(163))}}function gs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new as),t.forEach((function(t){var r=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(t=Ys(t=Hs(),e,null)),null!==(e=Js(e,t))&&Zs(e)}.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var vs="function"==typeof WeakMap?WeakMap:Map;function bs(e,t,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Us||(Us=!0,Vs=r),ss(e,t)},n}function ws(e,t,n){(n=so(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return ss(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Bs?Bs=new Set([this]):Bs.add(this),ss(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ts,Es=Math.ceil,Ss=x.ReactCurrentDispatcher,Is=x.ReactCurrentOwner,ks=0,Cs=null,Ns=null,As=0,Ds=0,_s=null,xs=1073741823,Os=1073741823,Ps=null,Rs=0,Ms=!1,Ls=0,Fs=null,Us=!1,Vs=null,Bs=null,qs=!1,js=null,zs=90,Ws=null,Ks=0,Gs=null,Qs=0;function Hs(){return 0!=(48&ks)?1073741821-(Fi()/10|0):0!==Qs?Qs:Qs=1073741821-(Fi()/10|0)}function Ys(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=Ui();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(16&ks))return As;if(null!==n)e=Gi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Gi(e,150,100);break;case 97:case 96:e=Gi(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Cs&&e===As&&--e,e}function Xs(e,t){if(50<Ks)throw Ks=0,Gs=null,Error(a(185));if(null!==(e=Js(e,t))){var n=Ui();1073741823===t?0!=(8&ks)&&0==(48&ks)?eu(e):(Zs(e),0===ks&&zi()):Zs(e),0==(4&ks)||98!==n&&99!==n||(null===Ws?Ws=new Map([[e,t]]):(void 0===(n=Ws.get(e))||t<n)&&Ws.set(e,t))}}function Js(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Cs===i&&(au(t),4===Ds&&xu(i,As)),Ou(i,t)),i}function $s(e){var t=e.lastExpiredTime;return 0!==t||!_u(e,t=e.firstPendingTime)||(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e}function Zs(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=ji(eu.bind(null,e));else{var t=$s(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Hs();if(r=1073741823===t?99:1===t||2===t?95:(r=10*(1073741821-t)-10*(1073741821-r))<=0?99:r<=250?98:r<=5250?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&r<=i)return;n!==xi&&Ti(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?ji(eu.bind(null,e)):qi(r,function e(t,n){if(Qs=0,n)return Pu(t,n=Hs()),Zs(t),null;var r=$s(t);if(0!==r){if(n=t.callbackNode,0!=(48&ks))throw Error(a(327));if(pu(),t===Cs&&r===As||nu(t,r),null!==Ns){var i=ks;ks|=16;for(var o=iu();;)try{uu();break}catch(e){ru(t,e)}if($i(),ks=i,Ss.current=o,1===Ds)throw n=_s,nu(t,r),xu(t,r),Zs(t),n;if(null===Ns)switch(o=t.finishedWork=t.current.alternate,t.finishedExpirationTime=r,i=Ds,Cs=null,i){case 0:case 1:throw Error(a(345));case 2:Pu(t,2<r?2:r);break;case 3:if(xu(t,r),r===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(o)),1073741823===xs&&10<(o=Ls+500-Fi())){if(Ms){var s=t.lastPingedTime;if(0===s||r<=s){t.lastPingedTime=r,nu(t,r);break}}if(0!==(s=$s(t))&&s!==r)break;if(0!==i&&i!==r){t.lastPingedTime=i;break}t.timeoutHandle=Xn(fu.bind(null,t),o);break}fu(t);break;case 4:if(xu(t,r),r===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(o)),Ms&&(0===(o=t.lastPingedTime)||r<=o)){t.lastPingedTime=r,nu(t,r);break}if(0!==(o=$s(t))&&o!==r)break;if(0!==i&&i!==r){t.lastPingedTime=i;break}if(1073741823!==Os?i=10*(1073741821-Os)-Fi():1073741823===xs?i=0:(i=10*(1073741821-xs)-5e3,(i=(o=Fi())-i)<0&&(i=0),(r=10*(1073741821-r)-o)<(i=(i<120?120:i<480?480:i<1080?1080:i<1920?1920:i<3e3?3e3:i<4320?4320:1960*Es(i/1960))-i)&&(i=r)),10<i){t.timeoutHandle=Xn(fu.bind(null,t),i);break}fu(t);break;case 5:if(1073741823!==xs&&null!==Ps){s=xs;var u=Ps;if(10<(i=(i=0|u.busyMinDurationMs)<=0?0:(o=0|u.busyDelayMs,(s=Fi()-(10*(1073741821-s)-(0|u.timeoutMs||5e3)))<=o?0:o+i-s))){xu(t,r),t.timeoutHandle=Xn(fu.bind(null,t),i);break}}fu(t);break;default:throw Error(a(329))}if(Zs(t),t.callbackNode===n)return e.bind(null,t)}}return null}.bind(null,e),{timeout:10*(1073741821-t)-Fi()}),e.callbackNode=t}}}function eu(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)fu(e);else{if(0!=(48&ks))throw Error(a(327));if(pu(),e===Cs&&t===As||nu(e,t),null!==Ns){var n=ks;ks|=16;for(var r=iu();;)try{su();break}catch(t){ru(e,t)}if($i(),ks=n,Ss.current=r,1===Ds)throw n=_s,nu(e,t),xu(e,t),Zs(e),n;if(null!==Ns)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Cs=null,fu(e),Zs(e)}}return null}function tu(e,t){var n=ks;ks&=-2,ks|=8;try{return e(t)}finally{0===(ks=n)&&zi()}}function nu(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Jn(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(r.tag){case 1:null!=r.type.childContextTypes&&di();break;case 3:Fo(),pi();break;case 5:Vo(r);break;case 4:Fo();break;case 13:case 19:oi(Bo);break;case 10:eo(r)}n=n.return}Ns=Iu((Cs=e).current,null),As=t,Os=xs=1073741823,Ps=_s=null,Rs=Ds=0,Ms=!1}function ru(e,t){for(;;){try{if($i(),sa(),null===Ns||null===Ns.return)return Ds=1,_s=t,0;e:{var n=e,r=Ns.return,i=Ns,o=t;if(t=As,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var a=o,s=0!=(1&Bo.current),u=r;do{var c;if(c=13===u.tag){var l=u.memoizedState;if(null!==l)c=null!==l.dehydrated;else{var h=u.memoizedProps;c=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!s)}}if(c){var f=u.updateQueue;if(null===f){var d=new Set;d.add(a),u.updateQueue=d}else f.add(a);if(0==(2&u.mode)){if(u.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var p=so(1073741823,null);p.tag=2,co(i,p)}i.expirationTime=1073741823;break e}o=void 0,i=t;var m=n.pingCache;if(null===m?(m=n.pingCache=new vs,o=new Set,m.set(a,o)):void 0===(o=m.get(a))&&(o=new Set,m.set(a,o)),!o.has(i)){o.add(i);var y=vu.bind(null,n,a,i);a.then(y,y)}u.effectTag|=4096,u.expirationTime=t;break e}u=u.return}while(null!==u);o=Error((Y(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+X(i))}5!==Ds&&(Ds=2),o=os(o,i),u=r;do{switch(u.tag){case 3:a=o,u.effectTag|=4096,u.expirationTime=t,lo(u,bs(u,a,t));break e;case 1:a=o;var g=u.type,v=u.stateNode;if(0==(64&u.effectTag)&&("function"==typeof g.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===Bs||!Bs.has(v)))){u.effectTag|=4096,u.expirationTime=t,lo(u,ws(u,a,t));break e}}u=u.return}while(null!==u)}Ns=lu(Ns)}catch(e){t=e;continue}break}}function iu(){var e=Ss.current;return Ss.current=Ia,null===e?Ia:e}function ou(e,t){e<xs&&2<e&&(xs=e),null!==t&&e<Os&&2<e&&(Os=e,Ps=t)}function au(e){Rs<e&&(Rs=e)}function su(){for(;null!==Ns;)Ns=cu(Ns)}function uu(){for(;null!==Ns&&!Ei();)Ns=cu(Ns)}function cu(e){var t=Ts(e.alternate,e,As);return e.memoizedProps=e.pendingProps,null===t&&(t=lu(e)),Is.current=null,t}function lu(e){Ns=e;do{var t=Ns.alternate;if(e=Ns.return,0==(2048&Ns.effectTag)){e:{var n=t,r=As,o=(t=Ns).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:fi(t.type)&&di();break;case 3:Fo(),pi(),(o=t.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==n&&null!==n.child||!Ra(t)||ns(t);break;case 5:Vo(t),r=Mo(Ro.current);var s=t.type;if(null!==n&&null!=t.stateNode)Ha(n,t,s,o,r),n.ref!==t.ref&&(t.effectTag|=128);else if(o){var u=Mo(Oo.current);if(Ra(t)){var c=(o=t).stateNode;n=o.type;var l=o.memoizedProps,h=r;switch(c[tr]=o,c[nr]=l,s=void 0,r=c,n){case"iframe":case"object":case"embed":Sn("load",r);break;case"video":case"audio":for(c=0;c<$e.length;c++)Sn($e[c],r);break;case"source":Sn("error",r);break;case"img":case"image":case"link":Sn("error",r),Sn("load",r);break;case"form":Sn("reset",r),Sn("submit",r);break;case"details":Sn("toggle",r);break;case"input":ke(r,l),Sn("invalid",r),Vn(h,"onChange");break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Sn("invalid",r),Vn(h,"onChange");break;case"textarea":Pe(r,l),Sn("invalid",r),Vn(h,"onChange")}for(s in Fn(n,l),c=null,l)l.hasOwnProperty(s)&&(u=l[s],"children"===s?"string"==typeof u?r.textContent!==u&&(c=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(c=["children",""+u]):d.hasOwnProperty(s)&&null!=u&&Vn(h,s));switch(n){case"input":Ee(r),Ae(r,l,!0);break;case"textarea":Ee(r),Me(r);break;case"select":case"option":break;default:"function"==typeof l.onClick&&(r.onclick=Bn)}s=c,o.updateQueue=s,(o=null!==s)&&ns(t)}else{n=t,h=s,l=o,c=9===r.nodeType?r:r.ownerDocument,u===Le&&(u=Fe(h)),u===Le?"script"===h?((l=c.createElement("div")).innerHTML="<script><\/script>",c=l.removeChild(l.firstChild)):"string"==typeof l.is?c=c.createElement(h,{is:l.is}):(c=c.createElement(h),"select"===h&&(h=c,l.multiple?h.multiple=!0:l.size&&(h.size=l.size))):c=c.createElementNS(u,h),(l=c)[tr]=n,l[nr]=o,Qa(l,t),t.stateNode=l;var f=r,p=Un(h=s,n=o);switch(h){case"iframe":case"object":case"embed":Sn("load",l),r=n;break;case"video":case"audio":for(r=0;r<$e.length;r++)Sn($e[r],l);r=n;break;case"source":Sn("error",l),r=n;break;case"img":case"image":case"link":Sn("error",l),Sn("load",l),r=n;break;case"form":Sn("reset",l),Sn("submit",l),r=n;break;case"details":Sn("toggle",l),r=n;break;case"input":ke(l,n),r=Ie(l,n),Sn("invalid",l),Vn(f,"onChange");break;case"option":r=_e(l,n);break;case"select":l._wrapperState={wasMultiple:!!n.multiple},r=i({},n,{value:void 0}),Sn("invalid",l),Vn(f,"onChange");break;case"textarea":Pe(l,n),r=Oe(l,n),Sn("invalid",l),Vn(f,"onChange");break;default:r=n}Fn(h,r),c=void 0,u=h;var m=l,y=r;for(c in y)if(y.hasOwnProperty(c)){var g=y[c];"style"===c?Mn(m,g):"dangerouslySetInnerHTML"===c?null!=(g=g?g.__html:void 0)&&qe(m,g):"children"===c?"string"==typeof g?"textarea"===u&&""===g||je(m,g):"number"==typeof g&&je(m,""+g):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(d.hasOwnProperty(c)?null!=g&&Vn(f,c):null!=g&&we(m,c,g,p))}switch(h){case"input":Ee(l),Ae(l,n,!1);break;case"textarea":Ee(l),Me(l);break;case"option":null!=n.value&&l.setAttribute("value",""+be(n.value));break;case"select":(r=l).multiple=!!n.multiple,null!=(l=n.value)?xe(r,!!n.multiple,l,!1):null!=n.defaultValue&&xe(r,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof r.onClick&&(l.onclick=Bn)}(o=Hn(s,o))&&ns(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(a(166));break;case 6:if(n&&null!=t.stateNode)Ya(0,t,n.memoizedProps,o);else{if("string"!=typeof o&&null===t.stateNode)throw Error(a(166));r=Mo(Ro.current),Mo(Oo.current),Ra(t)?(s=(o=t).stateNode,r=o.memoizedProps,s[tr]=o,(o=s.nodeValue!==r)&&ns(t)):(s=t,(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o))[tr]=s,t.stateNode=o)}break;case 11:break;case 13:if(oi(Bo),o=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=r;break e}o=null!==o,s=!1,null===n?void 0!==t.memoizedProps.fallback&&Ra(t):(s=null!==(r=n.memoizedState),o||null===r||null!==(r=n.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=r).nextEffect=l:(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8)),o&&!s&&0!=(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Bo.current)?0===Ds&&(Ds=3):(0!==Ds&&3!==Ds||(Ds=4),0!==Rs&&null!==Cs&&(xu(Cs,As),Ou(Cs,Rs)))),(o||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Fo();break;case 10:eo(t);break;case 9:case 14:break;case 17:fi(t.type)&&di();break;case 19:if(oi(Bo),null===(o=t.memoizedState))break;if(s=0!=(64&t.effectTag),null===(l=o.rendering)){if(s)rs(o,!1);else if(0!==Ds||null!==n&&0!=(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(l=qo(n))){for(t.effectTag|=64,rs(o,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===o.lastEffect&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=r,s=t.child;null!==s;)n=o,(r=s).effectTag&=2,r.nextEffect=null,r.firstEffect=null,(r.lastEffect=null)===(l=r.alternate)?(r.childExpirationTime=0,r.expirationTime=n,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=l.childExpirationTime,r.expirationTime=l.expirationTime,r.child=l.child,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,n=l.dependencies,r.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),s=s.sibling;ai(Bo,1&Bo.current|2),t=t.child;break e}n=n.sibling}}else{if(!s)if(null!==(n=qo(l))){if(t.effectTag|=64,s=!0,null!==(r=n.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),rs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate){null!==(t=t.lastEffect=o.lastEffect)&&(t.nextEffect=null);break}}else Fi()>o.tailExpiration&&1<r&&(t.effectTag|=64,rs(o,!(s=!0)),t.expirationTime=t.childExpirationTime=r-1);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}if(null===o.tail)break;0===o.tailExpiration&&(o.tailExpiration=Fi()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=t.lastEffect,r.sibling=null,o=Bo.current,ai(Bo,o=s?1&o|2:1&o),t=r;break e;case 20:case 21:break;default:throw Error(a(156,t.tag))}t=null}if(o=Ns,1===As||1!==o.childExpirationTime){for(s=0,r=o.child;null!==r;)(n=r.expirationTime)>s&&(s=n),(l=r.childExpirationTime)>s&&(s=l),r=r.sibling;o.childExpirationTime=s}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ns.firstEffect),null!==Ns.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ns.firstEffect),e.lastEffect=Ns.lastEffect),1<Ns.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ns:e.firstEffect=Ns,e.lastEffect=Ns))}else{if(null!==(t=is(Ns)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ns.sibling))return t;Ns=e}while(null!==Ns);return 0===Ds&&(Ds=5),null}function hu(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function fu(e){var t=Ui();return Bi(99,function(e,t){for(;pu(),null!==js;);if(0!=(48&ks))throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=hu(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Cs&&(Ns=Cs=null,As=0),null!==(i=1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n).firstEffect:n:n.firstEffect)){var o=ks;ks|=32,Is.current=null,Gn=En;var s=Wn();if(Kn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(e){u=null;break e}var f=0,d=-1,p=-1,m=0,y=0,g=s,v=null;t:for(;;){for(var b;g!==u||0!==l&&3!==g.nodeType||(d=f+l),g!==h||0!==c&&3!==g.nodeType||(p=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(b=g.firstChild);)v=g,g=b;for(;;){if(g===s)break t;if(v===u&&++m===l&&(d=f),v===h&&++y===c&&(p=f),null!==(b=g.nextSibling))break;v=(g=v).parentNode}g=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;En=!(Qn={focusedElem:s,selectionRange:u}),Fs=i;do{try{du()}catch(e){if(null===Fs)throw Error(a(330));gu(Fs,e),Fs=Fs.nextEffect}}while(null!==Fs);Fs=i;do{try{for(s=e,u=t;null!==Fs;){var w=Fs.effectTag;if(16&w&&je(Fs.stateNode,""),128&w){var T=Fs.alternate;if(null!==T){var E=T.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(1038&w){case 2:ps(Fs),Fs.effectTag&=-3;break;case 6:ps(Fs),Fs.effectTag&=-3,ys(Fs.alternate,Fs);break;case 1024:Fs.effectTag&=-1025;break;case 1028:Fs.effectTag&=-1025,ys(Fs.alternate,Fs);break;case 4:ys(Fs.alternate,Fs);break;case 8:ms(s,l=Fs,u),fs(l)}Fs=Fs.nextEffect}}catch(e){if(null===Fs)throw Error(a(330));gu(Fs,e),Fs=Fs.nextEffect}}while(null!==Fs);if(E=Qn,T=Wn(),w=E.focusedElem,u=E.selectionRange,T!==w&&w&&w.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(w.ownerDocument.documentElement,w)){null!==u&&Kn(w)&&(T=u.start,void 0===(E=u.end)&&(E=T),"selectionStart"in w?(w.selectionStart=T,w.selectionEnd=Math.min(E,w.value.length)):(E=(T=w.ownerDocument||document)&&T.defaultView||window).getSelection&&(E=E.getSelection(),l=w.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!E.extend&&u<s&&(l=u,u=s,s=l),l=zn(w,s),h=zn(w,u),l&&h&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((T=T.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),u<s?(E.addRange(T),E.extend(h.node,h.offset)):(T.setEnd(h.node,h.offset),E.addRange(T))))),T=[];for(E=w;E=E.parentNode;)1===E.nodeType&&T.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<T.length;w++)(E=T[w]).element.scrollLeft=E.left,E.element.scrollTop=E.top}En=!!Gn,Gn=Qn=null,e.current=n,Fs=i;do{try{for(w=r;null!==Fs;){var S=Fs.effectTag;if(36&S){var I=Fs.alternate;switch(E=w,(T=Fs).tag){case 0:case 11:case 15:ls(16,32,T);break;case 1:var k=T.stateNode;if(4&T.effectTag)if(null===I)k.componentDidMount();else{var C=T.elementType===T.type?I.memoizedProps:Qi(T.type,I.memoizedProps);k.componentDidUpdate(C,I.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var N=T.updateQueue;null!==N&&mo(0,N,k);break;case 3:var A=T.updateQueue;if(null!==A){if((s=null)!==T.child)switch(T.child.tag){case 5:s=T.child.stateNode;break;case 1:s=T.child.stateNode}mo(0,A,s)}break;case 5:var D=T.stateNode;null===I&&4&T.effectTag&&Hn(T.type,T.memoizedProps)&&D.focus();break;case 6:case 4:case 12:break;case 13:if(null===T.memoizedState){var _=T.alternate;if(null!==_){var x=_.memoizedState;if(null!==x){var O=x.dehydrated;null!==O&&It(O)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(a(163))}}if(128&S){T=void 0;var P=Fs.ref;if(null!==P){var R=Fs.stateNode;switch(Fs.tag){case 5:T=R;break;default:T=R}"function"==typeof P?P(T):P.current=T}}Fs=Fs.nextEffect}}catch(e){if(null===Fs)throw Error(a(330));gu(Fs,e),Fs=Fs.nextEffect}}while(null!==Fs);Fs=null,Oi(),ks=o}else e.current=n;if(qs)qs=!1,js=e,zs=t;else for(Fs=i;null!==Fs;)t=Fs.nextEffect,Fs.nextEffect=null,Fs=t;if(0===(t=e.firstPendingTime)&&(Bs=null),1073741823===t?e===Gs?Ks++:(Ks=0,Gs=e):Ks=0,"function"==typeof bu&&bu(n.stateNode,r),Zs(e),Us)throw Us=!1,e=Vs,Vs=null,e;return 0!=(8&ks)||zi(),null}.bind(null,e,t)),null}function du(){for(;null!==Fs;){var e=Fs.effectTag;0!=(256&e)&&cs(Fs.alternate,Fs),0==(512&e)||qs||(qs=!0,qi(97,(function(){return pu(),null}))),Fs=Fs.nextEffect}}function pu(){if(90!==zs){var e=97<zs?97:zs;return zs=90,Bi(e,mu)}}function mu(){if(null===js)return!1;var e=js;if(js=null,0!=(48&ks))throw Error(a(331));var t=ks;for(ks|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:ls(128,0,n),ls(0,64,n)}}catch(t){if(null===e)throw Error(a(330));gu(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return ks=t,zi(),!0}function yu(e,t,n){co(e,t=bs(e,t=os(n,t),1073741823)),null!==(e=Js(e,1073741823))&&Zs(e)}function gu(e,t){if(3===e.tag)yu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){yu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Bs||!Bs.has(r))){co(n,e=ws(n,e=os(t,e),1073741823)),null!==(n=Js(n,1073741823))&&Zs(n);break}}n=n.return}}function vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Cs===e&&As===n?4===Ds||3===Ds&&1073741823===xs&&Fi()-Ls<500?nu(e,As):Ms=!0:_u(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),Zs(e)))}Ts=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||ci.current)Fa=!0;else{if(r<n){switch(Fa=!1,t.tag){case 3:Ga(t),Ma();break;case 5:if(Uo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:fi(t.type)&&gi(t);break;case 4:Lo(t,t.stateNode.containerInfo);break;case 10:Zi(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&n<=r?Ja(e,t,n):(ai(Bo,1&Bo.current),null!==(t=ts(e,t,n))?t.sibling:null);ai(Bo,1&Bo.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return es(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ai(Bo,Bo.current),!r)return null}return ts(e,t,n)}Fa=!1}}else Fa=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=hi(t,ui.current),no(t,n),i=aa(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,sa(),fi(r)){var o=!0;gi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&bo(t,r,s,e),i.updater=wo,Io((t.stateNode=i)._reactInternalFiber=t,r,e,n),t=Ka(null,t,r,!0,o,n)}else t.tag=0,Ua(null,t,i,n),t=t.child;return t;case 16:if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),(e._result=t).then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return Su(e)?1:0;if(null!=e){if((e=e.$$typeof)===j)return 11;if(e===K)return 14}return 2}(i),e=Qi(i,e),o){case 0:t=za(null,t,i,e,n);break;case 1:t=Wa(null,t,i,e,n);break;case 11:t=Va(null,t,i,e,n);break;case 14:t=Ba(null,t,i,Qi(i.type,e),r,n);break;default:throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,za(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wa(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 3:if(Ga(t),null===(r=t.updateQueue))throw Error(a(282));if(i=null!==(i=t.memoizedState)?i.element:null,po(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i)Ma(),t=ts(e,t,n);else{if((i=t.stateNode.hydrate)&&(Aa=$n(t.stateNode.containerInfo.firstChild),Na=t,i=Da=!0),i)for(n=_o(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ua(e,t,r,n),Ma();t=t.child}return t;case 5:return Uo(t),null===e&&Oa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Yn(r,i)?s=null:null!==o&&Yn(r,o)&&(t.effectTag|=16),ja(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,null):(Ua(e,t,s,n),t.child);case 6:return null===e&&Oa(t),null;case 13:return Ja(e,t,n);case 4:return Lo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Do(t,null,r,n):Ua(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Va(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 7:return Ua(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ua(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,Zi(t,o=i.value),null!==s){var u=s.value;if(0==(o=Gr(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!ci.current){t=ts(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===u.tag&&((l=so(n,null)).tag=2,co(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),to(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}Ua(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,no(t,n),r=r(i=ro(i,o.unstable_observedBits)),t.effectTag|=1,Ua(e,t,r,n),t.child;case 14:return o=Qi(i=t.type,t.pendingProps),Ba(e,t,i,o=Qi(i.type,o),r,n);case 15:return qa(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Qi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,fi(r)?(e=!0,gi(t)):e=!1,no(t,n),Eo(t,r,i),Io(t,r,i,n),Ka(null,t,r,!0,e,n);case 19:return es(e,t,n)}throw Error(a(156,t.tag))};var bu=null,wu=null;function Tu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Eu(e,t,n,r){return new Tu(e,t,n,r)}function Su(e){return(e=e.prototype)&&e.isReactComponent}function Iu(e,t){var n=e.alternate;return null===n?((n=Eu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,(n.alternate=e).alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ku(e,t,n,r,i,o){var s=2;if("function"==typeof(r=e))Su(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case L:return Cu(n.children,i,o,t);case q:s=8,i|=7;break;case F:s=8,i|=1;break;case U:return(e=Eu(12,n,t,8|i)).elementType=U,e.type=U,e.expirationTime=o,e;case z:return(e=Eu(13,n,t,i)).type=z,e.elementType=z,e.expirationTime=o,e;case W:return(e=Eu(19,n,t,i)).elementType=W,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case V:s=10;break e;case B:s=9;break e;case j:s=11;break e;case K:s=14;break e;case G:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Eu(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Cu(e,t,n,r){return(e=Eu(7,e,r,t)).expirationTime=n,e}function Nu(e,t,n){return(e=Eu(6,e,null,t)).expirationTime=n,e}function Au(e,t,n){return(t=Eu(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Du(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function _u(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&t<=n&&e<=t}function xu(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(t<r||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Ou(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(n<=t?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Pu(e,t){var n=e.lastExpiredTime;(0===n||t<n)&&(e.lastExpiredTime=t)}function Ru(e,t,n,r){var i=t.current,o=Hs(),s=go.suspense;o=Ys(o,i,s);e:if(n){t:{if(Ze(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(fi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(fi(c)){n=yi(n,c,u);break e}}n=u}else n=si;return null===t.context?t.context=n:t.pendingContext=n,(t=so(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),co(i,t),Xs(i,o),o}function Mu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Lu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Fu(e,t){Lu(e,t),(e=e.alternate)&&Lu(e,t)}function Uu(e,t,n){var r,i,o=new Du(e,t,n=null!=n&&!0===n.hydrate),a=Eu(3,null,null,2===t?7:1===t?3:0);(o.current=a).stateNode=o,e[rr]=o.current,n&&0!==t&&(r=9===e.nodeType?e:e.ownerDocument,i=_n(r),pt.forEach((function(e){xn(e,r,i)})),mt.forEach((function(e){xn(e,r,i)}))),this._internalRoot=o}function Vu(e){return e&&(1===e.nodeType||9===e.nodeType||11===e.nodeType||8===e.nodeType&&" react-mount-point-unstable "===e.nodeValue)}function Bu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Mu(a);s.call(e)}}Ru(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(!(t=t||!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))))for(var n;n=e.lastChild;)e.removeChild(n);return new Uu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Mu(a);u.call(e)}}tu((function(){Ru(t,a,e,i)}))}return Mu(a)}function qu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Vu(t))throw Error(a(200));return function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:null;return{$$typeof:M,key:null==i?null:""+i,children:e,containerInfo:t,implementation:null}}(e,t,null,n)}Uu.prototype.render=function(e,t){Ru(e,this._internalRoot,null,void 0===t?null:t)},Uu.prototype.unmount=function(e){var t=this._internalRoot,n=void 0===e?null:e,r=t.containerInfo;Ru(null,t,null,(function(){(r[rr]=null)!==n&&n()}))},rt=function(e){if(13===e.tag){var t=Gi(Hs(),150,100);Xs(e,t),Fu(e,t)}},it=function(e){if(13===e.tag){Hs();var t=Ki++;Xs(e,t),Fu(e,t)}},ot=function(e){if(13===e.tag){var t=Hs();Xs(e,t=Ys(t,e,null)),Fu(e,t)}},$=function(e,t,n){switch(t){case"input":if(Ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=sr(r);if(!i)throw Error(a(90));Se(r),Ne(r,i)}}}break;case"textarea":Re(e,n);break;case"select":null!=(t=n.value)&&xe(e,!!n.multiple,t,!1)}},oe=function(e,t,n,r){var i=ks;ks|=4;try{return Bi(98,e.bind(null,t,n,r))}finally{0===(ks=i)&&zi()}},ae=function(){0==(49&ks)&&(function(){if(null!==Ws){var e=Ws;Ws=null,e.forEach((function(e,t){Pu(t,e),Zs(t)})),zi()}}(),pu())};var ju,zu,Wu={createPortal:qu,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0!==t)return null===(e=nt(t))?null:e.stateNode;if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))},hydrate:function(e,t,n){if(!Vu(t))throw Error(a(200));return Bu(null,e,t,!0,n)},render:function(e,t,n){if(!Vu(t))throw Error(a(200));return Bu(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!Vu(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Bu(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(!Vu(e))throw Error(a(40));return!!e._reactRootContainer&&(tu((function(){Bu(null,null,e,!1,(function(){e._reactRootContainer=null,e[rr]=null}))})),!0)},unstable_createPortal:function(){return qu.apply(void 0,arguments)},unstable_batchedUpdates:ie=function(e,t){var n=ks;ks|=1;try{return e(t)}finally{0===(ks=n)&&zi()}},flushSync:function(e,t){if(0!=(48&ks))throw Error(a(187));var n=ks;ks|=1;try{return Bi(99,e.bind(null,t))}finally{ks=n,zi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[or,ar,sr,D.injectEventPluginsByName,f,xt,function(e){k(e,_t)},ne,re,Cn,A,pu,{current:!(se=function(e,t){var n=ks;ks|=2;try{return e(t)}finally{0===(ks=n)&&zi()}})}]}};zu=(ju={findFiberByHostInstance:ir,bundleType:0,version:"16.12.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return;try{var n=t.inject(e);bu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},wu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}}(i({},ju,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return zu?zu(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),e.exports=Wu.default||Wu},function(e,t,n){"use strict";e.exports=n(15)},function(e,t,n){"use strict";var r,i,o,a,s;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,l=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(n){throw setTimeout(e,0),n}},h=Date.now();t.unstable_now=function(){return Date.now()-h},r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,d=window.Date,p=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var y=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof f&&"function"==typeof f.now)t.unstable_now=function(){return f.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var v=!1,b=null,w=-1,T=5,E=0;a=function(){return t.unstable_now()>=E},s=function(){},t.unstable_forceFrameRate=function(e){e<0||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):T=0<e?Math.floor(1e3/e):5};var S=new MessageChannel,I=S.port2;S.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();E=e+T;try{b(!0,e)?I.postMessage(null):(v=!1,b=null)}catch(e){throw I.postMessage(null),e}}else v=!1},r=function(e){b=e,v||(v=!0,I.postMessage(null))},i=function(e,n){w=p((function(){e(t.unstable_now())}),n)},o=function(){m(w),w=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=Math.floor((n-1)/2),i=e[r];if(!(void 0!==i&&0<A(i,t)))break e;e[r]=t,e[n]=i,n=r}}function C(e){return void 0===(e=e[0])?null:e}function N(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=1+o,u=e[s];if(void 0!==a&&A(a,n)<0)r=void 0!==u&&A(u,a)<0?(e[r]=u,e[s]=n,s):(e[r]=a,e[o]=n,o);else{if(!(void 0!==u&&A(u,n)<0))break e;e[r]=u,e[s]=n,r=s}}}return t}}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!=n?n:e.id-t.id}var D=[],_=[],x=1,O=null,P=3,R=!1,M=!1,L=!1;function F(e){for(var t=C(_);null!==t;){if(null===t.callback)N(_);else{if(!(t.startTime<=e))break;N(_),t.sortIndex=t.expirationTime,k(D,t)}t=C(_)}}function U(e){if(L=!1,F(e),!M)if(null!==C(D))M=!0,r(V);else{var t=C(_);null!==t&&i(U,t.startTime-e)}}function V(e,n){M=!1,L&&(L=!1,o()),R=!0;var r=P;try{for(F(n),O=C(D);null!==O&&(!(O.expirationTime>n)||e&&!a());){var s=O.callback;if(null!==s){O.callback=null,P=O.priorityLevel;var u=s(O.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?O.callback=u:O===C(D)&&N(D),F(n)}else N(D);O=C(D)}if(null!==O)var c=!0;else{var l=C(_);null!==l&&i(U,l.startTime-n),c=!1}return c}finally{O=null,P=r,R=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=s;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var u=a.delay;u="number"==typeof u&&0<u?s+u:s,a="number"==typeof a.timeout?a.timeout:B(e)}else a=B(e),u=s;return e={id:x++,callback:n,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},s<u?(e.sortIndex=u,k(_,e),null===C(D)&&e===C(_)&&(L?o():L=!0,i(U,u-s))):(e.sortIndex=a,k(D,e),M||R||(M=!0,r(V))),e},t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_shouldYield=function(){var e=t.unstable_now();F(e);var n=C(D);return n!==O&&null!==O&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<O.expirationTime||a()},t.unstable_requestPaint=q,t.unstable_continueExecution=function(){M||R||(M=!0,r(V))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return C(D)},t.unstable_Profiling=null},,,function(e,t,n){},function(e,t,n){"use strict";n(20)},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t);(function(){var t,n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}(this);function o(e){var t,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return r?r.call(e):{next:(t=e,n=0,function(){return n<t.length?{done:!1,value:t[n++]}:{done:!0}})}}!function(e,t){if(t){var r=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in r||(r[a]={}),r=r[a]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&n(r,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=i.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.o=function(e){var t=this.f();e.La(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(t){o(t)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.La(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.La=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=o(e),a=i.next();!a.done;a=i.next())r(a.value).La(t,n)}))},t.all=function(e){var n=o(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}for(var a=[],s=0;a.push(void 0),s++,r(i.value).La(o(a.length-1),t),!(i=n.next()).done;);}))},t}));var a=a||{},s=this||self;function u(e){return"string"==typeof e}function c(e){return"boolean"==typeof e}var l=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(){}function d(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function p(e){return null===e}function m(e){return"array"==d(e)}function y(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function g(e){return"function"==d(e)}function v(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var b="closure_uid_"+(1e9*Math.random()>>>0),w=0;function T(e,t,n){return e.call.apply(e.bind,arguments)}function E(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function S(e,t,n){return(S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T:E).apply(null,arguments)}function I(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var k=Date.now||function(){return+new Date};function C(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function N(e){if(e)try{return e.$goog_Thenable}catch(e){return}}function A(e){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function D(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");A.call(this,n+e[r])}function _(e,t){throw new D("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function x(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function O(e,t){e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}function P(){this.b=this.a=null}C(A,Error),A.prototype.name="CustomError",C(D,A),D.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var R=new x((function(){return new M}),(function(e){e.reset()}));function M(){this.next=this.b=this.a=null}function L(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(v(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;_("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}P.prototype.add=function(e,t){var n=R.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(u(e))return u(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},U=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=u(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},V=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=u(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},B=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=u(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function q(e,t){return 0<=F(e,t)}function j(e,t){var n;return(n=0<=(t=F(e,t)))&&Array.prototype.splice.call(e,t,1),n}function z(e,t){!function(e,t){for(var n=u(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1).length}))}function W(e){return Array.prototype.concat.apply([],arguments)}function K(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function G(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function Q(e){for(var t in e)return;return 1}function H(e){var t,n={};for(t in e)n[t]=e[t];return n}var Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Y.length;o++)n=Y[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function J(e,t){this.a=e===ee&&t||"",this.b=Z}function $(e){return e instanceof J&&e.constructor===J&&e.b===Z?e.a:(_("expected object of type Const, got '"+e+"'"),"type_error:Const")}J.prototype.qa=!0,J.prototype.pa=function(){return this.a},J.prototype.toString=function(){return"Const{"+this.a+"}"};var Z={},ee={},te=new J(ee,"");function ne(){this.a="",this.b=se}function re(e){return e instanceof ne&&e.constructor===ne&&e.b===se?e.a:(_("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function ie(e,t){var n=$(e);if(!ae.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ue(e=n.replace(oe,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof J?$(e):encodeURIComponent(String(e))})))}ne.prototype.qa=!0,ne.prototype.pa=function(){return this.a.toString()},ne.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var oe=/%{(\w+)}/g,ae=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,se={};function ue(e){var t=new ne;return t.a=e,t}var ce=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},le=/&/g,he=/</g,fe=/>/g,de=/"/g,pe=/'/g,me=/\x00/g,ye=/[\x00&<>"']/;function ge(e,t){return-1!=e.indexOf(t)}function ve(e,t){return e<t?-1:t<e?1:0}function be(){this.a="",this.b=Ie}function we(e){return e instanceof be&&e.constructor===be&&e.b===Ie?e.a:(_("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}be.prototype.qa=!0,be.prototype.pa=function(){return this.a.toString()},be.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Te=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ee(e){return e instanceof be?e:(e="object"==typeof e&&e.qa?e.pa():String(e),Te.test(e)||(e="about:invalid#zClosurez"),ke(e))}var Se,Ie={};function ke(e){var t=new be;return t.a=e,t}ke("about:blank");e:{var Ce=s.navigator;if(Ce){var Ne=Ce.userAgent;if(Ne){Se=Ne;break e}}Se=""}function Ae(e){return ge(Se,e)}function De(){this.a="",this.b=xe}function _e(e){return e instanceof De&&e.constructor===De&&e.b===xe?e.a:(_("expected object of type SafeHtml, got '"+e+"' of type "+d(e)),"type_error:SafeHtml")}De.prototype.qa=!0,De.prototype.pa=function(){return this.a.toString()},De.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var xe={};function Oe(e){var t=new De;return t.a=e,t}Oe("<!DOCTYPE html>");var Pe,Re,Me=Oe("");function Le(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Fe(e){return ye.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(le,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(he,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(fe,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(de,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(pe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(me,"&#0;"))),e}function Ue(e){s.setTimeout((function(){throw e}),0)}function Ve(e,t){Re||function(){if(s.Promise&&s.Promise.resolve){var e=s.Promise.resolve(void 0);Re=function(){e.then(je)}}else Re=function(){var e=je;!g(s.setImmediate)||s.Window&&s.Window.prototype&&!Ae("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Pe=Pe||function(){var e=s.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ae("Presto")&&(e=function(){var e,t,n=document.createElement("IFRAME");n.style.display="none",e=n,t=ue($(te)),L(e,"HTMLIFrameElement"),e.src=re(t).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(_e(Me)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=S((function(e){"*"!=o&&e.origin!=o||e.data!=i||this.port1.onmessage()}),this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===e||Ae("Trident")||Ae("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){s.setTimeout(e,0)};var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}())(e):s.setImmediate(e)}}(),Be||(Re(),Be=!0),qe.add(e,t)}Oe("<br>");var Be=!1,qe=new P;function je(){for(var e;n=t=void 0,n=null,(t=qe).a&&(n=t.a,t.a=t.a.next,t.a||(t.b=null),n.next=null),e=n;){try{e.a.call(e.b)}catch(e){Ue(e)}O(R,e)}var t,n;Be=!1}function ze(e,t){if(this.a=We,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=f)try{var n=this;e.call(t,(function(e){nt(n,Ke,e)}),(function(e){if(!(e instanceof ct))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}nt(n,Ge,e)}))}catch(e){nt(this,Ge,e)}}var We=0,Ke=2,Ge=3;function Qe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Qe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var He=new x((function(){return new Qe}),(function(e){e.reset()}));function Ye(e,t,n){var r=He.get();return r.g=e,r.b=t,r.f=n,r}function Xe(e){if(e instanceof ze)return e;var t=new ze(f);return nt(t,Ke,e),t}function Je(e){return new ze((function(t,n){n(e)}))}function $e(e,t,n){rt(e,t,n,null)||Ve(I(t,e))}function Ze(e){return new ze((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)$e(e[o],I(i,o,!0),I(i,o,!1));else t(r)}))}function et(e,t){e.b||e.a!=Ke&&e.a!=Ge||it(e),e.f?e.f.next=t:e.b=t,e.f=t}function tt(e,t,n,r){var i=Ye(null,null,null);return i.a=new ze((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(n){o(n)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof ct?o(t):e(i)}catch(t){o(t)}}:o})),et(i.a.c=e,i),i.a}function nt(e,t,n){var r,i;e.a==We&&(e===n&&(t=Ge,n=new TypeError("Promise cannot resolve to itself")),e.a=1,rt(n,e.Oc,e.Pc,e)||(e.i=n,e.a=t,e.c=null,it(e),t!=Ge||n instanceof ct||(i=n,(r=e).g=!0,Ve((function(){r.g&&ut.call(null,i)})))))}function rt(e,t,n,r){if(e instanceof ze)return et(e,Ye(t||f,n||null,r)),1;if(N(e))return e.then(t,n,r),1;if(v(e))try{var i=e.then;if(g(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,n.call(i,e))}),o)}catch(e){o(e)}}(e,i,t,n,r),1}catch(e){return n.call(r,e),1}}function it(e){e.h||(e.h=!0,Ve(e.Zb,e))}function ot(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function at(e,t,n,r){if(n==Ge&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,st(t,n,r);else try{t.c?t.g.call(t.f):st(t,n,r)}catch(e){ut.call(null,e)}O(He,t)}function st(e,t,n){t==Ke?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}ze.prototype.then=function(e,t,n){return tt(this,g(e)?e:null,g(t)?t:null,n)},ze.prototype.$goog_Thenable=!0,(t=ze.prototype).ka=function(e,t){return(e=Ye(e,e,t)).c=!0,et(this,e),this},t.s=function(e,t){return tt(this,null,e,t)},t.cancel=function(e){this.a==We&&Ve((function(){!function e(t,n){if(t.a==We)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==We&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):ot(r),at(r,o,Ge,n)))}t.c=null}else nt(t,Ge,n)}(this,new ct(e))}),this)},t.Oc=function(e){this.a=We,nt(this,Ke,e)},t.Pc=function(e){this.a=We,nt(this,Ge,e)},t.Zb=function(){for(var e;e=ot(this);)at(this,e,this.a,this.i);this.h=!1};var ut=Ue;function ct(e){A.call(this,e)}function lt(){0!=ht&&(ft[this[b]||(this[b]=++w)]=this),this.va=this.va,this.la=this.la}C(ct,A);var ht=0,ft={};function dt(e){if(!e.va&&(e.va=!0,e.za(),0!=ht)){var t=e[b]||(e[b]=++w);if(0!=ht&&e.la&&0<e.la.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ft[t]}}function pt(e){return pt[" "](e),e}lt.prototype.va=!(ct.prototype.name="cancel"),lt.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},pt[" "]=f;var mt,yt,gt=Ae("Opera"),vt=Ae("Trident")||Ae("MSIE"),bt=Ae("Edge"),wt=bt||vt,Tt=Ae("Gecko")&&!(ge(Se.toLowerCase(),"webkit")&&!Ae("Edge"))&&!(Ae("Trident")||Ae("MSIE"))&&!Ae("Edge"),Et=ge(Se.toLowerCase(),"webkit")&&!Ae("Edge");function St(){var e=s.document;return e?e.documentMode:void 0}e:{var It="",kt=(yt=Se,Tt?/rv:([^\);]+)(\)|;)/.exec(yt):bt?/Edge\/([\d\.]+)/.exec(yt):vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(yt):Et?/WebKit\/(\S+)/.exec(yt):gt?/(?:Version)[ \/]?(\S+)/.exec(yt):void 0);if(kt&&(It=kt?kt[1]:""),vt){var Ct=St();if(null!=Ct&&Ct>parseFloat(It)){mt=String(Ct);break e}}mt=It}var Nt,At={};function Dt(e){return t=e,n=At,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(){for(var t=0,n=ce(String(mt)).split("."),r=ce(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ve(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ve(0==a[2].length,0==s[2].length)||ve(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}();var t,n}Nt=s.document&&vt?St():void 0;var _t=Object.freeze||function(e){return e},xt=!vt||9<=Number(Nt),Ot=vt&&!Dt("9"),Pt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",f,t),s.removeEventListener("test",f,t)}catch(e){}return e}();function Rt(e,t){this.type=e,this.b=this.target=t,this.Mb=!0}function Mt(e,t){if(Rt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Tt){e:{try{pt(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=u(e.pointerType)?e.pointerType:Lt[e.pointerType]||"",(this.a=e).defaultPrevented&&this.preventDefault()}}Rt.prototype.preventDefault=function(){this.Mb=!1},C(Mt,Rt);var Lt=_t({2:"touch",3:"pen",4:"mouse"});Mt.prototype.preventDefault=function(){Mt.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Ot)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},Mt.prototype.f=function(){return this.a};var Ft="closure_listenable_"+(1e6*Math.random()|0),Ut=0;function Vt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Ut,this.ta=this.Ka=!1}function Bt(e){e.ta=!0,e.listener=null,e.proxy=null,e.src=null,e.Pa=null}function qt(e){this.src=e,this.a={},this.b=0}function jt(e,t){var n=t.type;n in e.a&&j(e.a[n],t)&&(Bt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function zt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ta&&o.listener==t&&o.capture==!!n&&o.Pa==r)return i}return-1}qt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=zt(e,t,r,i);return-1<a?(t=e[a],n||(t.Ka=!1)):((t=new Vt(t,this.src,o,!!r,i)).Ka=n,e.push(t)),t};var Wt="closure_lm_"+(1e6*Math.random()|0),Kt={};function Gt(e,t,n,r,i){if(r&&r.once)Ht(e,t,n,r,i);else if(m(t))for(var o=0;o<t.length;o++)Gt(e,t[o],n,r,i);else n=rn(n),e&&e[Ft]?an(e,t,n,v(r)?!!r.capture:!!r,i):Qt(e,t,n,!1,r,i)}function Qt(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a,s,u=v(i)?!!i.capture:!!i,c=tn(e);if(c||(e[Wt]=c=new qt(e)),!(n=c.add(t,n,r,u,o)).proxy)if(a=en,r=s=xt?function(e){return a.call(s.src,s.listener,e)}:function(e){if(!(e=a.call(s.src,s.listener,e)))return e},(n.proxy=r).src=e,r.listener=n,e.addEventListener)Pt||(i=u),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function Ht(e,t,n,r,i){if(m(t))for(var o=0;o<t.length;o++)Ht(e,t[o],n,r,i);else n=rn(n),e&&e[Ft]?sn(e,t,n,v(r)?!!r.capture:!!r,i):Qt(e,t,n,!0,r,i)}function Yt(e,t,n,r,i){if(m(t))for(var o=0;o<t.length;o++)Yt(e,t[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=rn(n),e&&e[Ft]?(e=e.u,(t=String(t).toString())in e.a&&-1<(n=zt(o=e.a[t],n,r,i))&&(Bt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):(e=e&&tn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=zt(t,n,r,i)),(n=-1<e?t[e]:null)&&Xt(n))}function Xt(e){if("number"!=typeof e&&e&&!e.ta){var t=e.src;if(t&&t[Ft])jt(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tn(t))?(jt(n,e),0==n.b&&(n.src=null,t[Wt]=null)):Bt(e)}}}function Jt(e){return e in Kt?Kt[e]:Kt[e]="on"+e}function $t(e,t,n,r){var i=!0;if((e=tn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ta&&(o=Zt(o,r),i=i&&!1!==o)}return i}function Zt(e,t){var n=e.listener,r=e.Pa||e.src;return e.Ka&&Xt(e),n.call(r,t)}function en(e,t){if(e.ta)return!0;if(xt)return Zt(e,new Mt(t,this));if(!t)e:{t=["window","event"];for(var n=s,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Mt(r=t,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=$t(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=$t(r[i],e,!1,t),n=n&&o}return n}function tn(e){return(e=e[Wt])instanceof qt?e:null}var nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function rn(e){return g(e)?e:(e[nn]||(e[nn]=function(t){return e.handleEvent(t)}),e[nn])}function on(){lt.call(this),this.u=new qt(this),(this.Sb=this).Xa=null}function an(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function sn(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function un(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ta&&a.capture==n){var s=a.listener,u=a.Pa||a.src;a.Ka&&jt(e.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function cn(e,t,n){if(g(e))n&&(e=S(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=S(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ln(e){var t=null;return new ze((function(n,r){-1==(t=cn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).s((function(e){throw s.clearTimeout(t),e}))}function hn(e){if(e.U&&"function"==typeof e.U)return e.U();if(u(e))return e.split("");if(y(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function fn(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.U||"function"!=typeof e.U){if(y(e)||u(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function dn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof dn)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function pn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];mn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)mn(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function mn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C(on,lt),on.prototype[Ft]=!0,on.prototype.addEventListener=function(e,t,n,r){Gt(this,e,t,n,r)},on.prototype.removeEventListener=function(e,t,n,r){Yt(this,e,t,n,r)},on.prototype.dispatchEvent=function(e){var t,n=this.Xa;if(n)for(t=[];n;n=n.Xa)t.push(n);n=this.Sb;var r=e.type||e;if(u(e))e=new Rt(e,n);else if(e instanceof Rt)e.target=e.target||n;else{var i=e;X(e=new Rt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=un(a,r,!0,e)&&i}if(i=un(a=e.b=n,r,!0,e)&&i,i=un(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=un(a=e.b=t[o],r,!1,e)&&i;return i},on.prototype.za=function(){if(on.qb.za.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Bt(n[r]);delete t.a[e],t.b--}}this.Xa=null},(t=dn.prototype).U=function(){pn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},t.X=function(){return pn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(e,t){return mn(this.b,e)?this.b[e]:t},t.set=function(e,t){mn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},t.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function gn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof gn?(this.h=void 0!==t?t:e.h,vn(this,e.f),this.i=e.i,this.b=e.b,bn(this,e.l),this.c=e.c,wn(this,Vn(e.a)),this.g=e.g):e&&(n=String(e).match(yn))?(this.h=!!t,vn(this,n[1]||"",!0),this.i=kn(n[2]||""),this.b=kn(n[3]||"",!0),bn(this,n[4]),this.c=kn(n[5]||"",!0),wn(this,n[6]||"",!0),this.g=kn(n[7]||"")):(this.h=!!t,this.a=new Pn(null,this.h))}function vn(e,t,n){e.f=n?kn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function bn(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.l=t}else e.l=null}function wn(e,t,n){var r,i;t instanceof Pn?(e.a=t,r=e.a,(i=e.h)&&!r.f&&(Rn(r),r.c=null,r.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ln(this,t),Un(this,n,e))}),r)),r.f=i):(n||(t=Cn(t,xn)),e.a=new Pn(t,e.h))}function Tn(e,t,n){e.a.set(t,n)}function En(e,t){return e.a.get(t)}function Sn(e){return e instanceof gn?new gn(e):new gn(e,void 0)}function In(e,t){var n=new gn(null,void 0);return vn(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function kn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cn(e,t,n){return u(e)?(e=encodeURI(e).replace(t,Nn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Nn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}gn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Cn(t,An,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.i)&&e.push(Cn(t,An,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cn(n,"/"==n.charAt(0)?_n:Dn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Cn(n,On)),e.join("")},gn.prototype.resolve=function(e){var t=new gn(this),n=!!e.f;n?vn(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)bn(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ge(i,"./")||ge(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?wn(t,Vn(e.a)):n=!!e.g,n&&(t.g=e.g),t};var An=/[#\/\?@]/g,Dn=/[#\?:]/g,_n=/[#\?]/g,xn=/[#\?@]/g,On=/#/g;function Pn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Rn(e){e.a||(e.a=new dn,e.b=0,e.c&&function(t){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];a=o,s=i?decodeURIComponent(i.replace(/\+/g," ")):"",e.add(decodeURIComponent(a.replace(/\+/g," ")),s)}}var a,s}(e.c))}function Mn(e){var t=fn(e);if(void 0===t)throw Error("Keys are undefined");var n=new Pn(null,void 0);e=hn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];m(o)?Un(n,i,o):n.add(i,o)}return n}function Ln(e,t){Rn(e),t=Bn(e,t),mn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,mn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&pn(e)))}function Fn(e,t){return Rn(e),t=Bn(e,t),mn(e.a.b,t)}function Un(e,t,n){Ln(e,t),0<n.length&&(e.c=null,e.a.set(Bn(e,t),K(n)),e.b+=n.length)}function Vn(e){var t=new Pn;return t.c=e.c,e.a&&(t.a=new dn(e.a),t.b=e.b),t}function Bn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(t=Pn.prototype).add=function(e,t){Rn(this),this.c=null,e=Bn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(e,t){Rn(this),this.a.forEach((function(n,r){U(n,(function(n){e.call(t,n,r,this)}),this)}),this)},t.X=function(){Rn(this);for(var e=this.a.U(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},t.U=function(e){Rn(this);var t=[];if(u(e))Fn(this,e)&&(t=W(t,this.a.get(Bn(this,e))));else{e=this.a.U();for(var n=0;n<e.length;n++)t=W(t,e[n])}return t},t.set=function(e,t){return Rn(this),this.c=null,Fn(this,e=Bn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},t.get=function(e,t){return e&&0<(e=this.U(e)).length?String(e[0]):t},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var qn=!vt||9<=Number(Nt);function jn(e){var t=document;return u(e)?t.getElementById(e):e}function zn(e,t){G(t,(function(t,n){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Wn.hasOwnProperty(n)?e.setAttribute(Wn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var Wn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Kn(e){if(e&&"number"==typeof e.length){if(v(e))return"function"==typeof e.item||"string"==typeof e.item;if(g(e))return"function"==typeof e.item}}function Gn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(m(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Xn(i,r),r.push(":"),e(t,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Xn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,e,t),t.join("")}function Qn(){}var Hn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Yn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Xn(e,t){t.push('"',e.replace(Yn,(function(e){var t=Hn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Hn[e]=t),t})),'"')}function Jn(){var e=mr();return vt&&Nt&&11==Nt||/Edge\/\d+/.test(e)}function $n(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function Zn(e,t){t=t||s.window;var n="about:blank";e&&(n=we(Ee(e)).toString()),t.location.href=n}function er(e){return!!((e=(e||mr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function tr(e){e=e||s.window;try{e.close()}catch(e){}}function nr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(t.target=r,ge(n,"crios/")&&(t.target="_blank")),fr(mr())==hr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof be?n:Ee(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((Ae("iPhone")&&!Ae("iPod")&&!Ae("iPad")||Ae("iPad")||Ae("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(L(a=r.document.createElement("A"),"HTMLAnchorElement"),t instanceof be||t instanceof be||(t="object"==typeof t&&t.qa?t.pa():String(t),Te.test(t)||(t="about:invalid#zClosurez"),t=ke(t)),a.href=we(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=we(t).toString(),a&&(wt&&ge(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=Oe('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Fe(e)+'">'),a.document.write(_e(e)),a.document.close())):(a=r.open(we(t).toString(),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}var rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^[^@]+@[^@]+$/;function or(){var e=null;return new ze((function(t){"complete"==s.document.readyState?t():(e=function(){t()},Ht(window,"load",e))})).s((function(t){throw Yt(window,"load",e),t}))}function ar(e){return e=e||mr(),!("file:"!==wr()&&"ionic:"!==wr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function sr(){var e=s.window;try{return e&&e!=e.top}catch(e){return}}function ur(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function cr(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function lr(){var e=cr();return"ReactNative"===e||"Node"===e}var hr="Firefox";function fr(e){var t=e.toLowerCase();return ge(t,"opera/")||ge(t,"opr/")||ge(t,"opios/")?"Opera":ge(t,"iemobile")?"IEMobile":ge(t,"msie")||ge(t,"trident/")?"IE":ge(t,"edge/")?"Edge":ge(t,"firefox/")?hr:ge(t,"silk/")?"Silk":ge(t,"blackberry")?"Blackberry":ge(t,"webos")?"Webos":!ge(t,"safari/")||ge(t,"chrome/")||ge(t,"crios/")||ge(t,"android")?!ge(t,"chrome/")&&!ge(t,"crios/")||ge(t,"edge/")?ge(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":"Chrome":"Safari"}var dr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function pr(e,t){t=t||[];var n,r=[],i={};for(n in dr)i[dr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=cr())?r=fr(i=mr()):"Worker"===r&&(r=fr(i=mr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function mr(){return s.navigator&&s.navigator.userAgent||""}function yr(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function gr(){try{var e=s.localStorage,t=kr();if(e)return e.setItem(t,"1"),e.removeItem(t),!Jn()||!!s.indexedDB}catch(e){return ur()&&!!s.indexedDB}return!1}function vr(){return(br()||"chrome-extension:"===wr()||ar())&&!lr()&&gr()&&!ur()}function br(){return"http:"===wr()||"https:"===wr()}function wr(){return s.location&&s.location.protocol||null}function Tr(e){return!er(e=e||mr())&&fr(e)!=hr}function Er(e){return void 0===e?null:Gn(e)}function Sr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Ir(e){if(null!==e)return JSON.parse(e)}function kr(e){return e||Math.floor(1e9*Math.random()).toString()}function Cr(e){return"Safari"!=fr(e=e||mr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Nr(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Ar(e,t){if(t<e)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=mr(),t=cr(),this.b=er(e)||"ReactNative"===t}function Dr(){var e=s.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function _r(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function xr(){return yr("fireauth.oauthhelper",s)||yr("fireauth.iframe",s)}Ar.prototype.get=function(){var e=s.navigator;return!e||"boolean"!=typeof e.onLine||!br()&&"chrome-extension:"!==wr()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Or,Pr={};function Rr(e){Pr[e]||(Pr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Mr={};Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:2}),Or=2==Mr.abcd}catch(qo){Or=!1}function Lr(e,t,n){Or?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Fr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Lr(e,n,t[n])}function Ur(e){var t={};return Fr(t,e),t}function Vr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Lr(t,n,Vr(e[n]));return t}function Br(e){var t={},n=e[jr],r=e[zr];if(!(e=e[Wr])||e!=qr&&!n)throw Error("Invalid provider user info!");t[Gr]=r||null,t[Kr]=n||null,Lr(this,Hr,e),Lr(this,Qr,Vr(t))}var qr="EMAIL_SIGNIN",jr="email",zr="newEmail",Wr="requestType",Kr="email",Gr="fromEmail",Qr="data",Hr="operation";function Yr(e,t){this.code=Jr+e,this.message=t||$r[e]||""}function Xr(e){var t=e&&e.code;return t?new Yr(t.substring(Jr.length),e.message):null}C(Yr,Error),Yr.prototype.A=function(){return{code:this.code,message:this.message}},Yr.prototype.toJSON=function(){return this.A()};var Jr="auth/",$r={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Zr(e){var t=En(e=Sn(e),ei)||null,n=En(e,ti)||null,r=En(e,ii)||null;if(r=r&&ai[r]||null,!t||!n||!r)throw new Yr("argument-error",ei+", "+ti+"and "+ii+" are required in a valid action code URL.");Fr(this,{apiKey:t,operation:r,code:n,continueUrl:En(e,ni)||null,languageCode:En(e,ri)||null,tenantId:En(e,oi)||null})}var ei="apiKey",ti="oobCode",ni="continueUrl",ri="languageCode",ii="mode",oi="tenantId",ai={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:qr,verifyEmail:"VERIFY_EMAIL"};function si(e){try{return new Zr(e)}catch(e){return null}}function ui(e){var t=e[di];if(void 0===t)throw new Yr("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Yr("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[ci];if(n&&"object"==typeof n){t=n[yi];var r=n[pi];if(n=n[mi],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new Yr("argument-error",pi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Yr("argument-error",mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Yr("argument-error",yi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Yr("missing-android-pkg-name")}}else if(void 0!==n)throw new Yr("argument-error",ci+" property must be a non null object when specified.");if(this.f=null,(t=e[fi])&&"object"==typeof t){if("string"==typeof(t=t[gi])&&t.length)this.f=t;else if(void 0!==t)throw new Yr("argument-error",gi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Yr("argument-error",fi+" property must be a non null object when specified.");if(void 0!==(t=e[hi])&&"boolean"!=typeof t)throw new Yr("argument-error",hi+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[li])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Yr("argument-error",li+" property must be a non empty string when specified.");this.i=e||null}var ci="android",li="dynamicLinkDomain",hi="handleCodeInApp",fi="iOS",di="url",pi="installApp",mi="minimumVersion",yi="packageName",gi="bundleId";function vi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var bi=null,wi=null;function Ti(e){this.f=e.sub,k(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.c=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Ei(e){return(e=Si(e))&&e.sub&&e.iss&&e.aud&&e.exp?new Ti(e):null}function Si(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse((r="",function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=wi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!bi){bi={},wi={};for(var e=0;e<65;e++)bi[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),62<=(wi[bi[e]]=e)&&(wi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){r+=String.fromCharCode(e)})),r))}catch(e){}var r;return null}Ti.prototype.R=function(){return this.c},Ti.prototype.g=function(){return this.b};var Ii,ki={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ci(e){for(var t in ki)if(ki[t].id===e)return{firebaseEndpoint:(e=ki[t]).cb,secureTokenEndpoint:e.ib};return null}Ii=Ci("__EID__")?"__EID__":void 0;var Ni="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ai=["client_id","response_type","scope","redirect_uri","state"],Di={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Ai},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Ai},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Ai},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Ni},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function _i(e){for(var t in Di)if(Di[t].Fa==e)return Di[t];return null}function xi(e){var t={};t["facebook.com"]=Li,t["google.com"]=Ui,t["github.com"]=Fi,t["twitter.com"]=Vi;var n=e&&e[Pi];try{if(n)return t[n]?new t[n](e):new Mi(e);if(void 0!==e[Oi])return new Ri(e)}catch(e){}return null}var Oi="idToken",Pi="providerId";function Ri(e){var t=e[Pi];if(!t&&e[Oi]){var n=Ei(e[Oi]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Lr(this,"providerId",t),Lr(this,"isNewUser",n)}function Mi(e){Ri.call(this,e),Lr(this,"profile",Vr((e=Ir(e.rawUserInfo||"{}"))||{}))}function Li(e){if(Mi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Fi(e){if(Mi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Lr(this,"username",this.profile&&this.profile.login||null)}function Ui(e){if(Mi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vi(e){if(Mi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Lr(this,"username",e.screenName||null)}function Bi(e){var t=Sn(e),n=En(t,"link"),r=En(Sn(n),"link");return t=En(t,"deep_link_id"),En(Sn(t),"link")||t||r||n||e}function qi(){}function ji(e,t){return e.then((function(e){if(e[_a]){var n=Ei(e[_a]);if(!n||t!=n.f)throw new Yr("user-mismatch");return e}throw new Yr("user-mismatch")})).s((function(e){throw e&&e.code&&e.code==Jr+"user-not-found"?new Yr("user-mismatch"):e}))}function zi(e,t){if(!t)throw new Yr("internal-error","failed to construct a credential");this.a=t,Lr(this,"providerId",e),Lr(this,"signInMethod",e)}function Wi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Ki(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new zi(e.providerId,e.pendingToken)}catch(e){}return null}function Gi(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Lr(this,"idToken",t.idToken),t.accessToken&&Lr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Lr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Yr("internal-error","failed to construct a credential");Lr(this,"accessToken",t.oauthToken),Lr(this,"secret",t.oauthTokenSecret)}Lr(this,"providerId",e),Lr(this,"signInMethod",n)}function Qi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Mn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Hi(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Gi(e.providerId,t,e.signInMethod)}catch(e){}}return null}function Yi(e,t){this.Fc=t||[],Fr(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(_i(e)||{}).Ea||null,this.bb=null}function Xi(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Yr("argument-error",'SAML provider IDs must be prefixed with "saml."');Yi.call(this,e,[])}function Ji(e){Yi.call(this,e,Ai),this.a=[]}function $i(){Ji.call(this,"facebook.com")}function Zi(e){if(!e)throw new Yr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new $i).credential({accessToken:t})}function eo(){Ji.call(this,"github.com")}function to(e){if(!e)throw new Yr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new eo).credential({accessToken:t})}function no(){Ji.call(this,"google.com"),this.ya("profile")}function ro(e,t){var n=e;return v(e)&&(n=e.idToken,t=e.accessToken),(new no).credential({idToken:n,accessToken:t})}function io(){Yi.call(this,"twitter.com",Ni)}function oo(e,t){var n=e;if(v(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Yr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Gi("twitter.com",n,"twitter.com")}function ao(e,t,n){this.a=e,this.c=t,Lr(this,"providerId","password"),Lr(this,"signInMethod",n===uo.EMAIL_LINK_SIGN_IN_METHOD?uo.EMAIL_LINK_SIGN_IN_METHOD:uo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function so(e){return e&&e.email&&e.password?new ao(e.email,e.password,e.signInMethod):null}function uo(){Fr(this,{providerId:"password",isOAuthProvider:!1})}function co(e,t){if(!(t=lo(t)))throw new Yr("argument-error","Invalid email link!");return new ao(e,t.code,uo.EMAIL_LINK_SIGN_IN_METHOD)}function lo(e){return(e=si(e=Bi(e)))&&e.operation===qr?e:null}function ho(e){if(!(e.Va&&e.Ua||e.Ha&&e.ba))throw new Yr("internal-error");this.a=e,Lr(this,"providerId","phone"),Lr(this,"signInMethod","phone")}function fo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new ho(t)}return null}function po(e){return e.a.Ha&&e.a.ba?{temporaryProof:e.a.Ha,phoneNumber:e.a.ba}:{sessionInfo:e.a.Va,code:e.a.Ua}}function mo(e){try{this.a=e||r.a.auth()}catch(e){throw new Yr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Fr(this,{providerId:"phone",isOAuthProvider:!1})}function yo(e,t){if(!e)throw new Yr("missing-verification-id");if(!t)throw new Yr("missing-verification-code");return new ho({Va:e,Ua:t})}function go(e){if(e.temporaryProof&&e.phoneNumber)return new ho({Ha:e.temporaryProof,ba:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return ro(o,n);case"facebook.com":return Zi(n);case"github.com":return to(n);case"twitter.com":return oo(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new zi(t,a):new Gi(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Ji(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function vo(e){if(!e.isOAuthProvider)throw new Yr("invalid-oauth-provider")}function bo(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Yr("invalid-auth-event");if(this.g&&this.a)throw new Yr("invalid-auth-event");if(this.g&&!this.f)throw new Yr("invalid-auth-event")}function wo(e){return(e=e||{}).type?new bo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Xr(e.error),e.postBody,e.tenantId):null}function To(){this.b=null,this.a=[]}C(Mi,Ri),C(Li,Mi),C(Fi,Mi),C(Ui,Mi),C(Vi,Mi),zi.prototype.na=function(e){return Ha(e,Wi(this))},zi.prototype.b=function(e,t){var n=Wi(this);return n.idToken=t,Ya(e,n)},zi.prototype.f=function(e,t){return ji(Xa(e,Wi(this)),t)},zi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Gi.prototype.na=function(e){return Ha(e,Qi(this))},Gi.prototype.b=function(e,t){var n=Qi(this);return n.idToken=t,Ya(e,n)},Gi.prototype.f=function(e,t){return ji(Xa(e,Qi(this)),t)},Gi.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Yi.prototype.Ga=function(e){return this.zb=H(e),this},C(Xi,Yi),C(Ji,Yi),Ji.prototype.ya=function(e){return q(this.a,e)||this.a.push(e),this},Ji.prototype.Hb=function(){return K(this.a)},Ji.prototype.credential=function(e,t){var n;if(!(n=v(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new Yr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Gi(this.providerId,n,this.providerId)},C($i,Ji),Lr($i,"PROVIDER_ID","facebook.com"),Lr($i,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(eo,Ji),Lr(eo,"PROVIDER_ID","github.com"),Lr(eo,"GITHUB_SIGN_IN_METHOD","github.com"),C(no,Ji),Lr(no,"PROVIDER_ID","google.com"),Lr(no,"GOOGLE_SIGN_IN_METHOD","google.com"),C(io,Yi),Lr(io,"PROVIDER_ID","twitter.com"),Lr(io,"TWITTER_SIGN_IN_METHOD","twitter.com"),ao.prototype.na=function(e){return this.signInMethod==uo.EMAIL_LINK_SIGN_IN_METHOD?ks(e,is,{email:this.a,oobCode:this.c}):ks(e,Ts,{email:this.a,password:this.c})},ao.prototype.b=function(e,t){return this.signInMethod==uo.EMAIL_LINK_SIGN_IN_METHOD?ks(e,os,{idToken:t,email:this.a,oobCode:this.c}):ks(e,ms,{idToken:t,email:this.a,password:this.c})},ao.prototype.f=function(e,t){return ji(this.na(e),t)},ao.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Fr(uo,{PROVIDER_ID:"password"}),Fr(uo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Fr(uo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),ho.prototype.na=function(e){return e.Wa(po(this))},ho.prototype.b=function(e,t){var n=po(this);return n.idToken=t,ks(e,Ss,n)},ho.prototype.f=function(e,t){var n=po(this);return n.operation="REAUTH",ji(e=ks(e,Is,n),t)},ho.prototype.A=function(){var e={providerId:"phone"};return this.a.Va&&(e.verificationId=this.a.Va),this.a.Ua&&(e.verificationCode=this.a.Ua),this.a.Ha&&(e.temporaryProof=this.a.Ha),this.a.ba&&(e.phoneNumber=this.a.ba),e},mo.prototype.Wa=function(e,t){var n=this.a.b;return Xe(t.verify()).then((function(r){if(!u(r))throw new Yr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return ks(n,ds,{phoneNumber:e,recaptchaToken:r}).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new Yr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Fr(mo,{PROVIDER_ID:"phone"}),Fr(mo,{PHONE_SIGN_IN_METHOD:"phone"}),bo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},bo.prototype.R=function(){return this.h},bo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Eo,So=null;function Io(e){var t="unauthorized-domain",n=void 0,r=Sn(e);e=r.b,"chrome-extension"==(r=r.f)?n=Le("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Le("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Yr.call(this,t,n)}function ko(e,t,n){Yr.call(this,e,n),(e=t||{}).Ab&&Lr(this,"email",e.Ab),e.ba&&Lr(this,"phoneNumber",e.ba),e.credential&&Lr(this,"credential",e.credential),e.Qb&&Lr(this,"tenantId",e.Qb)}function Co(e){if(e.code){var t=e.code||"";0==t.indexOf(Jr)&&(t=t.substring(Jr.length));var n={credential:go(e),Qb:e.tenantId};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.ba=e.phoneNumber;else if(!n.credential)return new Yr(t,e.message||void 0);return new ko(t,n,e.message)}return null}function No(){}function Ao(e){return e.c||(e.c=e.b())}function Do(){}function _o(e){if(e.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return e.f;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function xo(){}function Oo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.fc,this),this.a.onerror=S(this.Ib,this),this.a.onprogress=S(this.gc,this),this.a.ontimeout=S(this.kc,this)}function Po(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Ro(e,t,n){this.reset(e,t,n,void 0,void 0)}function Mo(e){this.f=e,this.b=this.c=this.a=null}function Lo(e,t){this.name=e,this.value=t}C(Io,Yr),C(ko,Yr),ko.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.A();return t&&X(e,t),e},ko.prototype.toJSON=function(){return this.A()},No.prototype.c=null,C(Do,No),Do.prototype.a=function(){var e=_o(this);return e?new ActiveXObject(e):new XMLHttpRequest},Do.prototype.b=function(){var e={};return _o(this)&&(e[0]=!0,e[1]=!0),e},Eo=new Do,C(xo,No),xo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Oo;throw Error("Unsupported browser")},xo.prototype.b=function(){return{}},(t=Oo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},t.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Po(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",Po(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,Po(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ro.prototype.a=null,Ro.prototype.reset=function(e,t,n,r,i){r||k(),delete this.a},Lo.prototype.toString=function(){return this.name};var Fo=new Lo("SEVERE",1e3),Uo=new Lo("WARNING",900),Vo=new Lo("CONFIG",700),Bo=new Lo("FINE",500);Mo.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(_("Root logger has no level set."),null)}(this).value)for(g(t)&&(t=t()),e=new Ro(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var qo,jo={},zo=null;function Wo(e){var t;if(zo||(zo=new Mo(""),(jo[""]=zo).c=Vo),!(t=jo[e])){t=new Mo(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=Wo(e.substr(0,n))).b||(n.b={}),(n.b[r]=t).a=n,jo[e]=t}return t}function Ko(e,t){e&&e.log(Bo,t,void 0)}function Go(e){this.f=e}function Qo(e){on.call(this),this.o=e,this.readyState=Ho,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Wo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}C(Go,No),Go.prototype.a=function(){return new Qo(this.f)},Go.prototype.b=(qo={},function(){return qo}),C(Qo,on);var Ho=0;function Yo(e){e.c.read().then(e.ec.bind(e)).catch(e.Oa.bind(e))}function Xo(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,Jo(e)}function Jo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function $o(e){on.call(this),this.headers=new dn,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Zo,this.v=this.P=!1}(t=Qo.prototype).open=function(e,t){if(this.readyState!=Ho)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,Jo(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.o.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.Oa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Xo(this,!1)),this.readyState=Ho},t.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Jo(this)),this.a&&(this.readyState=3,Jo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==s.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,Yo(this)):e.text().then(this.ic.bind(this),this.Oa.bind(this)))))},t.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Xo(this,!0):Jo(this),3==this.readyState&&Yo(this)}},t.ic=function(e){this.a&&(this.response=this.responseText=e,Xo(this,!0))},t.hc=function(e){this.a&&(this.response=e,Xo(this,!0))},t.Oa=function(e){var t=this.h;t&&t.log(Uo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&Xo(this,!0)},t.setRequestHeader=function(e,t){this.i.append(e,t)},t.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Uo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Uo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},C($o,on);var Zo="";$o.prototype.b=Wo("goog.net.XhrIo");var ea=/^https?$/i,ta=["POST","PUT"];function na(e){return"content-type"==e.toLowerCase()}function ra(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ia(e),aa(e)}function ia(e){e.I||(e.I=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function oa(e){if(e.c&&void 0!==a)if(e.w[1]&&4==ua(e)&&2==ca(e))Ko(e.b,la(e,"Local request error detected and ignored"));else if(e.i&&4==ua(e))cn(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==ua(e)){Ko(e.b,la(e,"Request complete")),e.c=!1;try{var t,n=ca(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(yn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!ea.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<ua(e)?e.a.statusText:""}catch(t){Ko(e.b,"Can not get status: "+t.message),c=""}e.h=c+" ["+ca(e)+"]",ia(e)}}finally{aa(e)}}}function aa(e,t){if(e.a){sa(e);var n=e.a,r=e.w[0]?f:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Fo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function sa(e){e.a&&e.v&&(e.a.ontimeout=null),e.o&&(s.clearTimeout(e.o),e.o=null)}function ua(e){return e.a?e.a.readyState:0}function ca(e){try{return 2<ua(e)?e.a.status:-1}catch(e){return-1}}function la(e,t){return t+" ["+e.O+" "+e.l+" "+ca(e)+"]"}function ha(e){var t=Ea;this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function fa(e,t,n){e.a=!0,e.c=n,e.f=!t,ya(e)}function da(e){if(e.a){if(!e.u)throw new ga;e.u=!1}}function pa(e,t,n,r){e.g.push([t,n,r]),e.a&&ya(e)}function ma(e){return B(e.g,(function(e){return g(e[1])}))}function ya(e){if(e.h&&e.a&&ma(e)){var t=e.h,n=wa[t];n&&(s.clearTimeout(n.a),delete wa[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var u=o.call(i||e.o,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(N(t)||"function"==typeof s.Promise&&t instanceof s.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,ma(e)||(n=!0)}}e.c=t,r&&(u=S(e.m,e,!0),r=S(e.m,e,!1),t instanceof ha?(pa(t,u,r),t.w=!0):t.then(u,r)),n&&(t=new ba(t),wa[t.a]=t,e.h=t.a)}function ga(){A.call(this)}function va(){A.call(this)}function ba(e){this.a=s.setTimeout(S(this.c,this),0),this.b=e}(t=$o.prototype).Ia=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ko(this.b,la(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Ko(this.b,la(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),aa(this))},t.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),aa(this,!0)),$o.qb.za.call(this)},t.Lb=function(){this.va||(this.J||this.i||this.f?oa(this):this.yc())},t.yc=function(){oa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Zo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Fo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Ko(this.b,"Can not get response: "+e.message),null}},ha.prototype.cancel=function(e){if(this.a)this.c instanceof ha&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,t.l<=0&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new va,da(this),fa(this,!1,e))}},ha.prototype.m=function(e,t){this.i=!1,fa(this,e,t)},ha.prototype.then=function(e,t,n){var r,i,o=new ze((function(e,t){r=e,i=t}));return pa(this,r,(function(e){e instanceof va?o.cancel():i(e)})),o.then(e,t,n)},ha.prototype.$goog_Thenable=!0,C(ga,A),ga.prototype.message="Deferred has already fired",ga.prototype.name="AlreadyCalledError",C(va,A),va.prototype.message="Deferred was canceled",va.prototype.name="CanceledError",ba.prototype.c=function(){throw delete wa[this.a],this.b};var wa={};function Ta(e){var t,n,r,i,o={},a=o.document||document,u=re(e).toString(),c=document.createElement("SCRIPT"),f={Nb:c,Ia:void 0},d=new ha(f),p=null,m=null!=o.timeout?o.timeout:5e3;return 0<m&&(p=window.setTimeout((function(){Sa(c,!0);var e=new Ca(ka,"Timeout reached for loading script "+u);da(d),fa(d,!1,e)}),m),f.Ia=p),c.onload=c.onreadystatechange=function(){c.readyState&&"loaded"!=c.readyState&&"complete"!=c.readyState||(Sa(c,o.gd||!1,p),da(d),fa(d,!0,null))},c.onerror=function(){Sa(c,!0,p);var e=new Ca(Ia,"Error while loading script "+u);da(d),fa(d,!1,e)},X(f=o.attributes||{},{type:"text/javascript",charset:"UTF-8"}),zn(c,f),i=e,L(r=c,"HTMLScriptElement"),r.src=re(i),null===h&&(h=(i=(i=s.document).querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&l.test(i)?i:""),(i=h)&&r.setAttribute("nonce",i),((n=((t=a)||document).getElementsByTagName("HEAD"))&&0!=n.length?n[0]:t.documentElement).appendChild(c),d}function Ea(){if(this&&this.Nb){var e=this.Nb;e&&"SCRIPT"==e.tagName&&Sa(e,!0,this.Ia)}}function Sa(e,t,n){null!=n&&s.clearTimeout(n),e.onload=f,e.onerror=f,e.onreadystatechange=f,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Ia=0,ka=1;function Ca(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),A.call(this,n),this.code=e}function Na(e){this.f=e}function Aa(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||xa,this.g=H(e.secureTokenHeaders||Oa),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||Pa,this.a=H(e.firebaseHeaders||Ra),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==cr(),!(n=s.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!ur())throw new Yr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ur()?this.f=new Go(self):lr()?this.f=new Na(n):this.f=new xo,this.b=null}C(Ca,A),C(Na,No),Na.prototype.a=function(){return new this.f},Na.prototype.b=function(){return{}};var Da,_a="idToken",xa=new Ar(3e4,6e4),Oa={"Content-Type":"application/x-www-form-urlencoded"},Pa=new Ar(3e4,6e4),Ra={"Content-Type":"application/json"};function Ma(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function La(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Fa(e,t,n,r,i,o,a){var u;(e=!((u="Chrome"==fr(u=mr())&&(u=u.match(/\sChrome\/(\d+)/i))&&2==u.length?parseInt(u[1],10):null)&&u<30||vt&&Nt&&!(9<Nt))||ur()?S(e.o,e):(Da=Da||new ze((function(e,t){var n,r;n=e,r=t,((window.gapi||{}).client||{}).request?n():(s[Va]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},pa(Ta(ie(Ua,{onload:Va})),null,(function(){r(Error("CORS_UNSUPPORTED"))}),void 0))})),S(e.m,e)))(t,n,r,i,o,a)}Aa.prototype.R=function(){return this.b},Aa.prototype.o=function(e,t,n,r,i,o){if(ur()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new Yr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new $o(this.f);if(o){a.g=Math.max(0,o);var c=setTimeout((function(){a.dispatchEvent("timeout")}),o)}an(a,"complete",(function(){c&&clearTimeout(c);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Ko(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}t&&t(e)})),sn(a,"ready",(function(){c&&clearTimeout(c),dt(this)})),sn(a,"timeout",(function(){c&&clearTimeout(c),dt(this),t&&t(null)})),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():Eo.a(),e.w=e.B?Ao(e.B):Ao(Eo),e.a.onreadystatechange=S(e.Lb,e);try{Ko(e.b,la(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(t){return Ko(e.b,la(e,"Error opening Xhr: "+t.message)),ra(e,t)}t=r||"";var o,a=new dn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(y(e)||u(e))U(e,t,void 0);else for(var n=fn(e),r=hn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){a.set(t,e)})),i=function(e){e:{for(var t=na,n=e.length,r=u(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:u(e)?e.charAt(t):e[t]}(a.X()),r=s.FormData&&t instanceof s.FormData,!q(ta,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{sa(e),0<e.g&&(e.v=(o=e.a,vt&&Dt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),Ko(e.b,la(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=S(e.Ia,e)):e.o=cn(e.Ia,e.g,e)),Ko(e.b,la(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){Ko(e.b,la(e,"Send error: "+t.message)),ra(e,t)}}(a,e,n,r,i)};var Ua=new J(ee,"https://apis.google.com/js/client.js?onload=%{onload}"),Va="__fcb"+Math.floor(1e6*Math.random()).toString();function Ba(e){if(!u(e=e.email)||!ir.test(e))throw new Yr("invalid-email")}function qa(e){"email"in e&&Ba(e)}function ja(e){if(!e[_a])throw new Yr("internal-error")}function za(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Yr("internal-error")}else{if(!e.sessionInfo)throw new Yr("missing-verification-id");if(!e.code)throw new Yr("missing-verification-code")}}Aa.prototype.m=function(e,t,n,r,i){var o=this;Da.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).s((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Aa.prototype.ob=function(){return ks(this,ys,{})},Aa.prototype.rb=function(e,t){return ks(this,ps,{idToken:e,email:t})},Aa.prototype.sb=function(e,t){return ks(this,ms,{idToken:e,password:t})};var Wa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ka(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Yr("internal-error")}function Ga(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&Fn(e=new Pn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function Qa(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Co(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Co(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Co(e)):e.errorMessage&&(t=Cs(e.errorMessage)),t)throw t;if(!e[_a])throw new Yr("internal-error")}function Ha(e,t){return t.returnIdpCredential=!0,ks(e,gs,t)}function Ya(e,t){return t.returnIdpCredential=!0,ks(e,bs,t)}function Xa(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,ks(e,vs,t)}function Ja(e){if(!e.oobCode)throw new Yr("invalid-action-code")}(t=Aa.prototype).tb=function(e,t){var n={idToken:e},r=[];return G(Wa,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ks(this,ps,n)},t.kb=function(e,t){return X(e={requestType:"PASSWORD_RESET",email:e},t),ks(this,cs,e)},t.lb=function(e,t){return X(e={requestType:"EMAIL_SIGNIN",email:e},t),ks(this,ss,e)},t.jb=function(e,t){return X(e={requestType:"VERIFY_EMAIL",idToken:e},t),ks(this,us,e)},t.Wa=function(e){return ks(this,Es,e)},t.ab=function(e,t){return ks(this,fs,{oobCode:e,newPassword:t})},t.Ma=function(e){return ks(this,Za,{oobCode:e})},t.Ya=function(e){return ks(this,$a,{oobCode:e})};var $a={endpoint:"setAccountInfo",D:Ja,fa:"email",F:!0},Za={endpoint:"resetPassword",D:Ja,K:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Yr("internal-error")},F:!0},es={endpoint:"signupNewUser",D:function(e){if(Ba(e),!e.password)throw new Yr("weak-password")},K:ja,T:!0,F:!0},ts={endpoint:"createAuthUri",F:!0},ns={endpoint:"deleteAccount",V:["idToken"]},rs={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(e){if(!m(e.deleteProvider))throw new Yr("internal-error")}},is={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Ba,K:ja,T:!0,F:!0},os={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Ba,K:ja,T:!0},as={endpoint:"getAccountInfo"},ss={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Yr("internal-error");Ba(e)},fa:"email",F:!0},us={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Yr("internal-error")},fa:"email",F:!0},cs={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Yr("internal-error");Ba(e)},fa:"email",F:!0},ls={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},hs={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(e){if(!e.recaptchaSiteKey)throw new Yr("internal-error")}},fs={endpoint:"resetPassword",D:Ja,fa:"email",F:!0},ds={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},ps={endpoint:"setAccountInfo",V:["idToken"],D:qa,T:!0},ms={endpoint:"setAccountInfo",V:["idToken"],D:function(e){if(qa(e),!e.password)throw new Yr("weak-password")},K:ja,T:!0},ys={endpoint:"signupNewUser",K:ja,T:!0,F:!0},gs={endpoint:"verifyAssertion",D:Ka,Ra:Ga,K:Qa,T:!0,F:!0},vs={endpoint:"verifyAssertion",D:Ka,Ra:Ga,K:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Yr("user-not-found");if(e.errorMessage)throw Cs(e.errorMessage);if(!e[_a])throw new Yr("internal-error")},T:!0,F:!0},bs={endpoint:"verifyAssertion",D:function(e){if(Ka(e),!e.idToken)throw new Yr("internal-error")},Ra:Ga,K:Qa,T:!0},ws={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new Yr("invalid-custom-token")},K:ja,T:!0,F:!0},Ts={endpoint:"verifyPassword",D:function(e){if(Ba(e),!e.password)throw new Yr("wrong-password")},K:ja,T:!0,F:!0},Es={endpoint:"verifyPhoneNumber",D:za,K:ja,F:!0},Ss={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new Yr("internal-error");za(e)},K:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Co(e);ja(e)}},Is={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:za,K:ja,F:!0};function ks(e,t,n){if(!function(e,t){if(!t||!t.length)return 1;if(e){for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return}return 1}}(n,t.V))return Je(new Yr("internal-error"));var r,i=t.Kb||"POST";return Xe(n).then(t.D).then((function(){return t.T&&(n.returnSecureToken=!0),t.F&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o){var a=Sn(e.h+t);Tn(a,"key",e.c),o&&Tn(a,"cb",k().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Tn(a,u,r[u]);return new ze((function(t,o){Fa(e,a.toString(),(function(e){e?e.error?o(Ns(e,i||{})):t(e):o(new Yr("network-request-failed"))}),n,s?void 0:Gn(Sr(r)),e.a,e.i.get())}))}(e,t.endpoint,i,n,t.Yb,t.wb||!1)})).then((function(e){return r=e,t.Ra?t.Ra(n,r):r})).then(t.K).then((function(){if(!t.fa)return r;if(!(t.fa in r))throw new Yr("internal-error");return r[t.fa]}))}function Cs(e){return Ns({error:{errors:[{message:e}],code:400,message:e}})}function Ns(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Yr(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",X(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new Yr(r[i],t);return!t&&e&&(t=Er(e)),new Yr("internal-error",t)}function As(e){var t;this.b=e,this.a=null,this.gb=(t=this,(Os=Os||new ze((function(e,t){function n(){Nr(),yr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Nr(),t(Error("Network Error"))},timeout:_s.get()})}if(yr("gapi.iframes.Iframe"))e();else if(yr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){yr("gapi.load")?n():t(Error("Network Error"))},Xe(Ta(r=ie(Ds,{onload:r}))).s((function(){t(Error("Network Error"))}))}})).s((function(e){throw Os=null,e}))).then((function(){return new ze((function(e,n){yr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),xs.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))})))}var Ds=new J(ee,"https://apis.google.com/js/api.js?onload=%{onload}"),_s=new Ar(3e4,6e4),xs=new Ar(5e3,15e3),Os=null;function Ps(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=In(this.i,"/__/auth/iframe"),Tn(this.a,"apiKey",this.g),Tn(this.a,"appName",this.h),this.b=null,this.c=[]}function Rs(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Ms(e){try{return r.a.app(e).auth().Ca()}catch(e){return[]}}function Ls(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Fs(e){var t=$n();return ks(e,ls,{}).then((function(e){return e.authorizedDomains||[]})).then((function(e){e:{var n=Sn(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(a=0==o.indexOf("chrome-extension://")?Sn(o).b==a&&"chrome-extension"==s:("http"==s||"https"==s)&&(rr.test(o)?a==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)))){e=!0;break e}}e=!1}if(!e)throw new Io($n())}))}function Us(e){return e.l||(e.l=or().then((function(){if(!e.o){var t=e.c,n=e.h,r=Ms(e.b),i=new Ps(e.u,e.f,e.b);i.f=t,i.b=n,i.c=K(r||[]),e.o=i.toString()}e.i=new As(e.o),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");var t,n;t=e.i,n=function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=wo(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Xe(n)}return n.status="ERROR",Xe(n)},t.gb.then((function(){t.a.register("authEvent",n,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e)}))),e.l}function Vs(e){return e.m||(e.v=e.c?pr(e.c,Ms(e.b)):null,e.m=new Aa(e.f,Ci(e.h),e.v)),e.m}function Bs(e,t,n,r,i,o,a,s,u,c,l){return(e=new Rs(e,t,n,r,i)).l=o,e.g=a,e.i=s,e.b=H(u||null),e.f=c,e.nb(l).toString()}function qs(e){if(this.a=e||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Yr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function js(e){this.b=e,this.a={},this.f=S(this.c,this)}Ps.prototype.toString=function(){return this.f?Tn(this.a,"v",this.f):Ln(this.a.a,"v"),this.b?Tn(this.a,"eid",this.b):Ln(this.a.a,"eid"),this.c.length?Tn(this.a,"fw",this.c.join(",")):Ln(this.a.a,"fw"),this.a.toString()},Rs.prototype.nb=function(e){return this.h=e,this},Rs.prototype.toString=function(){var e=In(this.o,"/__/auth/handler");if(Tn(e,"apiKey",this.m),Tn(e,"appName",this.c),Tn(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var n=r.a.app(this.c).auth().ha()}catch(e){n=null}for(var i in t.bb=n,Tn(e,"providerId",this.a.providerId),n=Sr((t=this.a).zb))n[i]=n[i].toString();i=t.Fc,n=H(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}t.eb&&t.bb&&!n[t.eb]&&(n[t.eb]=t.bb),Q(n)||Tn(e,"customParameters",Er(n))}if("function"==typeof this.a.Hb&&(t=this.a.Hb()).length&&Tn(e,"scopes",t.join(",")),this.l?Tn(e,"redirectUrl",this.l):Ln(e.a,"redirectUrl"),this.g?Tn(e,"eventId",this.g):Ln(e.a,"eventId"),this.i?Tn(e,"v",this.i):Ln(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!En(e,s)&&Tn(e,s,this.b[s]);return this.h?Tn(e,"tid",this.h):Ln(e.a,"tid"),this.f?Tn(e,"eid",this.f):Ln(e.a,"eid"),(s=Ms(this.c)).length&&Tn(e,"fw",s.join(",")),e.toString()},(t=Ls.prototype).Fb=function(e,t,n){var r=new Yr("popup-closed-by-user"),i=new Yr("web-storage-unsupported"),o=this,a=!1;return this.ia().then((function(){var n,r;r={type:"webStorageSupport"},Us(n=o).then((function(){return e=n.i,t=r,e.gb.then((function(){return new ze((function(n){e.a.send(t.type,t,n,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}));var e,t})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})).then((function(n){n||(e&&tr(e),t(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return t=e,new ze((function(e){return function n(){ln(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}));var t})).then((function(){if(!a)return ln(n).then((function(){t(r)}))}))},t.Ob=function(){var e=mr();return!Tr(e)&&!Cr(e)},t.Jb=function(){return!1},t.Db=function(e,t,n,r,i,o,a,s){if(!e)return Je(new Yr("popup-blocked"));if(a&&!Tr())return this.ia().s((function(t){tr(e),i(t)})),r(),Xe();this.a||(this.a=Fs(Vs(this)));var u=this;return this.a.then((function(){var t=u.ia().s((function(t){throw tr(e),i(t),t}));return r(),t})).then((function(){vo(n),a||Zn(Bs(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,s),e)})).s((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},t.Eb=function(e,t,n,r){this.a||(this.a=Fs(Vs(this)));var i=this;return this.a.then((function(){vo(t),Zn(Bs(i.u,i.f,i.b,e,t,$n(),n,i.c,void 0,i.h,r))})).s((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},t.ia=function(){var e=this;return Us(this).then((function(){return e.i.gb})).s((function(){throw e.a=null,new Yr("network-request-failed")}))},t.Rb=function(){return!0},t.Aa=function(e){this.g.push(e)},t.Na=function(e){z(this.g,(function(t){return t==e}))},(t=qs.prototype).get=function(e){return Xe(this.a.getItem(e)).then((function(e){return e&&Ir(e)}))},t.set=function(e,t){return Xe(this.a.setItem(e,Er(t)))},t.S=function(e){return Xe(this.a.removeItem(e))},t.$=function(){},t.ea=function(){};var zs,Ws=[];function Ks(e,t,n){Q(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Gs(e){this.a=e}function Qs(e){this.c=e,this.b=!1,this.a=[]}function Hs(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return Je(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ze((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Ys(e,c),t})).s((function(t){throw Ys(e,c),t}))}function Ys(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),z(e.a,(function(e){return e==t}))}}function Xs(){if(!$s())throw new Yr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var e,t=this;ur()&&self?(this.l=function(){var e=ur()?self:null;if(U(Ws,(function(n){n.b==e&&(t=n)})),!t){var t=new js(e);Ws.push(t)}return t}(),Ks(this.l,"keyChanged",(function(e,n){return ru(t).then((function(e){return 0<e.length&&U(t.a,(function(t){t(e)})),{keyProcessed:q(e,n.key)}}))})),Ks(this.l,"ping",(function(){return Xe(["keyChanged"])}))):((e=s.navigator)&&e.serviceWorker?Xe().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).s((function(){return null})):Xe(null)).then((function(e){(t.h=e)&&(t.g=new Qs(new Gs(e)),Hs(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&q(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function Js(e){return e.m||(e.m=function e(t){return new ze((function(n,r){var i=t.u.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(e){}r(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){var o;(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):(o=t,new ze((function(e,t){var n=o.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){e()},n.onerror=function(e){t(Error(e.target.error))}})).then((function(){return e(t)})).then((function(e){n(e)})).s((function(e){r(e)})))}}))}(e)),e.m}function $s(){try{return s.indexedDB}catch(e){return}}function Zs(e){return e.objectStore("firebaseLocalStorage")}function eu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function tu(e){return new ze((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function nu(e,t){return e.g&&e.h&&((n=s.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===e.h?Hs(e.g,"keyChanged",{key:t},e.o).then((function(){})).s((function(){})):Xe();var n}function ru(e){return Js(e).then((function(e){var t=Zs(eu(e,!1));return t.getAll?tu(t.getAll()):new ze((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n&&typeof t[r]==typeof n[r]?"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function iu(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function ou(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Xe().then((function(){if($s()){var e=kr(),r="__sak"+e;return zs=zs||new Xs,(n=zs).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.$((function(e){U(t.a,(function(t){t(e)}))})),e}))}function au(){this.a={},this.type="inMemory"}function su(){if(!function(){var e="Node"==cr();if(e=uu()||e&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage)try{return e.setItem("__sak","1"),e.removeItem("__sak"),1}catch(e){return}}()){if("Node"==cr())throw new Yr("internal-error","The LocalStorage compatibility library was not found.");throw new Yr("web-storage-unsupported")}this.a=uu()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function uu(){try{var e=s.localStorage,t=kr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function cu(){this.type="nullStorage"}function lu(){if(!function(){var e="Node"==cr();if(e=hu()||e&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage)try{return e.setItem("__sak","1"),e.removeItem("__sak"),1}catch(e){return}}()){if("Node"==cr())throw new Yr("internal-error","The SessionStorage compatibility library was not found.");throw new Yr("web-storage-unsupported")}this.a=hu()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function hu(){try{var e=s.sessionStorage,t=kr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function fu(){var e={};e.Browser=mu,e.Node=yu,e.ReactNative=gu,e.Worker=vu,this.a=e[cr()]}js.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];U(r,(function(t){i.push(Xe().then((function(){return t(e.origin,e.data.data)})))})),Ze(i).then((function(r){var i=[];U(r,(function(e){i.push({fulfilled:e.Gb,value:e.value,reason:e.reason?e.reason.message:void 0})})),U(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Gs.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Qs.prototype.close=function(){for(;0<this.a.length;)Ys(this,this.a[0]);this.b=!0},(t=Xs.prototype).set=function(e,t){var n,r=!1,i=this;return Js(this).then((function(t){return tu((t=Zs(eu(n=t,!0))).get(e))})).then((function(o){var a=Zs(eu(n,!0));return o?(o.value=t,tu(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,tu(a.add(o)))})).then((function(){return i.c[e]=t,nu(i,e)})).ka((function(){r&&i.b--}))},t.get=function(e){return Js(this).then((function(t){return tu(Zs(eu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},t.S=function(e){var t=!1,n=this;return Js(this).then((function(r){return t=!0,n.b++,tu(Zs(eu(r,!0)).delete(e))})).then((function(){return delete n.c[e],nu(n,e)})).ka((function(){t&&n.b--}))},t.$=function(e){var t;0==this.a.length&&(iu(t=this),function e(){t.f=setTimeout((function(){t.i=ru(t).then((function(e){0<e.length&&U(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()),this.a.push(e)},t.ea=function(e){z(this.a,(function(t){return t==e})),0==this.a.length&&iu(this)},(t=ou.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},t.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},t.S=function(e){return this.b.then((function(t){return t.S(e)}))},t.$=function(e){this.a.push(e)},t.ea=function(e){z(this.a,(function(t){return t==e}))},(t=au.prototype).get=function(e){return Xe(this.a[e])},t.set=function(e,t){return this.a[e]=t,Xe()},t.S=function(e){return delete this.a[e],Xe()},t.$=function(){},t.ea=function(){},(t=su.prototype).get=function(e){var t=this;return Xe().then((function(){return Ir(t.a.getItem(e))}))},t.set=function(e,t){var n=this;return Xe().then((function(){var r=Er(t);null===r?n.S(e):n.a.setItem(e,r)}))},t.S=function(e){var t=this;return Xe().then((function(){t.a.removeItem(e)}))},t.$=function(e){s.window&&Gt(s.window,"storage",e)},t.ea=function(e){s.window&&Yt(s.window,"storage",e)},(t=cu.prototype).get=function(){return Xe(null)},t.set=function(){return Xe()},t.S=function(){return Xe()},t.$=function(){},t.ea=function(){},(t=lu.prototype).get=function(e){var t=this;return Xe().then((function(){return Ir(t.a.getItem(e))}))},t.set=function(e,t){var n=this;return Xe().then((function(){var r=Er(t);null===r?n.S(e):n.a.setItem(e,r)}))},t.S=function(e){var t=this;return Xe().then((function(){t.a.removeItem(e)}))},t.$=function(){},t.ea=function(){};var du,pu,mu={C:su,Ta:lu},yu={C:su,Ta:lu},gu={C:qs,Ta:cu},vu={C:su,Ta:cu},bu={ad:"local",NONE:"none",cd:"session"};function wu(){var e=!(Cr(mr())||!sr()),t=Tr(),n=gr();this.m=e,this.h=t,this.l=n,this.a={},e=du=du||new fu;try{this.g=!Jn()&&xr()||!s.indexedDB?new e.a.C:new ou(ur()?new au:new e.a.C)}catch(e){this.g=new au,this.h=!0}try{this.i=new e.a.Ta}catch(e){this.i=new au}this.u=new au,this.f=S(this.Pb,this),this.b={}}function Tu(){return pu=pu||new wu}function Eu(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function Su(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Iu(e,t,n){return n=Su(t,n),"local"==t.C&&(e.b[n]=null),Eu(e,t.C).S(n)}function ku(e){e.c&&(clearInterval(e.c),e.c=null)}function Cu(e){this.a=e,this.b=Tu()}(t=wu.prototype).get=function(e,t){return Eu(this,e.C).get(Su(e,t))},t.set=function(e,t,n){var r=Su(e,n),i=this,o=Eu(this,e.C);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.C&&(i.b[r]=t)}))},t.addListener=function(e,t,n){var r;e=Su(e,t),this.l&&(this.b[e]=s.localStorage.getItem(e)),Q(this.a)&&(Eu(this,"local").$(this.f),this.h||(Jn()||!xr())&&s.indexedDB||!this.l||(ku(r=this),r.c=setInterval((function(){for(var e in r.a){var t=s.localStorage.getItem(e),n=r.b[e];t!=n&&(r.b[e]=t,t=new Mt({type:"storage",key:e,target:window,oldValue:n,newValue:t,a:!0}),r.Pb(t))}}),1e3))),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},t.removeListener=function(e,t,n){e=Su(e,t),this.a[e]&&(z(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),Q(this.a)&&(Eu(this,"local").ea(this.f),ku(this))},t.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?Eu(this,"local").ea(this.f):ku(this),this.m)if(n=s.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?s.localStorage.setItem(t,r):s.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===s.localStorage.getItem(t)||(o.b[t]=s.localStorage.getItem(t),o.$a(t))},vt&&Nt&&10==Nt&&s.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else U(e,S(this.$a,this))},t.$a=function(e){this.a[e]&&U(this.a[e],(function(e){e()}))};var Nu,Au={name:"authEvent",C:"local"};function Du(){this.a=Tu()}function _u(e,t){this.b=xu,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0!==Nu||(Nu=s.Int32Array?new Int32Array(Uu):Uu),this.reset()}C(_u,(function(){this.b=-1}));for(var xu=64,Ou=xu-1,Pu=[],Ru=0;Ru<Ou;Ru++)Pu[Ru]=0;var Mu=W(128,Pu);function Lu(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;t<64;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;t<64;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Nu[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Fu(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(u(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Lu(e),i=0);else{if(!y(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Lu(e),i=0)}}e.c=i,e.g+=n}_u.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):K(this.h)};var Uu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Vu(){_u.call(this,8,Bu)}C(Vu,_u);var Bu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function qu(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=i||null,this.h=t+":"+n,this.v=new Du,this.g=new Cu(this.h),this.f=null,this.b=[],this.a=this.c=null}function ju(e){return new Yr("invalid-cordova-configuration",e)}function zu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function Wu(e){return e.f||(e.f=e.ia().then((function(){return new ze((function(t){function n(e){u=!0,c&&c.cancel(),Ku(r).then((function(t){var n=a;if(t&&e&&e.url){var i=null;-1!=(n=Bi(e.url)).indexOf("/__/auth/callback")&&(i=(i="object"==typeof(i=Ir(En(i=Sn(n),"firebaseError")||null))?Xr(i):null)?new bo(t.c,t.b,null,null,i,null,t.R()):new bo(t.c,t.b,n,t.f,null,null,t.R())),n=i||a}zu(r,n)}))}var r,i,o,a,u,c,l;e.Aa((function n(r){return t(r),e.Na(n),!1})),r=e,a=new bo("unknown",null,null,null,new Yr("no-auth-event")),u=!1,c=ln(500).then((function(){return Ku(r).then((function(){u||zu(r,a)}))})),l=s.handleOpenURL,s.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(yr("BuildInfo.packageName",s).toLowerCase()+"://")&&n({url:e}),"function"==typeof l)try{l(e)}catch(e){console.error(e)}},So=So||new To,i=n,(o=So).a.push(i),o.b||(o.b=function(e){for(var t=0;t<o.a.length;t++)o.a[t](e)},"function"==typeof(i=yr("universalLinks.subscribe",s))&&i(null,o.b))}))}))),e.f}function Ku(e){var t,n=null;return(t=e.g).b.get(Au,t.a).then((function(e){return wo(e)})).then((function(t){return n=t,Iu((t=e.g).b,Au,t.a)})).then((function(){return n}))}function Gu(e){this.a=e,this.b=Tu()}(t=qu.prototype).ia=function(){return this.Da?this.Da:this.Da=(ar(void 0)?or().then((function(){return new ze((function(e,t){var n=s.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Je(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof yr("universalLinks.subscribe",s))throw ju("cordova-universal-links-plugin-fix is not installed");if(void 0===yr("BuildInfo.packageName",s))throw ju("cordova-plugin-buildinfo is not installed");if("function"!=typeof yr("cordova.plugins.browsertab.openUrl",s))throw ju("cordova-plugin-browsertab is not installed");if("function"!=typeof yr("cordova.InAppBrowser.open",s))throw ju("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Yr("cordova-not-ready")}))},t.Fb=function(e,t){return t(new Yr("operation-not-supported-in-this-environment")),Xe()},t.Db=function(){return Je(new Yr("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(e,t,n,r){if(this.c)return Je(new Yr("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Xe().then((function(){return vo(t),Wu(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new bo(t,r,null,o,new Yr("no-auth-event"),null,i),u=yr("BuildInfo.packageName",s);if("string"!=typeof u)throw new Yr("invalid-cordova-configuration");var c=yr("BuildInfo.displayName",s),l={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!mr().toLowerCase().match(/android/))return Je(new Yr("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(e){var t=new Vu;Fu(t,e),e=[];var n=8*t.g;t.c<56?Fu(t,Mu,56-t.c):Fu(t,Mu,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Lu(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return V(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(o),l.sessionId=o;var h=Bs(e.u,e.i,e.l,t,n,null,r,e.m,l,e.o,i);return e.ia().then((function(){var t=e.h;return e.v.a.set(Au,a.A(),t)})).then((function(){var t=yr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof t)throw new Yr("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=yr("cordova.plugins.browsertab.openUrl",s)))throw new Yr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=yr("cordova.InAppBrowser.open",s)))throw new Yr("invalid-cordova-configuration");t=mr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new ze((function(e,t){u=function(){var t=yr("cordova.plugins.browsertab.close",s);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(u),c=function(){a=a||ln(2e3).then((function(){t(new Yr("redirect-cancelled-by-user"))}))},l=function(){Dr()&&c()},o.addEventListener("resume",c,!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(e){return Ku(i).then((function(){throw e}))}))})).ka((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Na(u),i.c=null}))},t.Aa=function(e){this.b.push(e),Wu(this).s((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new bo("unknown",null,null,null,new Yr("no-auth-event")),e(t))}))},t.Na=function(e){z(this.b,(function(t){return t==e}))};var Qu={name:"pendingRedirect",C:"session"};function Hu(e){return Iu(e.b,Qu,e.a)}function Yu(e,t,n){this.i={},this.v=0,this.B=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=S(this.o,this),this.b=new cc,this.w=new pc,this.g=new Gu(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Xu(this.B,this.u,this.m,Ii)}function Xu(e,t,n,i){var o=r.a.SDK_VERSION||null;return new(ar()?qu:Ls)(e,t,n,o,i)}function Ju(e){e.f||(e.f=!0,e.a.Aa(e.l));var t=e.a;return e.a.ia().s((function(n){throw e.a==t&&e.reset(),n}))}function $u(e){e.a.Ob()&&Ju(e).s((function(t){var n=new bo("unknown",null,null,null,new Yr("operation-not-supported-in-this-environment"));ic(t)&&e.o(n)})),e.a.Jb()||lc(e.b)}function Zu(e,t){var n;q(e.h,t)||e.h.push(t),e.f||(n=e.g).b.get(Qu,n.a).then((function(e){return"pending"==e})).then((function(t){t?Hu(e.g).then((function(){Ju(e).s((function(t){var n=new bo("unknown",null,null,null,new Yr("operation-not-supported-in-this-environment"));ic(t)&&e.o(n)}))})):$u(e)})).s((function(){$u(e)}))}function ec(e,t){z(e.h,(function(e){return e==t}))}Yu.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=Xu(this.B,this.u,this.m),this.i={}},Yu.prototype.o=function(e){if(!e)throw new Yr("invalid-auth-event");if(6e5<=k()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=k())),t=!0;break}}return lc(this.b),t};var tc=new Ar(2e3,1e4),nc=new Ar(3e4,6e4);function rc(e,t,n,r,i,o,a){return e.a.Db(t,n,r,(function(){e.f||(e.f=!0,e.a.Aa(e.l))}),(function(){e.reset()}),i,o,a)}function ic(e){return e&&"auth/cordova-not-ready"==e.code}function oc(e,t,n,r,i){var o,a;return(a=e.g).b.set(Qu,"pending",a.a).then((function(){return e.a.Eb(t,n,r,i).s((function(t){if(ic(t))throw new Yr("operation-not-supported-in-this-environment");return o=t,Hu(e.g).then((function(){throw o}))})).then((function(){return e.a.Rb()?new ze((function(){})):Hu(e.g).then((function(){return e.oa()})).then((function(){})).s((function(){}))}))}))}function ac(e,t,n,r,i){return e.a.Fb(r,(function(e){t.ja(n,null,e,i)}),tc.get())}Yu.prototype.oa=function(){return this.b.oa()};var sc={};function uc(e,t,n){var r=t+":"+n;return sc[r]||(sc[r]=new Yu(e,t,n)),sc[r]}function cc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function lc(e){e.g||(e.g=!0,dc(e,!1,null,null))}function hc(e){e.g&&!e.i&&dc(e,!1,null,null)}function fc(e,t){if(e.b=function(){return Xe(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function dc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Je(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):fc(e,n):fc(e,{user:null}),e.f=[],e.c=[]}function pc(){}function mc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(e){this.vb=e},enumerable:!1})}function yc(e,t){this.a=t,Lr(this,"verificationId",e)}function gc(e,t,n,r){return new mo(e).Wa(t,n).then((function(e){return new yc(e,r)}))}function vc(e){var t=Si(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Yr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Fr(this,{token:e,expirationTime:_r(1e3*t.exp),authTime:_r(1e3*t.auth_time),issuedAtTime:_r(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function bc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function wc(e){this.f=e,this.b=this.a=null,this.c=0}function Tc(e,t){var n=t[_a],r=t.refreshToken;t=Ec(t.expiresIn),e.b=n,e.c=t,e.a=r}function Ec(e){return k()+1e3*parseInt(e,10)}function Sc(e,t){this.a=e||null,this.b=t||null,Fr(this,{lastSignInTime:_r(t||null),creationTime:_r(e||null)})}function Ic(e,t,n,r,i,o){Fr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function kc(e,t){for(var n in Rt.call(this,e),t)this[n]=t[n]}function Cc(e,t,n){var i;this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=r.a.SDK_VERSION?pr(r.a.SDK_VERSION):null,this.a=new Aa(this.l,Ci(Ii),e),this.b=new wc(this.a),Pc(this,t[_a]),Tc(this.b,t),Lr(this,"refreshToken",this.b.a),Lc(this,n||{}),on.call(this),this.J=!1,this.o&&vr()&&(this.i=uc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=(i=this,new bc((function(){return i.G(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var e=i.b.c-k()-3e5;return 0<e?e:0}))),this.W=S(this.Ja,this);var o=this;this.ga=null,this.xa=function(e){o.ua(e.g)},this.Z=null,this.P=[],this.wa=function(e){Ac(o,e.c)},this.Y=null}function Nc(e,t){e.Z&&Yt(e.Z,"languageCodeChanged",e.xa),(e.Z=t)&&Gt(t,"languageCodeChanged",e.xa)}function Ac(e,t){e.P=t,La(e.a,r.a.SDK_VERSION?pr(r.a.SDK_VERSION,e.P):null)}function Dc(e,t){e.Y&&Yt(e.Y,"frameworkChanged",e.wa),(e.Y=t)&&Gt(t,"frameworkChanged",e.wa)}function _c(e){try{return r.a.app(e.m).auth()}catch(t){throw new Yr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function xc(e){e.B||e.w.b||(e.w.start(),Yt(e,"tokenChanged",e.W),Gt(e,"tokenChanged",e.W))}function Oc(e){Yt(e,"tokenChanged",e.W),e.w.stop()}function Pc(e,t){e.ma=t,Lr(e,"_lat",t)}function Rc(e){for(var t=[],n=0;n<e.O.length;n++)t.push(e.O[n](e));return Ze(t).then((function(){return e}))}function Mc(e){e.i&&!e.J&&(e.J=!0,Zu(e.i,e))}function Lc(e,t){Fr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Sc(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Fc(){}function Uc(e){return Xe().then((function(){if(e.B)throw new Yr("app-deleted")}))}function Vc(e){return V(e.providerData,(function(e){return e.providerId}))}function Bc(e,t){t&&(qc(e,t.providerId),e.providerData.push(t))}function qc(e,t){z(e.providerData,(function(e){return e.providerId==t}))}function jc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Lr(e,t,n)}function zc(e,t){var n,r,i;e!=t&&(Fr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Lr(e,"metadata",new Sc((i=t.metadata).a,i.b)):Lr(e,"metadata",new Sc),U(t.providerData,(function(t){Bc(e,t)})),n=e.b,r=t.b,n.b=r.b,n.a=r.a,n.c=r.c,Lr(e,"refreshToken",e.b.a))}function Wc(e){return e.G().then((function(t){var n,r=e.isAnonymous;return ks((n=e).a,as,{idToken:t}).then(S(n.zc,n)).then((function(){return r||jc(e,"isAnonymous",!1),t}))}))}function Kc(e,t){t[_a]&&e.ma!=t[_a]&&(Tc(e.b,t),e.dispatchEvent(new kc("tokenChanged")),Pc(e,t[_a]),jc(e,"refreshToken",e.b.a))}function Gc(e,t){return Wc(e).then((function(){if(q(Vc(e),t))return Rc(e).then((function(){throw new Yr("provider-already-linked")}))}))}function Qc(e,t,n){return Ur({user:e,credential:go(t),additionalUserInfo:t=xi(t),operationType:n})}function Hc(e,t){return Kc(e,t),e.reload().then((function(){return e}))}function Yc(e,t,n,i,o){if(!vr())return Je(new Yr("operation-not-supported-in-this-environment"));if(e.h&&!o)return Je(e.h);var a=_i(n.providerId),s=kr(e.uid+":::"),u=null;(!Tr()||sr())&&e.o&&n.isOAuthProvider&&(u=Bs(e.o,e.l,e.m,t,n,null,s,r.a.SDK_VERSION||null,null,null,e.tenantId));var c=nr(u,a&&a.sa,a&&a.ra);return i=i().then((function(){if(Jc(e),!o)return e.G().then((function(){}))})).then((function(){return rc(e.i,c,t,n,s,!!u,e.tenantId)})).then((function(){return new ze((function(n,r){e.ja(t,null,new Yr("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=s,e.c=ac(e.i,e,t,c,s)}))})).then((function(e){return c&&tr(c),e?Ur(e):null})).s((function(e){throw c&&tr(c),e})),$c(e,i,o)}function Xc(e,t,n,r,i){if(!vr())return Je(new Yr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Je(e.h);var o=null,a=kr(e.uid+":::");return r=r().then((function(){if(Jc(e),!i)return e.G().then((function(){}))})).then((function(){return e.ca=a,Rc(e)})).then((function(t){return e.da&&(t=(t=e.da).b.set(tl,e.A(),t.a)),t})).then((function(){return oc(e.i,t,n,a,e.tenantId)})).s((function(t){if(o=t,e.da)return nl(e.da);throw o})).then((function(){if(o)throw o})),$c(e,r,i)}function Jc(e){if(!e.i||!e.J){if(e.i&&!e.J)throw new Yr("internal-error");throw new Yr("auth-domain-config-required")}}function $c(e,t,n){var r,i,o=(i=t,(r=e).h&&!n?(i.cancel(),Je(r.h)):i.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(r.h||r.dispatchEvent(new kc("userInvalidated")),r.h=e),e})));return e.I.push(o),o.ka((function(){j(e.I,o)})),o}function Zc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[_a]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-k())/1e3;var r=new Cc(t,n,e);return e.providerData&&U(e.providerData,(function(e){e&&Bc(r,Ur(e))})),e.redirectEventId&&(r.ca=e.redirectEventId),r}function el(e){this.a=e,this.b=Tu()}cc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},cc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(dc(this,!0,null,e.a),Xe()):t.Ba(n,r)?function(e,t,n){n=n.Ba(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.R(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){dc(e,s,t,null)})).s((function(t){dc(e,s,null,t)}))}(this,e,t):Je(new Yr("invalid-auth-event")):(dc(this,!1,null,null),Xe())}else Je(new Yr("invalid-auth-event"))},cc.prototype.oa=function(){var e=this;return new ze((function(t,n){var r,i;e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),r=e,i=new Yr("timeout"),r.a&&r.a.cancel(),r.a=ln(nc.get()).then((function(){r.b||(r.g=!0,dc(r,!0,null,i))})))}))},pc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ja(e.c,null,e.a,e.b),Xe()):t.Ba(n,r)?(o=t,a=(i=e).b,s=i.c,o.Ba(s,a)(i.g,i.f,i.R(),i.i).then((function(e){o.ja(s,e,null,a)})).s((function(e){o.ja(s,null,e,a)}))):Je(new Yr("invalid-auth-event"))}else Je(new Yr("invalid-auth-event"));var i,o,a,s},yc.prototype.confirm=function(e){return e=yo(this.verificationId,e),this.a(e)},bc.prototype.start=function(){this.a=this.c,function e(t,n){var r,i;t.stop(),t.b=ln((r=t,(i=n)?(r.a=r.c,r.g()):(i=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),i))).then((function(){return e=s.document,t=null,Dr()||!e?Xe():new ze((function(n){t=function(){Dr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).s((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}));var e,t})).then((function(){return t.h()})).then((function(){e(t,!0)})).s((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},bc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},wc.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Je(new Yr("user-token-expired")):e||!this.b||k()>this.c-3e4?this.a?(n={grant_type:"refresh_token",refresh_token:(t=this).a},r=t.f,i=n,new ze((function(e,t){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Fa(r,r.l+"?key="+encodeURIComponent(r.c),(function(n){n?n.error?t(Ns(n)):n.access_token&&n.refresh_token?e(n):t(new Yr("internal-error")):t(new Yr("network-request-failed"))}),"POST",Mn(i).toString(),r.g,r.u.get()):t(new Yr("internal-error"))})).then((function(e){return t.b=e.access_token,t.c=Ec(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))):Xe(null):Xe({accessToken:this.b,expirationTime:this.c,refreshToken:this.a});var t,n,r,i},Sc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(kc,Rt),C(Cc,on),Cc.prototype.ua=function(e){this.ga=e,Ma(this.a,e)},Cc.prototype.ha=function(){return this.ga},Cc.prototype.Ca=function(){return K(this.P)},Cc.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Lr(Cc.prototype,"providerId","firebase"),(t=Cc.prototype).reload=function(){var e=this;return $c(this,Uc(this).then((function(){return Wc(e).then((function(){return Rc(e)})).then(Fc)})))},t.dc=function(e){return this.G(e).then((function(e){return new vc(e)}))},t.G=function(e){var t=this;return $c(this,Uc(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new Yr("internal-error");return e.accessToken!=t.ma&&(Pc(t,e.accessToken),t.dispatchEvent(new kc("tokenChanged"))),jc(t,"refreshToken",e.refreshToken),e.accessToken})))},t.zc=function(e){if(!(e=e.users)||!e.length)throw new Yr("internal-error");Lc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=(r=(r=e).providerUserInfo)&&r.length?V(r,(function(e){return new Ic(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[],n=0;n<t.length;n++)Bc(this,t[n]);var r;jc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},t.Ac=function(e){return Rr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(e)},t.hb=function(e){var t=this,n=null;return $c(this,e.f(this.a,this.uid).then((function(e){return Kc(t,e),n=Qc(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},t.rc=function(e){return Rr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(e)},t.fb=function(e){var t=this,n=null;return $c(this,Gc(this,e.providerId).then((function(){return t.G()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Qc(t,e,"link"),Hc(t,e)})).then((function(){return n})))},t.sc=function(e,t){var n=this;return $c(this,Gc(this,"phone").then((function(){return gc(_c(n),e,t,S(n.fb,n))})))},t.Bc=function(e,t){var n=this;return $c(this,Xe().then((function(){return gc(_c(n),e,t,S(n.hb,n))})),!0)},t.rb=function(e){var t=this;return $c(this,this.G().then((function(n){return t.a.rb(n,e)})).then((function(e){return Kc(t,e),t.reload()})))},t.Sc=function(e){var t=this;return $c(this,this.G().then((function(n){return e.b(t.a,n)})).then((function(e){return Kc(t,e),t.reload()})))},t.sb=function(e){var t=this;return $c(this,this.G().then((function(n){return t.a.sb(n,e)})).then((function(e){return Kc(t,e),t.reload()})))},t.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Uc(this);var t=this;return $c(this,this.G().then((function(n){return t.a.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Kc(t,e),jc(t,"displayName",e.displayName||null),jc(t,"photoURL",e.photoUrl||null),U(t.providerData,(function(e){"password"===e.providerId&&(Lr(e,"displayName",t.displayName),Lr(e,"photoURL",t.photoURL))})),Rc(t)})).then(Fc))},t.Qc=function(e){var t=this;return $c(this,Wc(this).then((function(n){return q(Vc(t),e)?ks(t.a,rs,{idToken:n,deleteProvider:[e]}).then((function(e){var n={};return U(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),U(Vc(t),(function(e){n[e]||qc(t,e)})),n[mo.PROVIDER_ID]||Lr(t,"phoneNumber",null),Rc(t)})):Rc(t).then((function(){throw new Yr("no-such-provider")}))})))},t.delete=function(){var e=this;return $c(this,this.G().then((function(t){return ks(e.a,ns,{idToken:t})})).then((function(){e.dispatchEvent(new kc("userDeleted"))}))).then((function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");Nc(e,null),Dc(e,null),e.I=[],e.B=!0,Oc(e),Lr(e,"refreshToken",null),e.i&&ec(e.i,e)}))},t.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ca||null)==t||"reauthViaRedirect"==e&&(this.ca||null)==t)},t.ja=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?S(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?S(this.Cb,this):"linkViaRedirect"==e&&(this.ca||null)==t?S(this.Bb,this):"reauthViaRedirect"==e&&(this.ca||null)==t?S(this.Cb,this):null},t.tc=function(e){var t=this;return Yc(this,"linkViaPopup",e,(function(){return Gc(t,e.providerId).then((function(){return Rc(t)}))}),!1)},t.Cc=function(e){return Yc(this,"reauthViaPopup",e,(function(){return Xe()}),!0)},t.uc=function(e){var t=this;return Xc(this,"linkViaRedirect",e,(function(){return Gc(t,e.providerId)}),!1)},t.Dc=function(e){return Xc(this,"reauthViaRedirect",e,(function(){return Xe()}),!0)},t.Bb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $c(this,this.G().then((function(n){return Ya(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Qc(i,e,"link"),Hc(i,e)})).then((function(){return o})))},t.Cb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $c(this,Xe().then((function(){return ji(Xa(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Qc(i,e,"reauthenticate"),Kc(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},t.jb=function(e){var t=this,n=null;return $c(this,this.G().then((function(t){return n=t,void 0===e||Q(e)?{}:vi(new ui(e))})).then((function(e){return t.a.jb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},t.toJSON=function(){return this.A()},t.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&X(e,this.metadata.A()),U(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),e};var tl={name:"redirectUser",C:"session"};function nl(e){return Iu(e.b,tl,e.a)}function rl(e){var t,n,r,i,o,a,u,c,l;this.a=e,this.b=Tu(),this.c=null,this.f=(u=al("local"),c=al("session"),l=al("none"),n=(t=this).b,r=u,i=t.a,o=Su(r,i),a=Eu(n,r.C),n.get(r,i).then((function(e){var t=null;try{t=Ir(s.localStorage.getItem(o))}catch(e){}if(t&&!e)return s.localStorage.removeItem(o),n.set(r,t,i);t&&e&&"localStorage"!=a.type&&s.localStorage.removeItem(o)})).then((function(){return t.b.get(c,t.a)})).then((function(e){return e?c:t.b.get(l,t.a).then((function(e){return e?l:t.b.get(u,t.a).then((function(e){return e?u:t.b.get(ol,t.a).then((function(e){return e?al(e):u}))}))}))})).then((function(e){return t.c=e,il(t,e.C)})).s((function(){t.c||(t.c=u)}))),this.b.addListener(al("local"),this.a,S(this.g,this))}function il(e,t){var n,r,i=[];for(n in bu)bu[n]!==t&&i.push(Iu(e.b,al(bu[n]),e.a));return i.push(Iu(e.b,ol,e.a)),r=i,new ze((function(e,t){var n=r.length,i=[];if(n)for(var o=function(t,r){n--,i[t]=r,0==n&&e(i)},a=function(e){t(e)},s=0;s<r.length;s++)$e(r[s],I(o,s),a);else e(i)}))}rl.prototype.g=function(){var e=this,t=al("local");ll(this,(function(){return Xe().then((function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null})).then((function(n){if(n)return il(e,"local").then((function(){e.c=t}))}))}))};var ol={name:"persistence",C:"session"};function al(e){return{name:"authUser",C:e}}function sl(e,t){return ll(e,(function(){return e.b.set(e.c,t.A(),e.a)}))}function ul(e){return ll(e,(function(){return Iu(e.b,e.c,e.a)}))}function cl(e,t){return ll(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Zc(e||{})}))}))}function ll(e,t){return e.f=e.f.then(t,t),e.f}function hl(e){if(this.l=!1,Lr(this,"settings",new mc),Lr(this,"app",e),!bl(this).options||!bl(this).options.apiKey)throw new Yr("invalid-api-key");var t,n,i,o,a,s,u,c,l,h,f;e=r.a.SDK_VERSION?pr(r.a.SDK_VERSION):null,this.b=new Aa(bl(this).options&&bl(this).options.apiKey,Ci(Ii),e),this.O=[],this.m=[],this.J=[],this.Ub=r.a.INTERNAL.createSubscribe(S(this.oc,this)),this.W=void 0,this.Vb=r.a.INTERNAL.createSubscribe(S(this.pc,this)),gl(this,null),this.h=new rl(bl(this).options.apiKey+":"+bl(this).name),this.w=new el(bl(this).options.apiKey+":"+bl(this).name),this.Y=Sl(this,(h=bl(a=this).options.authDomain,u=(s=a).w,c=bl(s).options.authDomain,l=u.b.get(tl,u.a).then((function(e){return e&&c&&(e.authDomain=c),Zc(e||{})})).then((function(e){return(s.B=e)&&(e.da=s.w),nl(s.w)})),f=Sl(s,l).then((function(){return cl(a.h,h)})).then((function(e){return e?(e.da=a.w,a.B&&(a.B.ca||null)==(e.ca||null)?e:e.reload().then((function(){return sl(a.h,e).then((function(){return e}))})).s((function(t){return"auth/network-request-failed"==t.code?e:ul(a.h)}))):null})).then((function(e){gl(a,e||null)})),Sl(a,f))),this.i=Sl(this,(o=this).Y.then((function(){return ml(o)})).s((function(){})).then((function(){if(!o.l)return o.ma()})).s((function(){})).then((function(){if(!o.l){o.ga=!0;var e=o.h;e.b.addListener(al("local"),e.a,o.ma)}}))),this.ga=!1,this.ma=S(this.Nc,this),this.ub=S(this.aa,this),this.wa=S(this.bc,this),this.xa=S(this.mc,this),this.Ja=S(this.nc,this),this.a=null,n=bl(t=this).options.authDomain,i=bl(t).options.apiKey,n&&vr()&&(t.Tb=t.Y.then((function(){if(!t.l){if(t.a=uc(n,i,bl(t).name),Zu(t.a,t),wl(t)&&Mc(wl(t)),t.B){Mc(t.B);var e=t.B;e.ua(t.ha()),Nc(e,t),Ac(e=t.B,t.I),Dc(e,t),t.B=null}return t.a}}))),this.INTERNAL={},this.INTERNAL.delete=S(this.delete,this),this.INTERNAL.logFramework=S(this.vc,this),this.o=0,on.call(this),Object.defineProperty(this,"lc",{get:function(){return this.ha()},set:function(e){this.ua(e)},enumerable:!1}),this.Z=null,Object.defineProperty(this,"ti",{get:function(){return this.R()},set:function(e){this.nb(e)},enumerable:!1}),this.P=null,this.I=[]}function fl(e){Rt.call(this,"languageCodeChanged"),this.g=e}function dl(e){Rt.call(this,"frameworkChanged"),this.c=e}function pl(e){return e.Tb||Je(new Yr("auth-domain-config-required"))}function ml(e){if(!vr())return Je(new Yr("operation-not-supported-in-this-environment"));var t=pl(e).then((function(){return e.a.oa()})).then((function(e){return e?Ur(e):null}));return Sl(e,t)}function yl(e,t){var n={};return n.apiKey=bl(e).options.apiKey,n.authDomain=bl(e).options.authDomain,n.appName=bl(e).name,e.Y.then((function(){return r=n,i=t,o=e.w,a=e.Ca(),s=new Cc(r,i),o&&(s.da=o),a&&Ac(s,a),s.reload().then((function(){return s}));var r,i,o,a,s})).then((function(t){return wl(e)&&t.uid==wl(e).uid?zc(wl(e),t):(gl(e,t),Mc(t)),e.aa(t)})).then((function(){El(e)}))}function gl(e,t){var n,r;wl(e)&&(n=wl(e),r=e.ub,z(n.O,(function(e){return e==r})),Yt(wl(e),"tokenChanged",e.wa),Yt(wl(e),"userDeleted",e.xa),Yt(wl(e),"userInvalidated",e.Ja),Oc(wl(e))),t&&(t.O.push(e.ub),Gt(t,"tokenChanged",e.wa),Gt(t,"userDeleted",e.xa),Gt(t,"userInvalidated",e.Ja),0<e.o&&xc(t)),Lr(e,"currentUser",t),t&&(t.ua(e.ha()),Nc(t,e),Ac(t,e.I),Dc(t,e))}function vl(e,t){var n=null,r=null;return Sl(e,t.then((function(t){return n=go(t),r=xi(t),yl(e,t)})).then((function(){return Ur({user:wl(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function bl(e){return e.app}function wl(e){return e.currentUser}function Tl(e){return wl(e)&&wl(e)._lat||null}function El(e){if(e.ga){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](Tl(e));if(e.W!==e.getUid()&&e.J.length)for(e.W=e.getUid(),t=0;t<e.J.length;t++)e.J[t]&&e.J[t](Tl(e))}}function Sl(e,t){return e.O.push(t),t.ka((function(){j(e.O,t)})),t}function Il(){}function kl(){this.a={},this.b=1e12}rl.prototype.mb=function(e){var t=null,n=this;return function(e){var t=new Yr("invalid-persistence-type"),n=new Yr("unsupported-persistence-type");e:{for(r in bu)if(bu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(cr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!gr()&&"none"!==e)throw n}}(e),ll(this,(function(){return e!=n.c.C?n.b.get(n.c,n.a).then((function(r){return t=r,il(n,e)})).then((function(){if(n.c=al(e),t)return n.b.set(n.c,t,n.a)})):Xe()}))},C(hl,on),C(fl,Rt),C(dl,Rt),(t=hl.prototype).mb=function(e){return Sl(this,e=this.h.mb(e))},t.ua=function(e){this.Z===e||this.l||(this.Z=e,Ma(this.b,this.Z),this.dispatchEvent(new fl(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var e=s.navigator;this.ua(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},t.vc=function(e){this.I.push(e),La(this.b,r.a.SDK_VERSION?pr(r.a.SDK_VERSION,this.I):null),this.dispatchEvent(new dl(this.I))},t.Ca=function(){return K(this.I)},t.nb=function(e){this.P===e||this.l||(this.P=e,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:bl(this).options.apiKey,authDomain:bl(this).options.authDomain,appName:bl(this).name,currentUser:wl(this)&&wl(this).A()}},t.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},t.ja=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?S(this.ac,this):null},t.ac=function(e,t,n,r){var i=this;e={requestUri:e,postBody:r,sessionId:t,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=Ha(i.b,e).then((function(e){return o=go(e),a=xi(e),e}));return Sl(this,e=i.Y.then((function(){return s})).then((function(e){return yl(i,e)})).then((function(){return Ur({user:wl(i),credential:o,additionalUserInfo:a,operationType:"signIn"})})))},t.Lc=function(e){if(!vr())return Je(new Yr("operation-not-supported-in-this-environment"));var t=this,n=_i(e.providerId),i=kr(),o=null;(!Tr()||sr())&&bl(this).options.authDomain&&e.isOAuthProvider&&(o=Bs(bl(this).options.authDomain,bl(this).options.apiKey,bl(this).name,"signInViaPopup",e,null,i,r.a.SDK_VERSION||null,null,null,this.R()));var a=nr(o,n&&n.sa,n&&n.ra);return Sl(this,n=pl(this).then((function(n){return rc(n,a,"signInViaPopup",e,i,!!o,t.R())})).then((function(){return new ze((function(e,n){t.ja("signInViaPopup",null,new Yr("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=i,t.c=ac(t.a,t,"signInViaPopup",a,i)}))})).then((function(e){return a&&tr(a),e?Ur(e):null})).s((function(e){throw a&&tr(a),e})))},t.Mc=function(e){if(!vr())return Je(new Yr("operation-not-supported-in-this-environment"));var t=this;return Sl(this,pl(this).then((function(){return ll(e=t.h,(function(){return e.b.set(ol,e.c.C,e.a)}));var e})).then((function(){return oc(t.a,"signInViaRedirect",e,void 0,t.R())})))},t.oa=function(){var e=this;return ml(this).then((function(t){return e.a&&hc(e.a.b),t})).s((function(t){throw e.a&&hc(e.a.b),t}))},t.Rc=function(e){if(!e)return Je(new Yr("null-user"));if(this.P!=e.tenantId)return Je(new Yr("tenant-id-mismatch"));var t=this,n={};n.apiKey=bl(this).options.apiKey,n.authDomain=bl(this).options.authDomain,n.appName=bl(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.o,appName:e.m};var i=e.b,o={};return o[_a]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-k())/1e3,t=new Cc(t,o),n&&(t.da=n),r&&Ac(t,r),zc(t,e),t}(e,n,t.w,t.Ca());return Sl(this,this.i.then((function(){if(bl(t).options.apiKey!=e.l)return r.reload()})).then((function(){return wl(t)&&e.uid==wl(t).uid?(zc(wl(t),e),t.aa(e)):(gl(t,r),Mc(r),t.aa(r))})).then((function(){El(t)})))},t.pb=function(){var e=this;return Sl(this,this.i.then((function(){return e.a&&hc(e.a.b),wl(e)?(gl(e,null),ul(e.h).then((function(){El(e)}))):Xe()})))},t.Nc=function(){var e=this;return cl(this.h,bl(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=wl(e)&&t){n=wl(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return zc(wl(e),t),wl(e).G();(wl(e)||t)&&(gl(e,t),t&&(Mc(t),t.da=e.w),e.a&&Zu(e.a,e),El(e))}}))},t.aa=function(e){return sl(this.h,e)},t.bc=function(){El(this),this.aa(wl(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(wl(t))}))},t.pc=function(e){var t,n,r=this;n=function(){e.next(wl(r))},(t=this).J.push(n),Sl(t,t.i.then((function(){!t.l&&q(t.J,n)&&t.W!==t.getUid()&&(t.W=t.getUid(),n(Tl(t)))})))},t.xc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){g(e)?e(wl(r)):g(e.next)&&e.next(wl(r))})),this.Ub(e,t,n)},t.wc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),g(e)?e(wl(r)):g(e.next)&&e.next(wl(r))})),this.Vb(e,t,n)},t.cc=function(e){var t=this;return Sl(this,this.i.then((function(){return wl(t)?wl(t).G(e).then((function(e){return{accessToken:e}})):null})))},t.Hc=function(e){var t=this;return this.i.then((function(){return vl(t,ks(t.b,ws,{token:e}))})).then((function(e){var n=e.user;return jc(n,"isAnonymous",!1),t.aa(n),e}))},t.Ic=function(e,t){var n=this;return this.i.then((function(){return vl(n,ks(n.b,Ts,{email:e,password:t}))}))},t.Xb=function(e,t){var n=this;return this.i.then((function(){return vl(n,ks(n.b,es,{email:e,password:t}))}))},t.Sa=function(e){var t=this;return this.i.then((function(){return vl(t,e.na(t.b))}))},t.Gc=function(e){return Rr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(e)},t.ob=function(){var e=this;return this.i.then((function(){var t=wl(e);if(t&&t.isAnonymous){var n=Ur({providerId:null,isNewUser:!1});return Ur({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vl(e,e.b.ob()).then((function(t){var n=t.user;return jc(n,"isAnonymous",!0),e.aa(n),t}))}))},t.getUid=function(){return wl(this)&&wl(this).uid||null},t.Wb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&wl(this)&&xc(wl(this))},t.Ec=function(e){var t=this;U(this.m,(function(n){n==e&&t.o--})),this.o<0&&(this.o=0),0==this.o&&wl(this)&&Oc(wl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(e){var t=this;this.m.push(e),Sl(this,this.i.then((function(){t.l||q(t.m,e)&&e(Tl(t))})))},t.removeAuthTokenListener=function(e){z(this.m,(function(t){return t==e}))},t.delete=function(){this.l=!0;for(var e=0;e<this.O.length;e++)this.O[e].cancel("app-deleted");return this.O=[],this.h&&(e=this.h).b.removeListener(al("local"),e.a,this.ma),this.a&&(ec(this.a,this),hc(this.a.b)),Promise.resolve()},t.$b=function(e){return Sl(this,ks(this.b,ts,{identifier:e,continueUri:br()?$n():"http://localhost"}).then((function(e){return e.signinMethods||[]})))},t.qc=function(e){return!!lo(e)},t.lb=function(e,t){var n=this;return Sl(this,Xe().then((function(){var e=new ui(t);if(!e.c)throw new Yr("argument-error",hi+" must be true when sending sign in link to email");return vi(e)})).then((function(t){return n.b.lb(e,t)})).then((function(){})))},t.Uc=function(e){return this.Ma(e).then((function(e){return e.data.email}))},t.ab=function(e,t){return Sl(this,this.b.ab(e,t).then((function(){})))},t.Ma=function(e){return Sl(this,this.b.Ma(e).then((function(e){return new Br(e)})))},t.Ya=function(e){return Sl(this,this.b.Ya(e).then((function(){})))},t.kb=function(e,t){var n=this;return Sl(this,Xe().then((function(){return void 0===t||Q(t)?{}:vi(new ui(t))})).then((function(t){return n.b.kb(e,t)})).then((function(){})))},t.Kc=function(e,t){return Sl(this,gc(this,e,t,S(this.Sa,this)))},t.Jc=function(e,t){var n=this;return Sl(this,Xe().then((function(){var r=t||$n(),i=co(e,r);if(!(r=lo(r)))throw new Yr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Yr("tenant-id-mismatch");return n.Sa(i)})))},Il.prototype.render=function(){},Il.prototype.reset=function(){},Il.prototype.getResponse=function(){},Il.prototype.execute=function(){};var Cl=null;function Nl(e,t){return(t=Al(t))&&e.a[t]||null}function Al(e){return(e=void 0===e?1e12:e)?e.toString():null}function Dl(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=jn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():Gt(this.f,"click",this.i)}function _l(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function xl(){}kl.prototype.render=function(e,t){return this.a[this.b.toString()]=new Dl(e,t),this.b++},kl.prototype.reset=function(e){var t=Nl(this,e);e=Al(e),t&&e&&(t.delete(),delete this.a[e])},kl.prototype.getResponse=function(e){return(e=Nl(this,e))?e.getResponse():null},kl.prototype.execute=function(e){(e=Nl(this,e))&&e.execute()},Dl.prototype.getResponse=function(){return _l(this),this.b},Dl.prototype.execute=function(){_l(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(t){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()}),6e4)}),500))},Dl.prototype.delete=function(){_l(this),this.g=!0,clearTimeout(this.a),this.a=null,Yt(this.f,"click",this.i)},xl.prototype.g=function(){return Xe(Cl=Cl||new kl)},xl.prototype.c=function(){};var Ol=null;function Pl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Rl=new J(ee,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ml=new Ar(3e4,6e4);Pl.prototype.g=function(e){var t=this;return new ze((function(n,r){var i=setTimeout((function(){r(new Yr("network-request-failed"))}),Ml.get());!s.grecaptcha||e!==t.f&&!t.b?(s[t.a]=function(){if(s.grecaptcha){t.f=e;var o=s.grecaptcha.render;s.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new Yr("internal-error"));delete s[t.a]},Xe(Ta(ie(Rl,{onload:t.a,hl:e||""}))).s((function(){clearTimeout(i),r(new Yr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Pl.prototype.c=function(){this.b--};var Ll=null;function Fl(e,t,n,r,i,o,a){if(Lr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=t,this.g=null,a=a?Ol=Ol||new xl:Ll=Ll||new Pl,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Bl])throw new Yr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[ql],!s.document)throw new Yr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!jn(t)||!this.i&&jn(t).hasChildNodes())throw new Yr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Aa(e,o||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var c=this.a[Ul];this.a[Ul]=function(e){if(jl(u,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=yr(c,s);"function"==typeof t&&t(e)}};var l=this.a[Vl];this.a[Vl]=function(){if(jl(u,null),"function"==typeof l)l();else if("string"==typeof l){var e=yr(l,s);"function"==typeof e&&e()}}}var Ul="callback",Vl="expired-callback",Bl="sitekey",ql="size";function jl(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function zl(e,t){return e.h.push(t),t.ka((function(){j(e.h,t)})),t}function Wl(e){if(e.B)throw new Yr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kl(e,t,n){var i=!1;try{this.b=n||r.a.app()}catch(e){throw new Yr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Yr("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ca()}catch(e){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}a=r.a.SDK_VERSION?pr(r.a.SDK_VERSION,a):null,Fl.call(this,n,e,t,(function(){try{var e=o.b.auth().ha()}catch(t){e=null}return e}),a,Ci(Ii),i)}function Gl(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new Yr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].N(n[i])&&!o){if(t=t[i],i<0||i>=Ql.length)throw new Yr("internal-error","Argument validator received an unsupported number of arguments.");n=Ql[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.M+".";break e}r=null}}if(r)throw new Yr("argument-error",e+" failed: "+r)}(t=Fl.prototype).Da=function(){var e=this;return this.f?this.f:this.f=zl(this,Xe().then((function(){if(br()&&!ur())return or();throw new Yr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.v())})).then((function(t){return e.g=t,ks(e.o,hs,{})})).then((function(t){e.a[Bl]=t.recaptchaSiteKey})).s((function(t){throw e.f=null,t})))},t.render=function(){Wl(this);var e=this;return zl(this,this.Da().then((function(){if(null===e.c){var t=e.u;if(!e.i){var n=jn(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!qn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Fe(a.name),'"'),a.type){o.push(' type="',Fe(a.type),'"');var s={};X(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(u(a)?o.className=a:m(a)?o.className=a.join(" "):zn(o,a)),2<r.length&&function(e,t,n){function r(n){n&&t.appendChild(u(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!y(o)||v(o)&&0<o.nodeType?r(o):U(Kn(o)?K(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},t.verify=function(){Wl(this);var e=this;return zl(this,this.render().then((function(t){return new ze((function(n){var r=e.g.getResponse(t);r?n(r):(e.l.push((function t(r){var i;r&&(i=t,z(e.l,(function(e){return e==i})),n(r))})),e.i&&e.g.execute(e.c))}))})))},t.reset=function(){Wl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Wl(this),this.B=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=jn(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},C(Kl,Fl);var Ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Hl(e,t){return{name:e||"",M:"a valid string",optional:!!t,N:u}}function Yl(e,t){return{name:e||"",M:"a boolean",optional:!!t,N:c}}function Xl(e,t){return{name:e||"",M:"a valid object",optional:!!t,N:v}}function Jl(e,t){return{name:e||"",M:"a function",optional:!!t,N:g}}function $l(e,t){return{name:e||"",M:"null",optional:!!t,N:p}}function Zl(e){return{name:e?e+"Credential":"credential",M:e?"a valid "+e+" credential":"a valid credential",optional:!1,N:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.na||!n)}}}function eh(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(e){return!!(e&&u(e.type)&&g(e.verify))}}}function th(e,t,n,r){return{name:n||"",M:e.M+" or "+t.M,optional:!!r,N:function(n){return e.N(n)||t.N(n)}}}function nh(e,t){for(var n in t){var r=t[n].name;e[r]=oh(r,e[n],t[n].j)}}function rh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:I((function(e){return this[e]}),n),set:I((function(e,t,n,r){Gl(e,[n],[r],!0),this[t]=r}),r,n,t[n].Za),enumerable:!0})}}function ih(e,t,n,r){e[t]=oh(t,n,r)}function oh(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Gl(a,n,e),t.apply(this,e)}if(!n)return t;var i,o,a=(o=(o=e).split("."))[o.length-1];for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}nh(hl.prototype,{Ya:{name:"applyActionCode",j:[Hl("code")]},Ma:{name:"checkActionCode",j:[Hl("code")]},ab:{name:"confirmPasswordReset",j:[Hl("code"),Hl("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Hl("email"),Hl("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Hl("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Hl("emailLink")]},wc:{name:"onAuthStateChanged",j:[th(Xl(),Jl(),"nextOrObserver"),Jl("opt_error",!0),Jl("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[th(Xl(),Jl(),"nextOrObserver"),Jl("opt_error",!0),Jl("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Hl("email"),th(Xl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Hl("email"),Xl("actionCodeSettings")]},mb:{name:"setPersistence",j:[Hl("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[Zl()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[Zl()]},Hc:{name:"signInWithCustomToken",j:[Hl("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Hl("email"),Hl("password")]},Jc:{name:"signInWithEmailLink",j:[Hl("email"),Hl("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Hl("phoneNumber"),eh()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[th({name:"user",M:"an instance of Firebase User",optional:!1,N:function(e){return!!(e&&e instanceof Cc)}},$l(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Hl("code")]}}),rh(hl.prototype,{lc:{name:"languageCode",Za:th(Hl(),$l(),"languageCode")},ti:{name:"tenantId",Za:th(Hl(),$l(),"tenantId")}}),(hl.Persistence=bu).LOCAL="local",hl.Persistence.SESSION="session",hl.Persistence.NONE="none",nh(Cc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Yl("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[Yl("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[Zl()]},fb:{name:"linkWithCredential",j:[Zl()]},sc:{name:"linkWithPhoneNumber",j:[Hl("phoneNumber"),eh()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Zl()]},hb:{name:"reauthenticateWithCredential",j:[Zl()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Hl("phoneNumber"),eh()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[th(Xl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},Qc:{name:"unlink",j:[Hl("provider")]},rb:{name:"updateEmail",j:[Hl("email")]},sb:{name:"updatePassword",j:[Hl("password")]},Sc:{name:"updatePhoneNumber",j:[Zl("phone")]},tb:{name:"updateProfile",j:[Xl("profile")]}}),nh(kl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(Il.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(ze.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),rh(mc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:Yl("appVerificationDisabledForTesting")}}),nh(yc.prototype,{confirm:{name:"confirm",j:[Hl("verificationCode")]}}),ih(qi,"fromJSON",(function(e){e=u(e)?JSON.parse(e):e;for(var t,n=[Hi,so,fo,Ki],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[th(Hl(),Xl(),"json")]),ih(uo,"credential",(function(e,t){return new ao(e,t)}),[Hl("email"),Hl("password")]),nh(ao.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),nh($i.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih($i,"credential",Zi,[th(Hl(),Xl(),"token")]),ih(uo,"credentialWithLink",co,[Hl("email"),Hl("emailLink")]),nh(eo.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(eo,"credential",to,[th(Hl(),Xl(),"token")]),nh(no.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(no,"credential",ro,[th(Hl(),th(Xl(),$l()),"idToken"),th(Hl(),$l(),"accessToken",!0)]),nh(io.prototype,{Ga:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(io,"credential",oo,[th(Hl(),Xl(),"token"),Hl("secret",!0)]),nh(Ji.prototype,{ya:{name:"addScope",j:[Hl("scope")]},credential:{name:"credential",j:[th(Hl(),th(Xl(),$l()),"optionsOrIdToken"),th(Hl(),$l(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),nh(Gi.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),nh(zi.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),ih(mo,"credential",yo,[Hl("verificationId"),Hl("verificationCode")]),nh(mo.prototype,{Wa:{name:"verifyPhoneNumber",j:[Hl("phoneNumber"),eh()]}}),nh(ho.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),nh(Yr.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),nh(ko.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),nh(Io.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),nh(Kl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ih(Zr,"parseLink",si,[Hl("link")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:hl,AuthCredential:qi,Error:Yr};ih(e,"EmailAuthProvider",uo,[]),ih(e,"FacebookAuthProvider",$i,[]),ih(e,"GithubAuthProvider",eo,[]),ih(e,"GoogleAuthProvider",no,[]),ih(e,"TwitterAuthProvider",io,[]),ih(e,"OAuthProvider",Ji,[Hl("providerId")]),ih(e,"SAMLAuthProvider",Xi,[Hl("providerId")]),ih(e,"PhoneAuthProvider",mo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(e){return!!(e&&e instanceof hl)}}]),ih(e,"RecaptchaVerifier",Kl,[th(Hl(),{name:"",M:"an HTML element",optional:!1,N:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Xl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof r.a.app.App)}}]),ih(e,"ActionCodeURL",Zr,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new hl(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:S((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:S(e.cc,e),addAuthTokenListener:S(e.Wb,e),removeAuthTokenListener:S(e.Ec,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.13.5"),r.a.INTERNAL.extendNamespace({User:Cc})}()}).apply(void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(6))},function(e,t,n){"use strict";n(22)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(1))&&"object"==typeof r&&"default"in r?r.default:r,o=n(9),a=n(5),s=n(8),u=n(24),c=i.SDK_VERSION,l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function h(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function d(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function p(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var y,g,v=new o.Logger("@firebase/firestore");function b(){return v.logLevel===o.LogLevel.DEBUG?y.DEBUG:v.logLevel===o.LogLevel.SILENT?y.SILENT:y.ERROR}function w(e){switch(e){case y.DEBUG:v.logLevel=o.LogLevel.DEBUG;break;case y.ERROR:v.logLevel=o.LogLevel.ERROR;break;case y.SILENT:v.logLevel=o.LogLevel.SILENT;break;default:v.error("Firestore ("+c+"): Invalid value passed to `setLogLevel`")}}function T(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(v.logLevel<=o.LogLevel.DEBUG){var i=n.map(S);v.debug.apply(v,m(["Firestore ("+c+") ["+e+"]: "+t],i))}}function E(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(v.logLevel<=o.LogLevel.ERROR){var r=t.map(S);v.error.apply(v,m(["Firestore ("+c+"): "+e],r))}}function S(e){if("string"==typeof e)return e;var t=N.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function I(e){var t="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+e;throw E(t),new Error(t)}function k(e,t){e||I(t)}(g=y=y||{})[g.DEBUG=0]="DEBUG",g[g.ERROR=1]="ERROR",g[g.SILENT=2]="SILENT";var C,N=(x.setPlatform=function(e){x.platform&&I("Platform already defined"),x.platform=e},x.getPlatform=function(){return x.platform||I("Platform not set"),x.platform},x),A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=(h(_,C=Error),_);function _(e,t){var n=C.call(this,t)||this;return n.code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function x(){}function O(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new D(A.INVALID_ARGUMENT,e)}return n.prototype=e.prototype,Object.assign(n,e),n}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function R(e,t){return void 0!==e?e:t}function M(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function L(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function F(e){for(var t in k(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function U(e,t){if(0!==t.length)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+te(t.length,"argument")+".")}function V(e,t,n){if(t.length!==n)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires "+te(n,"argument")+", but was called with "+te(t.length,"argument")+".")}function B(e,t,n){if(t.length<n)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires at least "+te(n,"argument")+", but was called with "+te(t.length,"argument")+".")}function q(e,t,n,r){if(t.length<n||t.length>r)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+te(t.length,"argument")+".")}function j(e,t,n,r){Q(e,t,ee(n)+" argument",r)}function z(e,t,n,r){void 0!==r&&j(e,t,n,r)}function W(e,t,n,r){Q(e,t,n+" option",r)}function K(e,t,n,r){void 0!==r&&W(e,t,n,r)}function G(e,t,n,r,i){void 0!==r&&function(e,t,n){for(var r=[],o=0,a=i;o<a.length;o++){var s=a[o];if(s===n)return;r.push(Y(s))}var u=Y(n);throw new D(A.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+e+'() for option "'+t+'". Acceptable values: '+r.join(", "))}(e,n,r)}function Q(e,t,n,r){if(!("object"===t?H(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=Y(r);throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function H(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Y(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":I("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function X(e,t,n){if(void 0===n)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+ee(t)+" argument, but it was undefined.")}function J(e,t,n){L(t,(function(t,r){if(n.indexOf(t)<0)throw new D(A.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function $(e,t,n,r){var i=Y(r);return new D(A.INVALID_ARGUMENT,"Function "+e+"() requires its "+ee(n)+" argument to be a "+t+", but it was: "+i)}function Z(e,t,n){if(n<=0)throw new D(A.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+ee(t)+" argument to be a positive number, but it was: "+n+".")}function ee(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function te(e,t){return e+" "+t+(1===e?"":"s")}var ne=(re.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return k(20===t.length,"Invalid auto ID: "+t),t},re);function re(){}function ie(e,t){return e<t?-1:t<e?1:0}function oe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function ae(e){return e+"\0"}var se=(ue.fromBase64String=function(e){return new ue(N.getPlatform().atob(e))},ue.fromUint8Array=function(e){return new ue(ce(e))},ue.prototype.toBase64=function(){return N.getPlatform().btoa(this._binaryString)},ue.prototype.toUint8Array=function(){return le(this._binaryString)},ue.prototype.approximateByteSize=function(){return 2*this._binaryString.length},ue.prototype.isEqual=function(e){return this._binaryString===e._binaryString},ue.EMPTY_BYTE_STRING=new ue(""),ue);function ue(e){this._binaryString=e}function ce(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}function le(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function he(){if("undefined"==typeof Uint8Array)throw new D(A.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function fe(){if(!N.getPlatform().base64Available)throw new D(A.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function de(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i}function pe(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}var me,ye,ge,ve,be=(Re.fromBase64String=function(e){V("Blob.fromBase64String",arguments,1),j("Blob.fromBase64String","string",1,e),fe();try{return new Re(N.getPlatform().atob(e))}catch(e){throw new D(A.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},Re.fromUint8Array=function(e){if(V("Blob.fromUint8Array",arguments,1),he(),!(e instanceof Uint8Array))throw $("Blob.fromUint8Array","Uint8Array",1,e);return new Re(ce(e))},Re.prototype.toBase64=function(){return V("Blob.toBase64",arguments,0),fe(),N.getPlatform().btoa(this._binaryString)},Re.prototype.toUint8Array=function(){return V("Blob.toUint8Array",arguments,0),he(),le(this._binaryString)},Re.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Re.prototype.isEqual=function(e){return this._binaryString===e._binaryString},Re.prototype._approximateByteSize=function(){return 2*this._binaryString.length},Re.prototype._compareTo=function(e){return ie(this._binaryString,e._binaryString)},Re),we=O(be,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Te=(Object.defineProperty(Pe.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),Pe.prototype.isEqual=function(e){return e instanceof Pe&&e.projectId===this.projectId&&e.database===this.database},Pe.prototype.compareTo=function(e){return ie(this.projectId,e.projectId)||ie(this.database,e.database)},Pe),Ee=(Oe.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},Oe.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},Oe.INVALID=-1,Oe),Se=(Object.defineProperty(xe.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),xe.prototype.isEqual=function(e){return 0===xe.comparator(this,e)},xe.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof xe?e.forEach((function(e){t.push(e)})):t.push(e),this.construct(t)},xe.prototype.limit=function(){return this.offset+this.length},xe.prototype.popFirst=function(e){return e=void 0===e?1:e,k(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},xe.prototype.popLast=function(){return k(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},xe.prototype.firstSegment=function(){return k(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},xe.prototype.lastSegment=function(){return this.get(this.length-1)},xe.prototype.get=function(e){return k(e<this.length,"Index out of range"),this.segments[this.offset+e]},xe.prototype.isEmpty=function(){return 0===this.length},xe.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},xe.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},xe.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},xe.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},xe.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},xe),Ie=(h(_e,ge=Se),_e.prototype.construct=function(e,t,n){return new _e(e,t,n)},_e.prototype.canonicalString=function(){return this.toArray().join("/")},_e.prototype.toString=function(){return this.canonicalString()},_e.fromString=function(e){if(0<=e.indexOf("//"))throw new D(A.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new _e(e.split("/").filter((function(e){return 0<e.length})))},_e.EMPTY_PATH=new _e([]),_e),ke=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ce=(h(De,ye=Se),De.prototype.construct=function(e,t,n){return new De(e,t,n)},De.isValidIdentifier=function(e){return ke.test(e)},De.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),De.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},De.prototype.toString=function(){return this.canonicalString()},De.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},De.keyField=function(){return new De(["__name__"])},De.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new D(A.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var a=e[r];if("\\"===a){if(r+1===e.length)throw new D(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new D(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new D(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new De(t)},De.EMPTY_PATH=new De([]),De),Ne=(Ae.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},Ae.prototype.isEqual=function(e){return null!==e&&0===Ie.comparator(this.path,e.path)},Ae.prototype.toString=function(){return this.path.toString()},Ae.comparator=function(e,t){return Ie.comparator(e.path,t.path)},Ae.isDocumentKey=function(e){return e.length%2==0},Ae.fromSegments=function(e){return new Ae(new Ie(e.slice()))},Ae.fromPathString=function(e){return new Ae(Ie.fromString(e))},Ae.EMPTY=new Ae(new Ie([])),Ae);function Ae(e){this.path=e,k(Ae.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}function De(){return null!==ye&&ye.apply(this,arguments)||this}function _e(){return null!==ge&&ge.apply(this,arguments)||this}function xe(e,t,n){void 0===t?t=0:t>e.length&&I("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&I("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}function Oe(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}function Pe(e,t){this.projectId=e,this.database=t||"(default)"}function Re(e){fe(),this._binaryString=e}(ve=me=me||{}).All="all",ve.ListenStreamIdle="listen_stream_idle",ve.ListenStreamConnectionBackoff="listen_stream_connection_backoff",ve.WriteStreamIdle="write_stream_idle",ve.WriteStreamConnectionBackoff="write_stream_connection_backoff",ve.OnlineStateTimeout="online_state_timeout",ve.ClientMetadataRefresh="client_metadata_refresh",ve.LruGarbageCollection="lru_garbage_collection",ve.RetryTransaction="retry_transaction";var Me=(Ue.createAndSchedule=function(e,t,n,r,i){var o=new Ue(e,t,Date.now()+n,r,i);return o.start(n),o},Ue.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},Ue.prototype.skipDelay=function(){return this.handleDelayElapsed()},Ue.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},Ue.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},Ue.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},Ue),Le=(Object.defineProperty(Fe.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),Fe.prototype.enqueueAndForget=function(e){this.enqueue(e)},Fe.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},Fe.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},Fe.prototype.enqueueAndInitiateShutdown=function(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},Fe.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},Fe.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw E("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n},Fe.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),k(0<=t,"Attempted to schedule an operation with a negative delay of "+t),-1<this.timerIdsToSkip.indexOf(e)&&(t=0);var i=Me.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},Fe.prototype.verifyNotFailed=function(){this.failure&&I("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},Fe.prototype.verifyOperationInProgress=function(){k(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},Fe.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},Fe.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},Fe.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){k(e===me.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==me.All&&i.timerId===e)break}return t.drain()}))},Fe.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},Fe.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);k(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},Fe);function Fe(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}function Ue(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}function Ve(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=qe(t)),t=Be(e.get(n),t);return qe(t)}function Be(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function qe(e){return e+""}function je(e){var t=e.length;if(k(2<=t,"Invalid path "+e),2===t)return k(""===e.charAt(0)&&""===e.charAt(1),"Non-empty path "+e+" had length 2"),Ie.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||n<a)&&I('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:I('Invalid encoded resource path: "'+e+'"')}o=a+2}return new Ie(r)}var ze=(et.now=function(){return et.fromMillis(Date.now())},et.fromDate=function(e){return et.fromMillis(e.getTime())},et.fromMillis=function(e){var t=Math.floor(e/1e3);return new et(t,1e6*(e-1e3*t))},et.prototype.toDate=function(){return new Date(this.toMillis())},et.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},et.prototype._compareTo=function(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)},et.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},et.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},et),We=(Ze.fromMicroseconds=function(e){var t=Math.floor(e/1e6);return new Ze(new ze(t,e%1e6*1e3))},Ze.fromTimestamp=function(e){return new Ze(e)},Ze.forDeletedDoc=function(){return Ze.MIN},Ze.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},Ze.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},Ze.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Ze.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Ze.prototype.toTimestamp=function(){return this.timestamp},Ze.MIN=new Ze(new ze(0,0)),Ze),Ke=($e.prototype.insert=function(e,t){return new $e(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qe.BLACK,null,null))},$e.prototype.remove=function(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))},$e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},$e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},$e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty($e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),$e.prototype.minKey=function(){return this.root.minKey()},$e.prototype.maxKey=function(){return this.root.maxKey()},$e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},$e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},$e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},$e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},$e.prototype.getIterator=function(){return new Ge(this.root,null,this.comparator,!1)},$e.prototype.getIteratorFrom=function(e){return new Ge(this.root,e,this.comparator,!1)},$e.prototype.getReverseIterator=function(){return new Ge(this.root,null,this.comparator,!0)},$e.prototype.getReverseIteratorFrom=function(e){return new Ge(this.root,e,this.comparator,!0)},$e),Ge=(Je.prototype.getNext=function(){k(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},Je.prototype.hasNext=function(){return 0<this.nodeStack.length},Je.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},Je),Qe=(Xe.prototype.copy=function(e,t,n,r,i){return new Xe(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Xe.prototype.isEmpty=function(){return!1},Xe.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},Xe.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},Xe.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},Xe.prototype.minKey=function(){return this.min().key},Xe.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Xe.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},Xe.prototype.removeMin=function(){if(this.left.isEmpty())return Xe.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},Xe.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Xe.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},Xe.prototype.isRed=function(){return this.color},Xe.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},Xe.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},Xe.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},Xe.prototype.rotateLeft=function(){var e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},Xe.prototype.rotateRight=function(){var e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},Xe.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},Xe.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},Xe.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw I("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw I("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw I("Black depths differ");return e+(this.isRed()?0:1)},Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1,Xe),He=(Object.defineProperty(Ye.prototype,"key",{get:function(){throw I("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"value",{get:function(){throw I("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"color",{get:function(){throw I("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"left",{get:function(){throw I("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"right",{get:function(){throw I("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),Ye.prototype.copy=function(e,t,n,r,i){return this},Ye.prototype.insert=function(e,t,n){return new Qe(e,t)},Ye.prototype.remove=function(e,t){return this},Ye.prototype.isEmpty=function(){return!0},Ye.prototype.inorderTraversal=function(e){return!1},Ye.prototype.reverseTraversal=function(e){return!1},Ye.prototype.minKey=function(){return null},Ye.prototype.maxKey=function(){return null},Ye.prototype.isRed=function(){return!1},Ye.prototype.checkMaxDepth=function(){return!0},Ye.prototype.check=function(){return 0},Ye);function Ye(){this.size=0}function Xe(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Xe.RED,this.left=null!=r?r:Xe.EMPTY,this.right=null!=i?i:Xe.EMPTY,this.size=this.left.size+1+this.right.size}function Je(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}function $e(e,t){this.comparator=e,this.root=t||Qe.EMPTY}function Ze(e){this.timestamp=e}function et(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new D(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new D(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new D(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new D(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}Qe.EMPTY=new He;var tt=(ot.fromMapKeys=function(e){var t=new ot(e.comparator);return e.forEach((function(e){t=t.add(e)})),t},ot.prototype.has=function(e){return null!==this.data.get(e)},ot.prototype.first=function(){return this.data.minKey()},ot.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(ot.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),ot.prototype.indexOf=function(e){return this.data.indexOf(e)},ot.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},ot.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},ot.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},ot.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},ot.prototype.getIterator=function(){return new nt(this.data.getIterator())},ot.prototype.getIteratorFrom=function(e){return new nt(this.data.getIteratorFrom(e))},ot.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},ot.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},ot.prototype.isEmpty=function(){return this.data.isEmpty()},ot.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},ot.prototype.isEqual=function(e){if(!(e instanceof ot))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},ot.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},ot.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},ot.prototype.copy=function(e){var t=new ot(this.comparator);return t.data=e,t},ot),nt=(it.prototype.getNext=function(){return this.iter.getNext().key},it.prototype.hasNext=function(){return this.iter.hasNext()},it),rt=new Ke(Ne.comparator);function it(e){this.iter=e}function ot(e){this.comparator=e,this.data=new Ke(this.comparator)}function at(){return rt}function st(){return at()}var ut=new Ke(Ne.comparator);function ct(){return ut}var lt=new Ke(Ne.comparator);function ht(){return lt}var ft=new tt(Ne.comparator);function dt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=ft,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var pt=new tt(ie);function mt(){return pt}var yt,gt,vt=(kt.prototype.applyToRemoteDocument=function(e,t,n){t&&k(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;k(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},kt.prototype.applyToLocalView=function(e,t){t&&k(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},kt.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},kt.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),dt())},kt.prototype.isEqual=function(e){return this.batchId===e.batchId&&oe(this.mutations,e.mutations)&&oe(this.baseMutations,e.baseMutations)},kt),bt=(It.from=function(e,t,n,r){k(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var i=ht(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new It(e,t,n,r,i)},It),wt=(St.prototype.catch=function(e){return this.next(void 0,e)},St.prototype.next=function(e,t){var n=this;return this.callbackAttached&&I("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new St((function(r,i){n.nextCallback=function(t){n.wrapSuccess(e,t).next(r,i)},n.catchCallback=function(e){n.wrapFailure(t,e).next(r,i)}}))},St.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},St.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof St?t:St.resolve(t)}catch(e){return St.reject(e)}},St.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):St.resolve(t)},St.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):St.reject(t)},St.resolve=function(e){return new St((function(t,n){t(e)}))},St.reject=function(e){return new St((function(t,n){n(e)}))},St.waitFor=function(e){return new St((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(e){return n(e)}))})),o=!0,i===r&&t()}))},St.or=function(e){for(var t=St.resolve(!1),n=function(e){t=t.next((function(t){return t?St.resolve(t):e()}))},r=0,i=e;r<i.length;r++)n(i[r]);return t},St.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},St),Tt=(Et.forUser=function(e,t,n,r){return k(""!==e.uid,"UserID must not be an empty string."),new Et(e.isAuthenticated()?e.uid:"",t,n,r)},Et.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return At(e).iterate({index:$r.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},Et.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=n.toBase64(),_t(e).put(t)}))},Et.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return se.fromBase64String(e.lastStreamToken)}))},Et.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=t.toBase64(),_t(e).put(n)}))},Et.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Dt(e),a=At(e);return a.add({}).next((function(s){k("number"==typeof s,"Auto-generated key is not a number");for(var u=new vt(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new tt((function(e,t){return ie(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=ti.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,ti.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),wt.waitFor(l).next((function(){return u}))}))},Et.prototype.lookupMutationBatch=function(e,t){var n=this;return At(e).get(t).next((function(e){return e?(k(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},Et.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?wt.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r}return null}))},Et.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return At(e).iterate({index:$r.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(k(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},Et.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return At(e).iterate({index:$r.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},Et.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return At(e).loadAll($r.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},Et.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=ti.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Dt(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=je(u);if(s===n.userId&&t.path.isEqual(l))return At(e).get(c).next((function(e){if(!e)throw I("Dangling document-mutation reference found: "+r+" which points to "+c);k(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},Et.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new tt(ie),i=[];return t.forEach((function(t){var o=ti.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Dt(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=je(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),wt.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},Et.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;k(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),k(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=ti.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new tt(ie);return Dt(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=je(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},Et.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(At(e).get(t).next((function(e){if(null===e)throw I("Dangling document-mutation reference found, which points to "+t);k(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),wt.waitFor(i).next((function(){return r}))},Et.prototype.removeMutationBatch=function(e,t){var n=this;return Nt(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),wt.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},Et.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},Et.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return wt.resolve();var r=IDBKeyRange.lowerBound(ti.prefixForUser(t.userId)),i=[];return Dt(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=je(e[1]);i.push(o)}else r.done()})).next((function(){k(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},Et.prototype.containsKey=function(e,t){return Ct(e,this.userId,t)},Et.prototype.getMutationQueueMetadata=function(e){var t=this;return _t(e).get(this.userId).next((function(e){return e||new Jr(t.userId,-1,"")}))},Et);function Et(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function St(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}function It(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}function kt(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,k(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}function Ct(e,t,n){var r=ti.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Dt(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Nt(e,t,n){var r=e.store($r.store),i=e.store(ti.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){k(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=ti.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return wt.waitFor(o).next((function(){return c}))}function At(e){return eo.getStore(e,$r.store)}function Dt(e){return eo.getStore(e,ti.store)}function _t(e){return eo.getStore(e,Jr.store)}(gt=yt=yt||{})[gt.QueryCache=0]="QueryCache",gt[gt.SyncEngine=1]="SyncEngine";var xt=(qt.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},qt.prototype.after=function(e){return this.seek(e+2),this.next()},qt.prototype.seek=function(e){k((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},qt.forTargetCache=function(){return new qt(yt.QueryCache,2)},qt.forSyncEngine=function(){return new qt(yt.SyncEngine)},qt),Ot="SimpleDb",Pt=(Bt.openOrCreate=function(e,t,n){return k(Bt.isAvailable(),"IndexedDB not supported in current environment."),T(Ot,"Opening database:",e),new wt((function(r,i){var o=window.indexedDB.open(e,t);o.onsuccess=function(e){var t=e.target.result;r(new Bt(t))},o.onblocked=function(){i(new D(A.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(e){var t=e.target.error;"VersionError"===t.name?i(new D(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i(t)},o.onupgradeneeded=function(t){T(Ot,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var r=t.target.result;n.createOrUpgrade(r,o.transaction,t.oldVersion,zr).next((function(){T(Ot,"Database upgrade to version "+zr+" complete")}))}})).toPromise()},Bt.delete=function(e){return T(Ot,"Removing database:",e),jt(window.indexedDB.deleteDatabase(e)).toPromise()},Bt.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(Bt.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=a.getUA(),t=Bt.getIOSVersion(e),n=0<t&&t<10,r=Bt.getAndroidVersion(e),i=0<r&&r<4.5;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/")||n||i)},Bt.isMockPersistence=function(){var t;return void 0!==e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},Bt.getStore=function(e,t){return e.store(t)},Bt.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Bt.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Bt.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},Bt.prototype.runTransaction=function(e,t,n){return d(this,void 0,void 0,(function(){var r,i,o,a,s,u;return p(this,(function(c){switch(c.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,a=function(){var e,a,u,c;return p(this,(function(l){switch(l.label){case 0:++o,e=Mt.open(s.db,r?"readonly":"readwrite",t),l.label=1;case 1:return l.trys.push([1,3,,4]),(a=n(e).catch((function(t){return e.abort(t),wt.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return l.sent(),[2,{value:a}];case 3:return u=l.sent(),c=i&&"FirebaseError"!==u.name&&o<3,T(Ot,"Transaction failed with error: %s. Retrying: %s.",u.message,c),c?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:return"object"==typeof(u=c.sent())?[2,u.value]:[3,1];case 3:return[2]}}))}))},Bt.prototype.close=function(){this.db.close()},Bt),Rt=(Object.defineProperty(Vt.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(Vt.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(Vt.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),Vt.prototype.done=function(){this.shouldStop=!0},Vt.prototype.skip=function(e){this.nextKey=e},Vt.prototype.delete=function(){return jt(this.dbCursor.delete())},Vt),Mt=(Ut.open=function(e,t,n){return new Ut(e.transaction(n,t))},Object.defineProperty(Ut.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Ut.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(T(Ot,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Ut.prototype.store=function(e){var t=this.transaction.objectStore(e);return k(!!t,"Object store not part of transaction: "+e),new Lt(t)},Ut),Lt=(Ft.prototype.put=function(e,t){return jt(void 0!==t?(T(Ot,"PUT",this.store.name,e,t),this.store.put(t,e)):(T(Ot,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},Ft.prototype.add=function(e){return T(Ot,"ADD",this.store.name,e,e),jt(this.store.add(e))},Ft.prototype.get=function(e){var t=this;return jt(this.store.get(e)).next((function(n){return void 0===n&&(n=null),T(Ot,"GET",t.store.name,e,n),n}))},Ft.prototype.delete=function(e){return T(Ot,"DELETE",this.store.name,e),jt(this.store.delete(e))},Ft.prototype.count=function(){return T(Ot,"COUNT",this.store.name),jt(this.store.count())},Ft.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},Ft.prototype.deleteAll=function(e,t){T(Ot,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},Ft.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},Ft.prototype.iterateSerial=function(e){var t=this.cursor({});return new wt((function(n,r){t.onerror=function(e){var t=Wt(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},Ft.prototype.iterateCursor=function(e,t){var n=[];return new wt((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Rt(i),a=t(i.primaryKey,i.value,o);if(a instanceof wt){var s=a.catch((function(e){return o.done(),wt.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return wt.waitFor(n)}))},Ft.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(k(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},Ft.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},Ft);function Ft(e){this.store=e}function Ut(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new pe,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=Wt(e.target.error);t.completionDeferred.reject(n)}}function Vt(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}function Bt(e){this.db=e,12.2===Bt.getIOSVersion(a.getUA())&&E("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function qt(e,t){k((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}function jt(e){return new wt((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Wt(e.target.error);n(t)}}))}var zt=!1;function Wt(e){var t=Pt.getIOSVersion(a.getUA());if(12.2<=t&&t<13){var n="An internal error was encountered in the Indexed Database server";if(0<=e.message.indexOf(n)){var r=new D("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return zt||(zt=!0,setTimeout((function(){throw r}),0)),r}}return e}var Kt=(Gt.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},Gt.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return We.fromTimestamp(new ze(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},Gt.prototype.getHighestSequenceNumber=function(e){return Yt(e.simpleDbTransaction)},Gt.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},Gt.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},Gt.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},Gt.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Qt(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return k(0<t.targetCount,"Removing from an empty target cache"),--t.targetCount,n.saveMetadata(e,t)}))},Gt.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Qt(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return wt.waitFor(o)})).next((function(){return i}))},Gt.prototype.forEachTarget=function(e,t){var n=this;return Qt(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},Gt.prototype.retrieveMetadata=function(e){return Ht(e.simpleDbTransaction)},Gt.prototype.saveMetadata=function(e,t){return eo.getStore(e,hi.store).put(hi.key,t)},Gt.prototype.saveTargetData=function(e,t){return Qt(e).put(this.serializer.toDbTarget(t))},Gt.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},Gt.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},Gt.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Qt(e).iterate({range:i,index:ci.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},Gt.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=Xt(e);return t.forEach((function(t){var a=Ve(t.path);i.push(o.put(new li(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),wt.waitFor(i)},Gt.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=Xt(e);return wt.forEach(t,(function(t){var o=Ve(t.path);return wt.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},Gt.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Xt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},Gt.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Xt(e),i=dt();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=je(e[1]),o=new Ne(r);i=i.add(o)})).next((function(){return i}))},Gt.prototype.containsKey=function(e,t){var n=Ve(t.path),r=IDBKeyRange.bound([n],[ae(n)],!1,!0),i=0;return Xt(e).iterate({index:li.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return 0<i}))},Gt.prototype.getTargetDataForTarget=function(e,t){var n=this;return Qt(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},Gt);function Gt(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=xt.forTargetCache()}function Qt(e){return eo.getStore(e,ci.store)}function Ht(e){return Pt.getStore(e,hi.store).get(hi.key).next((function(e){return k(null!==e,"Missing metadata row."),e}))}function Yt(e){return Ht(e).next((function(e){return e.highestListenSequenceNumber}))}function Xt(e){return eo.getStore(e,li.store)}function Jt(e,t){this.version=e,this.transformResults=t}var $t,Zt,en=(rn.fromSet=function(e){return new rn(e)},rn.fromArray=function(e){var t=new tt(Ce.comparator);return e.forEach((function(e){return t=t.add(e)})),new rn(t)},rn.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},rn.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},rn),tn=(nn.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},nn);function nn(e,t){this.field=e,this.transform=t}function rn(e){this.fields=e}(Zt=$t=$t||{})[Zt.Set=0]="Set",Zt[Zt.Patch=1]="Patch",Zt[Zt.Transform=2]="Transform",Zt[Zt.Delete=3]="Delete",Zt[Zt.Verify=4]="Verify";var on,an,sn,un,cn,ln,hn,fn,dn,pn=(Nn.exists=function(e){return new Nn(void 0,e)},Nn.updateTime=function(e){return new Nn(e)},Object.defineProperty(Nn.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Nn.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof dr&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof dr:(k(this.isNone,"Precondition should be empty"),!0)},Nn.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},Nn.NONE=new Nn,Nn),mn=(Cn.prototype.verifyKeyMatches=function(e){null!=e&&k(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},Cn.getPostMutationVersion=function(e){return e instanceof dr?e.version:We.MIN},Cn),yn=(h(kn,hn=mn),kn.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),k(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new dr(this.key,n,{hasCommittedMutations:!0},this.value)},kn.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=mn.getPostMutationVersion(e);return new dr(this.key,r,{hasLocalMutations:!0},this.value)},kn.prototype.extractBaseValue=function(e){return null},kn.prototype.isEqual=function(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},kn),gn=(h(In,ln=mn),In.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),k(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new mr(this.key,t.version);var n=this.patchDocument(e);return new dr(this.key,t.version,{hasCommittedMutations:!0},n)},In.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=mn.getPostMutationVersion(e),i=this.patchDocument(e);return new dr(this.key,r,{hasLocalMutations:!0},i)},In.prototype.extractBaseValue=function(e){return null},In.prototype.isEqual=function(e){return e instanceof In&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},In.prototype.patchDocument=function(e){var t;return t=e instanceof dr?e.data():lr.EMPTY,this.patchObject(t)},In.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},In),vn=(h(Sn,cn=mn),Sn.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),k(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new mr(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new dr(this.key,i,{hasCommittedMutations:!0},o)},Sn.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new dr(this.key,r.version,{hasLocalMutations:!0},o)},Sn.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof dr?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?lr.EMPTY.set(i.field,a):t.set(i.field,a))}return t},Sn.prototype.isEqual=function(e){return e instanceof Sn&&this.key.isEqual(e.key)&&oe(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},Sn.prototype.requireDocument=function(e){return k(e instanceof dr,"Unknown MaybeDocument type "+e),k(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},Sn.prototype.serverTransformResults=function(e,t){var n=[];k(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof dr&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},Sn.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof dr&&(u=t.field(a.field)),null===u&&n instanceof dr&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},Sn.prototype.transformObject=function(e,t){k(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},Sn),bn=(h(En,un=mn),En.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),k(null==t.transformResults,"Transform results received by DeleteMutation."),new pr(this.key,t.version,{hasCommittedMutations:!0})},En.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&k(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new pr(this.key,We.forDeletedDoc())):e},En.prototype.extractBaseValue=function(e){return null},En.prototype.isEqual=function(e){return e instanceof En&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},En),wn=(h(Tn,sn=mn),Tn.prototype.applyToRemoteDocument=function(e,t){I("VerifyMutation should only be used in Transactions.")},Tn.prototype.applyToLocalView=function(e,t,n){I("VerifyMutation should only be used in Transactions.")},Tn.prototype.extractBaseValue=function(e){I("VerifyMutation should only be used in Transactions.")},Tn.prototype.isEqual=function(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Tn);function Tn(e,t){var n=sn.call(this)||this;return n.key=e,n.precondition=t,n.type=$t.Verify,n}function En(e,t){var n=un.call(this)||this;return n.key=e,n.precondition=t,n.type=$t.Delete,n}function Sn(e,t){var n=cn.call(this)||this;return n.key=e,n.fieldTransforms=t,n.type=$t.Transform,n.precondition=pn.exists(!0),n}function In(e,t,n,r){var i=ln.call(this)||this;return i.key=e,i.data=t,i.fieldMask=n,i.precondition=r,i.type=$t.Patch,i}function kn(e,t,n){var r=hn.call(this)||this;return r.key=e,r.value=t,r.precondition=n,r.type=$t.Set,r}function Cn(){}function Nn(e,t){this.updateTime=e,this.exists=t,k(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}(dn=on=on||{})[dn.NullValue=0]="NullValue",dn[dn.BooleanValue=1]="BooleanValue",dn[dn.NumberValue=2]="NumberValue",dn[dn.TimestampValue=3]="TimestampValue",dn[dn.StringValue=4]="StringValue",dn[dn.BlobValue=5]="BlobValue",dn[dn.RefValue=6]="RefValue",dn[dn.GeoPointValue=7]="GeoPointValue",dn[dn.ArrayValue=8]="ArrayValue",dn[dn.ObjectValue=9]="ObjectValue",(fn=an=an||{})[fn.Default=0]="Default",fn[fn.Estimate=1]="Estimate",fn[fn.Previous=2]="Previous";var An,Dn,_n,xn=(Bn.fromSnapshotOptions=function(e,t){switch(e.serverTimestamps){case"estimate":return new Bn(an.Estimate,t);case"previous":return new Bn(an.Previous,t);case"none":case void 0:return new Bn(an.Default,t);default:return I("fromSnapshotOptions() called with invalid options.")}},Bn),On=(Vn.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},Vn.prototype.defaultCompareTo=function(e){return k(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),ie(this.typeOrder,e.typeOrder)},Vn),Pn=(h(Un,_n=On),Un.prototype.value=function(e){return null},Un.prototype.isEqual=function(e){return e instanceof Un},Un.prototype.compareTo=function(e){return e instanceof Un?0:this.defaultCompareTo(e)},Un.prototype.approximateByteSize=function(){return 4},Un.INSTANCE=new Un,Un),Rn=(h(Fn,Dn=On),Fn.prototype.value=function(e){return this.internalValue},Fn.prototype.isEqual=function(e){return e instanceof Fn&&this.internalValue===e.internalValue},Fn.prototype.compareTo=function(e){return e instanceof Fn?ie(this,e):this.defaultCompareTo(e)},Fn.prototype.approximateByteSize=function(){return 4},Fn.of=function(e){return e?Fn.TRUE:Fn.FALSE},Fn.TRUE=new Fn(!0),Fn.FALSE=new Fn(!1),Fn),Mn=(h(Ln,An=On),Ln.prototype.value=function(e){return this.internalValue},Ln.prototype.compareTo=function(e){return e instanceof Ln?(t=this.internalValue)<(n=e.internalValue)?-1:n<t?1:t===n?0:isNaN(t)?isNaN(n)?0:-1:1:this.defaultCompareTo(e);var t,n},Ln.prototype.approximateByteSize=function(){return 8},Ln);function Ln(e){var t=An.call(this)||this;return t.internalValue=e,t.typeOrder=on.NumberValue,t}function Fn(e){var t=Dn.call(this)||this;return t.internalValue=e,t.typeOrder=on.BooleanValue,t}function Un(){var e=_n.call(this)||this;return e.typeOrder=on.NullValue,e.internalValue=null,e}function Vn(){}function Bn(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}function qn(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var jn,zn,Wn,Kn,Gn,Qn,Hn,Yn,Xn,Jn,$n,Zn,er,tr,nr=(h(Lr,tr=Mn),Lr.prototype.isEqual=function(e){return e instanceof Lr&&qn(this.internalValue,e.internalValue)},Lr),rr=(h(Mr,er=Mn),Mr.prototype.isEqual=function(e){return e instanceof Mr&&qn(this.internalValue,e.internalValue)},Mr.NAN=new Mr(NaN),Mr.POSITIVE_INFINITY=new Mr(1/0),Mr.NEGATIVE_INFINITY=new Mr(-1/0),Mr),ir=(h(Rr,Zn=On),Rr.prototype.value=function(e){return this.internalValue},Rr.prototype.isEqual=function(e){return e instanceof Rr&&this.internalValue===e.internalValue},Rr.prototype.compareTo=function(e){return e instanceof Rr?ie(this.internalValue,e.internalValue):this.defaultCompareTo(e)},Rr.prototype.approximateByteSize=function(){return 2*this.internalValue.length},Rr),or=(h(Pr,$n=On),Pr.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},Pr.prototype.isEqual=function(e){return e instanceof Pr&&this.internalValue.isEqual(e.internalValue)},Pr.prototype.compareTo=function(e){return e instanceof Pr?this.internalValue._compareTo(e.internalValue):e instanceof ar?-1:this.defaultCompareTo(e)},Pr.prototype.approximateByteSize=function(){return 16},Pr),ar=(h(Or,Jn=On),Or.prototype.value=function(e){return e&&e.serverTimestampBehavior===an.Estimate?new or(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===an.Previous&&this.previousValue?this.previousValue.value(e):null},Or.prototype.isEqual=function(e){return e instanceof Or&&this.localWriteTime.isEqual(e.localWriteTime)},Or.prototype.compareTo=function(e){return e instanceof Or?this.localWriteTime._compareTo(e.localWriteTime):e instanceof or?1:this.defaultCompareTo(e)},Or.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},Or.prototype.approximateByteSize=function(){return 16+(this.previousValue?this.previousValue.approximateByteSize():0)},Or),sr=(h(xr,Xn=On),xr.prototype.value=function(e){return this.internalValue},xr.prototype.isEqual=function(e){return e instanceof xr&&this.internalValue.isEqual(e.internalValue)},xr.prototype.compareTo=function(e){return e instanceof xr?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},xr.prototype.approximateByteSize=function(){return this.internalValue._approximateByteSize()},xr),ur=(h(_r,Yn=On),_r.prototype.value=function(e){return this.key},_r.prototype.isEqual=function(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},_r.prototype.compareTo=function(e){if(e instanceof _r){var t=this.databaseId.compareTo(e.databaseId);return 0!==t?t:Ne.comparator(this.key,e.key)}return this.defaultCompareTo(e)},_r.prototype.approximateByteSize=function(){return this.databaseId.projectId.length+this.databaseId.database.length+this.key.toString().length},_r),cr=(h(Dr,Hn=On),Dr.prototype.value=function(e){return this.internalValue},Dr.prototype.isEqual=function(e){return e instanceof Dr&&this.internalValue.isEqual(e.internalValue)},Dr.prototype.compareTo=function(e){return e instanceof Dr?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Dr.prototype.approximateByteSize=function(){return 16},Dr),lr=(h(Ar,Qn=On),Ar.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},Ar.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},Ar.prototype.isEqual=function(e){if(e instanceof Ar){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!t.hasNext()&&!n.hasNext()}return!1},Ar.prototype.compareTo=function(e){if(e instanceof Ar){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext(),o=ie(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return ie(t.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},Ar.prototype.set=function(e,t){if(k(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),t);var n=this.child(e.firstSegment());n instanceof Ar||(n=Ar.EMPTY);var r=n.set(e.popFirst(),t);return this.setChild(e.firstSegment(),r)},Ar.prototype.delete=function(e){if(k(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new Ar(this.internalValue.remove(e.firstSegment()));var t=this.child(e.firstSegment());if(t instanceof Ar){var n=t.delete(e.popFirst());return new Ar(this.internalValue.insert(e.firstSegment(),n))}return this},Ar.prototype.contains=function(e){return null!==this.field(e)},Ar.prototype.field=function(e){k(!e.isEmpty(),"Can't get field of empty path");var t=this;return e.forEach((function(e){t=t instanceof Ar?t.internalValue.get(e):null})),t},Ar.prototype.fieldMask=function(){var e=new tt(Ce.comparator);return this.internalValue.forEach((function(t,n){var r=new Ce([t]);if(n instanceof Ar){var i=n.fieldMask().fields;i.isEmpty()?e=e.add(r):i.forEach((function(t){e=e.add(r.child(t))}))}else e=e.add(r)})),en.fromSet(e)},Ar.prototype.approximateByteSize=function(){var e=0;return this.internalValue.inorderTraversal((function(t,n){e+=t.length+n.approximateByteSize()})),e},Ar.prototype.toString=function(){return this.internalValue.toString()},Ar.prototype.child=function(e){return this.internalValue.get(e)||void 0},Ar.prototype.setChild=function(e,t){return new Ar(this.internalValue.insert(e,t))},Ar.EMPTY=new Ar(new Ke(ie)),Ar),hr=(h(Nr,Gn=On),Nr.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},Nr.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},Nr.prototype.forEach=function(e){this.internalValue.forEach(e)},Nr.prototype.isEqual=function(e){if(e instanceof Nr){if(this.internalValue.length!==e.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(e.internalValue[t]))return!1;return!0}return!1},Nr.prototype.compareTo=function(e){if(e instanceof Nr){for(var t=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<t;n++){var r=this.internalValue[n].compareTo(e.internalValue[n]);if(r)return r}return ie(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},Nr.prototype.approximateByteSize=function(){return this.internalValue.reduce((function(e,t){return e+t.approximateByteSize()}),0)},Nr.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},Nr),fr=(Cr.compareByKey=function(e,t){return Ne.comparator(e.key,t.key)},Cr),dr=(h(kr,Kn=fr),kr.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},kr.prototype.data=function(){var e=this;if(!this.objectValue){var t=lr.EMPTY;L(this.proto.fields||{},(function(n,r){t=t.set(new Ce([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},kr.prototype.value=function(){return this.data().value()},kr.prototype.isEqual=function(e){return e instanceof kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},kr.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(kr.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),kr.prototype.getProtoField=function(e){k(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},kr.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):I("Trying to compare documents on fields that don't exist")},kr),pr=(h(Ir,Wn=fr),Ir.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Ir.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ir.prototype.isEqual=function(e){return e instanceof Ir&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Ir),mr=(h(Sr,zn=fr),Sr.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Sr.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Sr.prototype.isEqual=function(e){return e instanceof Sr&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Sr),yr=(Er.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},Er.prototype.has=function(e){return void 0!==this.get(e)},Er.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},Er.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},Er.prototype.forEach=function(e){L(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},Er.prototype.isEmpty=function(){return F(this.inner)},Er),gr=(Object.defineProperty(Tr.prototype,"readTime",{get:function(){return k(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){k(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),Tr.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},Tr.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},Tr.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?wt.resolve(n):this.getFromCache(e,t)},Tr.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},Tr.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},Tr.prototype.assertNotApplied=function(){k(!this.changesApplied,"Changes have already been applied.")},Tr),vr=(br.prototype.addEntry=function(e,t,n){return Ur(e).put(Vr(t),n)},br.prototype.removeEntry=function(e,t){var n=Ur(e),r=Vr(t);return n.delete(r)},br.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},br.prototype.getEntry=function(e,t){var n=this;return Ur(e).get(Vr(t)).next((function(e){return n.maybeDecodeDocument(e)}))},br.prototype.getSizedEntry=function(e,t){var n=this;return Ur(e).get(Vr(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:Br(e)}:null}))},br.prototype.getEntries=function(e,t){var n=this,r=st();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},br.prototype.getSizedEntries=function(e,t){var n=this,r=st(),i=new Ke(Ne.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);i=o?(r=r.insert(e,o),i.insert(e,Br(t))):(r=r.insert(e,null),i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},br.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return wt.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Ur(e).iterate({range:r},(function(e,t,r){for(var a=Ne.fromSegments(e);o&&Ne.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},br.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;k(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=ct(),o=t.path.length+1,a={};if(n.isEqual(We.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=oi.collectionReadTimeIndex}return Ur(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof dr&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},br.prototype.getNewDocumentChanges=function(e,t){var n=this,r=at(),i=this.serializer.toDbTimestampKey(t),o=Ur(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:oi.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},br.prototype.getLastReadTime=function(e){var t=this,n=Ur(e),r=We.MIN;return n.iterate({index:oi.readTimeIndex,reverse:!0},(function(e,n,i){n.readTime&&(r=t.serializer.fromDbTimestampKey(n.readTime)),i.done()})).next((function(){return r}))},br.prototype.newChangeBuffer=function(e){return new br.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},br.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},br.prototype.getMetadata=function(e){return Fr(e).get(ai.key).next((function(e){return k(!!e,"Missing document cache metadata"),e}))},br.prototype.setMetadata=function(e,t){return Fr(e).put(ai.key,t)},br.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof pr&&t.version.isEqual(We.forDeletedDoc())?null:t}return null},br.RemoteDocumentChangeBuffer=(h(wr,jn=gr),wr.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new tt((function(e,t){return ie(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(k(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){k(!t.readTime.isEqual(We.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=Br(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new pr(o,We.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),wt.waitFor(n)},wr.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},wr.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},wr),br);function br(e,t){this.serializer=e,this.indexManager=t}function wr(e,t){var n=jn.call(this)||this;return n.documentCache=e,n.trackRemovals=t,n.documentSizes=new yr((function(e){return e.toString()})),n}function Tr(){this.changes=new yr((function(e){return e.toString()})),this.changesApplied=!1}function Er(e){this.mapKeyFn=e,this.inner={}}function Sr(){return null!==zn&&zn.apply(this,arguments)||this}function Ir(e,t,n){var r=Wn.call(this,e,t)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function kr(e,t,n,r,i,o){var a=Kn.call(this,e,t)||this;return a.objectValue=r,a.proto=i,a.converter=o,k(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!n.hasLocalMutations,a.hasCommittedMutations=!!n.hasCommittedMutations,a}function Cr(e,t){this.key=e,this.version=t}function Nr(e){var t=Gn.call(this)||this;return t.internalValue=e,t.typeOrder=on.ArrayValue,t}function Ar(e){var t=Qn.call(this)||this;return t.internalValue=e,t.typeOrder=on.ObjectValue,t}function Dr(e){var t=Hn.call(this)||this;return t.internalValue=e,t.typeOrder=on.GeoPointValue,t}function _r(e,t){var n=Yn.call(this)||this;return n.databaseId=e,n.key=t,n.typeOrder=on.RefValue,n}function xr(e){var t=Xn.call(this)||this;return t.internalValue=e,t.typeOrder=on.BlobValue,t}function Or(e,t){var n=Jn.call(this)||this;return n.localWriteTime=e,n.previousValue=t,n.typeOrder=on.TimestampValue,n}function Pr(e){var t=$n.call(this)||this;return t.internalValue=e,t.typeOrder=on.TimestampValue,t}function Rr(e){var t=Zn.call(this)||this;return t.internalValue=e,t.typeOrder=on.StringValue,t}function Mr(){return null!==er&&er.apply(this,arguments)||this}function Lr(){return null!==tr&&tr.apply(this,arguments)||this}function Fr(e){return eo.getStore(e,ai.store)}function Ur(e){return eo.getStore(e,oi.store)}function Vr(e){return e.path.toArray()}function Br(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw I("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var qr=(Qr.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),wt.resolve()},Qr.prototype.getCollectionParents=function(e,t){return wt.resolve(this.collectionParentIndex.getEntries(t))},Qr),jr=(Gr.prototype.add=function(e){k(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tt(Ie.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},Gr.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},Gr.prototype.getEntries=function(e){return(this.index[e]||new tt(Ie.comparator)).toArray()},Gr),zr=9,Wr=(Kr.prototype.createOrUpgrade=function(e,t,n,r){var i=this;k(n<r&&0<=n&&r<=zr,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o,a=new Mt(t);n<1&&1<=r&&(e.createObjectStore(Yr.store),(o=e).createObjectStore(Jr.store,{keyPath:Jr.keyPath}),o.createObjectStore($r.store,{keyPath:$r.keyPath,autoIncrement:!0}).createIndex($r.userMutationsIndex,$r.userMutationsKeyPath,{unique:!0}),o.createObjectStore(ti.store),gi(e),e.createObjectStore(oi.store));var s,u=wt.resolve();return n<3&&3<=r&&(0!==n&&((s=e).deleteObjectStore(li.store),s.deleteObjectStore(ci.store),s.deleteObjectStore(hi.store),gi(e)),u=u.next((function(){return e=a.store(hi.store),t=new hi(0,0,We.MIN.toTimestamp(),0),e.put(hi.key,t);var e,t}))),n<4&&4<=r&&(0!==n&&(u=u.next((function(){return t=e,(n=a).store($r.store).loadAll().next((function(e){t.deleteObjectStore($r.store),t.createObjectStore($r.store,{keyPath:$r.keyPath,autoIncrement:!0}).createIndex($r.userMutationsIndex,$r.userMutationsKeyPath,{unique:!0});var r=n.store($r.store),i=e.map((function(e){return r.put(e)}));return wt.waitFor(i)}));var t,n}))),u=u.next((function(){e.createObjectStore(vi.store,{keyPath:vi.keyPath})}))),n<5&&5<=r&&(u=u.next((function(){return i.removeAcknowledgedMutations(a)}))),n<6&&6<=r&&(u=u.next((function(){return e.createObjectStore(ai.store),i.addDocumentGlobal(a)}))),n<7&&7<=r&&(u=u.next((function(){return i.ensureSequenceNumbers(a)}))),n<8&&8<=r&&(u=u.next((function(){return i.createCollectionParentIndex(e,a)}))),n<9&&9<=r&&(u=u.next((function(){var n,r;(r=e).objectStoreNames.contains("remoteDocumentChanges")&&r.deleteObjectStore("remoteDocumentChanges"),(n=t.objectStore(oi.store)).createIndex(oi.readTimeIndex,oi.readTimeIndexPath,{unique:!1}),n.createIndex(oi.collectionReadTimeIndex,oi.collectionReadTimeIndexPath,{unique:!1})}))),u},Kr.prototype.addDocumentGlobal=function(e){var t=0;return e.store(oi.store).iterate((function(e,n){t+=Br(n)})).next((function(){var n=new ai(t);return e.store(ai.store).put(ai.key,n)}))},Kr.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(Jr.store),r=e.store($r.store);return n.loadAll().next((function(n){return wt.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll($r.userMutationsIndex,i).next((function(r){return wt.forEach(r,(function(r){k(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return Nt(e,n.userId,i).next((function(){}))}))}))}))}))},Kr.prototype.ensureSequenceNumbers=function(e){var t=e.store(li.store),n=e.store(oi.store);return Yt(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new Ie(n),a=[0,Ve(o)];r.push(t.get(a).next((function(n){return n?wt.resolve():t.put(new li(0,Ve(o),e))})))})).next((function(){return wt.waitFor(r)}))}))},Kr.prototype.createCollectionParentIndex=function(e,t){function n(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:Ve(n)})}}e.createObjectStore(fi.store,{keyPath:fi.keyPath});var r=t.store(fi.store),i=new jr;return t.store(oi.store).iterate({keysOnly:!0},(function(e,t){return n(new Ie(e).popLast())})).next((function(){return t.store(ti.store).iterate({keysOnly:!0},(function(e,t){e[0];var r=e[1];return n((e[2],je(r).popLast()))}))}))},Kr);function Kr(e){this.serializer=e}function Gr(){this.index={}}function Qr(){this.collectionParentIndex=new jr}function Hr(e,t){this.seconds=e,this.nanoseconds=t}var Yr=(Xr.store="owner",Xr.key="owner",Xr);function Xr(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}var Jr=(ei.store="mutationQueues",ei.keyPath="userId",ei),$r=(Zr.store="mutations",Zr.keyPath="batchId",Zr.userMutationsIndex="userMutationsIndex",Zr.userMutationsKeyPath=["userId","batchId"],Zr);function Zr(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}function ei(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}var ti=(ni.prefixForUser=function(e){return[e]},ni.prefixForPath=function(e,t){return[e,Ve(t)]},ni.key=function(e,t,n){return[e,Ve(t),n]},ni.store="documentMutations",ni.PLACEHOLDER=new ni,ni);function ni(){}function ri(e,t){this.path=e,this.readTime=t}function ii(e,t){this.path=e,this.version=t}var oi=(ui.store="remoteDocuments",ui.readTimeIndex="readTimeIndex",ui.readTimeIndexPath="readTime",ui.collectionReadTimeIndex="collectionReadTimeIndex",ui.collectionReadTimeIndexPath=["parentPath","readTime"],ui),ai=(si.store="remoteDocumentGlobal",si.key="remoteDocumentGlobalKey",si);function si(e){this.byteSize=e}function ui(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var ci=(yi.store="targets",yi.keyPath="targetId",yi.queryTargetsIndexName="queryTargetsIndex",yi.queryTargetsKeyPath=["canonicalId","targetId"],yi),li=(mi.store="targetDocuments",mi.keyPath=["targetId","path"],mi.documentTargetsIndex="documentTargetsIndex",mi.documentTargetsKeyPath=["path","targetId"],mi),hi=(pi.key="targetGlobalKey",pi.store="targetGlobal",pi),fi=(di.store="collectionParents",di.keyPath=["collectionId","parent"],di);function di(e,t){this.collectionId=e,this.parent=t}function pi(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function mi(e,t,n){this.targetId=e,this.path=t,k(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}function yi(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}function gi(e){e.createObjectStore(li.store,{keyPath:li.keyPath}).createIndex(li.documentTargetsIndex,li.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(ci.store,{keyPath:ci.keyPath}).createIndex(ci.queryTargetsIndexName,ci.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(hi.store)}var vi=(bi.store="clientMetadata",bi.keyPath="clientId",bi);function bi(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}var wi,Ti,Ei=m([Jr.store,$r.store,ti.store,oi.store,ci.store,Yr.store,hi.store,li.store],[vi.store]),Si=m(Ei,[ai.store]),Ii=m(Si,[fi.store]),ki=(Ci.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(k(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.has(t))return wt.resolve();var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:Ve(i)};return Ni(e).put(o)},Ci.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ae(t),""],!1,!0);return Ni(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(je(o.parent))}return n}))},Ci);function Ci(){this.collectionParentsCache=new jr}function Ni(e){return eo.getStore(e,fi.store)}(Ti=wi=wi||{})[Ti.Listen=0]="Listen",Ti[Ti.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Ti[Ti.LimboResolution=2]="LimboResolution";var Ai=(xi.prototype.withSequenceNumber=function(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},xi.prototype.withResumeToken=function(e,t){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},xi.prototype.withLastLimboFreeSnapshotVersion=function(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},xi.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(e.resumeToken)&&this.target.isEqual(e.target)},xi),Di=(_i.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Ne.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new pr(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=Ne.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new mr(t,n)):I("Unexpected DbRemoteDocument")},_i.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof dr){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new oi(null,null,i,o,n,r)}if(e instanceof pr){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);return o=e.hasCommittedMutations,new oi(null,new ri(a,s),null,o,n,r)}if(e instanceof mr){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new oi(new ii(a,u),null,null,!0,n,r)}return I("Unexpected MaybeDocument")},_i.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},_i.prototype.fromDbTimestampKey=function(e){var t=new ze(e[0],e[1]);return We.fromTimestamp(t)},_i.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new Hr(t.seconds,t.nanoseconds)},_i.prototype.fromDbTimestamp=function(e){var t=new ze(e.seconds,e.nanoseconds);return We.fromTimestamp(t)},_i.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new $r(e,t.batchId,t.localWriteTime.toMillis(),r,i)},_i.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=ze.fromMillis(e.localWriteTimeMs);return new vt(e.batchId,i,n,r)},_i.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(Ve(e.path))})),t},_i.prototype.fromDbResourcePaths=function(e){for(var t=dt(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new Ne(je(i)))}return t},_i.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):We.MIN;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new Ai(t,e.targetId,wi.Listen,e.lastListenSequenceNumber,n,r,se.fromBase64String(e.resumeToken))},_i.prototype.toDbTarget=function(e){k(wi.Listen===e.purpose,"Only queries with purpose "+wi.Listen+" may be stored, got "+e.purpose);var t,n=this.toDbTimestamp(e.snapshotVersion),r=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target);var i=e.resumeToken.toBase64();return new ci(e.targetId,e.target.canonicalId(),n,i,e.sequenceNumber,r,t)},_i);function _i(e){this.remoteSerializer=e}function xi(e,t,n,r,i,o,a){void 0===i&&(i=We.MIN),void 0===o&&(o=We.MIN),void 0===a&&(a=se.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}var Oi=(ji.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},ji.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},ji.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=st();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},ji.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},ji.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=at();return i.forEach((function(e,t){t=t||new pr(e,We.forDeletedDoc()),o=o.insert(e,t)})),o}))},ji.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},ji.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new Ne(t)).next((function(e){var t=ct();return e instanceof dr&&(t=t.insert(e.key,e)),t}))},ji.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;k(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=ct();return this.indexManager.getCollectionParents(e,i).next((function(a){return wt.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},ji.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof dr?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},ji.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=dt(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof gn&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof dr&&(c=c.insert(e,t))})),c}))},ji),Pi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ri=(qi.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},qi.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},qi),Mi=(Bi.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},Bi.prototype.addReference=function(e,t){var n=new Li(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},Bi.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},Bi.prototype.removeReference=function(e,t){this.removeRef(new Li(e,t))},Bi.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},Bi.prototype.removeReferencesForId=function(e){var t=this,n=Ne.EMPTY,r=new Li(n,e),i=new Li(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},Bi.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},Bi.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},Bi.prototype.referencesForId=function(e){var t=Ne.EMPTY,n=new Li(t,e),r=new Li(t,e+1),i=dt();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},Bi.prototype.containsKey=function(e){var t=new Li(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},Bi),Li=(Vi.compareByKey=function(e,t){return Ne.comparator(e.key,t.key)||ie(e.targetOrBatchId,t.targetOrBatchId)},Vi.compareByTargetId=function(e,t){return ie(e.targetOrBatchId,t.targetOrBatchId)||Ne.comparator(e.key,t.key)},Vi),Fi=(Ui.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},Ui.prototype.handleUserChange=function(e){return d(this,void 0,void 0,(function(){var t,n,r,i=this;return p(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new Oi(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=dt(),s=0,u=o;s<u.length;s++){var c=u[s];t.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){c=p[d],i.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++)f=y[m],a=a.add(f.key)}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},Ui.prototype.localWrite=function(e){var t,n=this,r=ze.now(),i=e.reduce((function(e,t){return e.add(t.key)}),dt());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new gn(c.key,l,l.fieldMask(),pn.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},Ui.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):wt.resolve(null)}))}))},Ui.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},Ui.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return k(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},Ui.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},Ui.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},Ui.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},Ui.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},Ui.prototype.applyRemoteEvent=function(e){var t=this,n=e.snapshotVersion,r=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(i){var o=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=t.targetDataByTarget;var a=[];M(e.targetChanges,(function(e,o){var s=r.get(e);if(s){a.push(t.targetCache.removeMatchingKeys(i,o.removedDocuments,e).next((function(){return t.targetCache.addMatchingKeys(i,o.addedDocuments,e)})));var u=o.resumeToken;if(0<u.approximateByteSize()){var c=s.withResumeToken(u,n).withSequenceNumber(i.currentSequenceNumber);r=r.insert(e,c),Ui.shouldPersistTargetData(s,c,o)&&a.push(t.targetCache.updateTargetData(i,c))}}}));var s=at(),u=dt();if(e.documentUpdates.forEach((function(e,t){u=u.add(e)})),a.push(o.getEntries(i,u).next((function(r){e.documentUpdates.forEach((function(u,c){var l=r.get(u);c instanceof pr&&c.version.isEqual(We.MIN)?(o.removeEntry(u,n),s=s.insert(u,c)):null==l||0<c.version.compareTo(l.version)||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(k(!We.MIN.isEqual(n),"Cannot add a document when the remote version is zero"),o.addEntry(c,n),s=s.insert(u,c)):T("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}))}))),!n.isEqual(We.MIN)){var c=t.targetCache.getLastRemoteSnapshotVersion(i).next((function(e){return k(0<=n.compareTo(e),"Watch stream reverted to previous snapshot?? "+n+" < "+e),t.targetCache.setTargetsMetadata(i,i.currentSequenceNumber,n)}));a.push(c)}return wt.waitFor(a).next((function(){return o.apply(i)})).next((function(){return t.localDocuments.getLocalViewOfDocuments(i,s)}))})).then((function(e){return t.targetDataByTarget=r,e}))},Ui.shouldPersistTargetData=function(e,t,n){return k(0<t.resumeToken.approximateByteSize(),"Attempted to persist target data with no resume token"),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},Ui.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);k(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return wt.forEach(e,(function(e){return wt.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},Ui.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},Ui.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},Ui.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?(r=i,wt.resolve(r)):t.targetCache.allocateTargetId(n).next((function(i){return r=new Ai(e,i,wi.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},Ui.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?wt.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},Ui.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);k(null!==r,"Tried to release nonexistent target: "+e);var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?wt.resolve():wt.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},Ui.prototype.executeQuery=function(e,t){var n=this,r=We.MIN,i=dt();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:We.MIN,t?i:dt())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},Ui.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},Ui.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},Ui.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},Ui.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},Ui.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=wt.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);k(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):k(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},Ui.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},Ui.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},Ui.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},Ui.prototype.synchronizeLastDocumentChangeReadTime=function(){return d(this,void 0,void 0,(function(){var e,t=this;return p(this,(function(n){switch(n.label){case 0:return[4,(e=this).persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(e){return t.remoteDocuments.getLastReadTime(e)}))];case 1:return e.lastDocumentChangeReadTime=n.sent(),[2]}}))}))},Ui.RESUME_TOKEN_MAX_AGE_MICROS=3e8,Ui);function Ui(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new Mi,this.targetDataByTarget=new Ke(ie),this.targetIdByTarget=new yr((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=We.MIN,k(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new Oi(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}function Vi(e,t){this.key=e,this.targetOrBatchId=t}function Bi(){this.refsByKey=new tt(Li.compareByKey),this.refsByTarget=new tt(Li.compareByTargetId)}function qi(){this.onCommittedListeners=[]}function ji(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}function zi(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){if(e.code!==A.FAILED_PRECONDITION||e.message!==Pi)throw e;return T("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Wi(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=ie(n,i);return 0===a?ie(r,o):a}var Ki,Gi=(ao.prototype.nextIndex=function(){return++this.previousIndex},ao.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Wi(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(ao.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),ao),Qi={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hi=(oo.withCacheSize=function(e){return new oo(e,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},oo.COLLECTION_DISABLED=-1,oo.MINIMUM_CACHE_SIZE_BYTES=1048576,oo.DEFAULT=new oo(oo.DEFAULT_CACHE_SIZE_BYTES=41943040,oo.DEFAULT_COLLECTION_PERCENTILE=10,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),oo.DISABLED=new oo(oo.COLLECTION_DISABLED,0,0),oo),Yi=(io.prototype.start=function(){k(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Hi.COLLECTION_DISABLED&&this.scheduleGC()},io.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(io.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),io.prototype.scheduleGC=function(){var e=this;k(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;T("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(me.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(zi)}))},io),Xi=(ro.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},ro.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return wt.resolve(Ee.INVALID);var r=new Gi(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},ro.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},ro.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},ro.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Hi.COLLECTION_DISABLED?(T("LruGarbageCollector","Garbage collection skipped; disabled"),wt.resolve(Qi)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Qi):n.runGarbageCollection(e,t)}))},ro.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},ro.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return r=t>c.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),c.params.maximumSequenceNumbersToCollect):t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),b()<=y.DEBUG&&T("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),wt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},ro),Ji="IndexedDbPersistence",$i="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Zi=(h(no,Ki=Ri),no),eo=(to.getStore=function(e,t){if(e instanceof Zi)return Pt.getStore(e.simpleDbTransaction,t);throw I("IndexedDbPersistence must use instances of IndexedDbTransaction")},to.createIndexedDbPersistence=function(e){return d(this,void 0,void 0,(function(){var t;return p(this,(function(n){switch(n.label){case 0:if(!to.isAvailable())throw new D(A.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(t=new to(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return n.sent(),[2,t]}}))}))},to.prototype.start=function(){var e=this;return k(!this.started,"IndexedDbPersistence double-started!"),k(null!==this.window,"Expected 'window' to be defined"),Pt.openOrCreate(this.dbName,zr,new Wr(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[hi.store],(function(e){return Yt(e)}))})).then((function(t){e.listenSequence=new Ee(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},to.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return d(t,void 0,void 0,(function(){return p(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},to.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return d(t,void 0,void 0,(function(){return p(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},to.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return d(t,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},to.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",Ii,(function(t){return uo(t).put(new vi(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return T(Ji,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},to.prototype.verifyPrimaryLease=function(e){var t=this;return so(e).get(Yr.key).next((function(e){return wt.resolve(t.isLocalClient(e))}))},to.prototype.removeClientMetadata=function(e){return uo(e).delete(this.clientId)},to.prototype.maybeGarbageCollectMultiClientState=function(){return d(this,void 0,void 0,(function(){var e=this;return p(this,(function(t){switch(t.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(t){var n=to.getStore(t,vi.store);return n.loadAll().next((function(t){var r=e.filterActiveClients(t,18e5),i=t.filter((function(e){return-1===r.indexOf(e)}));return wt.forEach(i,(function(e){return n.delete(e.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:t.sent().forEach((function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))})),t.label=2;case 2:return[2]}}))}))},to.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(me.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},to.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},to.prototype.canActAsPrimary=function(e){var t=this;return so(e).get(Yr.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new D(A.FAILED_PRECONDITION,$i);return!1}}return!(!t.networkEnabled||!t.inForeground)||uo(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&T(Ji,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},to.prototype.shutdown=function(){return d(this,void 0,void 0,(function(){var e=this;return p(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[Yr.store,vi.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},to.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},to.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[vi.store],(function(t){return uo(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},to.clearPersistence=function(e){return d(this,void 0,void 0,(function(){var t;return p(this,(function(n){switch(n.label){case 0:return to.isAvailable()?(t=e+to.MAIN_DATABASE,[4,Pt.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(to.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),to.prototype.getMutationQueue=function(e){return k(this.started,"Cannot initialize MutationQueue before persistence is started."),Tt.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},to.prototype.getTargetCache=function(){return k(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},to.prototype.getRemoteDocumentCache=function(){return k(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},to.prototype.getIndexManager=function(){return k(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},to.prototype.runTransaction=function(e,t,n){var r=this;T(Ji,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,Ii,(function(o){return i=new Zi(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw E("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new D(A.FAILED_PRECONDITION,Pi);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},to.prototype.verifyAllowTabSynchronization=function(e){var t=this;return so(e).get(Yr.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new D(A.FAILED_PRECONDITION,$i)}))},to.prototype.acquireOrExtendPrimaryLease=function(e){var t=new Yr(this.clientId,this.allowTabSynchronization,Date.now());return so(e).put(Yr.key,t)},to.isAvailable=function(){return Pt.isAvailable()},to.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},to.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=so(e);return n.get(Yr.key).next((function(e){return t.isLocalClient(e)?(T(Ji,"Releasing primary lease."),n.delete(Yr.key)):wt.resolve()}))},to.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(E("Detected an update time that is in the future: "+e+" > "+n),1))},to.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},to.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(k(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},to.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},to.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(k("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},to.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return T(Ji,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return E(Ji,"Failed to get zombied client id.",e),!1}},to.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){E("Failed to set zombie client id.",e)}},to.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},to.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},to.MAIN_DATABASE="main",to);function to(e,t,n,r,i,o,a,s){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new co(this,i),this.dbName=t+to.MAIN_DATABASE,this.serializer=new Di(a),this.document=r.document,this.targetCache=new Kt(this.referenceDelegate,this.serializer),this.indexManager=new ki,this.remoteDocumentCache=new vr(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new D(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function no(e,t){var n=Ki.call(this)||this;return n.simpleDbTransaction=e,n.currentSequenceNumber=t,n}function ro(e,t){this.delegate=e,this.params=t}function io(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}function oo(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}function ao(e){this.maxElements=e,this.buffer=new tt(Wi),this.previousIndex=0}function so(e){return e.store(Yr.store)}function uo(e){return e.store(vi.store)}var co=(lo.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},lo.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},lo.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},lo.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},lo.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},lo.prototype.addReference=function(e,t){return ho(e,t)},lo.prototype.removeReference=function(e,t){return ho(e,t)},lo.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},lo.prototype.removeMutationReference=function(e,t){return ho(e,t)},lo.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?wt.resolve(!0):(r=t,i=!1,_t(n=e).iterateSerial((function(e){return Ct(n,e,r).next((function(e){return e&&(i=!0),wt.resolve(!e)}))})).next((function(){return i})));var n,r,i},lo.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),Xt(e).delete([0,Ve(a.path)])}))}));i.push(u)}})).next((function(){return wt.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},lo.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},lo.prototype.updateLimboDocument=function(e,t){return ho(e,t)},lo.prototype.forEachOrphanedDocument=function(e,t){var n,r=Xt(e),i=Ee.INVALID;return r.iterate({index:li.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Ee.INVALID&&t(new Ne(je(n)),i),i=s,n=a):i=Ee.INVALID})).next((function(){i!==Ee.INVALID&&t(new Ne(je(n)),i)}))},lo.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},lo);function lo(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new Xi(this,t)}function ho(e,t){return Xt(e).put((n=e.currentSequenceNumber,new li(0,Ve(t.path),n)));var n}var fo=Number,po=fo.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),mo=fo.MAX_SAFE_INTEGER||Math.pow(2,53)-1,yo=fo.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function go(e){return null==e}function vo(e){return yo(e)&&e<=mo&&po<=e}var bo,wo,To=(Eo.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";go(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},Eo.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),go(this.limit)||(e+=", limit: "+this.limit),0<this.orderBy.length&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},Eo.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},Eo.prototype.isDocumentQuery=function(){return Ne.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},Eo);function Eo(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}(wo=bo=bo||{}).First="F",wo.Last="L";var So,Io,ko,Co,No,Ao,Do=(na.atPath=function(e){return new na(e)},Object.defineProperty(na.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[Bo]:this.memoizedOrderBy=[new Vo(e),Bo];else{k(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Fo.ASCENDING;this.memoizedOrderBy.push(a===Fo.ASCENDING?Bo:qo)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),na.prototype.addFilter=function(e){k(null==this.getInequalityFilterField()||!(e instanceof xo)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),k(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([e]);return new na(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.limitType,this.startAt,this.endAt)},na.prototype.addOrderBy=function(e){k(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([e]);return new na(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},na.prototype.withLimitToFirst=function(e){return new na(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,bo.First,this.startAt,this.endAt)},na.prototype.withLimitToLast=function(e){return new na(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,bo.Last,this.startAt,this.endAt)},na.prototype.withStartAt=function(e){return new na(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,e,this.endAt)},na.prototype.withEndAt=function(e){return new na(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,e)},na.prototype.asCollectionQueryAtPath=function(e){return new na(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},na.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},na.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},na.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},na.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},na.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return k(n,"orderBy used that doesn't compare on key field"),0},na.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},na.prototype.hasLimitToFirst=function(){return!go(this.limit)&&this.limitType===bo.First},na.prototype.hasLimitToLast=function(){return!go(this.limit)&&this.limitType===bo.Last},na.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},na.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof xo&&n.isInequality())return n.field}return null},na.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof xo&&0<=e.indexOf(r.op))return r.op}return null},na.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},na.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},na.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===bo.First)this.memoizedTarget=new To(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===Fo.DESCENDING?Fo.ASCENDING:Fo.DESCENDING;e.push(new Vo(r.field,i))}var o=this.endAt?new Uo(this.endAt.position,!this.endAt.before):null,a=this.startAt?new Uo(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new To(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},na.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):Ne.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},na.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},na.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},na.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},na.prototype.assertValidBound=function(e){k(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},na),_o=(ta.fromString=function(e){switch(e){case"<":return ta.LESS_THAN;case"<=":return ta.LESS_THAN_OR_EQUAL;case"==":return ta.EQUAL;case">=":return ta.GREATER_THAN_OR_EQUAL;case">":return ta.GREATER_THAN;case"array-contains":return ta.ARRAY_CONTAINS;case"in":return ta.IN;case"array-contains-any":return ta.ARRAY_CONTAINS_ANY;default:return I("Unknown FieldFilter operator: "+e)}},ta.prototype.toString=function(){return this.name},ta.prototype.isEqual=function(e){return this.name===e.name},ta.LESS_THAN=new ta("<"),ta.LESS_THAN_OR_EQUAL=new ta("<="),ta.EQUAL=new ta("=="),ta.GREATER_THAN=new ta(">"),ta.GREATER_THAN_OR_EQUAL=new ta(">="),ta.ARRAY_CONTAINS=new ta("array-contains"),ta.IN=new ta("in"),ta.ARRAY_CONTAINS_ANY=new ta("array-contains-any"),ta),xo=(h(ea,Ao=function(){}),ea.create=function(e,t,n){if(e.isKeyField())return t===_o.IN?(k(n instanceof hr,"Comparing on key with IN, but filter value not an ArrayValue"),k(n.internalValue.every((function(e){return e instanceof ur})),"Comparing on key with IN, but an array value was not a RefValue"),new Po(e,n)):(k(n instanceof ur,"Comparing on key, but filter value not a RefValue"),k(t!==_o.ARRAY_CONTAINS&&t!==_o.ARRAY_CONTAINS_ANY,"'"+t.toString()+"' queries don't make sense on document keys."),new Oo(e,t,n));if(n.isEqual(Pn.INSTANCE)){if(t!==_o.EQUAL)throw new D(A.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new ea(e,t,n)}if(n.isEqual(rr.NAN)){if(t!==_o.EQUAL)throw new D(A.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new ea(e,t,n)}return t===_o.ARRAY_CONTAINS?new Ro(e,n):t===_o.IN?(k(n instanceof hr,"IN filter has invalid value: "+n.toString()),new Mo(e,n)):t===_o.ARRAY_CONTAINS_ANY?(k(n instanceof hr,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new Lo(e,n)):new ea(e,t,n)},ea.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},ea.prototype.matchesComparison=function(e){switch(this.op){case _o.LESS_THAN:return e<0;case _o.LESS_THAN_OR_EQUAL:return e<=0;case _o.EQUAL:return 0===e;case _o.GREATER_THAN:return 0<e;case _o.GREATER_THAN_OR_EQUAL:return 0<=e;default:return I("Unknown FieldFilter operator: "+this.op)}},ea.prototype.isInequality=function(){return 0<=[_o.LESS_THAN,_o.LESS_THAN_OR_EQUAL,_o.GREATER_THAN,_o.GREATER_THAN_OR_EQUAL].indexOf(this.op)},ea.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},ea.prototype.isEqual=function(e){return e instanceof ea&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},ea.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},ea),Oo=(h(Zo,No=xo),Zo.prototype.matches=function(e){var t=this.value,n=Ne.comparator(e.key,t.key);return this.matchesComparison(n)},Zo),Po=(h($o,Co=xo),$o.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},$o),Ro=(h(Jo,ko=xo),Jo.prototype.matches=function(e){var t=e.field(this.field);return t instanceof hr&&t.contains(this.value)},Jo),Mo=(h(Xo,Io=xo),Xo.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},Xo),Lo=(h(Yo,So=xo),Yo.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof hr&&n.internalValue.some((function(e){return t.value.contains(e)}))},Yo),Fo=(Ho.prototype.toString=function(){return this.name},Ho.ASCENDING=new Ho("asc"),Ho.DESCENDING=new Ho("desc"),Ho),Uo=(Qo.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},Qo.prototype.sortsBeforeDocument=function(e,t){k(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())k(o instanceof ur,"Bound has a non-key value where the key path is being used."),n=Ne.comparator(o.key,t.key);else{var a=t.field(i.field);k(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Fo.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Qo.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},Qo),Vo=(Go.prototype.compare=function(e,t){var n=this.isKeyOrderBy?dr.compareByKey(e,t):dr.compareByField(this.field,e,t);switch(this.dir){case Fo.ASCENDING:return n;case Fo.DESCENDING:return-1*n;default:return I("Unknown direction: "+this.dir)}},Go.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},Go.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},Go.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},Go),Bo=new Vo(Ce.keyField(),Fo.ASCENDING),qo=new Vo(Ce.keyField(),Fo.DESCENDING),jo=(Ko.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},Ko.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return k(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()||n.isEqual(We.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(o){var a=i.applyQuery(t,o);return(t.hasLimitToFirst()||t.hasLimitToLast())&&i.needsRefill(t.limitType,a,r,n)?i.executeFullCollectionScan(e,t):(b()<=y.DEBUG&&T("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),i.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},Ko.prototype.applyQuery=function(e,t){var n=new tt((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof dr&&e.matches(r)&&(n=n.add(r))})),n},Ko.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===bo.First?t.last():t.first();return!!i&&(i.hasPendingWrites||0<i.version.compareTo(r))},Ko.prototype.executeFullCollectionScan=function(e,t){return b()<=y.DEBUG&&T("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,We.MIN)},Ko),zo=(Wo.prototype.checkEmpty=function(e){return wt.resolve(0===this.mutationQueue.length)},Wo.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");k(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return k(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,wt.resolve()},Wo.prototype.getLastStreamToken=function(e){return wt.resolve(this.lastStreamToken)},Wo.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,wt.resolve()},Wo.prototype.addMutationBatch=function(e,t,n,r){k(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&k(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new vt(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Li(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return wt.resolve(o)},Wo.prototype.lookupMutationBatch=function(e,t){return wt.resolve(this.findMutationBatch(t))},Wo.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return k(null!=n,"Failed to find local mutation batch."),wt.resolve(n.keys())},Wo.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return wt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},Wo.prototype.getHighestUnacknowledgedBatchId=function(){return wt.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},Wo.prototype.getAllMutationBatches=function(e){return wt.resolve(this.mutationQueue.slice())},Wo.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Li(t,0),i=new Li(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){k(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);k(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),wt.resolve(o)},Wo.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new tt(ie);return t.forEach((function(e){var t=new Li(e,0),i=new Li(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){k(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),wt.resolve(this.findMutationBatches(r))},Wo.prototype.getAllMutationBatchesAffectingQuery=function(e,t){k(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;Ne.isDocumentKey(i)||(i=i.child(""));var o=new Li(new Ne(i),0),a=new tt(ie);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),wt.resolve(this.findMutationBatches(a))},Wo.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},Wo.prototype.removeMutationBatch=function(e,t){var n=this;k(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return wt.forEach(t.mutations,(function(i){var o=new Li(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},Wo.prototype.removeCachedMutationKeys=function(e){},Wo.prototype.containsKey=function(e,t){var n=new Li(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return wt.resolve(t.isEqual(r&&r.key))},Wo.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&k(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),wt.resolve()},Wo.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return k(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},Wo.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},Wo.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return k(n.batchId===e,"If found batch must match"),n},Wo);function Wo(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=se.EMPTY_BYTE_STRING,this.batchesByDocumentKey=new tt(Li.compareByKey)}function Ko(){}function Go(e,t){this.field=e,void 0===t&&(t=Fo.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}function Qo(e,t){this.position=e,this.before=t}function Ho(e){this.name=e}function Yo(e,t){var n=So.call(this,e,_o.ARRAY_CONTAINS_ANY,t)||this;return n.value=t,n}function Xo(e,t){var n=Io.call(this,e,_o.IN,t)||this;return n.value=t,n}function Jo(e,t){return ko.call(this,e,_o.ARRAY_CONTAINS,t)||this}function $o(e,t){var n=Co.call(this,e,_o.IN,t)||this;return n.value=t,n}function Zo(){return null!==No&&No.apply(this,arguments)||this}function ea(e,t,n){var r=Ao.call(this)||this;return r.field=e,r.op=t,r.value=n,r}function ta(e){this.name=e}function na(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=bo.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}var ra,ia,oa,aa,sa=(wa.prototype.addEntry=function(e,t,n){k(!n.isEqual(We.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},wa.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},wa.prototype.getEntry=function(e,t){var n=this.docs.get(t);return wt.resolve(n?n.maybeDocument:null)},wa.prototype.getEntries=function(e,t){var n=this,r=st();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),wt.resolve(r)},wa.prototype.getDocumentsMatchingQuery=function(e,t,n){k(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=ct(),i=new Ne(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof dr&&t.matches(c)&&(r=r.insert(c.key,c))}return wt.resolve(r)},wa.prototype.forEachDocumentKey=function(e,t){return wt.forEach(this.docs,(function(e){return t(e)}))},wa.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},wa.prototype.getLastReadTime=function(e){return wt.resolve(We.MIN)},wa.prototype.newChangeBuffer=function(e){return new wa.RemoteDocumentChangeBuffer(this)},wa.prototype.getSize=function(e){return wt.resolve(this.size)},wa.RemoteDocumentChangeBuffer=(h(Ta,oa=gr),Ta.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),wt.waitFor(n)},Ta.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},Ta.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},Ta),wa),ua=(ba.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),wt.resolve()},ba.prototype.getLastRemoteSnapshotVersion=function(e){return wt.resolve(this.lastRemoteSnapshotVersion)},ba.prototype.getHighestSequenceNumber=function(e){return wt.resolve(this.highestSequenceNumber)},ba.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,wt.resolve(t)},ba.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),wt.resolve()},ba.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},ba.prototype.addTargetData=function(e,t){return k(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,wt.resolve()},ba.prototype.updateTargetData=function(e,t){return k(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),wt.resolve()},ba.prototype.removeTargetData=function(e,t){return k(0<this.targetCount,"Removing a target from an empty cache"),k(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),--this.targetCount,wt.resolve()},ba.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),wt.waitFor(o).next((function(){return i}))},ba.prototype.getTargetCount=function(e){return wt.resolve(this.targetCount)},ba.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return wt.resolve(n)},ba.prototype.getTargetDataForTarget=function(e,t){return I("Not yet implemented.")},ba.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),wt.waitFor(i)},ba.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),wt.waitFor(i)},ba.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),wt.resolve()},ba.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return wt.resolve(n)},ba.prototype.containsKey=function(e,t){return wt.resolve(this.references.containsKey(t))},ba),ca=(va.createLruPersistence=function(e,t){return new va(e,(function(e){return new fa(e,t)}))},va.createEagerPersistence=function(e){return new va(e,(function(e){return new ha(e)}))},va.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(va.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),va.prototype.getActiveClients=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){return[2,[this.clientId]]}))}))},va.prototype.setPrimaryStateListener=function(e){return e(!0)},va.prototype.setDatabaseDeletedListener=function(){},va.prototype.setNetworkEnabled=function(e){},va.prototype.getIndexManager=function(){return this.indexManager},va.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new zo(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},va.prototype.getTargetCache=function(){return this.targetCache},va.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},va.prototype.runTransaction=function(e,t,n){var r=this;T("MemoryPersistence","Starting transaction:",e);var i=new la(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},va.prototype.mutationQueuesContainKey=function(e,t){return wt.or((n=this.mutationQueues,r=[],L(n,(function(e,t){return r.push(t)})),r.map((function(n){return function(){return n.containsKey(e,t)}}))));var n,r},va),la=(h(ga,ia=Ri),ga),ha=(Object.defineProperty(ya.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw I("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),ya.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},ya.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),wt.resolve()},ya.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),wt.resolve()},ya.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),wt.resolve()},ya.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},ya.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},ya.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wt.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},ya.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},ya.prototype.documentSize=function(e){return 0},ya.prototype.isReferenced=function(e,t){var n=this;return wt.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return wt.resolve(n.inMemoryPins.containsKey(t))}])},ya),fa=(ma.prototype.onTransactionStarted=function(){},ma.prototype.onTransactionCommitted=function(e){return wt.resolve()},ma.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},ma.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},ma.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},ma.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return wt.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?wt.resolve():t(i)}))}))},ma.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},ma.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},ma.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},ma.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wt.resolve()},ma.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},ma.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wt.resolve()},ma.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wt.resolve()},ma.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wt.resolve()},ma.prototype.documentSize=function(e){var t=e.key.toString().length;return e instanceof dr&&(t+=e.data().approximateByteSize()),t},ma.prototype.isPinned=function(e,t,n){var r=this;return wt.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return wt.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return wt.resolve(void 0!==e&&n<e)}])},ma.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},ma),da=(pa.prototype.reset=function(){this.currentBaseMs=0},pa.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},pa.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&T("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},pa.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},pa.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},pa);function pa(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}function ma(e,t){this.persistence=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new yr((function(e){return Ve(e.path)})),this.garbageCollector=new Xi(this,t)}function ya(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}function ga(e){var t=ia.call(this)||this;return t.currentSequenceNumber=e,t}function va(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new Ee(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new ua(this),this.indexManager=new qr,this.remoteDocumentCache=new sa(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}function ba(e){this.persistence=e,this.targets=new yr((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=We.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Mi,this.targetCount=0,this.targetIdGenerator=xt.forTargetCache()}function wa(e,t){this.indexManager=e,this.sizer=t,this.docs=new Ke(Ne.comparator),this.size=0}function Ta(e){var t=oa.call(this)||this;return t.documentCache=e,t}(aa=ra=ra||{})[aa.Initial=0]="Initial",aa[aa.Starting=1]="Starting",aa[aa.Open=2]="Open",aa[aa.Error=3]="Error",aa[aa.Backoff=4]="Backoff";var Ea,Sa,Ia,ka,Ca,Na,Aa=(Fa.prototype.isStarted=function(){return this.state===ra.Starting||this.state===ra.Open||this.state===ra.Backoff},Fa.prototype.isOpen=function(){return this.state===ra.Open},Fa.prototype.start=function(){this.state!==ra.Error?(k(this.state===ra.Initial,"Already started"),this.auth()):this.performBackoff()},Fa.prototype.stop=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(ra.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Fa.prototype.inhibitBackoff=function(){k(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=ra.Initial,this.backoff.reset()},Fa.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},Fa.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},Fa.prototype.handleIdleCloseTimer=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){return this.isOpen()?[2,this.close(ra.Initial)]:[2]}))}))},Fa.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},Fa.prototype.close=function(e,t){return d(this,void 0,void 0,(function(){return p(this,(function(n){switch(n.label){case 0:return k(this.isStarted(),"Only started streams should be closed."),k(e===ra.Error||go(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==ra.Error?this.backoff.reset():t&&t.code===A.RESOURCE_EXHAUSTED?(E(t.toString()),E("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===A.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},Fa.prototype.tearDown=function(){},Fa.prototype.auth=function(){var e=this;k(this.state===ra.Initial,"Must be in initial state to auth"),this.state=ra.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new D(A.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},Fa.prototype.startStream=function(e){var t=this;k(this.state===ra.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return k(t.state===ra.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=ra.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},Fa.prototype.performBackoff=function(){var e=this;k(this.state===ra.Error,"Should only perform backoff when in Error state"),this.state=ra.Backoff,this.backoff.backoffAndRun((function(){return d(e,void 0,void 0,(function(){return p(this,(function(e){return k(this.state===ra.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=ra.Initial,this.start(),k(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},Fa.prototype.handleStreamClose=function(e){return k(this.isStarted(),"Can't handle server close on non-started stream"),T("PersistentStream","close with error: "+e),this.stream=null,this.close(ra.Error,e)},Fa.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},Fa),Da=(h(La,ka=Aa),La.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},La.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},La.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},La.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},La),_a=(h(Ma,Ia=Aa),Object.defineProperty(Ma.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),Ma.prototype.start=function(){this.handshakeComplete_=!1,Ia.prototype.start.call(this)},Ma.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},Ma.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},Ma.prototype.onMessage=function(e){if(k(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.fromBytes(e.streamToken),this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return k(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},Ma.prototype.writeHandshake=function(){k(this.isOpen(),"Writing handshake requires an opened stream"),k(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},Ma.prototype.writeMutations=function(e){var t=this;k(this.isOpen(),"Writing mutations requires an opened stream"),k(this.handshakeComplete_,"Handshake must be complete before writing mutations"),k(0<this.lastStreamToken.approximateByteSize(),"Trying to write mutation without a token");var n={streamToken:this.serializer.toBytes(this.lastStreamToken),writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},Ma),xa=(Ra.prototype.newPersistentWriteStream=function(e){return new _a(this.queue,this.connection,this.credentials,this.serializer,e)},Ra.prototype.newPersistentWatchStream=function(e){return new Da(this.queue,this.connection,this.credentials,this.serializer,e)},Ra.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},Ra.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=at();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);k(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},Ra.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===A.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},Ra.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===A.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},Ra),Oa=(Pa.prototype.lookup=function(e){return d(this,void 0,void 0,(function(){var t,n=this;return p(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new D(A.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof pr||e instanceof dr?n.recordVersion(e):I("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},Pa.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},Pa.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},Pa.prototype.delete=function(e){this.write([new bn(e,this.precondition(e))]),this.writtenDocs.add(e)},Pa.prototype.commit=function(){return d(this,void 0,void 0,(function(){var e,t=this;return p(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),e.forEach((function(e,n){t.mutations.push(new wn(e,t.precondition(e)))})),[4,this.datastore.commit(this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},Pa.prototype.recordVersion=function(e){var t;if(e instanceof dr)t=e.version;else{if(!(e instanceof pr))throw I("Document in a transaction was a "+e.constructor.name);t=We.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new D(A.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},Pa.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?pn.updateTime(t):pn.NONE},Pa.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(this.writtenDocs.has(e)||!t)return pn.exists(!0);if(t.isEqual(We.forDeletedDoc()))throw new D(A.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pn.updateTime(t)},Pa.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},Pa.prototype.ensureCommitNotCalled=function(){k(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},Pa);function Pa(e){this.datastore=e,this.readVersions=ht(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function Ra(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}function Ma(e,t,n,r,i){var o=Ia.call(this,e,me.WriteStreamConnectionBackoff,me.WriteStreamIdle,t,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=se.EMPTY_BYTE_STRING,o}function La(e,t,n,r,i){var o=ka.call(this,e,me.ListenStreamConnectionBackoff,me.ListenStreamIdle,t,n,i)||this;return o.serializer=r,o}function Fa(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=ra.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new da(e,t)}(Na=Ea=Ea||{})[Na.Unknown=0]="Unknown",Na[Na.Online=1]="Online",Na[Na.Offline=2]="Offline",(Ca=Sa=Sa||{})[Ca.RemoteStore=0]="RemoteStore",Ca[Ca.SharedClientState=1]="SharedClientState";var Ua,Va,Ba=(qa.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Ea.Unknown),k(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(me.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,k(e.state===Ea.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Ea.Offline),Promise.resolve()})))},qa.prototype.handleWatchStreamFailure=function(e){this.state===Ea.Online?(this.setAndBroadcast(Ea.Unknown),k(0===this.watchStreamFailures,"watchStreamFailures must be 0"),k(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Ea.Offline)))},qa.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Ea.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},qa.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},qa.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(E(t),this.shouldWarnClientIsOffline=!1):T("OnlineStateTracker",t)},qa.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},qa);function qa(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Ea.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function ja(e){switch(e){case A.OK:return I("Treated status OK as error");case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return 1;default:return I("Unknown status code: "+e)}}function za(e){if(void 0===e)return E("GRPC error has no .code"),A.UNKNOWN;switch(e){case Ua.OK:return A.OK;case Ua.CANCELLED:return A.CANCELLED;case Ua.UNKNOWN:return A.UNKNOWN;case Ua.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Ua.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Ua.INTERNAL:return A.INTERNAL;case Ua.UNAVAILABLE:return A.UNAVAILABLE;case Ua.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Ua.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Ua.NOT_FOUND:return A.NOT_FOUND;case Ua.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Ua.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Ua.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Ua.ABORTED:return A.ABORTED;case Ua.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Ua.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Ua.DATA_LOSS:return A.DATA_LOSS;default:return I("Unknown status code: "+e)}}(Va=Ua=Ua||{})[Va.OK=0]="OK",Va[Va.CANCELLED=1]="CANCELLED",Va[Va.UNKNOWN=2]="UNKNOWN",Va[Va.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Va[Va.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Va[Va.NOT_FOUND=5]="NOT_FOUND",Va[Va.ALREADY_EXISTS=6]="ALREADY_EXISTS",Va[Va.PERMISSION_DENIED=7]="PERMISSION_DENIED",Va[Va.UNAUTHENTICATED=16]="UNAUTHENTICATED",Va[Va.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Va[Va.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Va[Va.ABORTED=10]="ABORTED",Va[Va.OUT_OF_RANGE=11]="OUT_OF_RANGE",Va[Va.UNIMPLEMENTED=12]="UNIMPLEMENTED",Va[Va.INTERNAL=13]="INTERNAL",Va[Va.UNAVAILABLE=14]="UNAVAILABLE",Va[Va.DATA_LOSS=15]="DATA_LOSS";var Wa,Ka,Ga,Qa,Ha=(Ya.emptySet=function(e){return new Ya(e.comparator)},Ya.prototype.has=function(e){return null!=this.keyedMap.get(e)},Ya.prototype.get=function(e){return this.keyedMap.get(e)},Ya.prototype.first=function(){return this.sortedSet.minKey()},Ya.prototype.last=function(){return this.sortedSet.maxKey()},Ya.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},Ya.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(Ya.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),Ya.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},Ya.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},Ya.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},Ya.prototype.isEqual=function(e){if(!(e instanceof Ya))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},Ya.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Ya.prototype.copy=function(e,t){var n=new Ya;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},Ya);function Ya(e){this.comparator=e?function(t,n){return e(t,n)||Ne.comparator(t.key,n.key)}:function(e,t){return Ne.comparator(e.key,t.key)},this.keyedMap=ct(),this.sortedSet=new Ke(this.comparator)}function Xa(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}function Ja(e,t){this.targetId=e,this.existenceFilter=t}(Qa=Wa=Wa||{})[Qa.Added=0]="Added",Qa[Qa.Removed=1]="Removed",Qa[Qa.Modified=2]="Modified",Qa[Qa.Metadata=3]="Metadata",(Ga=Ka=Ka||{})[Ga.Local=0]="Local",Ga[Ga.Synced=1]="Synced";var $a,Za,es=(ss.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);!n||e.type!==Wa.Added&&n.type===Wa.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Wa.Metadata&&n.type!==Wa.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Wa.Modified&&n.type===Wa.Modified?this.changeMap=this.changeMap.insert(t,{type:Wa.Modified,doc:e.doc}):e.type===Wa.Modified&&n.type===Wa.Added?this.changeMap=this.changeMap.insert(t,{type:Wa.Added,doc:e.doc}):e.type===Wa.Removed&&n.type===Wa.Added?this.changeMap=this.changeMap.remove(t):e.type===Wa.Removed&&n.type===Wa.Modified?this.changeMap=this.changeMap.insert(t,{type:Wa.Removed,doc:n.doc}):e.type===Wa.Added&&n.type===Wa.Removed?this.changeMap=this.changeMap.insert(t,{type:Wa.Modified,doc:e.doc}):I("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n))},ss.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},ss),ts=(as.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach((function(e){i.push({type:Wa.Added,doc:e})})),new as(e,t,Ha.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(as.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),as.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},as),ns=(os.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n,r=((n={})[e]=rs.createSynthesizedTargetChangeForCurrentChange(e,t),n);return new os(We.MIN,r,mt(),at(),dt())},os),rs=(is.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new is(se.EMPTY_BYTE_STRING,t,dt(),dt(),dt())},is);function is(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function os(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function as(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}function ss(){this.changeMap=new Ke(Ne.comparator)}function us(e,t,n,r){void 0===n&&(n=se.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}(Za=$a=$a||{})[Za.NoChange=0]="NoChange",Za[Za.Added=1]="Added",Za[Za.Removed=2]="Removed",Za[Za.Current=3]="Current",Za[Za.Reset=4]="Reset";var cs=(Object.defineProperty(fs.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(fs.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(fs.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(fs.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),fs.prototype.updateResumeToken=function(e){0<e.approximateByteSize()&&(this._hasPendingChanges=!0,this._resumeToken=e)},fs.prototype.toTargetChange=function(){var e=dt(),t=dt(),n=dt();return this.documentChanges.forEach((function(r,i){switch(i){case Wa.Added:e=e.add(r);break;case Wa.Modified:t=t.add(r);break;case Wa.Removed:n=n.add(r);break;default:I("Encountered invalid change type: "+i)}})),new rs(this._resumeToken,this._current,e,t,n)},fs.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ps()},fs.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},fs.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},fs.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},fs.prototype.recordTargetResponse=function(){--this.pendingResponses},fs.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},fs),ls=(hs.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof dr?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof pr&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},hs.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case $a.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case $a.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case $a.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),k(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case $a.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case $a.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:I("Unknown target watch change state: "+e.state)}}))},hs.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):M(this.targetStates,t)},hs.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new Ne(i.path);this.removeDocumentFromTarget(t,o,new pr(o,We.forDeletedDoc()))}else k(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},hs.prototype.createRemoteEvent=function(e){var t=this,n={};M(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new Ne(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new pr(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=dt();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===wi.LimboResolution||(i=!1)})),i&&(r=r.add(e))}));var i=new ns(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=at(),this.pendingDocumentTargetMapping=ds(),this.pendingTargetResets=new tt(ie),i},hs.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Wa.Modified:Wa.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},hs.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Wa.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},hs.prototype.removeTarget=function(e){delete this.targetStates[e]},hs.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},hs.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},hs.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new cs),this.targetStates[e]},hs.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new tt(ie),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},hs.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t},hs.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},hs.prototype.resetTarget=function(e){var t=this;k(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new cs,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},hs.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},hs);function hs(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=at(),this.pendingDocumentTargetMapping=ds(),this.pendingTargetResets=new tt(ie)}function fs(){this.pendingResponses=0,this.documentChanges=ps(),this._resumeToken=se.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}function ds(){return new Ke(Ne.comparator)}function ps(){return new Ke(Ne.comparator)}var ms=(Cs.prototype.start=function(){return this.enableNetwork()},Cs.prototype.enableNetwork=function(){return d(this,void 0,void 0,(function(){var e;return p(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Ea.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},Cs.prototype.disableNetwork=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Ea.Offline),[2]}}))}))},Cs.prototype.disableNetworkInternal=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(T("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},Cs.prototype.shutdown=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return T("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Ea.Unknown),[2]}}))}))},Cs.prototype.listen=function(e){P(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},Cs.prototype.unlisten=function(e){k(P(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),F(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Ea.Unknown))},Cs.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},Cs.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},Cs.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},Cs.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},Cs.prototype.startWatchStream=function(){k(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new ls(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},Cs.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!F(this.listenTargets)},Cs.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},Cs.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},Cs.prototype.onWatchStreamOpen=function(){return d(this,void 0,void 0,(function(){var e=this;return p(this,(function(t){return M(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},Cs.prototype.onWatchStreamClose=function(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){return void 0===e&&k(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Ea.Unknown),[2]}))}))},Cs.prototype.onWatchStreamChange=function(e,t){return d(this,void 0,void 0,(function(){var n;return p(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Ea.Online),e instanceof us&&e.state===$a.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Xa?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Ja?this.watchChangeAggregator.handleExistenceFilter(e):(k(e instanceof us,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(We.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),0<=t.compareTo(n)?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},Cs.prototype.raiseWatchSnapshot=function(e){var t=this;k(!e.isEqual(We.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return M(n.targetChanges,(function(n,r){if(0<r.resumeToken.approximateByteSize()){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(se.EMPTY_BYTE_STRING,n.snapshotVersion),t.sendUnwatchRequest(e);var r=new Ai(n.target,e,wi.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},Cs.prototype.handleTargetError=function(e){var t=this;k(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return d(t,void 0,void 0,(function(){return p(this,(function(t){return P(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},Cs.prototype.fillWritePipeline=function(){return d(this,void 0,void 0,(function(){var e,t;return p(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},Cs.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},Cs.prototype.outstandingWrites=function(){return this.writePipeline.length},Cs.prototype.addToWritePipeline=function(e){k(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},Cs.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},Cs.prototype.startWriteStream=function(){k(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},Cs.prototype.onWriteStreamOpen=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},Cs.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(zi)},Cs.prototype.onMutationResult=function(e,t){var n=this;k(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=bt.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},Cs.prototype.onWriteStreamClose=function(e){return d(this,void 0,void 0,(function(){var t=this;return p(this,(function(n){return void 0===e&&k(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]:[2]}))}))},Cs.prototype.handleHandshakeError=function(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){return ja(e.code)?(T("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=se.EMPTY_BYTE_STRING,[2,this.localStore.setLastStreamToken(se.EMPTY_BYTE_STRING).catch(zi)]):[2]}))}))},Cs.prototype.handleWriteError=function(e){return d(this,void 0,void 0,(function(){var t,n=this;return p(this,(function(r){return ja(i=e.code)&&i!==A.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},Cs.prototype.createTransaction=function(){return new Oa(this.datastore)},Cs.prototype.restartNetwork=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Ea.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},Cs.prototype.handleCredentialChange=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(T("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Cs.prototype.applyPrimaryState=function(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Ea.Unknown),t.label=4;case 4:return[2]}}))}))},Cs),ys=(Object.defineProperty(ks.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(ks.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),ks.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},ks.prototype._compareTo=function(e){return ie(this._lat,e._lat)||ie(this._long,e._long)},ks),gs=(Is.prototype.applyToLocalView=function(e,t){return new ar(t,e)},Is.prototype.applyToRemoteDocument=function(e,t){return t},Is.prototype.computeBaseValue=function(e){return null},Is.prototype.isEqual=function(e){return e instanceof Is},Is.instance=new Is,Is),vs=(Ss.prototype.applyToLocalView=function(e,t){return this.apply(e)},Ss.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Ss.prototype.apply=function(e){for(var t=Ns(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new hr(t)},Ss.prototype.computeBaseValue=function(e){return null},Ss.prototype.isEqual=function(e){return e instanceof Ss&&oe(e.elements,this.elements)},Ss),bs=(Es.prototype.applyToLocalView=function(e,t){return this.apply(e)},Es.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Es.prototype.apply=function(e){for(var t=Ns(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new hr(t)},Es.prototype.computeBaseValue=function(e){return null},Es.prototype.isEqual=function(e){return e instanceof Es&&oe(e.elements,this.elements)},Es),ws=(Ts.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof nr&&this.operand instanceof nr){var r=n.internalValue+this.operand.internalValue;return new nr(r)}return r=n.internalValue+this.operand.internalValue,new rr(r)},Ts.prototype.applyToRemoteDocument=function(e,t){return k(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},Ts.prototype.computeBaseValue=function(e){return e instanceof Mn?e:new nr(0)},Ts.prototype.isEqual=function(e){return e instanceof Ts&&this.operand.isEqual(e.operand)},Ts);function Ts(e){this.operand=e}function Es(e){this.elements=e}function Ss(e){this.elements=e}function Is(){}function ks(e,t){if(V("GeoPoint",arguments,2),j("GeoPoint","number",1,e),j("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new D(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new D(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}function Cs(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return d(o,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(T("RemoteStore","Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Ba(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}function Ns(e){return e instanceof hr?e.internalValue.slice():[]}var As,Ds,_s=(Rs.prototype.isEqual=function(e){return e&&e.count===this.count},Rs),xs=((Ds={})[Fo.ASCENDING.name]="ASCENDING",Ds[Fo.DESCENDING.name]="DESCENDING",Ds),Os=((As={})[_o.LESS_THAN.name]="LESS_THAN",As[_o.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",As[_o.GREATER_THAN.name]="GREATER_THAN",As[_o.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",As[_o.EQUAL.name]="EQUAL",As[_o.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",As[_o.IN.name]="IN",As[_o.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",As),Ps=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(e){this.count=e}function Ms(e,t){k(!go(e),t+" is missing")}function Ls(e){return"number"==typeof e?e:"string"==typeof e?Number(e):I("can't parse "+e)}function Fs(){this.viewSnap=null,this.targetId=0,this.listeners=[]}function Us(e){this.key=e}function Vs(e){this.key=e}var Bs=(Ys.prototype.fromRpcStatus=function(e){var t=void 0===e.code?A.UNKNOWN:za(e.code);return new D(t,e.message||"")},Ys.prototype.toInt32Value=function(e){return this.options.useProto3Json||go(e)?e:{value:e}},Ys.prototype.fromInt32Value=function(e){var t;return go(t="object"==typeof e?e.value:e)?null:t},Ys.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},Ys.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);k(!!e,"Cannot deserialize null or undefined timestamp.");var t=Ls(e.seconds||"0"),n=e.nanos||0;return new ze(t,n)},Ys.prototype.fromIso8601String=function(e){var t=0,n=Ps.exec(e);if(k(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new ze(o,t)},Ys.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():e.toUint8Array()},Ys.prototype.fromBytes=function(e){return this.options.useProto3Json?(k(void 0===e||"string"==typeof e,"value must be undefined or a string when using proto3 Json"),se.fromBase64String(e||"")):(k(void 0===e||e instanceof Uint8Array,"value must be undefined or Uint8Array"),se.fromUint8Array(e||new Uint8Array))},Ys.prototype.fromBlob=function(e){return"string"==typeof e?(k(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),be.fromBase64String(e)):(k(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),be.fromUint8Array(e))},Ys.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},Ys.prototype.fromVersion=function(e){return k(!!e,"Trying to deserialize version that isn't set"),We.fromTimestamp(this.fromTimestamp(e))},Ys.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},Ys.prototype.fromResourceName=function(e){var t=Ie.fromString(e);return k(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},Ys.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},Ys.prototype.fromName=function(e){var t=this.fromResourceName(e);return k(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),k(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Ne(this.extractLocalPathFromResourceName(t))},Ys.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},Ys.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?Ie.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(Ys.prototype,"encodedDatabaseId",{get:function(){return new Ie(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),Ys.prototype.fullyQualifiedPrefixPath=function(e){return new Ie(["projects",e.projectId,"databases",e.database])},Ys.prototype.extractLocalPathFromResourceName=function(e){return k(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},Ys.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},Ys.prototype.toValue=function(e){if(e instanceof Pn)return{nullValue:"NULL_VALUE"};if(e instanceof Rn)return{booleanValue:e.value()};if(e instanceof nr)return{integerValue:""+e.value()};if(e instanceof rr){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof ir?{stringValue:e.value()}:e instanceof lr?{mapValue:this.toMapValue(e)}:e instanceof hr?{arrayValue:this.toArrayValue(e)}:e instanceof or?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof cr?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof sr?{bytesValue:this.toBytes(e.value())}:e instanceof ur?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:I("Unknown FieldValue "+JSON.stringify(e))},Ys.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Pn.INSTANCE;if("booleanValue"in e)return Rn.of(e.booleanValue);if("integerValue"in e)return new nr(Ls(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return rr.NAN;if("Infinity"===e.doubleValue)return rr.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return rr.NEGATIVE_INFINITY}return new rr(e.doubleValue)}if("stringValue"in e)return new ir(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){Ms(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new hr(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return Ms(e.timestampValue,"timestampValue"),new or(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){Ms(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new cr(new ys(r,i))}if("bytesValue"in e){Ms(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new sr(o)}if("referenceValue"in e){Ms(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new Te(a.get(1),a.get(3)),u=new Ne(this.extractLocalPathFromResourceName(a));return new ur(s,u)}return I("Unknown Value proto "+JSON.stringify(e))},Ys.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},Ys.prototype.toDocument=function(e){return k(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},Ys.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new dr(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},Ys.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},Ys.prototype.fromFields=function(e){var t=this,n=e,r=lr.EMPTY;return L(n,(function(e,n){r=r.set(new Ce([e]),t.fromValue(n))})),r},Ys.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},Ys.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},Ys.prototype.fromFound=function(e){var t=this;k(!!e.found,"Tried to deserialize a found document from a missing document."),Ms(e.found.name,"doc.found.name"),Ms(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new dr(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},Ys.prototype.fromMissing=function(e){k(!!e.missing,"Tried to deserialize a missing document from a found document."),k(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new pr(t,n)},Ys.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):I("invalid batch get response: "+JSON.stringify(e))},Ys.prototype.toWatchTargetChangeState=function(e){switch(e){case $a.Added:return"ADD";case $a.Current:return"CURRENT";case $a.NoChange:return"NO_CHANGE";case $a.Removed:return"REMOVE";case $a.Reset:return"RESET";default:return I("Unknown WatchTargetChangeState: "+e)}},Ys.prototype.toTestWatchChange=function(e){if(e instanceof Ja)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Xa){if(e.newDoc instanceof dr){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof pr)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof us){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return Ua.OK;switch(e){case A.OK:return Ua.OK;case A.CANCELLED:return Ua.CANCELLED;case A.UNKNOWN:return Ua.UNKNOWN;case A.DEADLINE_EXCEEDED:return Ua.DEADLINE_EXCEEDED;case A.RESOURCE_EXHAUSTED:return Ua.RESOURCE_EXHAUSTED;case A.INTERNAL:return Ua.INTERNAL;case A.UNAVAILABLE:return Ua.UNAVAILABLE;case A.UNAUTHENTICATED:return Ua.UNAUTHENTICATED;case A.INVALID_ARGUMENT:return Ua.INVALID_ARGUMENT;case A.NOT_FOUND:return Ua.NOT_FOUND;case A.ALREADY_EXISTS:return Ua.ALREADY_EXISTS;case A.PERMISSION_DENIED:return Ua.PERMISSION_DENIED;case A.FAILED_PRECONDITION:return Ua.FAILED_PRECONDITION;case A.ABORTED:return Ua.ABORTED;case A.OUT_OF_RANGE:return Ua.OUT_OF_RANGE;case A.UNIMPLEMENTED:return Ua.UNIMPLEMENTED;case A.DATA_LOSS:return Ua.DATA_LOSS;default:return I("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.toBytes(e.resumeToken),cause:n}}}return I("Unrecognized watch change: "+JSON.stringify(e))},Ys.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){Ms(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=this.fromBytes(e.targetChange.resumeToken),a=e.targetChange.cause;t=new us(r,i,o,a&&this.fromRpcStatus(a)||null)}else if("documentChange"in e){Ms(e.documentChange,"documentChange");var s=e.documentChange;Ms(s.document,"documentChange.name"),Ms(s.document.name,"documentChange.document.name"),Ms(s.document.updateTime,"documentChange.document.updateTime");var u=this.fromName(s.document.name),c=this.fromVersion(s.document.updateTime),l=new dr(u,c,{},void 0,s.document,(function(e){return n.fromValue(e)})),h=s.targetIds||[],f=s.removedTargetIds||[];t=new Xa(h,f,l.key,l)}else if("documentDelete"in e){Ms(e.documentDelete,"documentDelete");var d=e.documentDelete;Ms(d.document,"documentDelete.document"),u=this.fromName(d.document),c=d.readTime?this.fromVersion(d.readTime):We.forDeletedDoc(),l=new pr(u,c),t=new Xa([],f=d.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){Ms(e.documentRemove,"documentRemove");var p=e.documentRemove;Ms(p.document,"documentRemove"),u=this.fromName(p.document),t=new Xa([],f=p.removedTargetIds||[],u,null)}else{if(!("filter"in e))return I("Unknown change type "+JSON.stringify(e));Ms(e.filter,"filter");var m=e.filter;Ms(m.targetId,"filter.targetId");var y=m.count||0,g=new _s(y);t=new Ja(m.targetId,g)}return t},Ys.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?$a.NoChange:"ADD"===e?$a.Added:"REMOVE"===e?$a.Removed:"CURRENT"===e?$a.Current:"RESET"===e?$a.Reset:I("Got unexpected TargetChange.state: "+e)},Ys.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return We.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length||!t.readTime?We.MIN:this.fromVersion(t.readTime)},Ys.prototype.toMutation=function(e){var t,n=this;if(e instanceof yn)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof bn)t={delete:this.toName(e.key)};else if(e instanceof gn)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else if(e instanceof vn)t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}};else{if(!(e instanceof wn))return I("Unknown mutation type "+e.type);t={verify:this.toName(e.key)}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},Ys.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):pn.NONE;if(e.update){Ms(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new gn(r,i,o,n)}return new yn(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new bn(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return k(!0===n.exists,'Transforms only support precondition "exists == true"'),new vn(r,a)}return e.verify?(r=this.fromName(e.verify),new wn(r,n)):I("unknown mutation proto: "+JSON.stringify(e))},Ys.prototype.toPrecondition=function(e){return k(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:I("Unknown precondition")},Ys.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?pn.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?pn.exists(e.exists):pn.NONE},Ys.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(We.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new Jt(r,i)},Ys.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(k(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},Ys.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof gs)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vs)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof bs)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof ws)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw I("Unknown transform: "+e.transform)},Ys.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)k("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=gs.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new vs(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e)r=e.removeAllFromArray.values||[],n=new bs(r.map((function(e){return t.fromValue(e)})));else if("increment"in e){var i=this.fromValue(e.increment);k(i instanceof Mn,"NUMERIC_ADD transform requires a NumberValue"),n=new ws(i)}else I("Unknown transform proto: "+JSON.stringify(e));var o=Ce.fromServerFormat(e.fieldPath);return new tn(o,n)},Ys.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},Ys.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;k(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Do.atPath(this.fromQueryPath(n)).toTarget()},Ys.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(k(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(k(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},Ys.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){k(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Do(t,i,s,a,u,bo.First,c,l).toTarget()},Ys.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},Ys.prototype.toLabel=function(e){switch(e){case wi.Listen:return null;case wi.ExistenceFilterMismatch:return"existence-filter-mismatch";case wi.LimboResolution:return"limbo-document";default:return I("Unrecognized query purpose: "+e)}},Ys.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.approximateByteSize()&&(t.resumeToken=this.toBytes(e.resumeToken)),t},Ys.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof xo?t.toUnaryOrFieldFilter(e):I("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},Ys.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):I("Unknown filter: "+JSON.stringify(e)):[]},Ys.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},Ys.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},Ys.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},Ys.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new Uo(r,n)},Ys.prototype.toDirection=function(e){return xs[e.name]},Ys.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return Fo.ASCENDING;case"DESCENDING":return Fo.DESCENDING;default:return}},Ys.prototype.toOperatorName=function(e){return Os[e.name]},Ys.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return _o.EQUAL;case"GREATER_THAN":return _o.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return _o.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return _o.LESS_THAN;case"LESS_THAN_OR_EQUAL":return _o.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return _o.ARRAY_CONTAINS;case"IN":return _o.IN;case"ARRAY_CONTAINS_ANY":return _o.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return I("Unspecified operator");default:return I("Unknown operator")}},Ys.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},Ys.prototype.fromFieldPathReference=function(e){return Ce.fromServerFormat(e.fieldPath)},Ys.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},Ys.prototype.fromPropertyOrder=function(e){return new Vo(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},Ys.prototype.fromFieldFilter=function(e){return xo.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},Ys.prototype.toUnaryOrFieldFilter=function(e){if(e.op===_o.EQUAL){if(e.value.isEqual(rr.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Pn.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},Ys.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return xo.create(t,_o.EQUAL,rr.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return xo.create(n,_o.EQUAL,Pn.INSTANCE);case"OPERATOR_UNSPECIFIED":return I("Unspecified filter");default:return I("Unknown filter")}},Ys.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},Ys.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return Ce.fromServerFormat(e)}));return en.fromArray(t)},Ys),qs=(Hs.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new Fs,this.queries.set(t,r)),r.listeners.push(e),k(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap&&e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e})):Promise.resolve(r.targetId)},Hs.prototype.unlisten=function(e){return d(this,void 0,void 0,(function(){var t,n,r,i;return p(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(e))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},Hs.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].onViewSnapshot(i)&&(t=!0);a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},Hs.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},Hs.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)})),t&&this.raiseSnapshotsInSyncEvent()},Hs.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},Hs.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},Hs.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},Hs),js=(Qs.prototype.onViewSnapshot=function(e){if(k(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Wa.Metadata&&t.push(i)}e=new ts(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},Qs.prototype.onError=function(e){this.queryObserver.error(e)},Qs.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},Qs.prototype.shouldRaiseInitialEvent=function(e,t){if(k(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Ea.Offline;return this.options.waitForSyncWhenOnline&&n?(k(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Ea.Offline},Qs.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},Qs.prototype.raiseInitialEvent=function(e){k(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},Qs),zs=(Gs.fromSnapshot=function(e,t){for(var n=dt(),r=dt(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case Wa.Added:n=n.add(a.doc.key);break;case Wa.Removed:r=r.add(a.doc.key)}}return new Gs(e,t.fromCache,n,r)},Gs),Ws=(Object.defineProperty(Ks.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),Ks.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new es,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof dr?t:null;h&&(k(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:Wa.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:Wa.Modified,doc:h}),p=!0,(u&&0<n.query.docComparator(h,u)||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:Wa.Added,doc:h}),p=!0):l&&!h&&(r.track({type:Wa.Removed,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(o=h?(a=a.add(h),d?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:Wa.Removed,doc:l})}return k(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},Ks.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},Ks.prototype.applyChanges=function(e,t,n){var r=this;k(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return i=e.type,o=t.type,n(i)-n(o)||r.query.docComparator(e.doc,t.doc);function n(e){switch(e){case Wa.Added:return 1;case Wa.Modified:case Wa.Metadata:return 2;case Wa.Removed:return 0;default:return I("Unknown ChangeType: "+e)}}var i,o})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Ka.Synced:Ka.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new ts(this.query,e.documentSet,i,o,e.mutatedKeys,s===Ka.Local,u,!1),limboChanges:a}:{limboChanges:a}},Ks.prototype.applyOnlineStateChange=function(e){return this.current&&e===Ea.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new es,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},Ks.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},Ks.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return k(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},Ks.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=dt(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new Vs(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new Us(e))})),n},Ks.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=dt();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},Ks.prototype.computeInitialSnapshot=function(){return ts.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ka.Local)},Ks);function Ks(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=dt(),this.mutatedKeys=dt(),this.documentSet=new Ha(e.docComparator.bind(e))}function Gs(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}function Qs(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Ea.Unknown,this.options=n||{}}function Hs(e){this.syncEngine=e,this.queries=new yr((function(e){return e.canonicalId()})),this.onlineState=Ea.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}function Ys(e,t){this.databaseId=e,this.options=t}function Xs(e,t,n){this.query=e,this.targetId=t,this.view=n}function Js(e){this.key=e,this.receivedDocument=!1}var $s=(ru.prototype.run=function(){this.runWithBackOff()},ru.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return d(e,void 0,void 0,(function(){var e,t,n=this;return p(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},ru.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!go(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},ru.prototype.handleTransactionError=function(e){var t=this;0<this.retries&&this.isRetryableTransactionError(e)?(--this.retries,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},ru.prototype.isRetryableTransactionError=function(e){if("FirebaseError"!==e.name)return!1;var t=e.code;return"aborted"===t||"failed-precondition"===t||!ja(t)},ru),Zs=(Object.defineProperty(nu.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),nu.prototype.subscribe=function(e){k(null!==e,"SyncEngine listener cannot be null"),k(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},nu.prototype.listen=function(e){return d(this,void 0,void 0,(function(){var t,n,r,i,o;return p(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},nu.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return d(this,void 0,void 0,(function(){var r,i,o,a,s,u;return p(this,(function(c){switch(c.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=c.sent(),i=new Ws(e,r.remoteKeys),o=i.computeDocChanges(r.documents),a=rs.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Ea.Offline),k(0===(s=i.applyChanges(o,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),k(!!s.snapshot,"applyChanges for new view should always return a snapshot"),u=new Xs(e,t,i),this.queryViewsByQuery.set(e,u),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,s.snapshot]}}))}))},nu.prototype.synchronizeViewAndComputeSnapshot=function(e){return d(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},nu.prototype.unlisten=function(e){return d(this,void 0,void 0,(function(){var t,n,r=this;return p(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),k(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),1<(n=this.queriesByTarget[t.targetId]).length?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(zi)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},nu.prototype.write=function(e,t){return d(this,void 0,void 0,(function(){var n;return p(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},nu.prototype.runTransaction=function(e,t,n){new $s(e,this.remoteStore,t,n).run()},nu.prototype.applyRemoteEvent=function(e){return d(this,void 0,void 0,(function(){var t,n=this;return p(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),L(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(k(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?r.receivedDocument=!0:0<t.modifiedDocuments.size?k(r.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(k(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,zi(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},nu.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Sa.RemoteStore||!this.isPrimary&&t===Sa.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);k(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},nu.prototype.rejectListen=function(e,t){return d(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return p(this,(function(u){switch(u.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new Ke(Ne.comparator)).insert(r,new pr(r,We.forDeletedDoc())),o=dt().add(r),a=new ns(We.MIN,{},new tt(ie),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return s.removeAndCleanupTarget(e,t)})).catch(zi)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},nu.prototype.applyBatchState=function(e,t,n){return d(this,void 0,void 0,(function(){var r;return p(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(T("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):I("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},nu.prototype.applySuccessfulWrite=function(e){return d(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,zi(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},nu.prototype.rejectFailedWrite=function(e,t){return d(this,void 0,void 0,(function(){var n;return p(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,zi(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},nu.prototype.registerPendingWritesCallback=function(e){return d(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||T("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?e.resolve():((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n)),[2]}}))}))},nu.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},nu.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new D(A.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},nu.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new Ke(ie)).insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},nu.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(k(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},nu.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),k(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},nu.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},nu.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof Us?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof Vs?(T("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):I("Unknown limbo change: "+JSON.stringify(i))}},nu.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){T("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Do.atPath(t.path);this.limboResolutionsByTarget[n]=new Js(t),this.remoteStore.listen(new Ai(r.toTarget(),n,wi.LimboResolution,Ee.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},nu.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},nu.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return d(this,void 0,void 0,(function(){var n,r,i,o=this;return p(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=zs.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},nu.prototype.assertSubscribed=function(e){k(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},nu.prototype.handleCredentialChange=function(e){return d(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},nu.prototype.applyPrimaryState=function(e){return d(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u=this;return p(this,(function(c){switch(c.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),M(this.queriesByTarget,(function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then((function(){return u.removeAndCleanupTarget(e),u.localStore.releaseTarget(e,!0)})),u.remoteStore.unlisten(e)})),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},nu.prototype.resetLimboDocuments=function(){var e=this;M(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Ke(Ne.comparator)},nu.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return d(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,d;return p(this,(function(p){switch(p.label){case 0:t=[],n=[],r=0,i=e,p.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queriesByTarget[o])&&0!==s.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return p.sent(),[4,this.localStore.allocateTarget(s[0].toTarget())];case 3:a=p.sent(),u=0,c=s,p.label=4;case 4:return u<c.length?(l=c[u],k(!!(h=this.queryViewsByQuery.get(l)),"No query view found for "+l),[4,this.synchronizeViewAndComputeSnapshot(h)]):[3,7];case 5:(f=p.sent()).snapshot&&n.push(f.snapshot),p.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return k(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return k(!!(d=p.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(d)];case 10:return a=p.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(d),o,!1)];case 11:p.sent(),p.label=12;case 12:t.push(a),p.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},nu.prototype.synthesizeTargetToQuery=function(e){return new Do(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,bo.First,e.startAt,e.endAt)},nu.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},nu.prototype.applyTargetState=function(e,t,n){return d(this,void 0,void 0,(function(){var r,i;return p(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return T("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=ns.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:I("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},nu.prototype.applyActiveTargetsChange=function(e,t){return d(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h=this;return p(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(l=r[n],k(!this.queriesByTarget[l],"Trying to add an already active target"),[4,this.localStore.getTarget(l)]):[3,6];case 2:return k(!!(i=f.sent()),"Query data for active target "+l+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:a=function(e){return p(this,(function(t){switch(t.label){case 0:return s.queriesByTarget[e]?[4,s.localStore.releaseTarget(e,!1).then((function(){h.remoteStore.unlisten(e),h.removeAndCleanupTarget(e)})).catch(zi)]:[2,"continue"];case 1:return t.sent(),[2]}}))},s=this,u=0,c=t,f.label=7;case 7:return u<c.length?(l=c[u],[5,a(l)]):[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},nu.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},nu.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},nu.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return dt().add(t.key);var n=dt(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);k(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},nu),eu=(tu.prototype.isAuthenticated=function(){return null!=this.uid},tu.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},tu.prototype.isEqual=function(e){return e.uid===this.uid},tu.UNAUTHENTICATED=new tu(null),tu.GOOGLE_CREDENTIALS=new tu("google-credentials-uid"),tu.FIRST_PARTY=new tu("first-party-uid"),tu);function tu(e){this.uid=e}function nu(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new yr((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new Ke(Ne.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Mi,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=xt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Ea.Unknown}function ru(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new da(this.asyncQueue,me.RetryTransaction)}function iu(e,t){return k(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),"firestore_clients_"+e+"_"+t}function ou(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function au(e,t){return"firestore_targets_"+e+"_"+t}var su="SharedClientState",uu=(bu.fromWebStorageEntry=function(e,t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new D(r.error.code,r.error.message)),i?new bu(e,t,r.state,o):(E(su,"Failed to parse mutation state for ID '"+t+"': "+n),null)},bu.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},bu),cu=(vu.fromWebStorageEntry=function(e,t){var n=JSON.parse(t),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new D(n.error.code,n.error.message)),r?new vu(e,n.state,i):(E(su,"Failed to parse target state for ID '"+e+"': "+t),null)},vu.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},vu),lu=(gu.fromWebStorageEntry=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=mt(),o=0;r&&o<n.activeTargetIds.length;++o)r=vo(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new gu(e,i):(E(su,"Failed to parse client data for instance '"+e+"': "+t),null)},gu),hu=(yu.fromWebStorageEntry=function(e){var t=JSON.parse(e);return"object"==typeof t&&t.onlineState in Ea&&"string"==typeof t.clientId?new yu(t.clientId,Ea[t.onlineState]):(E(su,"Failed to parse online state: "+e),null)},yu),fu=(mu.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},mu.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},mu.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},mu),du=(pu.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},pu.prototype.start=function(){return d(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l,h=this;return p(this,(function(f){switch(f.label){case 0:return k(!this.started,"WebStorageSharedClientState already started"),k(null!==this.syncEngine,"syncEngine property must be set before calling start()"),k(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(iu(this.persistenceKey,r)))&&(o=lu.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,c=this.earlyEvents;u<c.length;u++)l=c[u],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},pu.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},pu.prototype.getAllActiveQueryTargets=function(){var e=mt();return L(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},pu.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},pu.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},pu.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},pu.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(au(this.persistenceKey,e));if(n){var r=cu.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},pu.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},pu.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},pu.prototype.clearQueryState=function(e){this.removeItem(au(this.persistenceKey,e))},pu.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},pu.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},pu.prototype.setOnlineState=function(e){this.persistOnlineState(e)},pu.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},pu.prototype.getItem=function(e){var t=this.storage.getItem(e);return T(su,"READ",e,t),t},pu.prototype.setItem=function(e,t){T(su,"SET",e,t),this.storage.setItem(e,t)},pu.prototype.removeItem=function(e){T(su,"REMOVE",e),this.storage.removeItem(e)},pu.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(T(su,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void E("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return d(t,void 0,void 0,(function(){var t,n,r,i,o,a;return p(this,(function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(k(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=Ee.INVALID;if(null!=e)try{var n=JSON.parse(e);k("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){E(su,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==Ee.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(pu.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),pu.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},pu.prototype.persistMutationState=function(e,t,n){var r=new uu(this.currentUser,e,t,n),i=ou(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},pu.prototype.removeMutationState=function(e){var t=ou(this.persistenceKey,this.currentUser,e);this.removeItem(t)},pu.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Ea[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},pu.prototype.persistQueryTargetState=function(e,t,n){var r=au(this.persistenceKey,e),i=new cu(e,t,n);this.setItem(r,i.toWebStorageJSON())},pu.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},pu.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return k(null!==n,"Cannot parse client state key '"+e+"'"),lu.fromWebStorageEntry(n,t)},pu.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);k(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return uu.fromWebStorageEntry(new eu(i),r,t)},pu.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);k(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return cu.fromWebStorageEntry(r,t)},pu.prototype.fromWebStorageOnlineState=function(e){return hu.fromWebStorageEntry(e)},pu.prototype.handleMutationBatchEvent=function(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){return e.user.uid!==this.currentUser.uid?(T(su,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},pu.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},pu.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach((function(e){return d(n,void 0,void 0,(function(){return p(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return d(n,void 0,void 0,(function(){return p(this,(function(t){return i.has(e)||a.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,a)},pu.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},pu);function pu(e,t,n,r,i){if(this.queue=e,this.platform=t,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!pu.isAvailable(this.platform))throw new D(A.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=iu(this.persistenceKey,this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+this.persistenceKey,this.activeClients[this.localClientId]=new fu,this.clientStateKeyRe=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+this.persistenceKey,this.platform.window.addEventListener("storage",this.storageListener)}function mu(){this.activeTargetIds=mt()}function yu(e,t){this.clientId=e,this.onlineState=t}function gu(e,t){this.clientId=e,this.activeTargetIds=t}function vu(e,t,n){this.targetId=e,this.state=t,k(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}function bu(e,t,n,r){this.user=e,this.batchId=t,this.state=n,k(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}function wu(){}var Tu=(xu.prototype.addPendingMutation=function(e){},xu.prototype.updateMutationState=function(e,t,n){},xu.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},xu.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},xu.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},xu.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},xu.prototype.clearQueryState=function(e){delete this.queryState[e]},xu.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},xu.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},xu.prototype.start=function(){return this.localState=new fu,Promise.resolve()},xu.prototype.handleUserChange=function(e,t,n){},xu.prototype.setOnlineState=function(e){},xu.prototype.shutdown=function(){},xu.prototype.writeSequenceNumber=function(e){},xu),Eu=(_u.prototype.lruParams=function(){return Hi.withCacheSize(this.cacheSizeBytes)},_u),Su=(Du.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new pe,r=new pe,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},Du.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},Du.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Eu?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},Du.prototype.canFallback=function(e){return e instanceof D?e.code===A.FAILED_PRECONDITION||e.code===A.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},Du.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new D(A.FAILED_PRECONDITION,"The client has already been terminated.")},Du.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=eo.buildStoragePrefix(this.databaseInfo),i=new Bs(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return d(n,void 0,void 0,(function(){var n,o;return p(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!du.isAvailable(this.platform))throw new D(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new du(this.asyncQueue,this.platform,r,this.clientId,e):new Tu,[4,eo.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),[2,(this.persistence=o).referenceDelegate.garbageCollector]}}))}))}))},Du.prototype.startMemoryPersistence=function(){return this.persistence=ca.createEagerPersistence(this.clientId),this.sharedClientState=new Tu,Promise.resolve(null)},Du.prototype.initializeRest=function(e,t){var n=this;return T("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return d(n,void 0,void 0,(function(){var n,i,o,a,s,u,c=this;return p(this,(function(l){switch(l.label){case 0:return n=new jo,this.localStore=new Fi(this.persistence,n,e),[4,this.localStore.start()];case 1:return l.sent(),t&&(this.lruScheduler=new Yi(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),a=new xa(this.asyncQueue,r,this.credentials,o),s=function(e){return c.syncEngine.applyOnlineStateChange(e,Sa.RemoteStore)},u=function(e){return c.syncEngine.applyOnlineStateChange(e,Sa.SharedClientState)},this.remoteStore=new ms(this.localStore,a,this.asyncQueue,s,i),this.syncEngine=new Zs(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new qs(this.syncEngine),[4,this.sharedClientState.start()];case 2:return l.sent(),[4,this.remoteStore.start()];case 3:return l.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return d(c,void 0,void 0,(function(){return p(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return d(c,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},Du.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},Du.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},Du.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return d(e,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},Du.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new pe;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},Du.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new js(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},Du.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},Du.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof dr)return e;if(e instanceof pr)return null;throw new D(A.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},Du.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return d(t,void 0,void 0,(function(){var t,n,r;return p(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new Ws(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},Du.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},Du.prototype.databaseId=function(){return this.databaseInfo.databaseId},Du.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},Du.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(Du.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),Du.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},Du),Iu=(Au.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},Au.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},Au.prototype.mute=function(){this.muted=!0},Au.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},Au),ku=(Nu.documentId=function(){return Nu._DOCUMENT_ID},Nu.prototype.isEqual=function(e){if(!(e instanceof Nu))throw $("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},Nu._DOCUMENT_ID=new Nu(Ce.keyField().canonicalString()),Nu),Cu=new RegExp("[~\\*/\\[\\]]");function Nu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(){if(!(e instanceof Array)||e.length<1)throw new D(A.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var n=0;n<e.length;++n)if(j("FieldPath","string",n,e[n]),0===e[n].length)throw new D(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ce(e)}function Au(e){this.observer=e,this.muted=!1}function Du(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=ne.newId()}function _u(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}function xu(){this.localState=new fu,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}function Ou(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e}var Pu=(Bu.prototype.getToken=function(){return Promise.resolve(null)},Bu.prototype.invalidateToken=function(){},Bu.prototype.setChangeListener=function(e){k(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(eu.UNAUTHENTICATED)},Bu.prototype.removeChangeListener=function(){k(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},Bu),Ru=(Vu.prototype.getToken=function(){var e=this;k(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new D(A.ABORTED,"getToken aborted due to token change.");return n?(k("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Ou(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},Vu.prototype.invalidateToken=function(){this.forceRefresh=!0},Vu.prototype.setChangeListener=function(e){k(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},Vu.prototype.removeChangeListener=function(){k(null!=this.tokenListener,"removeChangeListener() called twice"),k(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},Vu.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return k(null===e||"string"==typeof e,"Received invalid UID: "+e),new eu(e)},Vu),Mu=(Object.defineProperty(Uu.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),Uu),Lu=(Fu.prototype.getToken=function(){return Promise.resolve(new Mu(this.gapi,this.sessionIndex))},Fu.prototype.setChangeListener=function(e){e(eu.FIRST_PARTY)},Fu.prototype.removeChangeListener=function(){},Fu.prototype.invalidateToken=function(){},Fu);function Fu(e,t){this.gapi=e,this.sessionIndex=t}function Uu(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=eu.FIRST_PARTY}function Vu(e){var t=this;this.tokenListener=null,this.currentUser=eu.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}function Bu(){this.changeListener=null}function qu(e){return function(){if("object"==typeof e&&null!==e)for(var t=e,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return 1}}()}var ju,zu,Wu,Ku,Gu,Qu,Hu,Yu=(fc.delete=function(){return U("FieldValue.delete",arguments),Xu.instance},fc.serverTimestamp=function(){return U("FieldValue.serverTimestamp",arguments),Ju.instance},fc.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return B("FieldValue.arrayUnion",arguments,1),new $u(e)},fc.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return B("FieldValue.arrayRemove",arguments,1),new Zu(e)},fc.increment=function(e){return j("FieldValue.increment","number",1,e),V("FieldValue.increment",arguments,1),new ec(e)},fc.prototype.isEqual=function(e){return this===e},fc),Xu=(h(hc,Qu=Yu),hc.instance=new hc,hc),Ju=(h(lc,Gu=Yu),lc.instance=new lc,lc),$u=(h(cc,Ku=Yu),cc),Zu=(h(uc,Wu=Yu),uc),ec=(h(sc,zu=Yu),sc),tc=O(Yu,"Use FieldValue.<field>() instead."),nc=/^__.*__$/,rc=(ac.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new gn(e,this.data,this.fieldMask,t)):n.push(new yn(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new vn(e,this.fieldTransforms)),n},ac),ic=(oc.prototype.toMutations=function(e,t){var n=[new gn(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new vn(e,this.fieldTransforms)),n},oc);function oc(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function ac(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function sc(e){var t=zu.call(this,"FieldValue.increment")||this;return t._operand=e,t}function uc(e){var t=Wu.call(this,"FieldValue.arrayRemove")||this;return t._elements=e,t}function cc(e){var t=Ku.call(this,"FieldValue.arrayUnion")||this;return t._elements=e,t}function lc(){return Gu.call(this,"FieldValue.serverTimestamp")||this}function hc(){return Qu.call(this,"FieldValue.delete")||this}function fc(e){this._methodName=e}function dc(e){switch(e){case ju.Set:case ju.MergeSet:case ju.Update:return 1;case ju.Argument:case ju.ArrayArgument:return;default:throw I("Unexpected case for UserDataSource: "+e)}}(Hu=ju=ju||{})[Hu.Set=0]="Set",Hu[Hu.Update=1]="Update",Hu[Hu.MergeSet=2]="MergeSet",Hu[Hu.Argument=3]="Argument",Hu[Hu.ArrayArgument=4]="ArrayArgument";var pc=(vc.prototype.childContextForField=function(e){var t=null==this.path?null:this.path.child(e),n=new vc(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(e),n},vc.prototype.childContextForFieldPath=function(e){var t=null==this.path?null:this.path.child(e),n=new vc(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},vc.prototype.childContextForArray=function(e){return new vc(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},vc.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new D(A.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},vc.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},vc.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},vc.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(dc(this.dataSource)&&nc.test(e))throw this.createError('Document fields cannot begin and end with "__"')},vc),mc=function(e,t){this.databaseId=e,this.key=t},yc=(gc.prototype.parseSetData=function(e,t){var n=new pc(ju.Set,e,Ce.EMPTY_PATH);wc("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new rc(r,null,n.fieldTransforms)},gc.prototype.parseMergeData=function(e,t,n){var r=new pc(ju.MergeSet,e,Ce.EMPTY_PATH);wc("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new tt(Ce.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof ku)h=l._internalPath;else{if("string"!=typeof l)throw I("Expected stringOrFieldPath to be a string or a FieldPath");h=Ec(e,l)}if(!r.contains(h))throw new D(A.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=en.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=en.fromArray(r.fieldMask),o=r.fieldTransforms;return new rc(a,i,o)},gc.prototype.parseUpdateData=function(e,t){var n=this,r=new pc(ju.Update,e,Ce.EMPTY_PATH);wc("Data must be an object, but it was:",r,t);var i=new tt(Ce.comparator),o=lr.EMPTY;L(t,(function(t,a){var s=Ec(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Xu)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=en.fromSet(i);return new ic(o,a,r.fieldTransforms)},gc.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new pc(ju.Update,e,Ce.EMPTY_PATH),o=[Tc(e,t)],a=[n];if(r.length%2!=0)throw new D(A.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Tc(e,r[s])),a.push(r[s+1]);var u=new tt(Ce.comparator),c=lr.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof Xu)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=en.fromSet(u);return new ic(c,p,i.fieldTransforms)},gc.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new pc(n?ju.ArrayArgument:ju.Argument,e,Ce.EMPTY_PATH),i=this.parseData(t,r);return k(null!=i,"Parsed data should not be null."),k(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},gc.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Sc(e);throw t.createError(n)}},gc.prototype.parseData=function(e,t){if(bc(e=this.runPreConverter(e,t)))return wc("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Yu)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==ju.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},gc.prototype.parseObject=function(e,t){var n=this,r=new Ke(ie);return F(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):L(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new lr(r)},gc.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=Pn.INSTANCE),n.push(s),r++}return new hr(n)},gc.prototype.parseSentinelFieldValue=function(e,t){if(!dc(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof Xu){if(t.dataSource!==ju.MergeSet)throw t.dataSource===ju.Update?(k(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof Ju)t.fieldTransforms.push(new tn(t.path,gs.instance));else if(e instanceof $u){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new vs(n);t.fieldTransforms.push(new tn(t.path,r))}else if(e instanceof Zu){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new bs(n);t.fieldTransforms.push(new tn(t.path,i))}else if(e instanceof ec){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new ws(o);t.fieldTransforms.push(new tn(t.path,a))}else I("Unknown FieldValue type: "+e)},gc.prototype.parseScalarValue=function(e,t){if(null===e)return Pn.INSTANCE;if("number"==typeof e)return new(vo(e)?nr:rr)(e);if("boolean"==typeof e)return Rn.of(e);if("string"==typeof e)return new ir(e);if(e instanceof Date)return new or(ze.fromDate(e));if(e instanceof ze)return new or(new ze(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof ys)return new cr(e);if(e instanceof be)return new sr(e);if(e instanceof mc)return new ur(e.databaseId,e.key);throw t.createError("Unsupported field value: "+Y(e))},gc.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new pc(ju.Argument,e,Ce.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},gc);function gc(e){this.preConverter=e}function vc(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}function bc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ze||e instanceof ys||e instanceof be||e instanceof mc||e instanceof Yu)}function wc(e,t,n){if(!bc(n)||!H(n)){var r=Y(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Tc(e,t){if(t instanceof ku)return t._internalPath;if("string"==typeof t)return Ec(e,t);throw new D(A.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ec(e,t){try{return function(e){if(0<=e.search(Cu))throw new D(A.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ku.bind.apply(ku,m([void 0],e.split("."))))}catch(t){throw new D(A.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Sc(t);throw new D(A.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Sc(e){return e instanceof Error?e.message:e.toString()}var Ic,kc=Hi.COLLECTION_DISABLED,Cc=(Kc.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},Kc),Nc=(Wc.prototype.settings=function(e){if(V("Firestore.settings",arguments,1),j("Firestore.settings","object",1,e),P(e,"persistence"))throw new D(A.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Cc(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new D(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=t).credentials&&(this._credentials=function(e){if(!e)return new Pu;switch(e.type){case"gapi":var t=e.client;return k(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Lu(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new D(A.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},Wc.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},Wc.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},Wc.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new D(A.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&E("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=R(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Eu(this._settings.cacheSizeBytes,t))},Wc.prototype.clearPersistence=function(){var e=this,t=eo.buildStoragePrefix(this.makeDatabaseInfo()),n=new pe;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return d(e,void 0,void 0,(function(){var e;return p(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new D(A.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,eo.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},Wc.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(Wc.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),Wc.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},Wc.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),qu(e))return this.onSnapshotsInSyncInternal(e);j("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},Wc.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Iu({next:function(){e.next&&e.next()},error:function(e){throw I("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},Wc.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new wu),this._firestoreClient},Wc.prototype.makeDatabaseInfo=function(){return new de(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},Wc.prototype.configureClient=function(e){k(!!this._settings.host,"FirestoreSettings.host is not set"),k(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Su(N.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},Wc.prototype.createDataConverter=function(e){return new yc((function(t){if(t instanceof _c){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new D(A.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new mc(e,t._key)}return t}))},Wc.databaseIdFromApp=function(e){var t=e.options;if(!P(t,"projectId"))throw new D(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new D(A.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Te(n)},Object.defineProperty(Wc.prototype,"app",{get:function(){if(!this._firebaseApp)throw new D(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),Wc.prototype.collection=function(e){return V("Firestore.collection",arguments,1),j("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Qc(Ie.fromString(e),this)},Wc.prototype.doc=function(e){return V("Firestore.doc",arguments,1),j("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),_c.forPath(Ie.fromString(e),this)},Wc.prototype.collectionGroup=function(e){if(V("Firestore.collectionGroup",arguments,1),j("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new D(A.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Rc(new Do(Ie.EMPTY_PATH,e),this)},Wc.prototype.runTransaction=function(e){var t=this;return V("Firestore.runTransaction",arguments,1),j("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Ac(t,n))}))},Wc.prototype.batch=function(){return this.ensureClientConfigured(),new Dc(this)},Object.defineProperty(Wc,"logLevel",{get:function(){switch(b()){case y.DEBUG:return"debug";case y.ERROR:return"error";case y.SILENT:return"silent";default:return I("Unknown log level: "+b())}},enumerable:!0,configurable:!0}),Wc.setLogLevel=function(e){switch(V("Firestore.setLogLevel",arguments,1),j("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":w(y.DEBUG);break;case"error":w(y.ERROR);break;case"silent":w(y.SILENT);break;default:throw new D(A.INVALID_ARGUMENT,"Invalid log level: "+e)}},Wc.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},Wc),Ac=(zc.prototype.get=function(e){var t=this;V("Transaction.get",arguments,1);var n=$c("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return I("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof pr)return new Oc(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof dr)return new Oc(t._firestore,n._key,r,!1,!1,n._converter);throw I("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},zc.prototype.set=function(e,t,n){q("Transaction.set",arguments,2,3);var r=$c("Transaction.set",e,this._firestore);n=Yc("Transaction.set",n);var i=Zc(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},zc.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof t||t instanceof ku?(B("Transaction.update",arguments,3),r=$c("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(V("Transaction.update",arguments,2),r=$c("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},zc.prototype.delete=function(e){V("Transaction.delete",arguments,1);var t=$c("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},zc),Dc=(jc.prototype.set=function(e,t,n){q("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=$c("WriteBatch.set",e,this._firestore);n=Yc("WriteBatch.set",n);var i=Zc(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,pn.NONE)),this},jc.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof ku?(B("WriteBatch.update",arguments,3),r=$c("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(V("WriteBatch.update",arguments,2),r=$c("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,pn.exists(!0))),this},jc.prototype.delete=function(e){V("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=$c("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new bn(t._key,pn.NONE)),this},jc.prototype.commit=function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},jc.prototype.verifyNotCommitted=function(){if(this._committed)throw new D(A.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},jc),_c=(qc.forPath=function(e,t,n){if(e.length%2!=0)throw new D(A.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new qc(new Ne(e),t,n)},Object.defineProperty(qc.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(qc.prototype,"parent",{get:function(){return new Qc(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(qc.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),qc.prototype.collection=function(e){if(V("DocumentReference.collection",arguments,1),j("DocumentReference.collection","non-empty string",1,e),!e)throw new D(A.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=Ie.fromString(e);return new Qc(this._key.path.child(t),this.firestore)},qc.prototype.isEqual=function(e){if(!(e instanceof qc))throw $("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)&&this._converter===e._converter},qc.prototype.set=function(e,t){q("DocumentReference.set",arguments,1,2),t=Yc("DocumentReference.set",t);var n=Zc(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,pn.NONE))},qc.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof ku?(B("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(V("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,pn.exists(!0)))},qc.prototype.delete=function(){return V("DocumentReference.delete",arguments,0),this._firestoreClient.write([new bn(this._key,pn.NONE)])},qc.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];q("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||qu(e[i])||(J("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),K("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=qu(e[i])?e[i]:(j("DocumentReference.onSnapshot","function",i,e[i]),z("DocumentReference.onSnapshot","function",i+1,e[i+1]),z("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},qc.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Iu({next:function(e){if(t.next){k(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Oc(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(Do.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},qc.prototype.get=function(e){var t=this;return q("DocumentReference.get",arguments,0,1),Jc("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new Oc(t.firestore,t._key,e,!0,e instanceof dr&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},qc.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new D(A.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new D(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},qc.prototype.withConverter=function(e){return new qc(this._key,this.firestore,e)},qc),xc=(Bc.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},Bc),Oc=(Vc.prototype.data=function(e){if(q("DocumentSnapshot.data",arguments,0,1),e=Xc("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new Pc(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),xn.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Vc.prototype.get=function(e,t){if(q("DocumentSnapshot.get",arguments,1,2),t=Xc("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(Tc("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,xn.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(Vc.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Vc.prototype,"ref",{get:function(){return new _c(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(Vc.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(Vc.prototype,"metadata",{get:function(){return new xc(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),Vc.prototype.isEqual=function(e){if(!(e instanceof Vc))throw $("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))&&this._converter===e._converter},Vc.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},Vc.prototype.toJSValue=function(e,t){if(e instanceof lr)return this.toJSObject(e,t);if(e instanceof hr)return this.toJSArray(e,t);if(e instanceof ur){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||E("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new _c(n,this._firestore,this._converter)}return e.value(t)},Vc.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},Vc),Pc=(h(Uc,Ic=Oc),Uc.prototype.data=function(e){var t=Ic.prototype.data.call(this,e);return k(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t},Uc),Rc=(Fc.prototype.where=function(e,t,n){var r;V("Query.where",arguments,3),X("Query.where",3,n),function(e,t){if(!e.some((function(e){return e===t})))throw new D(A.INVALID_ARGUMENT,"Invalid value "+Y(t)+" provided to function Query.where() for its "+ee(2)+" argument. Acceptable values: "+e.join(", "))}(["<","<=","==",">=",">","array-contains","in","array-contains-any"],t);var i=Tc("Query.where",e),o=_o.fromString(t);if(i.isKeyField()){if(o===_o.ARRAY_CONTAINS||o===_o.ARRAY_CONTAINS_ANY)throw new D(A.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===_o.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new hr(a)}else r=this.parseDocumentIdValue(n)}else o!==_o.IN&&o!==_o.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n,o===_o.IN);var l=xo.create(i,o,r);return this.validateNewFilter(l),new Fc(this._query.addFilter(l),this.firestore,this._converter)},Fc.prototype.orderBy=function(e,t){var n;if(q("Query.orderBy",arguments,1,2),z("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)n=Fo.ASCENDING;else{if("desc"!==t)throw new D(A.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");n=Fo.DESCENDING}if(null!==this._query.startAt)throw new D(A.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new D(A.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=Tc("Query.orderBy",e),i=new Vo(r,n);return this.validateNewOrderBy(i),new Fc(this._query.addOrderBy(i),this.firestore,this._converter)},Fc.prototype.limit=function(e){return V("Query.limit",arguments,1),j("Query.limit","number",1,e),Z("Query.limit",1,e),new Fc(this._query.withLimitToFirst(e),this.firestore,this._converter)},Fc.prototype.limitToLast=function(e){return V("Query.limitToLast",arguments,1),j("Query.limitToLast","number",1,e),Z("Query.limitToLast",1,e),new Fc(this._query.withLimitToLast(e),this.firestore,this._converter)},Fc.prototype.startAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];B("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,t,!0);return new Fc(this._query.withStartAt(r),this.firestore,this._converter)},Fc.prototype.startAfter=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];B("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,t,!1);return new Fc(this._query.withStartAt(r),this.firestore,this._converter)},Fc.prototype.endBefore=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];B("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,t,!0);return new Fc(this._query.withEndAt(r),this.firestore,this._converter)},Fc.prototype.endAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];B("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,t,!1);return new Fc(this._query.withEndAt(r),this.firestore,this._converter)},Fc.prototype.isEqual=function(e){if(!(e instanceof Fc))throw $("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},Fc.prototype.withConverter=function(e){return new Fc(this._query,this.firestore,e)},Fc.prototype.boundFromDocOrFields=function(e,t,n,r){if(X(e,1,t),t instanceof Oc){if(0<n.length)throw new D(A.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new D(A.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},Fc.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new ur(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof ar)throw new D(A.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new D(A.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Uo(r,n)},Fc.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new D(A.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new D(A.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(Ie.fromString(a));if(!Ne.isDocumentKey(s))throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new Ne(s);i.push(new ur(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new Uo(i,n)},Fc.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];q("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||qu(e[i])||(J("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),K("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=qu(e[i])?e[i]:(j("Query.onSnapshot","function",i,e[i]),z("Query.onSnapshot","function",i+1,e[i+1]),z("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},Fc.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Iu({next:function(e){t.next&&t.next(new Mc(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},Fc.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new D(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},Fc.prototype.get=function(e){var t=this;return q("Query.get",arguments,0,1),Jc("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new Mc(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},Fc.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new D(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},Fc.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(Ie.fromString(e));if(!Ne.isDocumentKey(t))throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new ur(this.firestore._databaseId,new Ne(t))}if(e instanceof _c){var n=e;return new ur(this.firestore._databaseId,n._key)}throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Y(e)+".")},Fc.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new D(A.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new D(A.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=e.indexOf(null))throw new D(A.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(0<e.filter((function(e){return Number.isNaN(e)})).length)throw new D(A.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},Fc.prototype.validateNewFilter=function(e){if(e instanceof xo){var t=[_o.ARRAY_CONTAINS,_o.ARRAY_CONTAINS_ANY],n=[_o.IN,_o.ARRAY_CONTAINS_ANY],r=0<=t.indexOf(e.op),i=0<=n.indexOf(e.op);if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new D(A.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new D(A.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new D(A.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},Fc.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},Fc.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new D(A.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},Fc),Mc=(Object.defineProperty(Lc.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(Lc.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(Lc.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),Lc.prototype.forEach=function(e,t){var n=this;q("QuerySnapshot.forEach",arguments,1,2),j("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(Lc.prototype,"query",{get:function(){return new Rc(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Lc.prototype.docChanges=function(e){e&&(J("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),K("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new D(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var a=new Pc(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return k(t.type===Wa.Added,"Invalid event type for first snapshot"),k(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==Wa.Metadata})).map((function(t){var i=new Pc(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,s=-1;return t.type!==Wa.Added&&(k(0<=(o=a.indexOf(t.doc.key)),"Index for document not found"),a=a.delete(t.doc.key)),t.type!==Wa.Removed&&(s=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case Wa.Added:return"added";case Wa.Modified:case Wa.Metadata:return"modified";case Wa.Removed:return"removed";default:return I("Unknown change type: "+e)}}(t.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},Lc.prototype.isEqual=function(e){if(!(e instanceof Lc))throw $("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)&&this._converter===e._converter},Lc.prototype.convertToDocumentImpl=function(e){return new Pc(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},Lc);function Lc(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new xc(n.hasPendingWrites,n.fromCache)}function Fc(e,t,n){this._query=e,this.firestore=t,this._converter=n}function Uc(){return null!==Ic&&Ic.apply(this,arguments)||this}function Vc(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}function Bc(e,t){this.hasPendingWrites=e,this.fromCache=t}function qc(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}function jc(e){this._firestore=e,this._mutations=[],this._committed=!1}function zc(e,t){this._firestore=e,this._transaction=t}function Wc(e,t){var n=this;if(this._firebaseApp=null,this._queue=new Le,this.INTERNAL={delete:function(){return d(n,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=Wc.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Ru(t)}else{var i=e;if(!i.projectId)throw new D(A.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new Te(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new Pu}this._settings=new Cc({}),this._dataConverter=this.createDataConverter(this._databaseId)}function Kc(e){if(void 0===e.host){if(void 0!==e.ssl)throw new D(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else W("settings","non-empty string","host",e.host),this.host=e.host,K("settings","boolean","ssl",e.ssl),this.ssl=R(e.ssl,!0);if(J("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),K("settings","object","credentials",e.credentials),this.credentials=e.credentials,K("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?E("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&E("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=R(e.timestampsInSnapshots,!0),K("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Hi.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==kc&&e.cacheSizeBytes<Hi.MINIMUM_CACHE_SIZE_BYTES)throw new D(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Hi.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}K("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}m(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(Mc.prototype.docChanges,e,{get:function(){return function(){throw new D(A.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var Gc,Qc=(h(Hc,Gc=Rc),Object.defineProperty(Hc.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Hc.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new _c(new Ne(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Hc.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),Hc.prototype.doc=function(e){if(q("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=ne.newId()),j("CollectionReference.doc","non-empty string",1,e),""===e)throw new D(A.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=Ie.fromString(e);return _c.forPath(this._query.path.child(t),this.firestore,this._converter)},Hc.prototype.add=function(e){V("CollectionReference.add",arguments,1),j("CollectionReference.add","object",1,this._converter?this._converter.toFirestore(e):e);var t=this.doc();return t.set(e).then((function(){return t}))},Hc.prototype.withConverter=function(e){return new Hc(this._path,this.firestore,e)},Hc);function Hc(e,t,n){var r=Gc.call(this,Do.atPath(e),t,n)||this;if((r._path=e).length%2!=1)throw new D(A.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}function Yc(e,t){if(void 0===t)return{merge:!1};if(J(e,t,["merge","mergeFields"]),K(e,"boolean","merge",t.merge),void 0!==(n=t.mergeFields)&&function(e,t,n){if(!(n instanceof Array))throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+Y(n));for(var r=0;r<n.length;++r)if(!("string"==typeof(i=n[r])||i instanceof ku))throw new D(A.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be a string or a FieldPath, but the value at index "+r+" was: "+Y(n[r]));var i}(e,"mergeFields",n),void 0!==t.mergeFields&&void 0!==t.merge)throw new D(A.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');var n;return t}function Xc(e,t){return void 0===t?{}:(J(e,t,["serverTimestamps"]),G(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Jc(e,t){z(e,"object",1,t),t&&(J(e,t,["source"]),G(e,0,"source",t.source,["default","server","cache"]))}function $c(e,t,n){if(t instanceof _c){if(t.firestore!==n)throw new D(A.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw $(e,"DocumentReference",1,t)}function Zc(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var el=O(Nc,"Use firebase.firestore() instead."),tl=O(Ac,"Use firebase.firestore().runTransaction() instead."),nl=O(Dc,"Use firebase.firestore().batch() instead."),rl=O(_c,"Use firebase.firestore().doc() instead."),il=O(Oc),ol=O(Pc),al=O(Rc),sl=O(Mc),ul=O(Qc,"Use firebase.firestore().collection() instead."),cl={Firestore:el,GeoPoint:ys,Timestamp:ze,Blob:we,Transaction:tl,WriteBatch:nl,DocumentReference:rl,DocumentSnapshot:il,Query:al,QueryDocumentSnapshot:ol,QuerySnapshot:sl,CollectionReference:ul,FieldPath:ku,FieldValue:tc,setLogLevel:Nc.setLogLevel,CACHE_SIZE_UNLIMITED:kc},ll=(El.prototype.addCallback=function(e){},El.prototype.shutdown=function(){},El),hl=(Tl.prototype.addCallback=function(e){this.callbacks.push(e)},Tl.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},Tl.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},Tl.prototype.onNetworkAvailable=function(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},Tl.prototype.onNetworkUnavailable=function(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},Tl.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Tl),fl=(wl.prototype.onOpen=function(e){k(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},wl.prototype.onClose=function(e){k(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},wl.prototype.onMessage=function(e){k(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},wl.prototype.close=function(){this.closeFn()},wl.prototype.send=function(e){this.sendFn(e)},wl.prototype.callOnOpen=function(){k(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},wl.prototype.callOnClose=function(e){k(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},wl.prototype.callOnMessage=function(e){k(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},wl),dl="Connection",pl={BatchGetDocuments:"batchGet",Commit:"commit"},ml="gl-js/ fire/"+c,yl=(bl.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=ml},bl.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,a){var s=new u.XhrIo;s.listenOnce(u.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var t=s.getResponseJson();T(dl,"XHR received:",JSON.stringify(t)),o(t);break;case u.ErrorCode.TIMEOUT:T(dl,'RPC "'+e+'" timed out'),a(new D(A.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(T(dl,'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),0<n){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=(c=r.status.toLowerCase().replace("_","-"),0<=Object.values(A).indexOf(c)?c:A.UNKNOWN);a(new D(i,r.message))}else a(new D(A.UNKNOWN,"Server responded with status "+s.getStatus()))}else T(dl,'RPC "'+e+'" failed'),a(new D(A.UNAVAILABLE,"Connection failed."));break;default:I('RPC "'+e+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{T(dl,'RPC "'+e+'" completed.')}var c}));var c=f({},t);delete c.database;var l=JSON.stringify(c);T(dl,"XHR sending: ",i+" "+l);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),s.send(i,"POST",l,h,15)}))},bl.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},bl.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=u.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function s(e,t){c.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))}T(dl,"Creating WebChannel: "+o+" "+i);var c=r.createWebChannel(o,i),l=!1,h=!1,f=new fl({sendFn:function(e){h?T(dl,"Not sending because WebChannel is closed:",e):(l||(T(dl,"Opening WebChannel transport."),c.open(),l=!0),T(dl,"WebChannel sending:",e),c.send(e))},closeFn:function(){return c.close()}});return s(u.WebChannel.EventType.OPEN,(function(){h||T(dl,"WebChannel transport opened.")})),s(u.WebChannel.EventType.CLOSE,(function(){h||(h=!0,T(dl,"WebChannel transport closed"),f.callOnClose())})),s(u.WebChannel.EventType.ERROR,(function(e){h||(h=!0,T(dl,"WebChannel transport errored:",e),f.callOnClose(new D(A.UNAVAILABLE,"The operation could not be completed")))})),s(u.WebChannel.EventType.MESSAGE,(function(e){var t;if(!h){var n=e.data[0];k(!!n,"Got a webchannel message without data.");var r=n.error||(null===(t=n[0])||void 0===t?void 0:t.error);if(r){T(dl,"WebChannel received error:",r);var i=r.status,o=function(){var e=Ua[i];if(void 0!==e)return za(e)}(),a=r.message;void 0===o&&(o=A.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),h=!0,f.callOnClose(new D(o,a)),c.close()}else T(dl,"WebChannel received:",n),f.callOnMessage(n)}})),setTimeout((function(){f.callOnOpen()}),0),f},bl.prototype.makeUrl=function(e){var t=pl[e];return k(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},bl),gl=(Object.defineProperty(vl.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(vl.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),vl.prototype.loadConnection=function(e){return Promise.resolve(new yl(e))},vl.prototype.newConnectivityMonitor=function(){return new(hl.isAvailable()?hl:ll)},vl.prototype.newSerializer=function(e){return new Bs(e,{useProto3Json:!0})},vl.prototype.formatJSON=function(e){return JSON.stringify(e)},vl.prototype.atob=function(e){return atob(e)},vl.prototype.btoa=function(e){return btoa(e)},vl);function vl(){this.base64Available="undefined"!=typeof atob}function bl(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}function wl(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}function Tl(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}function El(){}function Sl(e){var t;e.INTERNAL.registerComponent(new s.Component("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new Nc(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps((k("object"==typeof(t=cl),"shallowCopy() expects object parameter."),f({},t)))),e.registerVersion("@firebase/firestore","1.11.1")}N.setPlatform(new gl),Sl(i),t.registerFirestore=Sl}).call(this,n(23))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",(function(){return ar})),n.d(t,"EventType",(function(){return sr})),n.d(t,"WebChannel",(function(){return ur})),n.d(t,"XhrIo",(function(){return cr})),n.d(t,"createWebChannelTransport",(function(){return or}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function l(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function f(e){return"array"==h(e)}function d(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now||function(){return+new Date};function E(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,(e.prototype.constructor=e).xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function S(){this.j=this.j,this.i=this.i}S.prototype.j=!1,S.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[m]||(this[m]=++y))},S.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var I=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},k=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function C(e){return Array.prototype.concat.apply([],arguments)}function N(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e){return/^[\s\xa0]*$/.test(e)}var D,_=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function x(e,t){return-1!=e.indexOf(t)}function O(e,t){return e<t?-1:t<e?1:0}e:{var P=a.navigator;if(P){var R=P.userAgent;if(R){D=R;break e}}D=""}function M(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L(e){var t,n={};for(t in e)n[t]=e[t];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V(e){return V[" "](e),e}V[" "]=l;var B,q,j=x(D,"Opera"),z=x(D,"Trident")||x(D,"MSIE"),W=x(D,"Edge"),K=W||z,G=x(D,"Gecko")&&!(x(D.toLowerCase(),"webkit")&&!x(D,"Edge"))&&!(x(D,"Trident")||x(D,"MSIE"))&&!x(D,"Edge"),Q=x(D.toLowerCase(),"webkit")&&!x(D,"Edge");function H(){var e=a.document;return e?e.documentMode:void 0}e:{var Y="",X=(q=D,G?/rv:([^\);]+)(\)|;)/.exec(q):W?/Edge\/([\d\.]+)/.exec(q):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):Q?/WebKit\/(\S+)/.exec(q):j?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(X&&(Y=X?X[1]:""),z){var J=H();if(null!=J&&J>parseFloat(Y)){B=String(J);break e}}B=Y}var $,Z={};function ee(e){return t=e,n=Z,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(){for(var t=0,n=_(String(B)).split("."),r=_(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=O(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||O(0==a[2].length,0==s[2].length)||O(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}();var t,n}var te=a.document;$=te&&z?H()||("CSS1Compat"==te.compatMode?parseInt(B,10):5):void 0;var ne=!z||9<=Number($),re=z&&!ee("9"),ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(e){}return e}();function oe(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function ae(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(G){e:{try{V(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:se[e.pointerType]||"",(this.c=e).defaultPrevented&&this.b()}}oe.prototype.b=function(){this.Ia=!1},E(ae,oe);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.b=function(){ae.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var ue="closure_listenable_"+(1e6*Math.random()|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ce,this.X=this.Z=!1}function he(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function fe(e){this.src=e,this.a={},this.b=0}function de(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=I(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}fe.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new le(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ye={};function ge(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(f(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Ie(r),t&&t[ue]?t.Aa(n,r,p(i)?!!i.capture:!!i,o):ve(t,n,r,!0,i,o)}(e,t,n,r,i);if(f(t)){for(var o=0;o<t.length;o++)ge(e,t[o],n,r,i);return null}return n=Ie(n),e&&e[ue]?e.za(t,n,p(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!ne)return null;var s,u,c=Ee(e);if(c||(e[me]=c=new fe(e)),(n=c.add(t,n,r,a,o)).proxy)return n;if(s=Te,r=u=ne?function(e){return s.call(u.src,u.listener,e)}:function(e){if(!(e=s.call(u.src,u.listener,e)))return e},(n.proxy=r).src=e,r.listener=n,e.addEventListener)ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(we(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function be(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[ue])de(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(we(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ee(t))?(de(n,e),0==n.b&&(n.src=null,t[me]=null)):he(e)}}}function we(e){return e in ye?ye[e]:ye[e]="on"+e}function Te(e,t){return!!e.X||(n=e,r=ne?new ae(t,this):t=new ae(t||c("window.event"),this),i=n.listener,o=n.da||n.src,n.Z&&be(n),i.call(o,r));var n,r,i,o}function Ee(e){return(e=e[me])instanceof fe?e:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(e){return"function"==h(e)?e:(e[Se]||(e[Se]=function(t){return e.handleEvent(t)}),e[Se])}function ke(){S.call(this),this.c=new fe(this),(this.J=this).B=null}function Ce(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&de(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}E(ke,S),ke.prototype[ue]=!0,(r=ke.prototype).addEventListener=function(e,t,n,r){ge(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(f(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Ie(r),t&&t[ue]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=pe(a=t.a[n],r,i,o))&&(he(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):(t=t&&Ee(t))&&(n=t.a[n.toString()],t=-1,n&&(t=pe(n,r,i,o)),(r=-1<t?n[t]:null)&&be(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var i=e;U(e=new oe(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Ce(a,r,!0,e)&&i}if(i=Ce(a=e.a=n,r,!0,e)&&i,i=Ce(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ce(a=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(ke.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)he(n[r]);delete t.a[e],t.b--}}this.B=null},r.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ne=a.JSON.stringify;function Ae(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function De(){this.b=this.a=null}Ae.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var _e,xe=new Ae((function(){return new Oe}),(function(e){e.reset()}));function Oe(){this.next=this.b=this.a=null}function Pe(e){a.setTimeout((function(){throw e}),0)}function Re(e,t){var n;_e||(n=a.Promise.resolve(void 0),_e=function(){n.then(Fe)}),Me||(_e(),Me=!0),Le.add(e,t)}De.prototype.add=function(e,t){var n=xe.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Oe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var Me=!(Oe.prototype.reset=function(){this.next=this.b=this.a=null}),Le=new De;function Fe(){for(var e;r=n=void 0,r=null,(n=Le).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),e=r;){try{e.a.call(e.b)}catch(e){Pe(e)}var t=xe;t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}var n,r;Me=!1}function Ue(e,t){ke.call(this),this.b=e||1,this.a=t||a,this.f=b(this.fb,this),this.g=T()}function Ve(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Be(e,t,n){if("function"==h(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function qe(e,t,n){S.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.$a,this),this.a=[]}function je(e){e.U=Be(e.b,e.c),e.f.apply(null,e.a)}function ze(e){S.call(this),this.b=e,this.a={}}E(Ue,ke),(r=Ue.prototype).ba=!1,r.L=null,r.fb=function(){if(this.ba){var e=T()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Ve(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=T())},r.G=function(){Ue.N.G.call(this),Ve(this),delete this.a},E(qe,S),(r=qe.prototype).ea=!1,r.U=null,r.Ta=function(e){this.a=arguments,this.U?this.ea=!0:je(this)},r.G=function(){qe.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,je(this))},E(ze,S);var We=[];function Ke(e,t,n,r){f(n)||(n&&(We[0]=n.toString()),n=We);for(var i=0;i<n.length;i++){var o=ge(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Ge(e){M(e.a,(function(e,t){this.a.hasOwnProperty(t)&&be(e)}),e),e.a={}}function Qe(){}ze.prototype.G=function(){ze.N.G.call(this),Ge(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var He=new ke;function Ye(e){oe.call(this,"serverreachability",e)}function Xe(){He.dispatchEvent(new Ye(He))}function Je(e){oe.call(this,"statevent",e)}function $e(){He.dispatchEvent(new Je(He))}function Ze(e){oe.call(this,"timingevent",e)}function et(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}E(Ye,oe),E(Je,oe),E(Ze,oe);var tt={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},nt={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function rt(){}function it(e){var t;return(t=e.a)||(t=e.a={}),t}function ot(){}rt.prototype.a=null;var at,st={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function ut(){oe.call(this,"d")}function ct(){oe.call(this,"c")}function lt(){}function ht(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new ze(this),this.O=ft,e=K?125:void 0,this.P=new Ue(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}E(ut,oe),E(ct,oe),E(lt,rt),at=new lt;var ft=45e3,dt={},pt={};function mt(e,t,n){e.F=1,e.f=Vt(Ot(t)),e.l=n,e.H=!0,gt(e,null)}function yt(e,t,n,r){e.F=1,e.f=Vt(Ot(t)),e.l=null,e.H=n,gt(e,r)}function gt(e,t){e.v=T(),bt(e),e.D=Ot(e.f),Ut(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new qe(b(e.Ja,e,e.a),e.J)),Ke(e.I,e.a,"readystatechange",e.cb),t=e.h?L(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),Xe()}function vt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=(a=n,u=s=void 0,s=(o=e).A,-1==(u=a.indexOf("\n",s))?pt:(s=Number(a.substring(s,u)),isNaN(s)?dt:(u+=1)+s>a.length?pt:(a=a.substr(u,s),o.A=u+s,a)));if(i==pt){4==t&&(e.c=4,$e(),r=!1);break}if(i==dt){e.c=4,$e(),r=!1;break}It(e,i)}var o,a,s,u;4==t&&0==n.length&&(e.c=1,$e(),r=!1),e.b=e.b&&r,r||(St(e),Et(e))}function bt(e){e.R=T()+e.O,wt(e,e.O)}function wt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=et(b(e.ab,e),t)}function Tt(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function Et(e){e.g.Ca()||e.m||e.g.na(e)}function St(e){Tt(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,Ve(e.P),Ge(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function It(e,t){try{e.g.Fa(e,t),Xe()}catch(e){}}function kt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||s(e))k(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(d(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Ct(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ct)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Nt(e,t){Dt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&At(e))}function At(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Dt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Dt(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function Dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ht.prototype).setTimeout=function(e){this.O=e},r.cb=function(e){e=e.target;var t=this.B;t&&3==On(e)?t.Ta():this.Ja(e)},r.Ja=function(e){try{if(e==this.a)e:{var t=On(this.a),n=this.a.ya();if(this.a.T(),!(t<3||3==t&&!K&&!this.a.aa())){this.m||4!=t||7==n||Xe(),Tt(this);var r=this.a.T();this.o=r;var i=this.a.aa();if(this.b=200==r){if(this.S&&!this.s){t:{if(this.a){var o=Pn(this.a,"X-HTTP-Initial-Response");if(o&&!A(o)){var a=o;break t}}a=null}if(!a){this.b=!1,this.c=3,$e(),St(this),Et(this);break e}this.s=!0,It(this,a)}this.H?(vt(this,t,i),K&&this.b&&3==t&&(Ke(this.I,this.P,"tick",this.bb),this.P.start())):It(this,i),4==t&&St(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,bt(this)))}else 400==r&&0<i.indexOf("Unknown SID")?this.c=3:this.c=0,$e(),St(this),Et(this)}}}catch(e){}},r.bb=function(){if(this.a){var e=On(this.a),t=this.a.aa();this.A<t.length&&(Tt(this),vt(this,e,t),this.b&&4!=e&&bt(this))}},r.cancel=function(){this.m=!0,St(this)},r.ab=function(){this.i=null;var e=T();0<=e-this.R?(2!=this.F&&(Xe(),$e()),St(this),this.c=2,Et(this)):wt(this,this.R-e)},(r=Ct.prototype).C=function(){At(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return At(this),this.a.concat()},r.get=function(e,t){return Dt(this.b,e)?this.b[e]:t},r.set=function(e,t){Dt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var _t=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof xt?(this.h=void 0!==t?t:e.h,Pt(this,e.f),this.j=e.j,Rt(this,e.b),Mt(this,e.i),this.a=e.a,Lt(this,Zt(e.c)),this.g=e.g):e&&(n=String(e).match(_t))?(this.h=!!t,Pt(this,n[1]||"",!0),this.j=Bt(n[2]||""),Rt(this,n[3]||"",!0),Mt(this,n[4]),this.a=Bt(n[5]||"",!0),Lt(this,n[6]||"",!0),this.g=Bt(n[7]||"")):(this.h=!!t,this.c=new Ht(null,this.h))}function Ot(e){return new xt(e)}function Pt(e,t,n){e.f=n?Bt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Rt(e,t,n){e.b=n?Bt(t,!0):t}function Mt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Lt(e,t,n){var r,i;t instanceof Ht?(e.c=t,r=e.c,(i=e.h)&&!r.f&&(Yt(r),r.c=null,r.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Xt(this,t),$t(this,n,e))}),r)),r.f=i):(n||(t=qt(t,Gt)),e.c=new Ht(t,e.h))}function Ft(e,t,n){e.c.set(t,n)}function Ut(e,t,n){f(n)||(n=[String(n)]),$t(e.c,t,n)}function Vt(e){return Ft(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),e}function Bt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,jt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function jt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}xt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(qt(t,zt,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.j)&&e.push(qt(t,zt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(qt(n,"/"==n.charAt(0)?Kt:Wt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",qt(n,Qt)),e.join("")},xt.prototype.resolve=function(e){var t=Ot(this),n=!!e.f;n?Pt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Rt(t,e.b):n=null!=e.i;var r=e.a;if(n)Mt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(x(i,"./")||x(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Lt(t,Zt(e.c)):n=!!e.g,n&&(t.g=e.g),t};var zt=/[#\/\?@]/g,Wt=/[#\?:]/g,Kt=/[#\?]/g,Gt=/[#\?@]/g,Qt=/#/g;function Ht(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Yt(e){e.a||(e.a=new Ct,e.b=0,e.c&&function(t){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];a=o,s=i?decodeURIComponent(i.replace(/\+/g," ")):"",e.add(decodeURIComponent(a.replace(/\+/g," ")),s)}}var a,s}(e.c))}function Xt(e,t){Yt(e),t=en(e,t),Dt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Nt(e.a,t))}function Jt(e,t){return Yt(e),t=en(e,t),Dt(e.a.b,t)}function $t(e,t,n){Xt(e,t),0<n.length&&(e.c=null,e.a.set(en(e,t),N(n)),e.b+=n.length)}function Zt(e){var t=new Ht;return t.c=e.c,e.a&&(t.a=new Ct(e.a),t.b=e.b),t}function en(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function tn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function nn(e){var t=e.a.F.a;if(null!=t)$e(),t?($e(),Kn(e.a,e,!1)):($e(),Kn(e.a,e,!0));else{e.b=new ht(e,void 0,void 0),e.b.h=e.h,t=Xn(t=e.a,t.Y()?e.f:null,e.i),$e(),Ut(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Ft(t,n,r),yt(e.b,t,!1,e.f)}}function rn(){this.a=this.b=null}function on(){this.a=new Ct}function an(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++y)):t.charAt(0)+e}function sn(e,t){this.b=e,this.a=t}function un(e){this.g=e||cn,e=a.PerformanceNavigationTiming?0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new on),this.b=null,this.c=[]}(r=Ht.prototype).add=function(e,t){Yt(this),this.c=null,e=en(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){Yt(this),this.a.forEach((function(n,r){k(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.K=function(){Yt(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){Yt(this);var t=[];if(s(e))Jt(this,e)&&(t=C(t,this.a.get(en(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=C(t,e[n])}return t},r.set=function(e,t){return Yt(this),this.c=null,Jt(this,e=en(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},E((function(){}),(function(){})),(r=tn.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Pn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Pn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Hn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Hn(t,2)}else 1==this.M&&(this.g?$e():"11111"==t?($e(),this.g=!0,(!z||10<=Number($))&&(this.c=200,this.b.cancel(),$e(),Kn(this.a,this,!0))):($e(),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,nn(this)):1==this.M&&(this.g?($e(),Kn(this.a,this,!0)):($e(),Kn(this.a,this,!1)));else{0!=this.M&&1!=this.M||$e();var e=this.a;e.m=this.c,Hn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},on.prototype.add=function(e){this.a.set(an(e),e)},on.prototype.C=function(){return this.a.C()};var cn=10;function ln(e,t){!e.a&&(x(t,"spdy")||x(t,"quic")||x(t,"h2"))&&(e.f=e.g,e.a=new on,e.b&&(pn(e,e.b),e.b=null))}function hn(e){return e.b||e.a&&e.a.a.c>=e.f}function fn(e){return e.b?1:e.a?e.a.a.c:0}function dn(e,t){return e.b?e.b==t:e.a&&(t=an(t),Dt(e.a.a.b,t))}function pn(e,t){e.a?e.a.add(t):e.b=t}function mn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=an(t),n=Dt(e.a.a.b,n)),n&&Nt(e.a.a,an(t)))}function yn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null==e.a||0==e.a.a.c)return N(e.c);var t=e.c;return k(e.a.C(),(function(e){t=t.concat(e.j)})),t}function gn(){}function vn(){this.a=new gn}function bn(e,t,n){var r=n||"";try{kt(e,(function(e,n){var i=e;p(e)&&(i=Ne(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function wn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}un.prototype.cancel=function(){var e;this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(k(this.a.C(),(function(e){e.cancel()})),(e=this.a.a).b={},e.a.length=0,e.c=0)},gn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},gn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var Tn=a.JSON.parse;function En(e){ke.call(this),this.headers=new Ct,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Sn,this.D=this.F=!1}E(En,ke);var Sn="",In=/^https?$/i,kn=["POST","PUT"];function Cn(e){return"content-type"==e.toLowerCase()}function Nn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,An(e),_n(e)}function An(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Dn(e){if(e.b&&void 0!==o&&(!e.s[1]||4!=On(e)||2!=e.T()))if(e.l&&4==On(e))Be(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==On(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.A).match(_t)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!In.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var c=2<On(e)?e.a.statusText:""}catch(e){c=""}e.f=c+" ["+e.T()+"]",An(e)}}finally{_n(e)}}}function _n(e,t){if(e.a){xn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function xn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function On(e){return e.a?e.a.readyState:0}function Pn(e,t){return e.a?e.a.getResponseHeader(t):null}function Rn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(o="",M(n,(function(e,t){o+=t,o+=":",o+=e,o+="\r\n"})),n=o,s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}var o;return Ft(e,t,n),e}function Mn(e){this.f=[],this.F=new rn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!c("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=c("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=c("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=c("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new un(e&&e.concurrentRequestLimit),this.ja=new vn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Ln(e){if(Fn(e),3==e.u){var t=e.P++,n=Ot(e.B);Ft(n,"SID",e.H),Ft(n,"RID",t),Ft(n,"TYPE","terminate"),qn(e,n),(t=new ht(e,t,void 0)).F=2,t.f=Vt(Ot(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=T(),bt(t)}Yn(e)}function Fn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),Gn(e),e.b.cancel(),e.h&&(u(e.h)&&a.clearTimeout(e.h),e.h=null)}function Un(e,t){e.f.push(new sn(e.Qa++,t)),3==e.u&&Vn(e)}function Vn(e){hn(e.b)||e.h||(e.h=!0,Re(e.Ha,e),e.A=0)}function Bn(e,t){var n;n=t?t.W:e.P++;var r=Ot(e.B);Ft(r,"SID",e.H),Ft(r,"RID",n),Ft(r,"AID",e.O),qn(e,r),e.g&&e.i&&Rn(r,e.g,e.i),n=new ht(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=jn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),pn(e.b,n),mt(n,r,t)}function qn(e,t){e.c&&kt({},(function(e,n){Ft(t,n,e)}))}function jn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{bn(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function zn(e){e.a||e.l||(e.S=1,Re(e.Ga,e),e.v=0)}function Wn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=et(b(e.Ga,e),Qn(e,e.v)),e.v++,1)}function Kn(e,t,n){var r=t.l;r&&ln(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Xn(e,null,e.ha),Vn(e)}function Gn(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function Qn(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function Hn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.eb,e);n||(n=new xt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Pt(n,"https"),Vt(n)),function(e,t){var n=new Qe;if(a.Image){var r=new Image;r.onload=w(wn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(wn,n,r,"TestLoadImage: error",!1,t),r.onabort=w(wn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(wn,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else $e();e.u=0,e.c&&e.c.ta(t),Yn(e),Fn(e)}function Yn(e){e.u=0,e.m=-1,e.c&&(0==yn(e.b).length&&0==e.f.length||(e.b.c.length=0,N(e.f),e.f.length=0),e.c.sa())}function Xn(e,t,n){var r,i,o,s,u,c,l=(r=n)instanceof xt?Ot(r):new xt(r,void 0);if(""!=l.b)t&&Rt(l,t+"."+l.b),Mt(l,l.i);else{var h,f=a.location;h=t?t+"."+f.hostname:f.hostname,i=f.protocol,o=h,s=+f.port,u=n,c=new xt(null,void 0),i&&Pt(c,i),o&&Rt(c,o),s&&Mt(c,s),u&&(c.a=u),l=c}return e.V&&M(e.V,(function(e,t){Ft(l,t,e)})),t=e.j,n=e.I,t&&n&&Ft(l,t,n),Ft(l,"VER",e.wa),qn(e,l),l}function Jn(){}function $n(){if(z&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function Zn(e,t){ke.call(this),this.a=new Mn(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!A(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new nr(this)}function er(e){ut.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function tr(){ct.call(this),this.status=1}function nr(e){this.a=e}(r=En.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?it(this.H):it(at),this.a.onreadystatechange=b(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void Nn(this,e)}e=n||"";var i,o=new Ct(this.headers);r&&kt(r,(function(e,t){o.set(t,e)})),r=function(e){e:{for(var t=Cn,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:s(e)?e.charAt(t):e[t]}(o.K()),n=a.FormData&&e instanceof a.FormData,0<=I(kn,t)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.D=(i=this.a,z&&ee(9)&&u(i.timeout)&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ba,this)):this.m=Be(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){Nn(this,e)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),_n(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_n(this,!0)),En.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?Dn(this):this.Za())},r.Za=function(){Dn(this)},r.T=function(){try{return 2<On(this)?this.a.status:-1}catch(e){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},r.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Tn(t)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},(r=Mn.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ht(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?U(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=jn(this,n,t),Ft(i=Ot(this.B),"RID",e),Ft(i,"CVER",22),this.o&&this.j&&Ft(i,"X-HTTP-Session-Id",this.j),qn(this,i),this.g&&r&&Rn(i,this.g,r),pn(this.b,n),this.W?(Ft(i,"$req",t),Ft(i,"SID","null"),n.S=!0,mt(n,i,null)):mt(n,i,t),this.u=2}}else 3==this.u&&(e?Bn(this,e):0==this.f.length||hn(this.b)||Bn(this))},r.Ga=function(){this.l=null,this.a=new ht(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Ot(this.pa);Ft(e,"RID","rpc"),Ft(e,"SID",this.H),Ft(e,"CI",this.ia?"0":"1"),Ft(e,"AID",this.O),qn(this,e),Ft(e,"TYPE","xmlhttp"),this.g&&this.i&&Rn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),yt(this.a,e,!0,this.ga)},r.Fa=function(e,t){if(0!=this.u&&(this.a==e||dn(this.b,e)))if(this.m=e.o,!e.s&&dn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(f(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Gn(this),this.a.cancel(),this.a=null}Wn(this),$e()}}else this.ra=t[1],0<this.ra-this.O&&t[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=et(b(this.Ya,this),6e3));if(fn(this.b)<=1&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Hn(this,11)}else if(!e.s&&this.a!=e||Gn(this),!A(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Pn(r,"X-Client-Wire-Protocol"))&&ln(this.b,i),this.j&&(r=Pn(r,"X-HTTP-Session-Id")))&&(this.I=r,Ft(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Xn(this,this.Y()?this.ga:null,this.ha),r.s?(mn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Tt(r),bt(r)),this.a=r):zn(this),0<this.f.length&&Vn(this)}else"stop"!=r[0]&&"close"!=r[0]||Hn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Hn(this,7):Ln(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Wn(this),$e())},r.na=function(e){var t,n,r=null;if(this.a==e){Gn(this),this.a=null;var i=2}else{if(!dn(this.b,e))return;r=e.j,mn(this.b,e),i=1}if(this.m=e.o,0!=this.u)if(e.b)1==i?(r=T()-e.v,He.dispatchEvent(new Ze(He,e.l&&e.l.length,this.A)),Vn(this)):zn(this);else{var o=e.c;if(3==o||0==o&&0<this.m||(1!=i||(n=e,fn((t=this).b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=n.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)||(t.h=et(b(t.Ha,t,n),Qn(t,t.A)),t.A++,0))))&&(2!=i||!Wn(this)))switch(r&&0<r.length&&(e=this.b,e.c=e.c.concat(r)),o){case 1:Hn(this,5);break;case 4:Hn(this,10);break;case 3:Hn(this,6);break;default:Hn(this,2)}}},r.eb=function(e){$e()},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new En(this.Ka)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Jn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},$n.prototype.a=function(e,t){return new Zn(e,t)},E(Zn,ke),(r=Zn.prototype).addEventListener=function(e,t,n,r){Zn.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){Zn.N.removeEventListener.call(this,e,t,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;$e(),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new tn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Rn(t,e.g,e.i)),(e=e.w).i=n,t=Xn(e.a,null,e.i),$e(),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,nn(e)):(Ut(t,"MODE","init"),!e.a.o&&e.a.j&&Ut(t,"X-HTTP-Session-Id",e.a.j),e.b=new ht(e,void 0,void 0),e.b.h=e.h,yt(e.b,t,!1,null),e.M=0)},r.close=function(){Ln(this.a)},r.Wa=function(e){if(s(e)){var t={};t.__data__=e,Un(this.a,t)}else this.h?((t={}).__data__=Ne(e),Un(this.a,t)):Un(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Ln(this.a),delete this.a,Zn.N.G.call(this)},E(er,ut),E(tr,ct),E(nr,Jn),nr.prototype.va=function(){this.a.dispatchEvent("a")},nr.prototype.ua=function(e){this.a.dispatchEvent(new er(e))},nr.prototype.ta=function(e){this.a.dispatchEvent(new tr)},nr.prototype.sa=function(){this.a.dispatchEvent("b")};var rr=w((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),$n);$n.prototype.createWebChannel=$n.prototype.a,Zn.prototype.send=Zn.prototype.Wa,Zn.prototype.open=Zn.prototype.Va,Zn.prototype.close=Zn.prototype.close,tt.NO_ERROR=0,tt.TIMEOUT=8,tt.HTTP_ERROR=6,nt.COMPLETE="complete",(ot.EventType=st).OPEN="a",st.CLOSE="b",st.ERROR="c",st.MESSAGE="d",ke.prototype.listen=ke.prototype.za,En.prototype.listenOnce=En.prototype.Aa,En.prototype.getLastError=En.prototype.Xa,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.T,En.prototype.getResponseJson=En.prototype.Ua,En.prototype.getResponseText=En.prototype.aa,En.prototype.send=En.prototype.ca;var ir={createWebChannelTransport:rr,ErrorCode:tt,EventType:nt,WebChannel:ot,XhrIo:En},or=ir.createWebChannelTransport,ar=ir.ErrorCode,sr=ir.EventType,ur=ir.WebChannel,cr=ir.XhrIo;t.default=ir}.call(this,n(6))}]])},function(e,t){(this["webpackJsonpahw-check-in"]=this["webpackJsonpahw-check-in"]||[]).push([[0],{11:function(e,t,n){e.exports=n(25)},16:function(e,t,n){},17:function(e,t,n){},25:function(e,t,n){"use strict";function r(e){var t=e.onSubmit,n=Object(i.useState)(),r=Object(u.a)(n,2),a=r[0],s=r[1],l=Object(i.useState)(),h=Object(u.a)(l,2),f=h[0],d=h[1],p=Object(i.useState)(),m=Object(u.a)(p,2),y=m[0],g=m[1],v="Workshop"===f,b=v?"Workshop - ".concat(y):f,w=Boolean(a&&v?y:f);return o.a.createElement("div",{className:"flex w-100 vh-50 justify-center items-center"},o.a.createElement("div",{className:"flex flex-column w-20 items-center"},o.a.createElement("div",{className:"flex w-100 justify-between pb4"},o.a.createElement("label",{htmlFor:"teacher"},"Teacher"),o.a.createElement("select",{id:"teacher",value:a,onChange:function(e){return s(e.target.value)}},o.a.createElement("option",{value:void 0},"None"),c.teachers.map((function(e){return o.a.createElement("option",{key:e,value:e},e)})))),o.a.createElement("div",{className:"flex w-100 flex-column pb4"},o.a.createElement("div",{className:"flex w-100 justify-between pb2"},o.a.createElement("label",{htmlFor:"location"},"Location"),o.a.createElement("select",{id:"location",value:f,onChange:function(e){return d(e.target.value)}},o.a.createElement("option",{value:void 0},"None"),c.classes.map((function(e){return o.a.createElement("option",{key:e,value:e},e)})))),v&&o.a.createElement("input",{className:"ml-auto w-60",type:"text",placeholder:"Workshop Name",value:y||"",onChange:function(e){return g(e.target.value)}})),o.a.createElement("button",{className:"w-50",disabled:!w,onClick:function(e){return t({location:b,teacher:a})}},"Next")))}n.r(t);var i=n(0),o=n.n(i),a=n(10),s=n.n(a),u=(n(16),n(2)),c=(n(17),n(18),{teachers:["Cassie","McKenzie","Joe","Lauren"],classes:["Utepils","La Dona","Dangerous Man","Number 12 Cidery","Workshop"]}),l=n(3);function h(){return o.a.createElement("textarea",{className:"vh-25 w-100 lh-title bg-light-gray ba b--light-gray br1 pa2",style:{resize:"none"},readOnly:!0,value:"YOGA TEACHER AND LOCATION LIABILITY STUDENT WAIVER AGREEMENT\n      I, the person registering above, understand that yoga includes physical movements as well as an opportunity for relaxation, stress re­education and relief of muscular tension. Participation in yoga class includes, but is not limited to, participation in meditation techniques, yogic breathing techniques, and performing various yoga postures. Yoga postures, or asanas, are designed to exercise every part of the body―stretching and toning the muscles and joints, the spine and the entire skeletal system. They also work on the internal organs, glands and nerves. Yoga incorporates sustained stretching to strengthen muscles and increase flexibility. Yoga is an individual experience.\n      As is the case with any physical activity, the risk of injury, even serious or disabling, is always present and cannot be entirely eliminated. My signature acknowledges I understand that in yoga class I will progress at my own pace. If I experience any pain or discomfort, I will listen to my body, adjust the posture and ask for support from the yoga teacher (the “Teacher”). I will continue to breathe smoothly. If at any point I feel overexertion or fatigue, I will respect my body’s limitations and I will rest before continuing yoga practice.\n      Yoga is not a substitute for medical attention, examination, diagnosis or treatment. Yoga is not recommended and is not safe under certain medical conditions. I affirm that I alone am responsible to decide whether to practice yoga.\n      By signing my name below, I acknowledge that participation in yoga classes exposes me to a possible risk of personal injury. I am fully aware of this risk. I hereby consent to receive medical treatment that may be deemed advisable in the event of injury, accident and/or illness during any yoga class.\n      I hereby take action for myself, my executors, administrators, heirs, next of kin, successors and assigns as follows: I (a) irrevocably WAIVE, RELEASE AND DISCHARGE FROM ANY AND ALL LIABILITY for my death, disability, personal injury, property damage, property theft or actions of any kind which hereafter may occur to me, including my traveling to and from yoga classes, Annie Hayes Wellness, Anne Krohn, or any other yoga teacher teaching for AHW, and yoga class location, who is hosting these classes and where sessions are being held, and each of their directors, officers, employees, volunteers, representatives and agents; and (b) INDEMNIFY, HOLD HARMLESS AND AGREE NOT TO SUE the entities or persons mentioned in this paragraph as to any and all liabilities or claims made as a result of participation in the yoga classes, whether caused by the negligence of releasees or otherwise.\n      My signature further acknowledges that I shall not now or at any time in the future bring any legal action against Teacher and/or yoga class location and that this waiver is binding on me, my heirs, my spouse, my children, my legal representatives, my successors and my assigns. My signature verifies that I am physically fit to participate in yoga classes and a licensed medical doctor has verified my physical condition for participation in this type of class.\n      If I am pregnant or become pregnant or am post­natal, my signature verifies that I am participating in yoga classes with my doctor’s full approval. I realize that I am participating in yoga classes at my own risk.\n      The Student Waiver Agreement shall be construed broadly to provide a release and waiver to the maximum extent permissible under applicable law. I acknowledge that this Student Waiver Agreement form will be used by the persons or entities being released in the yoga classes and that it will govern my actions and responsibilities in said classes.\n      I hereby certify that I have read this document; and, I understand its content. I am aware that this is a release of liability as well as a contract and I sign it of my own free will."})}function f(e){e.meta;var t=Object(i.useState)(""),n=Object(u.a)(t,2),r=n[0],a=n[1],s=Object(i.useState)(!0),c=Object(u.a)(s,2),l=c[0],f=c[1],p=d.test(r)&&l;return o.a.createElement("div",{className:"flex flex-column items-center w-100"},o.a.createElement("div",{className:"hide thank-you-tmp"},o.a.createElement("h3",{className:"thank-you-msg"})),o.a.createElement("div",{className:"email-box"},o.a.createElement("div",{className:"errorable-input"},o.a.createElement("input",{className:"email-input errorable",type:"text",name:"Email",placeholder:"Email",value:r,onChange:function(e){return a(e.target.value)}}))),o.a.createElement("div",{className:"waiver-box"},o.a.createElement("div",{className:"errorable-input"},o.a.createElement("label",{className:"errorable"},o.a.createElement("input",{type:"checkbox",className:"waiver-input",checked:l,onChange:function(e){return f(e.target.checked)}}),"I Promise I won't sue if I hurt myself"))),o.a.createElement("div",{className:"submit-box"},o.a.createElement("button",{disabled:p,className:"submit-input"},"Register")),o.a.createElement(h,null))}n(19),n(21),l.initializeApp({apiKey:"AIzaSyCCpWsrS-FO4q48gxqxmP10735GJk3SV4o",authDomain:"anniehayeswellness-221818.firebaseapp.com",databaseURL:"https://anniehayeswellness-221818.firebaseio.com",projectId:"anniehayeswellness-221818",storageBucket:"anniehayeswellness-221818.appspot.com",messagingSenderId:"1026415276139"}),l.firestore(),l.auth().signInAnonymously().catch((function(e){console.error("Hey! Error signing in to firebase anonymously:",e),alert("Hey!\n\nWe had a problem starting up. Can you refresh or turn off your adblocker for this page?\n\nIf that doesn't fix it: ignore this message, keep using the site, and let Jonathan know :)")}));var d=/(?!.*\.\.)(^[^\.][^@\s]+@[^@\s]+\.[^@\s\.]+$)/;s.a.render(o.a.createElement((function(){var e=Object(i.useState)({teacher:"Jon",location:"Bennys"}),t=Object(u.a)(e,2),n=t[0],a=t[1];return o.a.createElement(o.a.Fragment,null,n?o.a.createElement(f,{meta:n}):o.a.createElement(r,{onSubmit:function(e){return a(e)}}))}),null),document.getElementById("check-in-app"))}},[[11,1,2]]])},function(e,t){!function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],h=0,f=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={1:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=this["webpackJsonpahw-check-in"]=this["webpackJsonpahw-check-in"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;n()}([])}])},function(e,t){(this["webpackJsonpahw-check-in"]=this["webpackJsonpahw-check-in"]||[]).push([[0],{11:function(e,t,n){e.exports=n(25)},16:function(e,t,n){},17:function(e,t,n){},25:function(e,t,n){"use strict";function r(e){var t=e.onSubmit,n=Object(i.useState)(),r=Object(u.a)(n,2),a=r[0],s=r[1],l=Object(i.useState)(),h=Object(u.a)(l,2),f=h[0],d=h[1],p=Object(i.useState)(),m=Object(u.a)(p,2),y=m[0],g=m[1],v="Workshop"===f,b=v?"Workshop - ".concat(y):f,w=Boolean(a&&v?y:f);return o.a.createElement("div",{className:"flex w-100 vh-50 justify-center items-center"},o.a.createElement("div",{className:"flex flex-column w-20 items-center"},o.a.createElement("div",{className:"flex w-100 justify-between pb4"},o.a.createElement("label",{htmlFor:"teacher"},"Teacher"),o.a.createElement("select",{id:"teacher",value:a,onChange:function(e){return s(e.target.value)}},o.a.createElement("option",{value:void 0},"None"),c.teachers.map((function(e){return o.a.createElement("option",{key:e,value:e},e)})))),o.a.createElement("div",{className:"flex w-100 flex-column pb4"},o.a.createElement("div",{className:"flex w-100 justify-between pb2"},o.a.createElement("label",{htmlFor:"location"},"Location"),o.a.createElement("select",{id:"location",value:f,onChange:function(e){return d(e.target.value)}},o.a.createElement("option",{value:void 0},"None"),c.classes.map((function(e){return o.a.createElement("option",{key:e,value:e},e)})))),v&&o.a.createElement("input",{className:"ml-auto w-60",type:"text",placeholder:"Workshop Name",value:y||"",onChange:function(e){return g(e.target.value)}})),o.a.createElement("button",{className:"w-50",disabled:!w,onClick:function(e){return t({location:b,teacher:a})}},"Next")))}n.r(t);var i=n(0),o=n.n(i),a=n(10),s=n.n(a),u=(n(16),n(2)),c=(n(17),n(18),{teachers:["Cassie","McKenzie","Joe","Lauren"],classes:["Utepils","La Dona","Dangerous Man","Number 12 Cidery","Workshop"]}),l=n(3);function h(){return o.a.createElement("textarea",{className:"vh-25 w-100 lh-title bg-light-gray ba b--light-gray br1 pa2",style:{resize:"none"},readOnly:!0,value:"YOGA TEACHER AND LOCATION LIABILITY STUDENT WAIVER AGREEMENT\n      I, the person registering above, understand that yoga includes physical movements as well as an opportunity for relaxation, stress re­education and relief of muscular tension. Participation in yoga class includes, but is not limited to, participation in meditation techniques, yogic breathing techniques, and performing various yoga postures. Yoga postures, or asanas, are designed to exercise every part of the body―stretching and toning the muscles and joints, the spine and the entire skeletal system. They also work on the internal organs, glands and nerves. Yoga incorporates sustained stretching to strengthen muscles and increase flexibility. Yoga is an individual experience.\n      As is the case with any physical activity, the risk of injury, even serious or disabling, is always present and cannot be entirely eliminated. My signature acknowledges I understand that in yoga class I will progress at my own pace. If I experience any pain or discomfort, I will listen to my body, adjust the posture and ask for support from the yoga teacher (the “Teacher”). I will continue to breathe smoothly. If at any point I feel overexertion or fatigue, I will respect my body’s limitations and I will rest before continuing yoga practice.\n      Yoga is not a substitute for medical attention, examination, diagnosis or treatment. Yoga is not recommended and is not safe under certain medical conditions. I affirm that I alone am responsible to decide whether to practice yoga.\n      By signing my name below, I acknowledge that participation in yoga classes exposes me to a possible risk of personal injury. I am fully aware of this risk. I hereby consent to receive medical treatment that may be deemed advisable in the event of injury, accident and/or illness during any yoga class.\n      I hereby take action for myself, my executors, administrators, heirs, next of kin, successors and assigns as follows: I (a) irrevocably WAIVE, RELEASE AND DISCHARGE FROM ANY AND ALL LIABILITY for my death, disability, personal injury, property damage, property theft or actions of any kind which hereafter may occur to me, including my traveling to and from yoga classes, Annie Hayes Wellness, Anne Krohn, or any other yoga teacher teaching for AHW, and yoga class location, who is hosting these classes and where sessions are being held, and each of their directors, officers, employees, volunteers, representatives and agents; and (b) INDEMNIFY, HOLD HARMLESS AND AGREE NOT TO SUE the entities or persons mentioned in this paragraph as to any and all liabilities or claims made as a result of participation in the yoga classes, whether caused by the negligence of releasees or otherwise.\n      My signature further acknowledges that I shall not now or at any time in the future bring any legal action against Teacher and/or yoga class location and that this waiver is binding on me, my heirs, my spouse, my children, my legal representatives, my successors and my assigns. My signature verifies that I am physically fit to participate in yoga classes and a licensed medical doctor has verified my physical condition for participation in this type of class.\n      If I am pregnant or become pregnant or am post­natal, my signature verifies that I am participating in yoga classes with my doctor’s full approval. I realize that I am participating in yoga classes at my own risk.\n      The Student Waiver Agreement shall be construed broadly to provide a release and waiver to the maximum extent permissible under applicable law. I acknowledge that this Student Waiver Agreement form will be used by the persons or entities being released in the yoga classes and that it will govern my actions and responsibilities in said classes.\n      I hereby certify that I have read this document; and, I understand its content. I am aware that this is a release of liability as well as a contract and I sign it of my own free will."})}function f(e){e.meta;var t=Object(i.useState)(""),n=Object(u.a)(t,2),r=n[0],a=n[1],s=Object(i.useState)(!0),c=Object(u.a)(s,2),l=c[0],f=c[1],p=d.test(r)&&l;return o.a.createElement("div",{className:"flex flex-column items-center w-100"},o.a.createElement("div",{className:"hide thank-you-tmp"},o.a.createElement("h3",{className:"thank-you-msg"})),o.a.createElement("div",{className:"email-box"},o.a.createElement("div",{className:"errorable-input"},o.a.createElement("input",{className:"email-input errorable",type:"text",name:"Email",placeholder:"Email",value:r,onChange:function(e){return a(e.target.value)}}))),o.a.createElement("div",{className:"waiver-box"},o.a.createElement("div",{className:"errorable-input"},o.a.createElement("label",{className:"errorable"},o.a.createElement("input",{type:"checkbox",className:"waiver-input",checked:l,onChange:function(e){return f(e.target.checked)}}),"I Promise I won't sue if I hurt myself"))),o.a.createElement("div",{className:"submit-box"},o.a.createElement("button",{disabled:p,className:"submit-input"},"Register")),o.a.createElement(h,null))}n(19),n(21),l.initializeApp({apiKey:"AIzaSyCCpWsrS-FO4q48gxqxmP10735GJk3SV4o",authDomain:"anniehayeswellness-221818.firebaseapp.com",databaseURL:"https://anniehayeswellness-221818.firebaseio.com",projectId:"anniehayeswellness-221818",storageBucket:"anniehayeswellness-221818.appspot.com",messagingSenderId:"1026415276139"}),l.firestore(),l.auth().signInAnonymously().catch((function(e){console.error("Hey! Error signing in to firebase anonymously:",e),alert("Hey!\n\nWe had a problem starting up. Can you refresh or turn off your adblocker for this page?\n\nIf that doesn't fix it: ignore this message, keep using the site, and let Jonathan know :)")}));var d=/(?!.*\.\.)(^[^\.][^@\s]+@[^@\s]+\.[^@\s\.]+$)/;s.a.render(o.a.createElement((function(){var e=Object(i.useState)({teacher:"Jon",location:"Bennys"}),t=Object(u.a)(e,2),n=t[0],a=t[1];return o.a.createElement(o.a.Fragment,null,n?o.a.createElement(f,{meta:n}):o.a.createElement(r,{onSubmit:function(e){return a(e)}}))}),null),document.getElementById("check-in-app"))}},[[11,1,2]]])},function(e,t){!function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],h=0,f=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={1:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=this["webpackJsonpahw-check-in"]=this["webpackJsonpahw-check-in"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;n()}([])}]);